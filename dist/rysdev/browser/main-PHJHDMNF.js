import{a as A,b as G,c as du,d as Yn,e as xx,f as wx,g as v,i as j0,j as L0,m as Cx,n as U0}from"./chunk-6AOLKZEJ.js";var i0=Yn(n0=>{"use strict";Object.defineProperty(n0,"__esModule",{value:!0});var t0=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};n0.default=t0});var o0=Yn($a=>{"use strict";var Cb=$a&&$a.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty($a,"__esModule",{value:!0});var PT=Cb((U0(),wx(Cx))),OT=Cb(i0()),r0=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=PT.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let i=this.fetch,r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(o=>v(this,null,function*(){var a,c,p;let f=null,m=null,_=null,M=o.status,y=o.statusText;if(o.ok){if(this.method!=="HEAD"){let H=yield o.text();H===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?m=H:m=JSON.parse(H))}let V=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),U=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");V&&U&&U.length>1&&(_=parseInt(U[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,_=null,M=406,y="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{let V=yield o.text();try{f=JSON.parse(V),Array.isArray(f)&&o.status===404&&(m=[],f=null,M=200,y="OK")}catch{o.status===404&&V===""?(M=204,y="No Content"):f={message:V}}if(f&&this.isMaybeSingle&&(!((p=f?.details)===null||p===void 0)&&p.includes("0 rows"))&&(f=null,M=200,y="OK"),f&&this.shouldThrowOnError)throw new OT.default(f)}return{error:f,data:m,count:_,status:M,statusText:y}}));return this.shouldThrowOnError||(r=r.catch(o=>{var a,c,p;return{error:{message:`${(a=o?.name)!==null&&a!==void 0?a:"FetchError"}: ${o?.message}`,details:`${(c=o?.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(p=o?.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),r.then(t,e)}returns(){return this}overrideTypes(){return this}};$a.default=r0});var s0=Yn(qa=>{"use strict";var AT=qa&&qa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(qa,"__esModule",{value:!0});var RT=AT(o0()),a0=class extends RT.default{select(t){let e=!1,i=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:i,foreignTable:r,referencedTable:o=r}={}){let a=o?`${o}.order`:"order",c=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${c?`${c},`:""}${t}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:i=e}={}){let r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:i,referencedTable:r=i}={}){let o=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:i=!1,buffers:r=!1,wal:o=!1,format:a="text"}={}){var c;let p=[t?"analyze":null,e?"verbose":null,i?"settings":null,r?"buffers":null,o?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${f}"; options=${p};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};qa.default=a0});var ed=Yn(Ha=>{"use strict";var FT=Ha&&Ha.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ha,"__esModule",{value:!0});var NT=FT(s0()),l0=class extends NT.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let i=Array.from(new Set(e)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:i,type:r}={}){let o="";r==="plain"?o="pl":r==="phrase"?o="ph":r==="websearch"&&(o="w");let a=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${o}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(t,e,i){return this.url.searchParams.append(t,`not.${e}.${i}`),this}or(t,{foreignTable:e,referencedTable:i=e}={}){let r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,i){return this.url.searchParams.append(t,`${e}.${i}`),this}};Ha.default=l0});var d0=Yn(Ga=>{"use strict";var VT=Ga&&Ga.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ga,"__esModule",{value:!0});var za=VT(ed()),c0=class{constructor(t,{headers:e={},schema:i,fetch:r}){this.url=t,this.headers=e,this.schema=i,this.fetch=r}select(t,{head:e=!1,count:i}={}){let r=e?"HEAD":"GET",o=!1,a=(t??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",a),i&&(this.headers.Prefer=`count=${i}`),new za.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:i=!0}={}){let r="POST",o=[];if(this.headers.Prefer&&o.push(this.headers.Prefer),e&&o.push(`count=${e}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){let a=t.reduce((c,p)=>c.concat(Object.keys(p)),[]);if(a.length>0){let c=[...new Set(a)].map(p=>`"${p}"`);this.url.searchParams.set("columns",c.join(","))}}return new za.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:i=!1,count:r,defaultToNull:o=!0}={}){let a="POST",c=[`resolution=${i?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&c.push(this.headers.Prefer),r&&c.push(`count=${r}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(t)){let p=t.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(p.length>0){let f=[...new Set(p)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new za.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),e&&r.push(`count=${e}`),this.headers.Prefer=r.join(","),new za.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",i=[];return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new za.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ga.default=c0});var Sb=Yn(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.version=void 0;td.version="0.0.0-automated"});var Eb=Yn(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.DEFAULT_HEADERS=void 0;var jT=Sb();nd.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${jT.version}`}});var Ib=Yn(Wa=>{"use strict";var Mb=Wa&&Wa.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Wa,"__esModule",{value:!0});var LT=Mb(d0()),UT=Mb(ed()),BT=Eb(),u0=class n{constructor(t,{headers:e={},schema:i,fetch:r}={}){this.url=t,this.headers=Object.assign(Object.assign({},BT.DEFAULT_HEADERS),e),this.schemaName=i,this.fetch=r}from(t){let e=new URL(`${this.url}/${t}`);return new LT.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:i=!1,get:r=!1,count:o}={}){let a,c=new URL(`${this.url}/rpc/${t}`),p;i||r?(a=i?"HEAD":"GET",Object.entries(e).filter(([m,_])=>_!==void 0).map(([m,_])=>[m,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([m,_])=>{c.searchParams.append(m,_)})):(a="POST",p=e);let f=Object.assign({},this.headers);return o&&(f.Prefer=`count=${o}`),new UT.default({method:a,url:c,headers:f,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}};Wa.default=u0});var Rb=Yn(ct=>{"use strict";var yo=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ct,"__esModule",{value:!0});ct.PostgrestError=ct.PostgrestBuilder=ct.PostgrestTransformBuilder=ct.PostgrestFilterBuilder=ct.PostgrestQueryBuilder=ct.PostgrestClient=void 0;var Db=yo(Ib());ct.PostgrestClient=Db.default;var Tb=yo(d0());ct.PostgrestQueryBuilder=Tb.default;var kb=yo(ed());ct.PostgrestFilterBuilder=kb.default;var Pb=yo(s0());ct.PostgrestTransformBuilder=Pb.default;var Ob=yo(o0());ct.PostgrestBuilder=Ob.default;var Ab=yo(i0());ct.PostgrestError=Ab.default;ct.default={PostgrestClient:Db.default,PostgrestQueryBuilder:Tb.default,PostgrestFilterBuilder:kb.default,PostgrestTransformBuilder:Pb.default,PostgrestBuilder:Ob.default,PostgrestError:Ab.default}});function mu(n,t){return Object.is(n,t)}var Xe=null,ws=!1,gu=1,Qt=Symbol("SIGNAL");function ce(n){let t=Xe;return Xe=n,t}function hu(){return Xe}var No={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vo(n){if(ws)throw new Error("");if(Xe===null)return;Xe.consumerOnSignalRead(n);let t=Xe.nextProducerIndex++;if(Ms(Xe),t<Xe.producerNode.length&&Xe.producerNode[t]!==n&&Fo(Xe)){let e=Xe.producerNode[t];Es(e,Xe.producerIndexOfThis[t])}Xe.producerNode[t]!==n&&(Xe.producerNode[t]=n,Xe.producerIndexOfThis[t]=Fo(Xe)?$0(n,Xe,t):0),Xe.producerLastReadVersion[t]=n.version}function B0(){gu++}function vu(n){if(!(Fo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===gu)){if(!n.producerMustRecompute(n)&&!xu(n)){fu(n);return}n.producerRecomputeValue(n),fu(n)}}function _u(n){if(n.liveConsumerNode===void 0)return;let t=ws;ws=!0;try{for(let e of n.liveConsumerNode)e.dirty||Sx(e)}finally{ws=t}}function bu(){return Xe?.consumerAllowSignalWrites!==!1}function Sx(n){n.dirty=!0,_u(n),n.consumerMarkedDirty?.(n)}function fu(n){n.dirty=!1,n.lastCleanEpoch=gu}function Ss(n){return n&&(n.nextProducerIndex=0),ce(n)}function yu(n,t){if(ce(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Fo(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)Es(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function xu(n){Ms(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],i=n.producerLastReadVersion[t];if(i!==e.version||(vu(e),i!==e.version))return!0}return!1}function wu(n){if(Ms(n),Fo(n))for(let t=0;t<n.producerNode.length;t++)Es(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function $0(n,t,e){if(q0(n),n.liveConsumerNode.length===0&&H0(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=$0(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function Es(n,t){if(q0(n),n.liveConsumerNode.length===1&&H0(n))for(let i=0;i<n.producerNode.length;i++)Es(n.producerNode[i],n.producerIndexOfThis[i]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[t],r=n.liveConsumerNode[t];Ms(r),r.producerIndexOfThis[i]=t}}function Fo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ms(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function q0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function H0(n){return n.producerNode!==void 0}function Cu(n,t){let e=Object.create(Ex);e.computation=n,t!==void 0&&(e.equal=t);let i=()=>{if(vu(e),Vo(e),e.value===Cs)throw e.error;return e.value};return i[Qt]=e,i}var uu=Symbol("UNSET"),pu=Symbol("COMPUTING"),Cs=Symbol("ERRORED"),Ex=G(A({},No),{value:uu,dirty:!0,error:null,equal:mu,kind:"computed",producerMustRecompute(n){return n.value===uu||n.value===pu},producerRecomputeValue(n){if(n.value===pu)throw new Error("Detected cycle in computations.");let t=n.value;n.value=pu;let e=Ss(n),i,r=!1;try{i=n.computation(),ce(null),r=t!==uu&&t!==Cs&&i!==Cs&&n.equal(t,i)}catch(o){i=Cs,n.error=o}finally{yu(n,e)}if(r){n.value=t;return}n.value=i,n.version++}});function Mx(){throw new Error}var z0=Mx;function G0(n){z0(n)}function Su(n){z0=n}var Ix=null;function Eu(n,t){let e=Object.create(Is);e.value=n,t!==void 0&&(e.equal=t);let i=()=>(Vo(e),e.value);return i[Qt]=e,i}function jo(n,t){bu()||G0(n),n.equal(n.value,t)||(n.value=t,Dx(n))}function Mu(n,t){bu()||G0(n),jo(n,t(n.value))}var Is=G(A({},No),{equal:mu,value:void 0,kind:"signal"});function Dx(n){n.version++,B0(),_u(n),Ix?.()}function Iu(n){let t=ce(null);try{return n()}finally{ce(t)}}var Du;function Lo(){return Du}function Zn(n){let t=Du;return Du=n,t}var Ds=Symbol("NotFound");function K(n){return typeof n=="function"}function wr(n){let e=n(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Ts=wr(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function Uo(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Oe=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(K(i))try{i()}catch(o){t=o instanceof Ts?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{W0(o)}catch(a){t=t??[],a instanceof Ts?t=[...t,...a.errors]:t.push(a)}}if(t)throw new Ts(t)}}add(t){var e;if(t&&t!==this)if(this.closed)W0(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Uo(e,t)}remove(t){let{_finalizers:e}=this;e&&Uo(e,t),t instanceof n&&t._removeParent(this)}};Oe.EMPTY=(()=>{let n=new Oe;return n.closed=!0,n})();var Tu=Oe.EMPTY;function ks(n){return n instanceof Oe||n&&"closed"in n&&K(n.remove)&&K(n.add)&&K(n.unsubscribe)}function W0(n){K(n)?n():n.unsubscribe()}var sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Cr={setTimeout(n,t,...e){let{delegate:i}=Cr;return i?.setTimeout?i.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Cr;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ps(n){Cr.setTimeout(()=>{let{onUnhandledError:t}=sn;if(t)t(n);else throw n})}function Bo(){}var Y0=ku("C",void 0,void 0);function Z0(n){return ku("E",void 0,n)}function Q0(n){return ku("N",n,void 0)}function ku(n,t,e){return{kind:n,value:t,error:e}}var Fi=null;function Sr(n){if(sn.useDeprecatedSynchronousErrorHandling){let t=!Fi;if(t&&(Fi={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:i}=Fi;if(Fi=null,e)throw i}}else n()}function K0(n){sn.useDeprecatedSynchronousErrorHandling&&Fi&&(Fi.errorThrown=!0,Fi.error=n)}var Ni=class extends Oe{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ks(t)&&t.add(this)):this.destination=Rx}static create(t,e,i){return new Er(t,e,i)}next(t){this.isStopped?Ou(Q0(t),this):this._next(t)}error(t){this.isStopped?Ou(Z0(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ou(Y0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Ox=Function.prototype.bind;function Pu(n,t){return Ox.call(n,t)}var Au=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(i){Os(i)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(i){Os(i)}else Os(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Os(e)}}},Er=class extends Ni{constructor(t,e,i){super();let r;if(K(t)||!t)r={next:t??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&sn.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Pu(t.next,o),error:t.error&&Pu(t.error,o),complete:t.complete&&Pu(t.complete,o)}):r=t}this.destination=new Au(r)}};function Os(n){sn.useDeprecatedSynchronousErrorHandling?K0(n):Ps(n)}function Ax(n){throw n}function Ou(n,t){let{onStoppedNotification:e}=sn;e&&Cr.setTimeout(()=>e(n,t))}var Rx={closed:!0,next:Bo,error:Ax,complete:Bo};var Mr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function $t(n){return n}function Ru(...n){return Fu(n)}function Fu(n){return n.length===0?$t:n.length===1?n[0]:function(e){return n.reduce((i,r)=>r(i),e)}}var he=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new n;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=Nx(e)?e:new Er(e,i,r);return Sr(()=>{let{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=J0(i),new i((r,o)=>{let a=new Er({next:c=>{try{e(c)}catch(p){o(p),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Mr](){return this}pipe(...e){return Fu(e)(this)}toPromise(e){return e=J0(e),new e((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return n.create=t=>new n(t),n})();function J0(n){var t;return(t=n??sn.Promise)!==null&&t!==void 0?t:Promise}function Fx(n){return n&&K(n.next)&&K(n.error)&&K(n.complete)}function Nx(n){return n&&n instanceof Ni||Fx(n)&&ks(n)}function Nu(n){return K(n?.lift)}function pe(n){return t=>{if(Nu(t))return t.lift(function(e){try{return n(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,t,e,i,r){return new Vu(n,t,e,i,r)}var Vu=class extends Ni{constructor(t,e,i,r,o,a){super(t),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=e?function(c){try{e(c)}catch(p){t.error(p)}}:super._next,this._error=r?function(c){try{r(c)}catch(p){t.error(p)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Ir(){return pe((n,t)=>{let e=null;n._refCount++;let i=de(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let r=n._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}var Dr=class extends he{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Nu(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Oe;let e=this.getSubject();t.add(this.source.subscribe(de(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Oe.EMPTY)}return t}refCount(){return Ir()(this)}};var X0=wr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Be=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new As(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new X0}next(e){Sr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Sr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Sr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Tu:(this.currentObservers=null,o.push(e),new Oe(()=>{this.currentObservers=null,Uo(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new he;return e.source=this,e}}return n.create=(t,e)=>new As(t,e),n})(),As=class extends Be{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,t)}error(t){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&i!==void 0?i:Tu}};var Ne=class extends Be{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var Ct=new he(n=>n.complete());function eg(n){return n&&K(n.schedule)}function tg(n){return n[n.length-1]}function Rs(n){return K(tg(n))?n.pop():void 0}function mi(n){return eg(tg(n))?n.pop():void 0}function ig(n,t,e,i){function r(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(m){try{f(i.next(m))}catch(_){a(_)}}function p(m){try{f(i.throw(m))}catch(_){a(_)}}function f(m){m.done?o(m.value):r(m.value).then(c,p)}f((i=i.apply(n,t||[])).next())})}function ng(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vi(n){return this instanceof Vi?(this.v=n,this):new Vi(n)}function rg(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(y){return function(D){return Promise.resolve(D).then(y,_)}}function c(y,D){i[y]&&(r[y]=function(V){return new Promise(function(U,H){o.push([y,V,U,H])>1||p(y,V)})},D&&(r[y]=D(r[y])))}function p(y,D){try{f(i[y](D))}catch(V){M(o[0][3],V)}}function f(y){y.value instanceof Vi?Promise.resolve(y.value.v).then(m,_):M(o[0][2],y)}function m(y){p("next",y)}function _(y){p("throw",y)}function M(y,D){y(D),o.shift(),o.length&&p(o[0][0],o[0][1])}}function og(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof ng=="function"?ng(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=n[o]&&function(a){return new Promise(function(c,p){a=n[o](a),r(c,p,a.done,a.value)})}}function r(o,a,c,p){Promise.resolve(p).then(function(f){o({value:f,done:c})},a)}}var Fs=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ns(n){return K(n?.then)}function Vs(n){return K(n[Mr])}function js(n){return Symbol.asyncIterator&&K(n?.[Symbol.asyncIterator])}function Ls(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Vx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Us=Vx();function Bs(n){return K(n?.[Us])}function $s(n){return rg(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:i,done:r}=yield Vi(e.read());if(r)return yield Vi(void 0);yield yield Vi(i)}}finally{e.releaseLock()}})}function qs(n){return K(n?.getReader)}function Ge(n){if(n instanceof he)return n;if(n!=null){if(Vs(n))return jx(n);if(Fs(n))return Lx(n);if(Ns(n))return Ux(n);if(js(n))return ag(n);if(Bs(n))return Bx(n);if(qs(n))return $x(n)}throw Ls(n)}function jx(n){return new he(t=>{let e=n[Mr]();if(K(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Lx(n){return new he(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function Ux(n){return new he(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Ps)})}function Bx(n){return new he(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function ag(n){return new he(t=>{qx(n,t).catch(e=>t.error(e))})}function $x(n){return ag($s(n))}function qx(n,t){var e,i,r,o;return ig(this,void 0,void 0,function*(){try{for(e=og(n);i=yield e.next(),!i.done;){let a=i.value;if(t.next(a),t.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})}function St(n,t,e,i=0,r=!1){let o=t.schedule(function(){e(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function Hs(n,t=0){return pe((e,i)=>{e.subscribe(de(i,r=>St(i,n,()=>i.next(r),t),()=>St(i,n,()=>i.complete(),t),r=>St(i,n,()=>i.error(r),t)))})}function zs(n,t=0){return pe((e,i)=>{i.add(n.schedule(()=>e.subscribe(i),t))})}function sg(n,t){return Ge(n).pipe(zs(t),Hs(t))}function lg(n,t){return Ge(n).pipe(zs(t),Hs(t))}function cg(n,t){return new he(e=>{let i=0;return t.schedule(function(){i===n.length?e.complete():(e.next(n[i++]),e.closed||this.schedule())})})}function dg(n,t){return new he(e=>{let i;return St(e,t,()=>{i=n[Us](),St(e,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){e.error(a);return}o?e.complete():e.next(r)},0,!0)}),()=>K(i?.return)&&i.return()})}function Gs(n,t){if(!n)throw new Error("Iterable cannot be null");return new he(e=>{St(e,t,()=>{let i=n[Symbol.asyncIterator]();St(e,t,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function ug(n,t){return Gs($s(n),t)}function pg(n,t){if(n!=null){if(Vs(n))return sg(n,t);if(Fs(n))return cg(n,t);if(Ns(n))return lg(n,t);if(js(n))return Gs(n,t);if(Bs(n))return dg(n,t);if(qs(n))return ug(n,t)}throw Ls(n)}function De(n,t){return t?pg(n,t):Ge(n)}function Y(...n){let t=mi(n);return De(n,t)}function Tr(n,t){let e=K(n)?n:()=>n,i=r=>r.error(e());return new he(t?r=>t.schedule(i,0,r):i)}function ju(n){return!!n&&(n instanceof he||K(n.lift)&&K(n.subscribe))}var Qn=wr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ue(n,t){return pe((e,i)=>{let r=0;e.subscribe(de(i,o=>{i.next(n.call(t,o,r++))}))})}var{isArray:Hx}=Array;function zx(n,t){return Hx(t)?n(...t):n(t)}function Ws(n){return ue(t=>zx(n,t))}var{isArray:Gx}=Array,{getPrototypeOf:Wx,prototype:Yx,keys:Zx}=Object;function Ys(n){if(n.length===1){let t=n[0];if(Gx(t))return{args:t,keys:null};if(Qx(t)){let e=Zx(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}function Qx(n){return n&&typeof n=="object"&&Wx(n)===Yx}function Zs(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}function $o(...n){let t=mi(n),e=Rs(n),{args:i,keys:r}=Ys(n);if(i.length===0)return De([],t);let o=new he(Kx(i,t,r?a=>Zs(r,a):$t));return e?o.pipe(Ws(e)):o}function Kx(n,t,e=$t){return i=>{fg(t,()=>{let{length:r}=n,o=new Array(r),a=r,c=r;for(let p=0;p<r;p++)fg(t,()=>{let f=De(n[p],t),m=!1;f.subscribe(de(i,_=>{o[p]=_,m||(m=!0,c--),c||i.next(e(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function fg(n,t,e){n?St(e,n,t):t()}function mg(n,t,e,i,r,o,a,c){let p=[],f=0,m=0,_=!1,M=()=>{_&&!p.length&&!f&&t.complete()},y=V=>f<i?D(V):p.push(V),D=V=>{o&&t.next(V),f++;let U=!1;Ge(e(V,m++)).subscribe(de(t,H=>{r?.(H),o?y(H):t.next(H)},()=>{U=!0},void 0,()=>{if(U)try{for(f--;p.length&&f<i;){let H=p.shift();a?St(t,a,()=>D(H)):D(H)}M()}catch(H){t.error(H)}}))};return n.subscribe(de(t,y,()=>{_=!0,M()})),()=>{c?.()}}function $e(n,t,e=1/0){return K(t)?$e((i,r)=>ue((o,a)=>t(i,o,r,a))(Ge(n(i,r))),e):(typeof t=="number"&&(e=t),pe((i,r)=>mg(i,r,n,e)))}function gi(n=1/0){return $e($t,n)}function gg(){return gi(1)}function kr(...n){return gg()(De(n,mi(n)))}function Qs(n){return new he(t=>{Ge(n()).subscribe(t)})}function Lu(...n){let t=Rs(n),{args:e,keys:i}=Ys(n),r=new he(o=>{let{length:a}=e;if(!a){o.complete();return}let c=new Array(a),p=a,f=a;for(let m=0;m<a;m++){let _=!1;Ge(e[m]).subscribe(de(o,M=>{_||(_=!0,f--),c[m]=M},()=>p--,void 0,()=>{(!p||!_)&&(f||o.next(i?Zs(i,c):c),o.complete())}))}});return t?r.pipe(Ws(t)):r}function at(n,t){return pe((e,i)=>{let r=0;e.subscribe(de(i,o=>n.call(t,o,r++)&&i.next(o)))})}function Kn(n){return pe((t,e)=>{let i=null,r=!1,o;i=t.subscribe(de(e,void 0,void 0,a=>{o=Ge(n(a,Kn(n)(t))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function hg(n,t,e,i,r){return(o,a)=>{let c=e,p=t,f=0;o.subscribe(de(a,m=>{let _=f++;p=c?n(p,m,_):(c=!0,m),i&&a.next(p)},r&&(()=>{c&&a.next(p),a.complete()})))}}function hi(n,t){return K(t)?$e(n,t,1):$e(n,1)}function vi(n){return pe((t,e)=>{let i=!1;t.subscribe(de(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function Jn(n){return n<=0?()=>Ct:pe((t,e)=>{let i=0;t.subscribe(de(e,r=>{++i<=n&&(e.next(r),n<=i&&e.complete())}))})}function Ks(n=Jx){return pe((t,e)=>{let i=!1;t.subscribe(de(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Jx(){return new Qn}function qo(n){return pe((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function Xn(n,t){let e=arguments.length>=2;return i=>i.pipe(n?at((r,o)=>n(r,o,i)):$t,Jn(1),e?vi(t):Ks(()=>new Qn))}function Pr(n){return n<=0?()=>Ct:pe((t,e)=>{let i=[];t.subscribe(de(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Uu(n,t){let e=arguments.length>=2;return i=>i.pipe(n?at((r,o)=>n(r,o,i)):$t,Pr(1),e?vi(t):Ks(()=>new Qn))}function Bu(n,t){return pe(hg(n,t,arguments.length>=2,!0))}function $u(...n){let t=mi(n);return pe((e,i)=>{(t?kr(n,e,t):kr(n,e)).subscribe(i)})}function Kt(n,t){return pe((e,i)=>{let r=null,o=0,a=!1,c=()=>a&&!r&&i.complete();e.subscribe(de(i,p=>{r?.unsubscribe();let f=0,m=o++;Ge(n(p,m)).subscribe(r=de(i,_=>i.next(t?t(p,_,m,f++):_),()=>{r=null,c()}))},()=>{a=!0,c()}))})}function qu(n){return pe((t,e)=>{Ge(n).subscribe(de(e,()=>e.complete(),Bo)),!e.closed&&t.subscribe(e)})}function st(n,t,e){let i=K(n)||t||e?{next:n,error:t,complete:e}:n;return i?pe((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let c=!0;r.subscribe(de(o,p=>{var f;(f=i.next)===null||f===void 0||f.call(i,p),o.next(p)},()=>{var p;c=!1,(p=i.complete)===null||p===void 0||p.call(i),o.complete()},p=>{var f;c=!1,(f=i.error)===null||f===void 0||f.call(i,p),o.error(p)},()=>{var p,f;c&&((p=i.unsubscribe)===null||p===void 0||p.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):$t}var rh="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(t,e){super(oh(t,e)),this.code=t}};function Xx(n){return`NG0${Math.abs(n)}`}function oh(n,t){return`${Xx(n)}${t?": "+t:""}`}var ah=Symbol("InputSignalNode#UNSET"),ew=G(A({},Is),{transformFn:void 0,applyValueToInputSignal(n,t){jo(n,t)}});function sh(n,t){let e=Object.create(ew);e.value=n,e.transformFn=t?.transform;function i(){if(Vo(e),e.value===ah){let r=null;throw new $(-950,r)}return e.value}return i[Qt]=e,i}function na(n){return{toString:n}.toString()}var Js="__parameters__";function tw(n){return function(...e){if(n){let i=n(...e);for(let r in i)this[r]=i[r]}}}function lh(n,t,e){return na(()=>{let i=tw(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return c.annotation=a,c;function c(p,f,m){let _=p.hasOwnProperty(Js)?p[Js]:Object.defineProperty(p,Js,{value:[]})[Js];for(;_.length<=m;)_.push(null);return(_[m]=_[m]||[]).push(a),p}}return r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var bt=globalThis;function Se(n){for(let t in n)if(n[t]===Se)return t;throw Error("Could not find renamed property on target object.")}function nw(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function It(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(It).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function rp(n,t){return n?t?`${n} ${t}`:n:t||""}var iw=Se({__forward_ref__:Se});function Pt(n){return n.__forward_ref__=Pt,n.toString=function(){return It(this())},n}function yt(n){return ch(n)?n():n}function ch(n){return typeof n=="function"&&n.hasOwnProperty(iw)&&n.__forward_ref__===Pt}function L(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function We(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fl(n){return vg(n,uh)||vg(n,ph)}function dh(n){return Fl(n)!==null}function vg(n,t){return n.hasOwnProperty(t)?n[t]:null}function rw(n){let t=n&&(n[uh]||n[ph]);return t||null}function _g(n){return n&&(n.hasOwnProperty(bg)||n.hasOwnProperty(ow))?n[bg]:null}var uh=Se({\u0275prov:Se}),bg=Se({\u0275inj:Se}),ph=Se({ngInjectableDef:Se}),ow=Se({ngInjectorDef:Se}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=L({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function fh(n){return n&&!!n.\u0275providers}var aw=Se({\u0275cmp:Se}),sw=Se({\u0275dir:Se}),lw=Se({\u0275pipe:Se}),cw=Se({\u0275mod:Se}),sl=Se({\u0275fac:Se}),Wo=Se({__NG_ELEMENT_ID__:Se}),yg=Se({__NG_ENV_ID__:Se});function ei(n){return typeof n=="string"?n:n==null?"":String(n)}function dw(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ei(n)}function mh(n,t){throw new $(-200,n)}function Jp(n,t){throw new $(-201,!1)}var te=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(te||{}),op;function gh(){return op}function Et(n){let t=op;return op=n,t}function hh(n,t,e){let i=Fl(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&te.Optional)return null;if(t!==void 0)return t;Jp(n,"Injector")}var uw={},Li=uw,ap="__NG_DI_FLAG__",ll=class{injector;constructor(t){this.injector=t}retrieve(t,e){let i=e;return this.injector.get(t,i.optional?Ds:Li,i)}},cl="ngTempTokenPath",pw="ngTokenPath",fw=/\n/gm,mw="\u0275",xg="__source";function gw(n,t=te.Default){if(Lo()===void 0)throw new $(-203,!1);if(Lo()===null)return hh(n,void 0,t);{let e=Lo(),i;return e instanceof ll?i=e.injector:i=e,i.get(n,t&te.Optional?null:void 0,t)}}function B(n,t=te.Default){return(gh()||gw)(yt(n),t)}function j(n,t=te.Default){return B(n,Nl(t))}function Nl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function sp(n){let t=[];for(let e=0;e<n.length;e++){let i=yt(n[e]);if(Array.isArray(i)){if(i.length===0)throw new $(900,!1);let r,o=te.Default;for(let a=0;a<i.length;a++){let c=i[a],p=hw(c);typeof p=="number"?p===-1?r=c.token:o|=p:r=c}t.push(B(r,o))}else t.push(B(i))}return t}function vh(n,t){return n[ap]=t,n.prototype[ap]=t,n}function hw(n){return n[ap]}function vw(n,t,e,i){let r=n[cl];throw t[xg]&&r.unshift(t[xg]),n.message=_w(`
`+n.message,r,e,i),n[pw]=r,n[cl]=null,n}function _w(n,t,e,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==mw?n.slice(2):n;let r=It(t);if(Array.isArray(t))r=t.map(It).join(" -> ");else if(typeof t=="object"){let o=[];for(let a in t)if(t.hasOwnProperty(a)){let c=t[a];o.push(a+":"+(typeof c=="string"?JSON.stringify(c):It(c)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${n.replace(fw,`
  `)}`}var bw=vh(lh("Optional"),8);var yw=vh(lh("SkipSelf"),4);function Bi(n,t){let e=n.hasOwnProperty(sl);return e?n[sl]:null}function xw(n,t,e){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=t[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function ww(n){return n.flat(Number.POSITIVE_INFINITY)}function Xp(n,t){n.forEach(e=>Array.isArray(e)?Xp(e,t):t(e))}function _h(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function dl(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Cw(n,t,e,i){let r=n.length;if(r==t)n.push(e,i);else if(r===1)n.push(i,n[0]),n[0]=e;else{for(r--,n.push(n[r-1],n[r]);r>t;){let o=r-2;n[r]=n[o],r--}n[t]=e,n[t+1]=i}}function ef(n,t,e){let i=ia(n,t);return i>=0?n[i|1]=e:(i=~i,Cw(n,i,t,e)),i}function Hu(n,t){let e=ia(n,t);if(e>=0)return n[e|1]}function ia(n,t){return Sw(n,t,1)}function Sw(n,t,e){let i=0,r=n.length>>e;for(;r!==i;){let o=i+(r-i>>1),a=n[o<<e];if(t===a)return o<<e;a>t?r=o:i=o+1}return~(r<<e)}var $i={},Mt=[],Zo=new q(""),bh=new q("",-1),yh=new q(""),ul=class{get(t,e=Li){if(e===Li){let i=new Error(`NullInjectorError: No provider for ${It(t)}!`);throw i.name="NullInjectorError",i}return e}};function xh(n,t){let e=n[cw]||null;if(!e&&t===!0)throw new Error(`Type ${It(n)} does not have '\u0275mod' property.`);return e}function qi(n){return n[aw]||null}function Ew(n){return n[sw]||null}function Mw(n){return n[lw]||null}function wh(n){return{\u0275providers:n}}function Iw(...n){return{\u0275providers:Ch(!0,n),\u0275fromNgModule:!0}}function Ch(n,...t){let e=[],i=new Set,r,o=a=>{e.push(a)};return Xp(t,a=>{let c=a;lp(c,o,[],i)&&(r||=[],r.push(c))}),r!==void 0&&Sh(r,o),e}function Sh(n,t){for(let e=0;e<n.length;e++){let{ngModule:i,providers:r}=n[e];tf(r,o=>{t(o,i)})}}function lp(n,t,e,i){if(n=yt(n),!n)return!1;let r=null,o=_g(n),a=!o&&qi(n);if(!o&&!a){let p=n.ngModule;if(o=_g(p),o)r=p;else return!1}else{if(a&&!a.standalone)return!1;r=n}let c=i.has(r);if(a){if(c)return!1;if(i.add(r),a.dependencies){let p=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of p)lp(f,t,e,i)}}else if(o){if(o.imports!=null&&!c){i.add(r);let f;try{Xp(o.imports,m=>{lp(m,t,e,i)&&(f||=[],f.push(m))})}finally{}f!==void 0&&Sh(f,t)}if(!c){let f=Bi(r)||(()=>new r);t({provide:r,useFactory:f,deps:Mt},r),t({provide:yh,useValue:r,multi:!0},r),t({provide:Zo,useValue:()=>B(r),multi:!0},r)}let p=o.providers;if(p!=null&&!c){let f=n;tf(p,m=>{t(m,f)})}}else return!1;return r!==n&&n.providers!==void 0}function tf(n,t){for(let e of n)fh(e)&&(e=e.\u0275providers),Array.isArray(e)?tf(e,t):t(e)}var Dw=Se({provide:String,useValue:Se});function Eh(n){return n!==null&&typeof n=="object"&&Dw in n}function Tw(n){return!!(n&&n.useExisting)}function kw(n){return!!(n&&n.useFactory)}function jr(n){return typeof n=="function"}function Pw(n){return!!n.useClass}var Vl=new q(""),nl={},wg={},zu;function nf(){return zu===void 0&&(zu=new ul),zu}var Dt=class{},Qo=class extends Dt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,dp(t,a=>this.processProvider(a)),this.records.set(bh,Or(void 0,this)),r.has("environment")&&this.records.set(Dt,Or(void 0,this));let o=this.records.get(Vl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(yh,Mt,te.Self))}retrieve(t,e){let i=e;return this.get(t,i.optional?Ds:Li,i)}destroy(){zo(this),this._destroyed=!0;let t=ce(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(t)}}onDestroy(t){return zo(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){zo(this);let e=Zn(this),i=Et(void 0),r;try{return t()}finally{Zn(e),Et(i)}}get(t,e=Li,i=te.Default){if(zo(this),t.hasOwnProperty(yg))return t[yg](this);i=Nl(i);let r,o=Zn(this),a=Et(void 0);try{if(!(i&te.SkipSelf)){let p=this.records.get(t);if(p===void 0){let f=Nw(t)&&Fl(t);f&&this.injectableDefInScope(f)?p=Or(cp(t),nl):p=null,this.records.set(t,p)}if(p!=null)return this.hydrate(t,p,i)}let c=i&te.Self?nf():this.parent;return e=i&te.Optional&&e===Li?null:e,c.get(t,e)}catch(c){if(c.name==="NullInjectorError"){if((c[cl]=c[cl]||[]).unshift(It(t)),o)throw c;return vw(c,t,"R3InjectorError",this.source)}else throw c}finally{Et(a),Zn(o)}}resolveInjectorInitializers(){let t=ce(null),e=Zn(this),i=Et(void 0),r;try{let o=this.get(Zo,Mt,te.Self);for(let a of o)a()}finally{Zn(e),Et(i),ce(t)}}toString(){let t=[],e=this.records;for(let i of e.keys())t.push(It(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=yt(t);let e=jr(t)?t:yt(t&&t.provide),i=Aw(t);if(!jr(t)&&t.multi===!0){let r=this.records.get(e);r||(r=Or(void 0,nl,!0),r.factory=()=>sp(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,i)}hydrate(t,e,i){let r=ce(null);try{return e.value===wg?mh(It(t)):e.value===nl&&(e.value=wg,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&Fw(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ce(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=yt(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function cp(n){let t=Fl(n),e=t!==null?t.factory:Bi(n);if(e!==null)return e;if(n instanceof q)throw new $(204,!1);if(n instanceof Function)return Ow(n);throw new $(204,!1)}function Ow(n){if(n.length>0)throw new $(204,!1);let e=rw(n);return e!==null?()=>e.factory(n):()=>new n}function Aw(n){if(Eh(n))return Or(void 0,n.useValue);{let t=Mh(n);return Or(t,nl)}}function Mh(n,t,e){let i;if(jr(n)){let r=yt(n);return Bi(r)||cp(r)}else if(Eh(n))i=()=>yt(n.useValue);else if(kw(n))i=()=>n.useFactory(...sp(n.deps||[]));else if(Tw(n))i=(r,o)=>B(yt(n.useExisting),o!==void 0&&o&te.Optional?te.Optional:void 0);else{let r=yt(n&&(n.useClass||n.provide));if(Rw(n))i=()=>new r(...sp(n.deps));else return Bi(r)||cp(r)}return i}function zo(n){if(n.destroyed)throw new $(205,!1)}function Or(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function Rw(n){return!!n.deps}function Fw(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Nw(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function dp(n,t){for(let e of n)Array.isArray(e)?dp(e,t):e&&fh(e)?dp(e.\u0275providers,t):t(e)}function Xt(n,t){let e;n instanceof Qo?(zo(n),e=n):e=new ll(n);let i,r=Zn(e),o=Et(void 0);try{return t()}finally{Zn(r),Et(o)}}function rf(){return gh()!==void 0||Lo()!=null}function Vw(n){if(!rf())throw new $(-203,!1)}function jw(n){let t=bt.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Lw(n){return typeof n=="function"}var ri=0,oe=1,Z=2,pt=3,dn=4,pn=5,pl=6,fl=7,Tt=8,Lr=9,ti=10,qe=11,Ko=12,Cg=13,Yr=14,Mn=15,Hi=16,Ar=17,ni=18,jl=19,Ih=20,_i=21,Gu=22,ml=23,Jt=24,Nr=25,xt=26,Dh=1;var zi=7,gl=8,Ur=9,qt=10;function bi(n){return Array.isArray(n)&&typeof n[Dh]=="object"}function oi(n){return Array.isArray(n)&&n[Dh]===!0}function of(n){return(n.flags&4)!==0}function Zr(n){return n.componentOffset>-1}function Ll(n){return(n.flags&1)===1}function In(n){return!!n.template}function hl(n){return(n[Z]&512)!==0}function Qr(n){return(n[Z]&256)===256}var up=class{previousValue;currentValue;firstChange;constructor(t,e,i){this.previousValue=t,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function Th(n,t,e,i){t!==null?t.applyValueToInputSignal(t,i):n[e]=i}var Ht=(()=>{let n=()=>kh;return n.ngInherit=!0,n})();function kh(n){return n.type.prototype.ngOnChanges&&(n.setInput=Bw),Uw}function Uw(){let n=Oh(this),t=n?.current;if(t){let e=n.previous;if(e===$i)n.previous=t;else for(let i in t)e[i]=t[i];n.current=null,this.ngOnChanges(t)}}function Bw(n,t,e,i,r){let o=this.declaredInputs[i],a=Oh(n)||$w(n,{previous:$i,current:null}),c=a.current||(a.current={}),p=a.previous,f=p[o];c[o]=new up(f&&f.currentValue,e,p===$i),Th(n,t,r,e)}var Ph="__ngSimpleChanges__";function Oh(n){return n[Ph]||null}function $w(n,t){return n[Ph]=t}var Sg=null;var Ee=function(n,t=null,e){Sg?.(n,t,e)},Ah="svg",qw="math";function Dn(n){for(;Array.isArray(n);)n=n[ri];return n}function Rh(n,t){return Dn(t[n])}function On(n,t){return Dn(t[n.index])}function Fh(n,t){return n.data[t]}function Ul(n,t){return n[t]}function Hw(n,t,e,i){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=i}function Tn(n,t){let e=t[n];return bi(e)?e:e[ri]}function zw(n){return(n[Z]&4)===4}function af(n){return(n[Z]&128)===128}function Gw(n){return oi(n[pt])}function Br(n,t){return t==null?null:n[t]}function Nh(n){n[Ar]=0}function Vh(n){n[Z]&1024||(n[Z]|=1024,af(n)&&ra(n))}function Ww(n,t){for(;n>0;)t=t[Yr],n--;return t}function Bl(n){return!!(n[Z]&9216||n[Jt]?.dirty)}function pp(n){n[ti].changeDetectionScheduler?.notify(8),n[Z]&64&&(n[Z]|=1024),Bl(n)&&ra(n)}function ra(n){n[ti].changeDetectionScheduler?.notify(0);let t=Gi(n);for(;t!==null&&!(t[Z]&8192||(t[Z]|=8192,!af(t)));)t=Gi(t)}function jh(n,t){if(Qr(n))throw new $(911,!1);n[_i]===null&&(n[_i]=[]),n[_i].push(t)}function Yw(n,t){if(n[_i]===null)return;let e=n[_i].indexOf(t);e!==-1&&n[_i].splice(e,1)}function Gi(n){let t=n[pt];return oi(t)?t[pt]:t}function sf(n){return n[fl]??=[]}function lf(n){return n.cleanup??=[]}function Zw(n,t,e,i){let r=sf(t);r.push(e),n.firstCreatePass&&lf(n).push(i,r.length-1)}var J={lFrame:Gh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var fp=!1;function Qw(){return J.lFrame.elementDepthCount}function Kw(){J.lFrame.elementDepthCount++}function Jw(){J.lFrame.elementDepthCount--}function cf(){return J.bindingsEnabled}function Xw(){return J.skipHydrationRootTNode!==null}function e2(n){return J.skipHydrationRootTNode===n}function t2(){J.skipHydrationRootTNode=null}function ne(){return J.lFrame.lView}function et(){return J.lFrame.tView}function C(n){return J.lFrame.contextLView=n,n[Tt]}function S(n){return J.lFrame.contextLView=null,n}function ft(){let n=Lh();for(;n!==null&&n.type===64;)n=n.parent;return n}function Lh(){return J.lFrame.currentTNode}function n2(){let n=J.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function Ki(n,t){let e=J.lFrame;e.currentTNode=n,e.isParent=t}function df(){return J.lFrame.isParent}function Uh(){J.lFrame.isParent=!1}function i2(){return J.lFrame.contextLView}function Bh(){return fp}function Eg(n){let t=fp;return fp=n,t}function xi(){let n=J.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function $h(){return J.lFrame.bindingIndex}function r2(n){return J.lFrame.bindingIndex=n}function $l(){return J.lFrame.bindingIndex++}function ql(n){let t=J.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function o2(){return J.lFrame.inI18n}function a2(n,t){let e=J.lFrame;e.bindingIndex=e.bindingRootIndex=n,mp(t)}function s2(){return J.lFrame.currentDirectiveIndex}function mp(n){J.lFrame.currentDirectiveIndex=n}function l2(n){let t=J.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function qh(){return J.lFrame.currentQueryIndex}function uf(n){J.lFrame.currentQueryIndex=n}function c2(n){let t=n[oe];return t.type===2?t.declTNode:t.type===1?n[pn]:null}function Hh(n,t,e){if(e&te.SkipSelf){let r=t,o=n;for(;r=r.parent,r===null&&!(e&te.Host);)if(r=c2(o),r===null||(o=o[Yr],r.type&10))break;if(r===null)return!1;t=r,n=o}let i=J.lFrame=zh();return i.currentTNode=t,i.lView=n,!0}function pf(n){let t=zh(),e=n[oe];J.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function zh(){let n=J.lFrame,t=n===null?null:n.child;return t===null?Gh(n):t}function Gh(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function Wh(){let n=J.lFrame;return J.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Yh=Wh;function ff(){let n=Wh();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function d2(n){return(J.lFrame.contextLView=Ww(n,J.lFrame.contextLView))[Tt]}function ai(){return J.lFrame.selectedIndex}function Wi(n){J.lFrame.selectedIndex=n}function mf(){let n=J.lFrame;return Fh(n.tView,n.selectedIndex)}function I(){J.lFrame.currentNamespace=Ah}function T(){u2()}function u2(){J.lFrame.currentNamespace=null}function p2(){return J.lFrame.currentNamespace}var Zh=!0;function Hl(){return Zh}function zl(n){Zh=n}function f2(n,t,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let a=kh(t);(e.preOrderHooks??=[]).push(n,a),(e.preOrderCheckHooks??=[]).push(n,a)}r&&(e.preOrderHooks??=[]).push(0-n,r),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function gf(n,t){for(let e=t.directiveStart,i=t.directiveEnd;e<i;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:p,ngAfterViewChecked:f,ngOnDestroy:m}=o;a&&(n.contentHooks??=[]).push(-e,a),c&&((n.contentHooks??=[]).push(e,c),(n.contentCheckHooks??=[]).push(e,c)),p&&(n.viewHooks??=[]).push(-e,p),f&&((n.viewHooks??=[]).push(e,f),(n.viewCheckHooks??=[]).push(e,f)),m!=null&&(n.destroyHooks??=[]).push(e,m)}}function il(n,t,e){Qh(n,t,3,e)}function rl(n,t,e,i){(n[Z]&3)===e&&Qh(n,t,e,i)}function Wu(n,t){let e=n[Z];(e&3)===t&&(e&=16383,e+=1,n[Z]=e)}function Qh(n,t,e,i){let r=i!==void 0?n[Ar]&65535:0,o=i??-1,a=t.length-1,c=0;for(let p=r;p<a;p++)if(typeof t[p+1]=="number"){if(c=t[p],i!=null&&c>=i)break}else t[p]<0&&(n[Ar]+=65536),(c<o||o==-1)&&(m2(n,e,t,p),n[Ar]=(n[Ar]&4294901760)+p+2),p++}function Mg(n,t){Ee(4,n,t);let e=ce(null);try{t.call(n)}finally{ce(e),Ee(5,n,t)}}function m2(n,t,e,i){let r=e[i]<0,o=e[i+1],a=r?-e[i]:e[i],c=n[a];r?n[Z]>>14<n[Ar]>>16&&(n[Z]&3)===t&&(n[Z]+=16384,Mg(c,o)):Mg(c,o)}var Vr=-1,Yi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,i){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=i}};function g2(n){return(n.flags&8)!==0}function h2(n){return(n.flags&16)!==0}function v2(n,t,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],a=e[i++],c=e[i++];n.setAttribute(t,a,c,o)}else{let o=r,a=e[++i];_2(o)?n.setProperty(t,o,a):n.setAttribute(t,o,a),i++}}return i}function Kh(n){return n===3||n===4||n===6}function _2(n){return n.charCodeAt(0)===64}function $r(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?Ig(n,e,r,null,t[++i]):Ig(n,e,r,null,null))}}return n}function Ig(n,t,e,i,r){let o=0,a=n.length;if(t===-1)a=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===t){a=-1;break}else if(c>t){a=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===e){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}a!==-1&&(n.splice(a,0,t),o=a+1),n.splice(o++,0,e),r!==null&&n.splice(o++,0,r)}function Jh(n){return n!==Vr}function vl(n){return n&32767}function b2(n){return n>>16}function _l(n,t){let e=b2(n),i=t;for(;e>0;)i=i[Yr],e--;return i}var gp=!0;function bl(n){let t=gp;return gp=n,t}var y2=256,Xh=y2-1,ev=5,x2=0,En={};function w2(n,t,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(Wo)&&(i=e[Wo]),i==null&&(i=e[Wo]=x2++);let r=i&Xh,o=1<<r;t.data[n+(r>>ev)]|=o}function yl(n,t){let e=tv(n,t);if(e!==-1)return e;let i=t[oe];i.firstCreatePass&&(n.injectorIndex=t.length,Yu(i.data,n),Yu(t,null),Yu(i.blueprint,null));let r=hf(n,t),o=n.injectorIndex;if(Jh(r)){let a=vl(r),c=_l(r,t),p=c[oe].data;for(let f=0;f<8;f++)t[o+f]=c[a+f]|p[a+f]}return t[o+8]=r,o}function Yu(n,t){n.push(0,0,0,0,0,0,0,0,t)}function tv(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function hf(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,i=null,r=t;for(;r!==null;){if(i=av(r),i===null)return Vr;if(e++,r=r[Yr],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Vr}function hp(n,t,e){w2(n,t,e)}function C2(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let i=e.length,r=0;for(;r<i;){let o=e[r];if(Kh(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(o===t)return e[r+1];r=r+2}}}return null}function nv(n,t,e){if(e&te.Optional||n!==void 0)return n;Jp(t,"NodeInjector")}function iv(n,t,e,i){if(e&te.Optional&&i===void 0&&(i=null),(e&(te.Self|te.Host))===0){let r=n[Lr],o=Et(void 0);try{return r?r.get(t,i,e&te.Optional):hh(t,i,e&te.Optional)}finally{Et(o)}}return nv(i,t,e)}function rv(n,t,e,i=te.Default,r){if(n!==null){if(t[Z]&2048&&!(i&te.Self)){let a=I2(n,t,e,i,En);if(a!==En)return a}let o=ov(n,t,e,i,En);if(o!==En)return o}return iv(t,e,i,r)}function ov(n,t,e,i,r){let o=E2(e);if(typeof o=="function"){if(!Hh(t,n,i))return i&te.Host?nv(r,e,i):iv(t,e,i,r);try{let a;if(a=o(i),a==null&&!(i&te.Optional))Jp(e);else return a}finally{Yh()}}else if(typeof o=="number"){let a=null,c=tv(n,t),p=Vr,f=i&te.Host?t[Mn][pn]:null;for((c===-1||i&te.SkipSelf)&&(p=c===-1?hf(n,t):t[c+8],p===Vr||!Tg(i,!1)?c=-1:(a=t[oe],c=vl(p),t=_l(p,t)));c!==-1;){let m=t[oe];if(Dg(o,c,m.data)){let _=S2(c,t,e,a,i,f);if(_!==En)return _}p=t[c+8],p!==Vr&&Tg(i,t[oe].data[c+8]===f)&&Dg(o,c,t)?(a=m,c=vl(p),t=_l(p,t)):c=-1}}return r}function S2(n,t,e,i,r,o){let a=t[oe],c=a.data[n+8],p=i==null?Zr(c)&&gp:i!=a&&(c.type&3)!==0,f=r&te.Host&&o===c,m=ol(c,a,e,p,f);return m!==null?Jo(t,a,m,c,r):En}function ol(n,t,e,i,r){let o=n.providerIndexes,a=t.data,c=o&1048575,p=n.directiveStart,f=n.directiveEnd,m=o>>20,_=i?c:c+m,M=r?c+m:f;for(let y=_;y<M;y++){let D=a[y];if(y<p&&e===D||y>=p&&D.type===e)return y}if(r){let y=a[p];if(y&&In(y)&&y.type===e)return p}return null}function Jo(n,t,e,i,r){let o=n[e],a=t.data;if(o instanceof Yi){let c=o;c.resolving&&mh(dw(a[e]));let p=bl(c.canSeeViewProviders);c.resolving=!0;let f,m=c.injectImpl?Et(c.injectImpl):null,_=Hh(n,i,te.Default);try{o=n[e]=c.factory(void 0,r,a,n,i),t.firstCreatePass&&e>=i.directiveStart&&f2(e,a[e],t)}finally{m!==null&&Et(m),bl(p),c.resolving=!1,Yh()}}return o}function E2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Wo)?n[Wo]:void 0;return typeof t=="number"?t>=0?t&Xh:M2:t}function Dg(n,t,e){let i=1<<n;return!!(e[t+(n>>ev)]&i)}function Tg(n,t){return!(n&te.Self)&&!(n&te.Host&&t)}var Ui=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,i){return rv(this._tNode,this._lView,t,Nl(i),e)}};function M2(){return new Ui(ft(),ne())}function fn(n){return na(()=>{let t=n.prototype.constructor,e=t[sl]||vp(t),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[sl]||vp(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function vp(n){return ch(n)?()=>{let t=vp(yt(n));return t&&t()}:Bi(n)}function I2(n,t,e,i,r){let o=n,a=t;for(;o!==null&&a!==null&&a[Z]&2048&&!hl(a);){let c=ov(o,a,e,i|te.Self,En);if(c!==En)return c;let p=o.parent;if(!p){let f=a[Ih];if(f){let m=f.get(e,En,i);if(m!==En)return m}p=av(a),a=a[Yr]}o=p}return r}function av(n){let t=n[oe],e=t.type;return e===2?t.declTNode:e===1?n[pn]:null}function vf(n){return C2(ft(),n)}function kg(n,t=null,e=null,i){let r=sv(n,t,e,i);return r.resolveInjectorInitializers(),r}function sv(n,t=null,e=null,i,r=new Set){let o=[e||Mt,Iw(n)];return i=i||(typeof n=="object"?void 0:It(n)),new Qo(o,t||nf(),i||null,r)}var kt=class n{static THROW_IF_NOT_FOUND=Li;static NULL=new ul;static create(t,e){if(Array.isArray(t))return kg({name:""},e,t,"");{let i=t.name??"";return kg({name:i},t.parent,t.providers,i)}}static \u0275prov=L({token:n,providedIn:"any",factory:()=>B(bh)});static __NG_ELEMENT_ID__=-1};var D2=new q("");D2.__NG_ELEMENT_ID__=n=>{let t=ft();if(t===null)throw new $(204,!1);if(t.type&2)return t.value;if(n&te.Optional)return null;throw new $(204,!1)};var lv=!1,Kr=(()=>{class n{static __NG_ELEMENT_ID__=T2;static __NG_ENV_ID__=e=>e}return n})(),_p=class extends Kr{_lView;constructor(t){super(),this._lView=t}onDestroy(t){let e=this._lView;return Qr(e)?(t(),()=>{}):(jh(e,t),()=>Yw(e,t))}};function T2(){return new _p(ne())}var qr=class{},cv=new q("",{providedIn:"root",factory:()=>!1});var dv=new q(""),uv=new q(""),Jr=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ne(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})();var bp=class extends Be{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,rf()&&(this.destroyRef=j(Kr,{optional:!0})??void 0,this.pendingTasks=j(Jr,{optional:!0})??void 0)}emit(t){let e=ce(null);try{super.next(t)}finally{ce(e)}}subscribe(t,e,i){let r=t,o=e||(()=>null),a=i;if(t&&typeof t=="object"){let p=t;r=p.next?.bind(p),o=p.error?.bind(p),a=p.complete?.bind(p)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),a&&(a=this.wrapInTimeout(a)));let c=super.subscribe({next:r,error:o,complete:a});return t instanceof Oe&&t.add(c),c}wrapInTimeout(t){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Te=bp;function xl(...n){}function pv(n){let t,e;function i(){n=xl;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),i()})),()=>i()}function Pg(n){return queueMicrotask(()=>n()),()=>{n=xl}}var _f="isAngularZone",wl=_f+"_ID",k2=0,ke=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Te(!1);onMicrotaskEmpty=new Te(!1);onStable=new Te(!1);onError=new Te(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=lv}=t;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&i,a.shouldCoalesceRunChangeDetection=r,a.callbackScheduled=!1,a.scheduleInRootZone=o,A2(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(_f)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(t,e,i){return this._inner.run(t,e,i)}runTask(t,e,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,t,P2,xl,xl);try{return o.runTask(a,e,i)}finally{o.cancelTask(a)}}runGuarded(t,e,i){return this._inner.runGuarded(t,e,i)}runOutsideAngular(t){return this._outer.run(t)}},P2={};function bf(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function O2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){pv(()=>{n.callbackScheduled=!1,yp(n),n.isCheckStableRunning=!0,bf(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),yp(n)}function A2(n){let t=()=>{O2(n)},e=k2++;n._inner=n._inner.fork({name:"angular",properties:{[_f]:!0,[wl]:e,[wl+e]:!0},onInvokeTask:(i,r,o,a,c,p)=>{if(R2(p))return i.invokeTask(o,a,c,p);try{return Og(n),i.invokeTask(o,a,c,p)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),Ag(n)}},onInvoke:(i,r,o,a,c,p,f)=>{try{return Og(n),i.invoke(o,a,c,p,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!F2(p)&&t(),Ag(n)}},onHasTask:(i,r,o,a)=>{i.hasTask(o,a),r===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,yp(n),bf(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,r,o,a)=>(i.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function yp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Og(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ag(n){n._nesting--,bf(n)}var Cl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Te;onMicrotaskEmpty=new Te;onStable=new Te;onError=new Te;run(t,e,i){return t.apply(e,i)}runGuarded(t,e,i){return t.apply(e,i)}runOutsideAngular(t){return t()}runTask(t,e,i,r){return t.apply(e,i)}};function R2(n){return fv(n,"__ignore_ng_zone__")}function F2(n){return fv(n,"__scheduler_tick__")}function fv(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}function N2(n="zone.js",t){return n==="noop"?new Cl:n==="zone.js"?new ke(t):n}var kn=class{_console=console;handleError(t){this._console.error("ERROR",t)}},V2=new q("",{providedIn:"root",factory:()=>{let n=j(ke),t=j(kn);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function Rg(n,t){return sh(n,t)}function j2(n){return sh(ah,n)}var mv=(Rg.required=j2,Rg);function L2(){return Xr(ft(),ne())}function Xr(n,t){return new wt(On(n,t))}var wt=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=L2}return n})();function U2(n){return n instanceof wt?n.nativeElement:n}function B2(n){return typeof n=="function"&&n[Qt]!==void 0}function eo(n,t){let e=Eu(n,t?.equal),i=e[Qt];return e.set=r=>jo(i,r),e.update=r=>Mu(i,r),e.asReadonly=$2.bind(e),e}function $2(){let n=this[Qt];if(n.readonlyFn===void 0){let t=()=>this();t[Qt]=n,n.readonlyFn=t}return n.readonlyFn}function gv(n){return B2(n)&&typeof n.set=="function"}function q2(){return this._results[Symbol.iterator]()}var xp=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Be}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let i=ww(t);(this._changesDetected=!xw(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=q2};function hv(n){return(n.flags&128)===128}var vv=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(vv||{}),_v=new Map,H2=0;function z2(){return H2++}function G2(n){_v.set(n[jl],n)}function wp(n){_v.delete(n[jl])}var Fg="__ngContext__";function to(n,t){bi(t)?(n[Fg]=t[jl],G2(t)):n[Fg]=t}function bv(n){return xv(n[Ko])}function yv(n){return xv(n[dn])}function xv(n){for(;n!==null&&!oi(n);)n=n[dn];return n}var Cp;function wv(n){Cp=n}function W2(){if(Cp!==void 0)return Cp;if(typeof document<"u")return document;throw new $(210,!1)}var yf=new q("",{providedIn:"root",factory:()=>Y2}),Y2="ng",xf=new q(""),no=new q("",{providedIn:"platform",factory:()=>"unknown"});var wf=new q("",{providedIn:"root",factory:()=>W2().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Z2="h",Q2="b";var Cv=!1,K2=new q("",{providedIn:"root",factory:()=>Cv});var Cf=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Cf||{}),io=new q(""),Ng=new Set;function oa(n){Ng.has(n)||(Ng.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Sv=(()=>{class n{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=J2}return n})();function J2(){return new Sv(ne(),ft())}var Rr=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Rr||{}),Ev=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),X2=[Rr.EarlyRead,Rr.Write,Rr.MixedReadWrite,Rr.Read],eC=(()=>{class n{ngZone=j(ke);scheduler=j(qr);errorHandler=j(kn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(io,{optional:!0})}execute(){let e=this.sequences.size>0;e&&Ee(16),this.executing=!0;for(let i of X2)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&Ee(17)}register(e){let{view:i}=e;i!==void 0?((i[Nr]??=[]).push(e),ra(i),i[Z]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(Cf.AFTER_NEXT_RENDER,e):e()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),Sp=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,i,r,o,a=null){this.impl=t,this.hooks=e,this.view=i,this.once=r,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[Nr];t&&(this.view[Nr]=t.filter(e=>e!==this))}};function Sf(n,t){!t?.injector&&Vw(Sf);let e=t?.injector??j(kt);return oa("NgAfterNextRender"),nC(n,e,t,!0)}function tC(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function nC(n,t,e,i){let r=t.get(Ev);r.impl??=t.get(eC);let o=t.get(io,null,{optional:!0}),a=e?.phase??Rr.MixedReadWrite,c=e?.manualCleanup!==!0?t.get(Kr):null,p=t.get(Sv,null,{optional:!0}),f=new Sp(r.impl,tC(n,a),p?.view,i,c,o?.snapshot(null));return r.impl.register(f),f}var iC=(n,t,e,i)=>{};function rC(n,t,e,i){iC(n,t,e,i)}var oC=()=>null;function Mv(n,t,e=!1){return oC(n,t,e)}function Iv(n,t){let e=n.contentQueries;if(e!==null){let i=ce(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],a=e[r+1];if(a!==-1){let c=n.data[a];uf(o),c.contentQueries(2,t[a],a)}}}finally{ce(i)}}}function Ep(n,t,e){uf(0);let i=ce(null);try{t(n,e)}finally{ce(i)}}function Ef(n,t,e){if(of(t)){let i=ce(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let a=r;a<o;a++){let c=n.data[a];if(c.contentQueries){let p=e[a];c.contentQueries(1,p,a)}}}finally{ce(i)}}}var Pn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Pn||{});var Xs;function aC(){if(Xs===void 0&&(Xs=null,bt.trustedTypes))try{Xs=bt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Xs}function Vg(n){return aC()?.createScriptURL(n)||n}var Sl=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rh})`}};function aa(n){return n instanceof Sl?n.changingThisBreaksApplicationSecurity:n}function Dv(n,t){let e=sC(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${rh})`)}return e===t}function sC(n){return n instanceof Sl&&n.getTypeName()||null}var lC=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cC(n){return n=String(n),n.match(lC)?n:"unsafe:"+n}var Mf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Mf||{});function If(n){let t=kv();return t?t.sanitize(Mf.URL,n)||"":Dv(n,"URL")?aa(n):cC(ei(n))}function dC(n){let t=kv();if(t)return Vg(t.sanitize(Mf.RESOURCE_URL,n)||"");if(Dv(n,"ResourceURL"))return Vg(aa(n));throw new $(904,!1)}function uC(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?dC:If}function Tv(n,t,e){return uC(t,e)(n)}function kv(){let n=ne();return n&&n[ti].sanitizer}var pC=/^>|^->|<!--|-->|--!>|<!-$/g,fC=/(<|>)/g,mC="\u200B$1\u200B";function gC(n){return n.replace(pC,t=>t.replace(fC,mC))}function Pv(n){return n instanceof Function?n():n}function hC(n,t,e){let i=n.length;for(;;){let r=n.indexOf(t,e);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}e=r+1}}var Ov="ng-template";function vC(n,t,e,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&hC(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(Df(n))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function Df(n){return n.type===4&&n.value!==Ov}function _C(n,t,e){let i=n.type===4&&!e?Ov:n.value;return t===i}function bC(n,t,e){let i=4,r=n.attrs,o=r!==null?wC(r):0,a=!1;for(let c=0;c<t.length;c++){let p=t[c];if(typeof p=="number"){if(!a&&!ln(i)&&!ln(p))return!1;if(a&&ln(p))continue;a=!1,i=p|i&1;continue}if(!a)if(i&4){if(i=2|i&1,p!==""&&!_C(n,p,e)||p===""&&t.length===1){if(ln(i))return!1;a=!0}}else if(i&8){if(r===null||!vC(n,r,p,e)){if(ln(i))return!1;a=!0}}else{let f=t[++c],m=yC(p,r,Df(n),e);if(m===-1){if(ln(i))return!1;a=!0;continue}if(f!==""){let _;if(m>o?_="":_=r[m+1].toLowerCase(),i&2&&f!==_){if(ln(i))return!1;a=!0}}}}return ln(i)||a}function ln(n){return(n&1)===0}function yC(n,t,e,i){if(t===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<t.length;){let a=t[r];if(a===n)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let c=t[++r];for(;typeof c=="string";)c=t[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return CC(t,n)}function xC(n,t,e=!1){for(let i=0;i<t.length;i++)if(bC(n,t[i],e))return!0;return!1}function wC(n){for(let t=0;t<n.length;t++){let e=n[t];if(Kh(e))return t}return n.length}function CC(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let i=n[e];if(typeof i=="number")return-1;if(i===t)return e;e++}return-1}function jg(n,t){return n?":not("+t.trim()+")":t}function SC(n){let t=n[0],e=1,i=2,r="",o=!1;for(;e<n.length;){let a=n[e];if(typeof a=="string")if(i&2){let c=n[++e];r+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!ln(a)&&(t+=jg(o,r),r=""),i=a,o=o||!ln(i);e++}return r!==""&&(t+=jg(o,r)),t}function EC(n){return n.map(SC).join(",")}function MC(n){let t=[],e=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&t.push(o,n[++i]):r===8&&e.push(o);else{if(!ln(r))break;r=o}i++}return e.length&&t.push(1,...e),t}var Ot={};function IC(n,t){return n.createText(t)}function DC(n,t,e){n.setValue(t,e)}function TC(n,t){return n.createComment(gC(t))}function Av(n,t,e){return n.createElement(t,e)}function El(n,t,e,i,r){n.insertBefore(t,e,i,r)}function Rv(n,t,e){n.appendChild(t,e)}function Lg(n,t,e,i,r){i!==null?El(n,t,e,i,r):Rv(n,t,e)}function kC(n,t,e){n.removeChild(null,t,e)}function PC(n,t,e){n.setAttribute(t,"style",e)}function OC(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function Fv(n,t,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&v2(n,t,i),r!==null&&OC(n,t,r),o!==null&&PC(n,t,o)}function Tf(n,t,e,i,r,o,a,c,p,f,m){let _=xt+i,M=_+r,y=AC(_,M),D=typeof f=="function"?f():f;return y[oe]={type:n,blueprint:y,template:e,queries:null,viewQuery:c,declTNode:t,data:y.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:M,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:p,consts:D,incompleteFirstPass:!1,ssrId:m}}function AC(n,t){let e=[];for(let i=0;i<t;i++)e.push(i<n?null:Ot);return e}function RC(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Tf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function kf(n,t,e,i,r,o,a,c,p,f,m){let _=t.blueprint.slice();return _[ri]=r,_[Z]=i|4|128|8|64|1024,(f!==null||n&&n[Z]&2048)&&(_[Z]|=2048),Nh(_),_[pt]=_[Yr]=n,_[Tt]=e,_[ti]=a||n&&n[ti],_[qe]=c||n&&n[qe],_[Lr]=p||n&&n[Lr]||null,_[pn]=o,_[jl]=z2(),_[pl]=m,_[Ih]=f,_[Mn]=t.type==2?n[Mn]:_,_}function FC(n,t,e){let i=On(t,n),r=RC(e),o=n[ti].rendererFactory,a=Pf(n,kf(n,r,null,Nv(e),i,t,null,o.createRenderer(i,e),null,null,null));return n[t.index]=a}function Nv(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function Vv(n,t,e,i){if(e===0)return-1;let r=t.length;for(let o=0;o<e;o++)t.push(i),n.blueprint.push(i),n.data.push(null);return r}function Pf(n,t){return n[Ko]?n[Cg][dn]=t:n[Ko]=t,n[Cg]=t,t}function u(n=1){jv(et(),ne(),ai()+n,!1)}function jv(n,t,e,i){if(!i)if((t[Z]&3)===3){let o=n.preOrderCheckHooks;o!==null&&il(t,o,e)}else{let o=n.preOrderHooks;o!==null&&rl(t,o,0,e)}Wi(e)}var Gl=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Gl||{});function Mp(n,t,e,i){let r=ce(null);try{let[o,a,c]=n.inputs[e],p=null;(a&Gl.SignalBased)!==0&&(p=t[o][Qt]),p!==null&&p.transformFn!==void 0?i=p.transformFn(i):c!==null&&(i=c.call(t,i)),n.setInput!==null?n.setInput(t,p,i,e,o):Th(t,p,o,i)}finally{ce(r)}}function Lv(n,t,e,i,r){let o=ai(),a=i&2;try{Wi(-1),a&&t.length>xt&&jv(n,t,xt,!1),Ee(a?2:0,r),e(i,r)}finally{Wi(o),Ee(a?3:1,r)}}function Wl(n,t,e){BC(n,t,e),(e.flags&64)===64&&$C(n,t,e)}function Of(n,t,e=On){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],c=a===-1?e(t,n):n[a];n[r++]=c}}}function NC(n,t,e,i){let o=i.get(K2,Cv)||e===Pn.ShadowDom,a=n.selectRootElement(t,o);return VC(a),a}function VC(n){jC(n)}var jC=()=>null;function LC(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Uv(n,t,e,i,r,o,a,c){if(!c&&Rf(t,n,e,i,r)){Zr(t)&&UC(e,t.index);return}if(t.type&3){let p=On(t,e);i=LC(i),r=a!=null?a(r,t.value||"",i):r,o.setProperty(p,i,r)}else t.type&12}function UC(n,t){let e=Tn(t,n);e[Z]&16||(e[Z]|=64)}function BC(n,t,e){let i=e.directiveStart,r=e.directiveEnd;Zr(e)&&FC(t,e,n.data[i+e.componentOffset]),n.firstCreatePass||yl(e,t);let o=e.initialInputs;for(let a=i;a<r;a++){let c=n.data[a],p=Jo(t,n,a,e);if(to(p,t),o!==null&&GC(t,a-i,p,c,e,o),In(c)){let f=Tn(e.index,t);f[Tt]=Jo(t,n,a,e)}}}function $C(n,t,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,a=s2();try{Wi(o);for(let c=i;c<r;c++){let p=n.data[c],f=t[c];mp(c),(p.hostBindings!==null||p.hostVars!==0||p.hostAttrs!==null)&&qC(p,f)}}finally{Wi(-1),mp(a)}}function qC(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function Af(n,t){let e=n.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let o=e[r];xC(t,o.selectors,!1)&&(i??=[],In(o)?i.unshift(o):i.push(o))}return i}function HC(n,t,e,i,r,o){let a=On(n,t);zC(t[qe],a,o,n.value,e,i,r)}function zC(n,t,e,i,r,o,a){if(o==null)n.removeAttribute(t,r,e);else{let c=a==null?ei(o):a(o,i||"",r);n.setAttribute(t,r,c,e)}}function GC(n,t,e,i,r,o){let a=o[t];if(a!==null)for(let c=0;c<a.length;c+=2){let p=a[c],f=a[c+1];Mp(i,e,p,f)}}function WC(n,t){let e=n[Lr],i=e?e.get(kn,null):null;i&&i.handleError(t)}function Rf(n,t,e,i,r){let o=n.inputs?.[i],a=n.hostDirectiveInputs?.[i],c=!1;if(a)for(let p=0;p<a.length;p+=2){let f=a[p],m=a[p+1],_=t.data[f];Mp(_,e[f],m,r),c=!0}if(o)for(let p of o){let f=e[p],m=t.data[p];Mp(m,f,i,r),c=!0}return c}function YC(n,t){let e=Tn(t,n),i=e[oe];ZC(i,e);let r=e[ri];r!==null&&e[pl]===null&&(e[pl]=Mv(r,e[Lr])),Ee(18),Ff(i,e,e[Tt]),Ee(19,e[Tt])}function ZC(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function Ff(n,t,e){pf(t);try{let i=n.viewQuery;i!==null&&Ep(1,i,e);let r=n.template;r!==null&&Lv(n,t,r,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[ni]?.finishViewCreation(n),n.staticContentQueries&&Iv(n,t),n.staticViewQueries&&Ep(2,n.viewQuery,e);let o=n.components;o!==null&&QC(t,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{t[Z]&=-5,ff()}}function QC(n,t){for(let e=0;e<t.length;e++)YC(n,t[e])}function KC(n,t,e,i){let r=ce(null);try{let o=t.tView,c=n[Z]&4096?4096:16,p=kf(n,o,e,c,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=n[t.index];p[Hi]=f;let m=n[ni];return m!==null&&(p[ni]=m.createEmbeddedView(o)),Ff(o,p,e),p}finally{ce(r)}}function Ug(n,t){return!t||t.firstChild===null||hv(n)}var JC;function Nf(n,t){return JC(n,t)}var ii=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ii||{});function Bv(n){return(n.flags&32)===32}function Fr(n,t,e,i,r){if(i!=null){let o,a=!1;oi(i)?o=i:bi(i)&&(a=!0,i=i[ri]);let c=Dn(i);n===0&&e!==null?r==null?Rv(t,e,c):El(t,e,c,r||null,!0):n===1&&e!==null?El(t,e,c,r||null,!0):n===2?kC(t,c,a):n===3&&t.destroyNode(c),o!=null&&dS(t,n,o,e,r)}}function XC(n,t){$v(n,t),t[ri]=null,t[pn]=null}function eS(n,t,e,i,r,o){i[ri]=r,i[pn]=t,Zl(n,i,e,1,r,o)}function $v(n,t){t[ti].changeDetectionScheduler?.notify(9),Zl(n,t,t[qe],2,null,null)}function tS(n){let t=n[Ko];if(!t)return Zu(n[oe],n);for(;t;){let e=null;if(bi(t))e=t[Ko];else{let i=t[qt];i&&(e=i)}if(!e){for(;t&&!t[dn]&&t!==n;)bi(t)&&Zu(t[oe],t),t=t[pt];t===null&&(t=n),bi(t)&&Zu(t[oe],t),e=t&&t[dn]}t=e}}function Vf(n,t){let e=n[Ur],i=e.indexOf(t);e.splice(i,1)}function qv(n,t){if(Qr(t))return;let e=t[qe];e.destroyNode&&Zl(n,t,e,3,null,null),tS(t)}function Zu(n,t){if(Qr(t))return;let e=ce(null);try{t[Z]&=-129,t[Z]|=256,t[Jt]&&wu(t[Jt]),iS(n,t),nS(n,t),t[oe].type===1&&t[qe].destroy();let i=t[Hi];if(i!==null&&oi(t[pt])){i!==t[pt]&&Vf(i,t);let r=t[ni];r!==null&&r.detachView(n)}wp(t)}finally{ce(e)}}function nS(n,t){let e=n.cleanup,i=t[fl];if(e!==null)for(let a=0;a<e.length-1;a+=2)if(typeof e[a]=="string"){let c=e[a+3];c>=0?i[c]():i[-c].unsubscribe(),a+=2}else{let c=i[e[a+1]];e[a].call(c)}i!==null&&(t[fl]=null);let r=t[_i];if(r!==null){t[_i]=null;for(let a=0;a<r.length;a++){let c=r[a];c()}}let o=t[ml];if(o!==null){t[ml]=null;for(let a of o)a.destroy()}}function iS(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=t[e[i]];if(!(r instanceof Yi)){let o=e[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let c=r[o[a]],p=o[a+1];Ee(4,c,p);try{p.call(c)}finally{Ee(5,c,p)}}else{Ee(4,r,o);try{o.call(r)}finally{Ee(5,r,o)}}}}}function rS(n,t,e){return oS(n,t.parent,e)}function oS(n,t,e){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return e[ri];if(Zr(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===Pn.None||r===Pn.Emulated)return null}return On(i,e)}function aS(n,t,e){return lS(n,t,e)}function sS(n,t,e){return n.type&40?On(n,e):null}var lS=sS,Bg;function Yl(n,t,e,i){let r=rS(n,i,t),o=t[qe],a=i.parent||t[pn],c=aS(a,i,t);if(r!=null)if(Array.isArray(e))for(let p=0;p<e.length;p++)Lg(o,r,e[p],c,!1);else Lg(o,r,e,c,!1);Bg!==void 0&&Bg(o,i,t,e,r)}function Go(n,t){if(t!==null){let e=t.type;if(e&3)return On(t,n);if(e&4)return Ip(-1,n[t.index]);if(e&8){let i=t.child;if(i!==null)return Go(n,i);{let r=n[t.index];return oi(r)?Ip(-1,r):Dn(r)}}else{if(e&128)return Go(n,t.next);if(e&32)return Nf(t,n)()||Dn(n[t.index]);{let i=Hv(n,t);if(i!==null){if(Array.isArray(i))return i[0];let r=Gi(n[Mn]);return Go(r,i)}else return Go(n,t.next)}}}return null}function Hv(n,t){if(t!==null){let i=n[Mn][pn],r=t.projection;return i.projection[r]}return null}function Ip(n,t){let e=qt+n+1;if(e<t.length){let i=t[e],r=i[oe].firstChild;if(r!==null)return Go(i,r)}return t[zi]}function jf(n,t,e,i,r,o,a){for(;e!=null;){if(e.type===128){e=e.next;continue}let c=i[e.index],p=e.type;if(a&&t===0&&(c&&to(Dn(c),i),e.flags|=2),!Bv(e))if(p&8)jf(n,t,e.child,i,r,o,!1),Fr(t,n,r,c,o);else if(p&32){let f=Nf(e,i),m;for(;m=f();)Fr(t,n,r,m,o);Fr(t,n,r,c,o)}else p&16?cS(n,t,i,e,r,o):Fr(t,n,r,c,o);e=a?e.projectionNext:e.next}}function Zl(n,t,e,i,r,o){jf(e,i,n.firstChild,t,r,o,!1)}function cS(n,t,e,i,r,o){let a=e[Mn],p=a[pn].projection[i.projection];if(Array.isArray(p))for(let f=0;f<p.length;f++){let m=p[f];Fr(t,n,r,m,o)}else{let f=p,m=a[pt];hv(i)&&(f.flags|=128),jf(n,t,f,m,r,o,!0)}}function dS(n,t,e,i,r){let o=e[zi],a=Dn(e);o!==a&&Fr(t,n,i,o,r);for(let c=qt;c<e.length;c++){let p=e[c];Zl(p[oe],p,n,t,i,o)}}function uS(n,t,e,i,r){if(t)r?n.addClass(e,i):n.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:ii.DashCase;r==null?n.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ii.Important),n.setStyle(e,i,r,o))}}function Ml(n,t,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&i.push(Dn(o)),oi(o)&&pS(o,i);let a=e.type;if(a&8)Ml(n,t,e.child,i);else if(a&32){let c=Nf(e,t),p;for(;p=c();)i.push(p)}else if(a&16){let c=Hv(t,e);if(Array.isArray(c))i.push(...c);else{let p=Gi(t[Mn]);Ml(p[oe],p,c,i,!0)}}e=r?e.projectionNext:e.next}return i}function pS(n,t){for(let e=qt;e<n.length;e++){let i=n[e],r=i[oe].firstChild;r!==null&&Ml(i[oe],i,r,t)}n[zi]!==n[ri]&&t.push(n[zi])}function zv(n){if(n[Nr]!==null){for(let t of n[Nr])t.impl.addSequence(t);n[Nr].length=0}}var Gv=[];function fS(n){return n[Jt]??mS(n)}function mS(n){let t=Gv.pop()??Object.create(hS);return t.lView=n,t}function gS(n){n.lView[Jt]!==n&&(n.lView=null,Gv.push(n))}var hS=G(A({},No),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{ra(n.lView)},consumerOnSignalRead(){this.lView[Jt]=this}});function vS(n){let t=n[Jt]??Object.create(_S);return t.lView=n,t}var _S=G(A({},No),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Gi(n.lView);for(;t&&!Wv(t[oe]);)t=Gi(t);t&&Vh(t)},consumerOnSignalRead(){this.lView[Jt]=this}});function Wv(n){return n.type!==2}function Yv(n){if(n[ml]===null)return;let t=!0;for(;t;){let e=!1;for(let i of n[ml])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=e&&!!(n[Z]&8192)}}var bS=100;function Zv(n,t=!0,e=0){let r=n[ti].rendererFactory,o=!1;o||r.begin?.();try{yS(n,e)}catch(a){throw t&&WC(n,a),a}finally{o||r.end?.()}}function yS(n,t){let e=Bh();try{Eg(!0),Dp(n,t);let i=0;for(;Bl(n);){if(i===bS)throw new $(103,!1);i++,Dp(n,1)}}finally{Eg(e)}}function xS(n,t,e,i){if(Qr(t))return;let r=t[Z],o=!1,a=!1;pf(t);let c=!0,p=null,f=null;o||(Wv(n)?(f=fS(t),p=Ss(f)):hu()===null?(c=!1,f=vS(t),p=Ss(f)):t[Jt]&&(wu(t[Jt]),t[Jt]=null));try{Nh(t),r2(n.bindingStartIndex),e!==null&&Lv(n,t,e,2,i);let m=(r&3)===3;if(!o)if(m){let y=n.preOrderCheckHooks;y!==null&&il(t,y,null)}else{let y=n.preOrderHooks;y!==null&&rl(t,y,0,null),Wu(t,0)}if(a||wS(t),Yv(t),Qv(t,0),n.contentQueries!==null&&Iv(n,t),!o)if(m){let y=n.contentCheckHooks;y!==null&&il(t,y)}else{let y=n.contentHooks;y!==null&&rl(t,y,1),Wu(t,1)}SS(n,t);let _=n.components;_!==null&&Jv(t,_,0);let M=n.viewQuery;if(M!==null&&Ep(2,M,i),!o)if(m){let y=n.viewCheckHooks;y!==null&&il(t,y)}else{let y=n.viewHooks;y!==null&&rl(t,y,2),Wu(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[Gu]){for(let y of t[Gu])y();t[Gu]=null}o||(zv(t),t[Z]&=-73)}catch(m){throw o||ra(t),m}finally{f!==null&&(yu(f,p),c&&gS(f)),ff()}}function Qv(n,t){for(let e=bv(n);e!==null;e=yv(e))for(let i=qt;i<e.length;i++){let r=e[i];Kv(r,t)}}function wS(n){for(let t=bv(n);t!==null;t=yv(t)){if(!(t[Z]&2))continue;let e=t[Ur];for(let i=0;i<e.length;i++){let r=e[i];Vh(r)}}}function CS(n,t,e){Ee(18);let i=Tn(t,n);Kv(i,e),Ee(19,i[Tt])}function Kv(n,t){af(n)&&Dp(n,t)}function Dp(n,t){let i=n[oe],r=n[Z],o=n[Jt],a=!!(t===0&&r&16);if(a||=!!(r&64&&t===0),a||=!!(r&1024),a||=!!(o?.dirty&&xu(o)),a||=!1,o&&(o.dirty=!1),n[Z]&=-9217,a)xS(i,n,i.template,n[Tt]);else if(r&8192){Yv(n),Qv(n,1);let c=i.components;c!==null&&Jv(n,c,1),zv(n)}}function Jv(n,t,e){for(let i=0;i<t.length;i++)CS(n,t[i],e)}function SS(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)Wi(~r);else{let o=r,a=e[++i],c=e[++i];a2(a,o);let p=t[o];Ee(24,p),c(2,p),Ee(25,p)}}}finally{Wi(-1)}}function Lf(n,t){let e=Bh()?64:1088;for(n[ti].changeDetectionScheduler?.notify(t);n;){n[Z]|=e;let i=Gi(n);if(hl(n)&&!i)return n;n=i}return null}function Xv(n,t,e,i){return[n,!0,0,t,null,i,null,e,null,null]}function ES(n,t,e,i=!0){let r=t[oe];if(MS(r,t,n,e),i){let a=Ip(e,n),c=t[qe],p=c.parentNode(n[zi]);p!==null&&eS(r,n[pn],c,t,p,a)}let o=t[pl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Tp(n,t){if(n.length<=qt)return;let e=qt+t,i=n[e];if(i){let r=i[Hi];r!==null&&r!==n&&Vf(r,i),t>0&&(n[e-1][dn]=i[dn]);let o=dl(n,qt+t);XC(i[oe],i);let a=o[ni];a!==null&&a.detachView(o[oe]),i[pt]=null,i[dn]=null,i[Z]&=-129}return i}function MS(n,t,e,i){let r=qt+i,o=e.length;i>0&&(e[r-1][dn]=t),i<o-qt?(t[dn]=e[r],_h(e,qt+i,t)):(e.push(t),t[dn]=null),t[pt]=e;let a=t[Hi];a!==null&&e!==a&&e_(a,t);let c=t[ni];c!==null&&c.insertView(n),pp(t),t[Z]|=128}function e_(n,t){let e=n[Ur],i=t[pt];if(bi(i))n[Z]|=2;else{let r=i[pt][Mn];t[Mn]!==r&&(n[Z]|=2)}e===null?n[Ur]=[t]:e.push(t)}var Xo=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[oe];return Ml(e,t,e.firstChild,[])}constructor(t,e,i=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=i}get context(){return this._lView[Tt]}set context(t){this._lView[Tt]=t}get destroyed(){return Qr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[pt];if(oi(t)){let e=t[gl],i=e?e.indexOf(this):-1;i>-1&&(Tp(t,i),dl(e,i))}this._attachedToViewContainer=!1}qv(this._lView[oe],this._lView)}onDestroy(t){jh(this._lView,t)}markForCheck(){Lf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){pp(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,Zv(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=hl(this._lView),e=this._lView[Hi];e!==null&&!t&&Vf(e,this._lView),$v(this._lView[oe],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=t;let e=hl(this._lView),i=this._lView[Hi];i!==null&&!e&&e_(i,this._lView),pp(this._lView)}};var Zi=(()=>{class n{static __NG_ELEMENT_ID__=TS}return n})(),IS=Zi,DS=class extends IS{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,i){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,i){let r=KC(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:i});return new Xo(r)}};function TS(){return Ql(ft(),ne())}function Ql(n,t){return n.type&4?new DS(t,n,Xr(n,t)):null}function Kl(n,t,e,i,r){let o=n.data[t];if(o===null)o=kS(n,t,e,i,r),o2()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let a=n2();o.injectorIndex=a===null?-1:a.injectorIndex}return Ki(o,!0),o}function kS(n,t,e,i,r){let o=Lh(),a=df(),c=a?o:o&&o.parent,p=n.data[t]=OS(n,c,e,t,i,r);return PS(n,p,o,a),p}function PS(n,t,e,i){n.firstChild===null&&(n.firstChild=t),e!==null&&(i?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function OS(n,t,e,i,r,o){let a=t?t.injectorIndex:-1,c=0;return Xw()&&(c|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Uj=new RegExp(`^(\\d+)*(${Q2}|${Z2})*(.*)`);var AS=()=>null;function $g(n,t){return AS(n,t)}var RS=class{},t_=class{},kp=class{resolveComponentFactory(t){throw Error(`No component factory found for ${It(t)}.`)}},Jl=class{static NULL=new kp},Hr=class{},mn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>FS()}return n})();function FS(){let n=ne(),t=ft(),e=Tn(t.index,n);return(bi(e)?e:n)[qe]}var NS=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>null})}return n})();var Qu={},Pp=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,i){i=Nl(i);let r=this.injector.get(t,Qu,i);return r!==Qu||e===Qu?r:this.parentInjector.get(t,e,i)}};function Op(n,t,e){let i=e?n.styles:null,r=e?n.classes:null,o=0;if(t!==null)for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number")o=c;else if(o==1)r=rp(r,c);else if(o==2){let p=c,f=t[++a];i=rp(i,p+": "+f+";")}}e?n.styles=i:n.stylesWithoutHost=i,e?n.classes=r:n.classesWithoutHost=r}function O(n,t=te.Default){let e=ne();if(e===null)return B(n,t);let i=ft();return rv(i,e,yt(n),t)}function n_(){let n="invalid";throw new Error(n)}function Uf(n,t,e,i,r){let o=i===null?null:{"":-1},a=r(n,e);if(a!==null){let c,p=null,f=null,m=jS(a);m===null?c=a:[c,p,f]=m,BS(n,t,e,c,o,p,f)}o!==null&&i!==null&&VS(e,i,o)}function VS(n,t,e){let i=n.localNames=[];for(let r=0;r<t.length;r+=2){let o=e[t[r+1]];if(o==null)throw new $(-301,!1);i.push(t[r],o)}}function jS(n){let t=null,e=!1;for(let a=0;a<n.length;a++){let c=n[a];if(a===0&&In(c)&&(t=c),c.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let i=null,r=null,o=null;for(let a of n)a.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,o??=new Map,LS(a,i,o,r)),a===t&&(i??=[],i.push(a));return i!==null?(i.push(...t===null?n:n.slice(1)),[i,r,o]):null}function LS(n,t,e,i){let r=t.length;n.findHostDirectiveDefs(n,t,i),e.set(n,[r,t.length-1])}function US(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function BS(n,t,e,i,r,o,a){let c=i.length,p=!1;for(let M=0;M<c;M++){let y=i[M];!p&&In(y)&&(p=!0,US(n,e,M)),hp(yl(e,t),n,y.type)}WS(e,n.data.length,c);for(let M=0;M<c;M++){let y=i[M];y.providersResolver&&y.providersResolver(y)}let f=!1,m=!1,_=Vv(n,t,c,null);c>0&&(e.directiveToIndex=new Map);for(let M=0;M<c;M++){let y=i[M];if(e.mergedAttrs=$r(e.mergedAttrs,y.hostAttrs),qS(n,e,t,_,y),GS(_,y,r),a!==null&&a.has(y)){let[V,U]=a.get(y);e.directiveToIndex.set(y.type,[_,V+e.directiveStart,U+e.directiveStart])}else(o===null||!o.has(y))&&e.directiveToIndex.set(y.type,_);y.contentQueries!==null&&(e.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(e.flags|=64);let D=y.type.prototype;!f&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),f=!0),!m&&(D.ngOnChanges||D.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),m=!0),_++}$S(n,e,o)}function $S(n,t,e){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=n.data[i];if(e===null||!e.has(r))qg(0,t,r,i),qg(1,t,r,i),zg(t,i,!1);else{let o=e.get(r);Hg(0,t,o,i),Hg(1,t,o,i),zg(t,i,!0)}}}function qg(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a;n===0?a=t.inputs??={}:a=t.outputs??={},a[o]??=[],a[o].push(i),i_(t,o)}}function Hg(n,t,e,i){let r=n===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let a=r[o],c;n===0?c=t.hostDirectiveInputs??={}:c=t.hostDirectiveOutputs??={},c[a]??=[],c[a].push(i,o),i_(t,a)}}function i_(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function zg(n,t,e){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!e&&r===null||e&&o===null||Df(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let a=null,c=0;for(;c<i.length;){let p=i[c];if(p===0){c+=4;continue}else if(p===5){c+=2;continue}else if(typeof p=="number")break;if(!e&&r.hasOwnProperty(p)){let f=r[p];for(let m of f)if(m===t){a??=[],a.push(p,i[c+1]);break}}else if(e&&o.hasOwnProperty(p)){let f=o[p];for(let m=0;m<f.length;m+=2)if(f[m]===t){a??=[],a.push(f[m+1],i[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(a)}function qS(n,t,e,i,r){n.data[i]=r;let o=r.factory||(r.factory=Bi(r.type,!0)),a=new Yi(o,In(r),O);n.blueprint[i]=a,e[i]=a,HS(n,t,i,Vv(n,e,r.hostVars,Ot),r)}function HS(n,t,e,i,r){let o=r.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let c=~t.index;zS(a)!=c&&a.push(c),a.push(e,i,o)}}function zS(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function GS(n,t,e){if(e){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)e[t.exportAs[i]]=n;In(t)&&(e[""]=n)}}function WS(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function r_(n,t,e,i,r,o,a,c){let p=t.consts,f=Br(p,a),m=Kl(t,n,2,i,f);return o&&Uf(t,e,m,Br(p,c),r),m.mergedAttrs=$r(m.mergedAttrs,m.attrs),m.attrs!==null&&Op(m,m.attrs,!1),m.mergedAttrs!==null&&Op(m,m.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,m),m}function o_(n,t){gf(n,t),of(t)&&n.queries.elementEnd(t)}var Il=class extends Jl{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=qi(t);return new zr(e,this.ngModule)}};function YS(n){return Object.keys(n).map(t=>{let[e,i,r]=n[t],o={propName:e,templateName:t,isSignal:(i&Gl.SignalBased)!==0};return r&&(o.transform=r),o})}function ZS(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function QS(n,t,e){let i=t instanceof Dt?t:t?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new Pp(e,i):e}function KS(n){let t=n.get(Hr,null);if(t===null)throw new $(407,!1);let e=n.get(NS,null),i=n.get(qr,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:i}}function JS(n,t){let e=(n.selectors[0][0]||"div").toLowerCase();return Av(t,e,e==="svg"?Ah:e==="math"?qw:null)}var zr=class extends t_{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=YS(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=ZS(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=EC(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,i,r){Ee(22);let o=ce(null);try{let a=this.componentDef,c=i?["ng-version","19.2.14"]:MC(this.componentDef.selectors[0]),p=Tf(0,null,null,1,0,null,null,null,null,[c],null),f=QS(a,r||this.ngModule,t),m=KS(f),_=m.rendererFactory.createRenderer(null,a),M=i?NC(_,i,a.encapsulation,f):JS(a,_),y=kf(null,p,null,512|Nv(a),null,null,m,_,f,null,Mv(M,f,!0));y[xt]=M,pf(y);let D=null;try{let V=r_(xt,p,y,"#host",()=>[this.componentDef],!0,0);M&&(Fv(_,M,V),to(M,y)),Wl(p,y,V),Ef(p,V,y),o_(p,V),e!==void 0&&XS(V,this.ngContentSelectors,e),D=Tn(V.index,y),y[Tt]=D[Tt],Ff(p,y,null)}catch(V){throw D!==null&&wp(D),wp(y),V}finally{Ee(23),ff()}return new Ap(this.componentType,y)}finally{ce(o)}}},Ap=class extends RS{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=Fh(e[oe],xt),this.location=Xr(this._tNode,e),this.instance=Tn(this._tNode.index,e)[Tt],this.hostView=this.changeDetectorRef=new Xo(e,void 0,!1),this.componentType=t}setInput(t,e){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let r=this._rootLView,o=Rf(i,r[oe],r,t,e);this.previousInputValues.set(t,e);let a=Tn(i.index,r);Lf(a,1)}get injector(){return new Ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function XS(n,t,e){let i=n.projection=[];for(let r=0;r<t.length;r++){let o=e[r];i.push(o!=null&&o.length?Array.from(o):null)}}var wi=(()=>{class n{static __NG_ELEMENT_ID__=eE}return n})();function eE(){let n=ft();return s_(n,ne())}var tE=wi,a_=class extends tE{_lContainer;_hostTNode;_hostLView;constructor(t,e,i){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=i}get element(){return Xr(this._hostTNode,this._hostLView)}get injector(){return new Ui(this._hostTNode,this._hostLView)}get parentInjector(){let t=hf(this._hostTNode,this._hostLView);if(Jh(t)){let e=_l(t,this._hostLView),i=vl(t),r=e[oe].data[i+8];return new Ui(r,e)}else return new Ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=Gg(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-qt}createEmbeddedView(t,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=$g(this._lContainer,t.ssrId),c=t.createEmbeddedViewImpl(e||{},o,a);return this.insertImpl(c,r,Ug(this._hostTNode,a)),c}createComponent(t,e,i,r,o){let a=t&&!Lw(t),c;if(a)c=e;else{let D=e||{};c=D.index,i=D.injector,r=D.projectableNodes,o=D.environmentInjector||D.ngModuleRef}let p=a?t:new zr(qi(t)),f=i||this.parentInjector;if(!o&&p.ngModule==null){let V=(a?f:this.parentInjector).get(Dt,null);V&&(o=V)}let m=qi(p.componentType??{}),_=$g(this._lContainer,m?.id??null),M=_?.firstChild??null,y=p.create(f,r,M,o);return this.insertImpl(y.hostView,c,Ug(this._hostTNode,_)),y}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,i){let r=t._lView;if(Gw(r)){let c=this.indexOf(t);if(c!==-1)this.detach(c);else{let p=r[pt],f=new a_(p,p[pn],p[pt]);f.detach(f.indexOf(t))}}let o=this._adjustIndex(e),a=this._lContainer;return ES(a,r,o,i),t.attachToViewContainerRef(),_h(Ku(a),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=Gg(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),i=Tp(this._lContainer,e);i&&(dl(Ku(this._lContainer),e),qv(i[oe],i))}detach(t){let e=this._adjustIndex(t,-1),i=Tp(this._lContainer,e);return i&&dl(Ku(this._lContainer),e)!=null?new Xo(i):null}_adjustIndex(t,e=0){return t??this.length+e}};function Gg(n){return n[gl]}function Ku(n){return n[gl]||(n[gl]=[])}function s_(n,t){let e,i=t[n.index];return oi(i)?e=i:(e=Xv(i,t,null,n),t[n.index]=e,Pf(t,e)),iE(e,t,n,i),new a_(e,n,t)}function nE(n,t){let e=n[qe],i=e.createComment(""),r=On(t,n),o=e.parentNode(r);return El(e,o,i,e.nextSibling(r),!1),i}var iE=aE,rE=()=>!1;function oE(n,t,e){return rE(n,t,e)}function aE(n,t,e,i){if(n[zi])return;let r;e.type&8?r=Dn(i):r=nE(t,e),n[zi]=r}var Rp=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Fp=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let i=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let a=e.getByIndex(o),c=this.queries[a.indexInDeclarationView];r.push(c.clone())}return new n(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)Bf(t,e).matches!==null&&this.queries[e].setDirty()}},Np=class{flags;read;predicate;constructor(t,e,i=null){this.flags=e,this.read=i,typeof t=="string"?this.predicate=mE(t):this.predicate=t}},Vp=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},jp=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,e,sE(e,o)),this.matchTNodeWithReadOption(t,e,ol(e,t,o,!1,!1))}else i===Zi?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,ol(e,t,i,!1,!1))}matchTNodeWithReadOption(t,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===wt||r===wi||r===Zi&&e.type&4)this.addMatch(e.index,-2);else{let o=ol(e,t,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function sE(n,t){let e=n.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===t)return e[i+1]}return null}function lE(n,t){return n.type&11?Xr(n,t):n.type&4?Ql(n,t):null}function cE(n,t,e,i){return e===-1?lE(t,n):e===-2?dE(n,t,i):Jo(n,n[oe],e,t)}function dE(n,t,e){if(e===wt)return Xr(t,n);if(e===Zi)return Ql(t,n);if(e===wi)return s_(t,n)}function l_(n,t,e,i){let r=t[ni].queries[i];if(r.matches===null){let o=n.data,a=e.matches,c=[];for(let p=0;a!==null&&p<a.length;p+=2){let f=a[p];if(f<0)c.push(null);else{let m=o[f];c.push(cE(t,m,a[p+1],e.metadata.read))}}r.matches=c}return r.matches}function Lp(n,t,e,i){let r=n.queries.getByIndex(e),o=r.matches;if(o!==null){let a=l_(n,t,r,e);for(let c=0;c<o.length;c+=2){let p=o[c];if(p>0)i.push(a[c/2]);else{let f=o[c+1],m=t[-p];for(let _=qt;_<m.length;_++){let M=m[_];M[Hi]===M[pt]&&Lp(M[oe],M,f,i)}if(m[Ur]!==null){let _=m[Ur];for(let M=0;M<_.length;M++){let y=_[M];Lp(y[oe],y,f,i)}}}}}return i}function uE(n,t){return n[ni].queries[t].queryList}function pE(n,t,e){let i=new xp((e&4)===4);return Zw(n,t,i,i.destroy),(t[ni]??=new Fp).queries.push(new Rp(i))-1}function fE(n,t,e,i){let r=et();if(r.firstCreatePass){let o=ft();gE(r,new Np(t,e,i),o.index),hE(r,n),(e&2)===2&&(r.staticContentQueries=!0)}return pE(r,ne(),e)}function mE(n){return n.split(",").map(t=>t.trim())}function gE(n,t,e){n.queries===null&&(n.queries=new Vp),n.queries.track(new jp(t,e))}function hE(n,t){let e=n.contentQueries||(n.contentQueries=[]),i=e.length?e[e.length-1]:-1;t!==i&&e.push(n.queries.length-1,t)}function Bf(n,t){return n.queries.getByIndex(t)}function vE(n,t){let e=n[oe],i=Bf(e,t);return i.crossesNgTemplate?Lp(e,n,t,[]):l_(e,n,i,t)}function _E(n){let t=[],e=new Map;function i(r){let o=e.get(r);if(!o){let a=n(r);e.set(r,o=a.then(wE))}return o}return Dl.forEach((r,o)=>{let a=[];r.templateUrl&&a.push(i(r.templateUrl).then(f=>{r.template=f}));let c=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=c,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let f=r.styles.length,m=r.styleUrls;r.styleUrls.forEach((_,M)=>{c.push(""),a.push(i(_).then(y=>{c[f+M]=y,m.splice(m.indexOf(_),1),m.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&a.push(i(r.styleUrl).then(f=>{c.push(f),r.styleUrl=void 0}));let p=Promise.all(a).then(()=>CE(o));t.push(p)}),yE(),Promise.all(t).then(()=>{})}var Dl=new Map,bE=new Set;function yE(){let n=Dl;return Dl=new Map,n}function xE(){return Dl.size===0}function wE(n){return typeof n=="string"?n:n.text()}function CE(n){bE.delete(n)}var Gr=class{},$f=class{};var Tl=class extends Gr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Il(this);constructor(t,e,i,r=!0){super(),this.ngModuleType=t,this._parent=e;let o=xh(t);this._bootstrapComponents=Pv(o.bootstrap),this._r3Injector=sv(t,e,[{provide:Gr,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver},...i],It(t),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},kl=class extends $f{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Tl(this.moduleType,t,[])}};function SE(n,t,e){return new Tl(n,t,e,!1)}var Up=class extends Gr{injector;componentFactoryResolver=new Il(this);instance=null;constructor(t){super();let e=new Qo([...t.providers,{provide:Gr,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],t.parent||nf(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function sa(n,t,e=null){return new Up({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var EE=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=Ch(!1,e.type),r=i.length>0?sa([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=L({token:n,providedIn:"environment",factory:()=>new n(B(Dt))})}return n})();function ie(n){return na(()=>{let t=c_(n),e=G(A({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(EE).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pn.Emulated,styles:n.styles||Mt,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&oa("NgStandalone"),d_(e);let i=n.dependencies;return e.directiveDefs=Wg(i,!1),e.pipeDefs=Wg(i,!0),e.id=kE(e),e})}function ME(n){return qi(n)||Ew(n)}function IE(n){return n!==null}function Ye(n){return na(()=>({type:n.type,bootstrap:n.bootstrap||Mt,declarations:n.declarations||Mt,imports:n.imports||Mt,exports:n.exports||Mt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function DE(n,t){if(n==null)return $i;let e={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,a,c,p;Array.isArray(r)?(c=r[0],o=r[1],a=r[2]??o,p=r[3]||null):(o=r,a=r,c=Gl.None,p=null),e[o]=[i,c,p],t[o]=a}return e}function TE(n){if(n==null)return $i;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function _e(n){return na(()=>{let t=c_(n);return d_(t),t})}function la(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function c_(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||$i,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Mt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:DE(n.inputs,t),outputs:TE(n.outputs),debugInfo:null}}function d_(n){n.features?.forEach(t=>t(n))}function Wg(n,t){if(!n)return null;let e=t?Mw:ME;return()=>(typeof n=="function"?n():n).map(i=>e(i)).filter(IE)}function kE(n){let t=0,e=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function PE(n){return Object.getPrototypeOf(n.prototype).constructor}function mt(n){let t=PE(n.type),e=!0,i=[n];for(;t;){let r;if(In(n))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new $(903,!1);r=t.\u0275dir}if(r){if(e){i.push(r);let a=n;a.inputs=Ju(n.inputs),a.declaredInputs=Ju(n.declaredInputs),a.outputs=Ju(n.outputs);let c=r.hostBindings;c&&NE(n,c);let p=r.viewQuery,f=r.contentQueries;if(p&&RE(n,p),f&&FE(n,f),OE(n,r),nw(n.outputs,r.outputs),In(r)&&r.data.animation){let m=n.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let c=o[a];c&&c.ngInherit&&c(n),c===mt&&(e=!1)}}t=Object.getPrototypeOf(t)}AE(i)}function OE(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let i=t.inputs[e];i!==void 0&&(n.inputs[e]=i,n.declaredInputs[e]=t.declaredInputs[e])}}function AE(n){let t=0,e=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=t+=r.hostVars,r.hostAttrs=$r(r.hostAttrs,e=$r(e,r.hostAttrs))}}function Ju(n){return n===$i?{}:n===Mt?[]:n}function RE(n,t){let e=n.viewQuery;e?n.viewQuery=(i,r)=>{t(i,r),e(i,r)}:n.viewQuery=t}function FE(n,t){let e=n.contentQueries;e?n.contentQueries=(i,r,o)=>{t(i,r,o),e(i,r,o)}:n.contentQueries=t}function NE(n,t){let e=n.hostBindings;e?n.hostBindings=(i,r)=>{t(i,r),e(i,r)}:n.hostBindings=t}function u_(n){return jE(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function VE(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),i;for(;!(i=e.next()).done;)t(i.value)}}function jE(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ro(n,t,e){return n[t]=e}function p_(n,t){return n[t]}function un(n,t,e){let i=n[t];return Object.is(i,e)?!1:(n[t]=e,!0)}function ea(n,t,e,i){let r=un(n,t,e);return un(n,t+1,i)||r}function f_(n,t,e,i,r){let o=ea(n,t,e,i);return un(n,t+2,r)||o}function m_(n,t,e,i,r,o){let a=ea(n,t,e,i);return ea(n,t+2,r,o)||a}function LE(n,t,e,i,r,o,a,c,p){let f=t.consts,m=Kl(t,n,4,a||null,c||null);cf()&&Uf(t,e,m,Br(f,p),Af),m.mergedAttrs=$r(m.mergedAttrs,m.attrs),gf(t,m);let _=m.tView=Tf(2,m,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,f,null);return t.queries!==null&&(t.queries.template(t,m),_.queries=t.queries.embeddedTView(m)),m}function UE(n,t,e,i,r,o,a,c,p,f){let m=e+xt,_=t.firstCreatePass?LE(m,t,n,i,r,o,a,c,p):t.data[m];Ki(_,!1);let M=BE(t,n,_,e);Hl()&&Yl(t,n,M,_),to(M,n);let y=Xv(M,n,M,_);return n[m]=y,Pf(n,y),oE(y,_,n),Ll(_)&&Wl(t,n,_),p!=null&&Of(n,_,f),_}function w(n,t,e,i,r,o,a,c){let p=ne(),f=et(),m=Br(f.consts,o);return UE(p,f,n,t,e,i,r,m,a,c),w}var BE=$E;function $E(n,t,e,i){return zl(!0),t[qe].createComment("")}var g_=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var qf=new q(""),ca=new q(""),Xl=(()=>{class n{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(e,i,r){this._ngZone=e,this.registry=i,rf()&&(this._destroyRef=j(Kr,{optional:!0})??void 0),Hf||(qE(r),r.addToWindow(i)),this._watchAngularEvents(),e.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){let e=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),i=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{e.unsubscribe(),i.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(e)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),e()},i)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,i,r){if(r&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,i,r),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,i,r){return[]}static \u0275fac=function(i){return new(i||n)(B(ke),B(ec),B(ca))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),ec=(()=>{class n{_applications=new Map;registerApplication(e,i){this._applications.set(e,i)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,i=!0){return Hf?.findTestabilityInTree(this,e,i)??null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function qE(n){Hf=n}var Hf,HE=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>new Bp})}return n})(),Bp=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,i=this.queues.get(e);i.has(t)&&(i.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(t)||(this.queuedEffectCount++,i.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}};function Ji(n){return!!n&&typeof n.then=="function"}function h_(n){return!!n&&typeof n.subscribe=="function"}var v_=new q("");function zf(n){return wh([{provide:v_,multi:!0,useValue:n}])}var __=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=j(v_,{optional:!0})??[];injector=j(kt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=Xt(this.injector,r);if(Ji(o))e.push(o);else if(h_(o)){let a=new Promise((c,p)=>{o.subscribe({complete:c,error:p})});e.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gf=new q("");function zE(){Su(()=>{throw new $(600,!1)})}function GE(n){return n.isBoundToModule}var WE=10;function b_(n,t){return Array.isArray(t)?t.reduce(b_,n):A(A({},n),t)}var yi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(V2);afterRenderManager=j(Ev);zonelessEnabled=j(cv);rootEffectScheduler=j(HE);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Be;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=j(Jr).hasPendingTasks.pipe(ue(e=>!e));constructor(){j(io,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=j(Dt);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=kt.NULL){Ee(10);let o=e instanceof t_;if(!this._injector.get(__).done){let y="";throw new $(405,y)}let c;o?c=e:c=this._injector.get(Jl).resolveComponentFactory(e),this.componentTypes.push(c.componentType);let p=GE(c)?void 0:this._injector.get(Gr),f=i||c.selector,m=c.create(r,[],f,p),_=m.location.nativeElement,M=m.injector.get(qf,null);return M?.registerApplication(_),m.onDestroy(()=>{this.detachView(m.hostView),al(this.components,m),M?.unregisterApplication(_)}),this._loadComponent(m),Ee(11,m),m}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ee(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Cf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new $(101,!1);let e=ce(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ce(e),this.afterTick.next(),Ee(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Hr,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<WE;)Ee(14),this.synchronizeOnce(),Ee(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)YE(i,r,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Bl(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;al(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Gf,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>al(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new $(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function al(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function YE(n,t,e,i){if(!e&&!Bl(n))return;Zv(n,t,e&&!i?0:1)}function An(n,t,e,i){let r=ne(),o=$l();if(un(r,o,t)){let a=et(),c=mf();HC(c,r,n,t,e,i)}return An}function ZE(n,t,e,i){return un(n,$l(),e)?t+ei(e)+i:Ot}function QE(n,t,e,i,r,o){let a=$h(),c=ea(n,a,e,r);return ql(2),c?t+ei(e)+i+ei(r)+o:Ot}function KE(n,t,e,i,r,o,a,c){let p=$h(),f=f_(n,p,e,r,a);return ql(3),f?t+ei(e)+i+ei(r)+o+ei(a)+c:Ot}function el(n,t){return n<<17|t<<2}function Qi(n){return n>>17&32767}function JE(n){return(n&2)==2}function XE(n,t){return n&131071|t<<17}function $p(n){return n|2}function Wr(n){return(n&131068)>>2}function Xu(n,t){return n&-131069|t<<2}function eM(n){return(n&1)===1}function qp(n){return n|1}function tM(n,t,e,i,r,o){let a=o?t.classBindings:t.styleBindings,c=Qi(a),p=Wr(a);n[i]=e;let f=!1,m;if(Array.isArray(e)){let _=e;m=_[1],(m===null||ia(_,m)>0)&&(f=!0)}else m=e;if(r)if(p!==0){let M=Qi(n[c+1]);n[i+1]=el(M,c),M!==0&&(n[M+1]=Xu(n[M+1],i)),n[c+1]=XE(n[c+1],i)}else n[i+1]=el(c,0),c!==0&&(n[c+1]=Xu(n[c+1],i)),c=i;else n[i+1]=el(p,0),c===0?c=i:n[p+1]=Xu(n[p+1],i),p=i;f&&(n[i+1]=$p(n[i+1])),Yg(n,m,i,!0),Yg(n,m,i,!1),nM(t,m,n,i,o),a=el(c,p),o?t.classBindings=a:t.styleBindings=a}function nM(n,t,e,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&ia(o,t)>=0&&(e[i+1]=qp(e[i+1]))}function Yg(n,t,e,i){let r=n[e+1],o=t===null,a=i?Qi(r):Wr(r),c=!1;for(;a!==0&&(c===!1||o);){let p=n[a],f=n[a+1];iM(p,t)&&(c=!0,n[a+1]=i?qp(f):$p(f)),a=i?Qi(f):Wr(f)}c&&(n[e+1]=i?$p(r):qp(r))}function iM(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?ia(n,t)>=0:!1}var cn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function rM(n){return n.substring(cn.key,cn.keyEnd)}function oM(n){return aM(n),y_(n,x_(n,0,cn.textEnd))}function y_(n,t){let e=cn.textEnd;return e===t?-1:(t=cn.keyEnd=sM(n,cn.key=t,e),x_(n,t,e))}function aM(n){cn.key=0,cn.keyEnd=0,cn.value=0,cn.valueEnd=0,cn.textEnd=n.length}function x_(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function sM(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function g(n,t,e){let i=ne(),r=$l();if(un(i,r,t)){let o=et(),a=mf();Uv(o,a,i,n,t,i[qe],e,!1)}return g}function Hp(n,t,e,i,r){Rf(t,n,e,r?"class":"style",i)}function At(n,t,e){return w_(n,t,e,!1),At}function X(n,t){return w_(n,t,null,!0),X}function W(n){cM(gM,lM,n,!0)}function lM(n,t){for(let e=oM(t);e>=0;e=y_(t,e))ef(n,rM(t),!0)}function w_(n,t,e,i){let r=ne(),o=et(),a=ql(2);if(o.firstUpdatePass&&S_(o,n,a,i),t!==Ot&&un(r,a,t)){let c=o.data[ai()];E_(o,c,r,r[qe],n,r[a+1]=vM(t,e),i,a)}}function cM(n,t,e,i){let r=et(),o=ql(2);r.firstUpdatePass&&S_(r,null,o,i);let a=ne();if(e!==Ot&&un(a,o,e)){let c=r.data[ai()];if(M_(c,i)&&!C_(r,o)){let p=i?c.classesWithoutHost:c.stylesWithoutHost;p!==null&&(e=rp(p,e||"")),Hp(r,c,a,e,i)}else hM(r,c,a,a[qe],a[o+1],a[o+1]=mM(n,t,e),i,o)}}function C_(n,t){return t>=n.expandoStartIndex}function S_(n,t,e,i){let r=n.data;if(r[e+1]===null){let o=r[ai()],a=C_(n,e);M_(o,i)&&t===null&&!a&&(t=!1),t=dM(r,o,t,i),tM(r,o,t,e,a,i)}}function dM(n,t,e,i){let r=l2(n),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(e=ep(null,n,t,e,i),e=ta(e,t.attrs,i),o=null);else{let a=t.directiveStylingLast;if(a===-1||n[a]!==r)if(e=ep(r,n,t,e,i),o===null){let p=uM(n,t,i);p!==void 0&&Array.isArray(p)&&(p=ep(null,n,t,p[1],i),p=ta(p,t.attrs,i),pM(n,t,i,p))}else o=fM(n,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),e}function uM(n,t,e){let i=e?t.classBindings:t.styleBindings;if(Wr(i)!==0)return n[Qi(i)]}function pM(n,t,e,i){let r=e?t.classBindings:t.styleBindings;n[Qi(r)]=i}function fM(n,t,e){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let a=n[o].hostAttrs;i=ta(i,a,e)}return ta(i,t.attrs,e)}function ep(n,t,e,i,r){let o=null,a=e.directiveEnd,c=e.directiveStylingLast;for(c===-1?c=e.directiveStart:c++;c<a&&(o=t[c],i=ta(i,o.hostAttrs,r),o!==n);)c++;return n!==null&&(e.directiveStylingLast=c),i}function ta(n,t,e){let i=e?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];typeof a=="number"?r=a:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ef(n,a,e?!0:t[++o]))}return n===void 0?null:n}function mM(n,t,e){if(e==null||e==="")return Mt;let i=[],r=aa(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&t(i,r);return i}function gM(n,t,e){let i=String(t);i!==""&&!i.includes(" ")&&ef(n,i,e)}function hM(n,t,e,i,r,o,a,c){r===Ot&&(r=Mt);let p=0,f=0,m=0<r.length?r[0]:null,_=0<o.length?o[0]:null;for(;m!==null||_!==null;){let M=p<r.length?r[p+1]:void 0,y=f<o.length?o[f+1]:void 0,D=null,V;m===_?(p+=2,f+=2,M!==y&&(D=_,V=y)):_===null||m!==null&&m<_?(p+=2,D=m):(f+=2,D=_,V=y),D!==null&&E_(n,t,e,i,D,V,a,c),m=p<r.length?r[p]:null,_=f<o.length?o[f]:null}}function E_(n,t,e,i,r,o,a,c){if(!(t.type&3))return;let p=n.data,f=p[c+1],m=eM(f)?Zg(p,t,e,r,Wr(f),a):void 0;if(!Pl(m)){Pl(o)||JE(f)&&(o=Zg(p,null,e,r,c,a));let _=Rh(ai(),e);uS(i,a,_,r,o)}}function Zg(n,t,e,i,r,o){let a=t===null,c;for(;r>0;){let p=n[r],f=Array.isArray(p),m=f?p[1]:p,_=m===null,M=e[r+1];M===Ot&&(M=_?Mt:void 0);let y=_?Hu(M,i):m===i?M:void 0;if(f&&!Pl(y)&&(y=Hu(p,i)),Pl(y)&&(c=y,a))return c;let D=n[r+1];r=a?Qi(D):Wr(D)}if(t!==null){let p=o?t.residualClasses:t.residualStyles;p!=null&&(c=Hu(p,i))}return c}function Pl(n){return n!==void 0}function vM(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=It(aa(n)))),n}function M_(n,t){return(n.flags&(t?8:16))!==0}function s(n,t,e,i){let r=ne(),o=et(),a=xt+n,c=r[qe],p=o.firstCreatePass?r_(a,o,r,t,Af,cf(),e,i):o.data[a],f=_M(o,r,p,c,t,n);r[a]=f;let m=Ll(p);return Ki(p,!0),Fv(c,f,p),!Bv(p)&&Hl()&&Yl(o,r,f,p),(Qw()===0||m)&&to(f,r),Kw(),m&&(Wl(o,r,p),Ef(o,p,r)),i!==null&&Of(r,p),s}function l(){let n=ft();df()?Uh():(n=n.parent,Ki(n,!1));let t=n;e2(t)&&t2(),Jw();let e=et();return e.firstCreatePass&&o_(e,t),t.classesWithoutHost!=null&&g2(t)&&Hp(e,t,ne(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&h2(t)&&Hp(e,t,ne(),t.stylesWithoutHost,!1),l}function b(n,t,e,i){return s(n,t,e,i),l(),b}var _M=(n,t,e,i,r,o)=>(zl(!0),Av(i,r,p2()));function bM(n,t,e,i,r){let o=t.consts,a=Br(o,i),c=Kl(t,n,8,"ng-container",a);a!==null&&Op(c,a,!0);let p=Br(o,r);return cf()&&Uf(t,e,c,p,Af),c.mergedAttrs=$r(c.mergedAttrs,c.attrs),t.queries!==null&&t.queries.elementStart(t,c),c}function gt(n,t,e){let i=ne(),r=et(),o=n+xt,a=r.firstCreatePass?bM(o,r,i,t,e):r.data[o];Ki(a,!0);let c=yM(r,i,a,n);return i[o]=c,Hl()&&Yl(r,i,c,a),to(c,i),Ll(a)&&(Wl(r,i,a),Ef(r,a,i)),e!=null&&Of(i,a),gt}function ht(){let n=ft(),t=et();return df()?Uh():(n=n.parent,Ki(n,!1)),t.firstCreatePass&&(gf(t,n),of(n)&&t.queries.elementEnd(n)),ht}var yM=(n,t,e,i)=>(zl(!0),TC(t[qe],""));function P(){return ne()}var ji=void 0;function xM(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var wM=["en",[["a","p"],["AM","PM"],ji],[["AM","PM"],ji,ji],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ji,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ji,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ji,"{1} 'at' {0}",ji],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",xM],tp={};function zt(n){let t=CM(n),e=Qg(t);if(e)return e;let i=t.split("-")[0];if(e=Qg(i),e)return e;if(i==="en")return wM;throw new $(701,!1)}function Qg(n){return n in tp||(tp[n]=bt.ng&&bt.ng.common&&bt.ng.common.locales&&bt.ng.common.locales[n]),tp[n]}var Ve=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ve||{});function CM(n){return n.toLowerCase().replace(/_/g,"-")}var Ol="en-US";var SM=Ol;function EM(n){typeof n=="string"&&(SM=n.toLowerCase().replace(/_/g,"-"))}function Kg(n,t,e){return function i(r){if(r===Function)return e;let o=Zr(n)?Tn(n.index,t):t;Lf(o,5);let a=t[Tt],c=Jg(t,a,e,r),p=i.__ngNextListenerFn__;for(;p;)c=Jg(t,a,p,r)&&c,p=p.__ngNextListenerFn__;return c}}function Jg(n,t,e,i){let r=ce(null);try{return Ee(6,t,e),e(i)!==!1}catch(o){return MM(n,o),!1}finally{Ee(7,t,e),ce(r)}}function MM(n,t){let e=n[Lr],i=e?e.get(kn,null):null;i&&i.handleError(t)}function Xg(n,t,e,i,r,o){let a=t[e],c=t[oe],f=c.data[e].outputs[i],m=a[f],_=c.firstCreatePass?lf(c):null,M=sf(t),y=m.subscribe(o),D=M.length;M.push(o,y),_&&_.push(r,n.index,D,-(D+1))}function x(n,t,e,i){let r=ne(),o=et(),a=ft();return I_(o,r,r[qe],a,n,t,i),x}function IM(n,t,e,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===e&&r[o+1]===i){let c=t[fl],p=r[o+2];return c.length>p?c[p]:null}typeof a=="string"&&(o+=2)}return null}function I_(n,t,e,i,r,o,a){let c=Ll(i),f=n.firstCreatePass?lf(n):null,m=sf(t),_=!0;if(i.type&3||a){let M=On(i,t),y=a?a(M):M,D=m.length,V=a?H=>a(Dn(H[i.index])):i.index,U=null;if(!a&&c&&(U=IM(n,t,r,i.index)),U!==null){let H=U.__ngLastListenerFn__||U;H.__ngNextListenerFn__=o,U.__ngLastListenerFn__=o,_=!1}else{o=Kg(i,t,o),rC(t,y,r,o);let H=e.listen(y,r,o);m.push(o,H),f&&f.push(r,V,D,D+1)}}else o=Kg(i,t,o);if(_){let M=i.outputs?.[r],y=i.hostDirectiveOutputs?.[r];if(y&&y.length)for(let D=0;D<y.length;D+=2){let V=y[D],U=y[D+1];Xg(i,t,V,U,r,o)}if(M&&M.length)for(let D of M)Xg(i,t,D,r,r,o)}}function h(n=1){return d2(n)}function D_(n,t,e,i){fE(n,t,e,i)}function T_(n){let t=ne(),e=et(),i=qh();uf(i+1);let r=Bf(e,i);if(n.dirty&&zw(t)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=vE(t,i);n.reset(o,U2),n.notifyOnChanges()}return!0}return!1}function k_(){return uE(ne(),qh())}function Rn(n){let t=i2();return Ul(t,xt+n)}function d(n,t=""){let e=ne(),i=et(),r=n+xt,o=i.firstCreatePass?Kl(i,r,1,t,null):i.data[r],a=DM(i,e,o,t,n);e[r]=a,Hl()&&Yl(i,e,a,o),Ki(o,!1)}var DM=(n,t,e,i,r)=>(zl(!0),IC(t[qe],i));function k(n){return E("",n,""),k}function E(n,t,e){let i=ne(),r=ZE(i,n,t,e);return r!==Ot&&Yf(i,ai(),r),E}function be(n,t,e,i,r){let o=ne(),a=QE(o,n,t,e,i,r);return a!==Ot&&Yf(o,ai(),a),be}function Wf(n,t,e,i,r,o,a){let c=ne(),p=KE(c,n,t,e,i,r,o,a);return p!==Ot&&Yf(c,ai(),p),Wf}function Yf(n,t,e){let i=Rh(t,n);DC(n[qe],i,e)}function R(n,t,e){gv(t)&&(t=t());let i=ne(),r=$l();if(un(i,r,t)){let o=et(),a=mf();Uv(o,a,i,n,t,i[qe],e,!1)}return R}function N(n,t){let e=gv(n);return e&&n.set(t),e}function F(n,t){let e=ne(),i=et(),r=ft();return I_(i,e,e[qe],r,n,t),F}function TM(n,t,e){let i=et();if(i.firstCreatePass){let r=In(n);zp(e,i.data,i.blueprint,r,!0),zp(t,i.data,i.blueprint,r,!1)}}function zp(n,t,e,i,r){if(n=yt(n),Array.isArray(n))for(let o=0;o<n.length;o++)zp(n[o],t,e,i,r);else{let o=et(),a=ne(),c=ft(),p=jr(n)?n:yt(n.provide),f=Mh(n),m=c.providerIndexes&1048575,_=c.directiveStart,M=c.providerIndexes>>20;if(jr(n)||!n.multi){let y=new Yi(f,r,O),D=ip(p,t,r?m:m+M,_);D===-1?(hp(yl(c,a),o,p),np(o,n,t.length),t.push(p),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(y),a.push(y)):(e[D]=y,a[D]=y)}else{let y=ip(p,t,m+M,_),D=ip(p,t,m,m+M),V=y>=0&&e[y],U=D>=0&&e[D];if(r&&!U||!r&&!V){hp(yl(c,a),o,p);let H=OM(r?PM:kM,e.length,r,i,f);!r&&U&&(e[D].providerFactory=H),np(o,n,t.length,0),t.push(p),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(H),a.push(H)}else{let H=P_(e[r?D:y],f,!r&&i);np(o,n,y>-1?y:D,H)}!r&&i&&U&&e[D].componentProviders++}}}function np(n,t,e,i){let r=jr(t),o=Pw(t);if(r||o){let p=(o?yt(t.useClass):t).prototype.ngOnDestroy;if(p){let f=n.destroyHooks||(n.destroyHooks=[]);if(!r&&t.multi){let m=f.indexOf(e);m===-1?f.push(e,[i,p]):f[m+1].push(i,p)}else f.push(e,p)}}}function P_(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function ip(n,t,e,i){for(let r=e;r<i;r++)if(t[r]===n)return r;return-1}function kM(n,t,e,i,r){return Gp(this.multi,[])}function PM(n,t,e,i,r){let o=this.multi,a;if(this.providerFactory){let c=this.providerFactory.componentProviders,p=Jo(i,i[oe],this.providerFactory.index,r);a=p.slice(0,c),Gp(o,a);for(let f=c;f<p.length;f++)a.push(p[f])}else a=[],Gp(o,a);return a}function Gp(n,t){for(let e=0;e<n.length;e++){let i=n[e];t.push(i())}return t}function OM(n,t,e,i,r){let o=new Yi(n,e,O);return o.multi=[],o.index=t,o.componentProviders=0,P_(o,r,i&&!e),o}function en(n,t=[]){return e=>{e.providersResolver=(i,r)=>TM(i,r?r(n):n,t)}}function Zf(n,t,e){let i=xi()+n,r=ne();return r[i]===Ot?ro(r,i,e?t.call(e):t()):p_(r,i)}function Qf(n,t,e,i){return O_(ne(),xi(),n,t,e,i)}function si(n,t,e,i,r){return A_(ne(),xi(),n,t,e,i,r)}function Fn(n,t,e,i,r,o,a){return RM(ne(),xi(),n,t,e,i,r,o,a)}function oo(n,t,e,i,r,o,a,c){let p=xi()+n,f=ne(),m=m_(f,p,e,i,r,o);return un(f,p+4,a)||m?ro(f,p+5,c?t.call(c,e,i,r,o,a):t(e,i,r,o,a)):p_(f,p+5)}function tc(n,t){let e=n[t];return e===Ot?void 0:e}function O_(n,t,e,i,r,o){let a=t+e;return un(n,a,r)?ro(n,a+1,o?i.call(o,r):i(r)):tc(n,a+1)}function A_(n,t,e,i,r,o,a){let c=t+e;return ea(n,c,r,o)?ro(n,c+2,a?i.call(a,r,o):i(r,o)):tc(n,c+2)}function AM(n,t,e,i,r,o,a,c){let p=t+e;return f_(n,p,r,o,a)?ro(n,p+3,c?i.call(c,r,o,a):i(r,o,a)):tc(n,p+3)}function RM(n,t,e,i,r,o,a,c,p){let f=t+e;return m_(n,f,r,o,a,c)?ro(n,f+4,p?i.call(p,r,o,a,c):i(r,o,a,c)):tc(n,f+4)}function tt(n,t){let e=et(),i,r=n+xt;e.firstCreatePass?(i=FM(t,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=Bi(i.type,!0)),a,c=Et(O);try{let p=bl(!1),f=o();return bl(p),Hw(e,ne(),r,f),f}finally{Et(c)}}function FM(n,t){if(t)for(let e=t.length-1;e>=0;e--){let i=t[e];if(n===i.name)return i}}function Rt(n,t,e){let i=n+xt,r=ne(),o=Ul(r,i);return Kf(r,i)?O_(r,xi(),t,o.transform,e,o):o.transform(e)}function nc(n,t,e,i){let r=n+xt,o=ne(),a=Ul(o,r);return Kf(o,r)?A_(o,xi(),t,a.transform,e,i,a):a.transform(e,i)}function R_(n,t,e,i,r){let o=n+xt,a=ne(),c=Ul(a,o);return Kf(a,o)?AM(a,xi(),t,c.transform,e,i,r,c):c.transform(e,i,r)}function Kf(n,t){return n[oe].data[t].pure}function Nn(n,t){return Ql(n,t)}var tl=null;function NM(n){tl!==null&&(n.defaultEncapsulation!==tl.defaultEncapsulation||n.preserveWhitespaces!==tl.preserveWhitespaces)||(tl=n)}var Wp=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},F_=(()=>{class n{compileModuleSync(e){return new kl(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=xh(e),o=Pv(r.declarations).reduce((a,c)=>{let p=qi(c);return p&&a.push(new zr(p)),a},[]);return new Wp(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),VM=new q("");function jM(n,t,e){let i=new kl(e);return Promise.resolve(i)}function eh(n){for(let t=n.length-1;t>=0;t--)if(n[t]!==void 0)return n[t]}var LM=(()=>{class n{zone=j(ke);changeDetectionScheduler=j(qr);applicationRef=j(yi);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UM({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new ke(G(A({},N_()),{scheduleInRootZone:e})),[{provide:ke,useFactory:n},{provide:Zo,multi:!0,useFactory:()=>{let i=j(LM,{optional:!0});return()=>i.initialize()}},{provide:Zo,multi:!0,useFactory:()=>{let i=j(BM);return()=>{i.initialize()}}},t===!0?{provide:dv,useValue:!0}:[],{provide:uv,useValue:e??lv}]}function N_(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var BM=(()=>{class n{subscription=new Oe;initialized=!1;zone=j(ke);pendingTasks=j(Jr);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ke.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ke.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $M=(()=>{class n{appRef=j(yi);taskService=j(Jr);ngZone=j(ke);zonelessEnabled=j(cv);tracing=j(io,{optional:!0});disableScheduling=j(dv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Oe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(wl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(uv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Cl||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?Pg:pv;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(wl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Pg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qM(){return typeof $localize<"u"&&$localize.locale||Ol}var da=new q("",{providedIn:"root",factory:()=>j(da,te.Optional|te.SkipSelf)||qM()});var Al=new q(""),HM=new q("");function Ho(n){return!n.moduleRef}function zM(n){let t=Ho(n)?n.r3Injector:n.moduleRef.injector,e=t.get(ke);return e.run(()=>{Ho(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=t.get(kn,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:o=>{i.handleError(o)}})}),Ho(n)){let o=()=>t.destroy(),a=n.platformInjector.get(Al);a.add(o),t.onDestroy(()=>{r.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(Al);a.add(o),n.moduleRef.onDestroy(()=>{al(n.allPlatformModules,n.moduleRef),r.unsubscribe(),a.delete(o)})}return WM(i,e,()=>{let o=t.get(__);return o.runInitializers(),o.donePromise.then(()=>{let a=t.get(da,Ol);if(EM(a||Ol),!t.get(HM,!0))return Ho(n)?t.get(yi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ho(n)){let p=t.get(yi);return n.rootComponent!==void 0&&p.bootstrap(n.rootComponent),p}else return GM(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function GM(n,t){let e=n.injector.get(yi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new $(-403,!1);t.push(n)}function WM(n,t,e){try{let i=e();return Ji(i)?i.catch(r=>{throw t.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>n.handleError(i)),i}}var V_=(()=>{class n{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(e){this._injector=e}bootstrapModuleFactory(e,i){let r=i?.scheduleInRootZone,o=()=>N2(i?.ngZone,G(A({},N_({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:r})),a=i?.ignoreChangesOutsideZone,c=[UM({ngZoneFactory:o,ignoreChangesOutsideZone:a}),{provide:qr,useExisting:$M}],p=SE(e.moduleType,this.injector,c);return zM({moduleRef:p,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(e,i=[]){let r=b_({},i);return jM(this.injector,r,e).then(o=>this.bootstrapModuleFactory(o,r))}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let e=this._injector.get(Al,null);e&&(e.forEach(i=>i()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(i){return new(i||n)(B(kt))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Yo=null,j_=new q("");function YM(n){if(Yo&&!Yo.get(j_,!1))throw new $(400,!1);zE(),Yo=n;let t=n.get(V_);return KM(n),t}function Jf(n,t,e=[]){let i=`Platform: ${t}`,r=new q(i);return(o=[])=>{let a=L_();if(!a||a.injector.get(j_,!1)){let c=[...e,...o,{provide:r,useValue:!0}];n?n(c):YM(ZM(c,i))}return QM(r)}}function ZM(n=[],t){return kt.create({name:t,providers:[{provide:Vl,useValue:"platform"},{provide:Al,useValue:new Set([()=>Yo=null])},...n]})}function QM(n){let t=L_();if(!t)throw new $(401,!1);return t}function L_(){return Yo?.get(V_)??null}function KM(n){let t=n.get(xf,null);Xt(n,()=>{t?.forEach(e=>e())})}var Ci=(()=>{class n{static __NG_ELEMENT_ID__=JM}return n})();function JM(n){return XM(ft(),ne(),(n&16)===16)}function XM(n,t,e){if(Zr(n)&&!e){let i=Tn(n.index,t);return new Xo(i,i)}else if(n.type&175){let i=t[Mn];return new Xo(i,t)}return null}var Yp=class{constructor(){}supports(t){return u_(t)}create(t){return new Zp(t)}},eI=(n,t)=>t,Zp=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||eI}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let a=!i||e&&e.currentIndex<th(i,r,o)?e:i,c=th(a,r,o),p=a.currentIndex;if(a===i)r--,i=i._nextRemoved;else if(e=e._next,a.previousIndex==null)r++;else{o||(o=[]);let f=c-r,m=p-r;if(f!=m){for(let M=0;M<f;M++){let y=M<o.length?o[M]:o[M]=0,D=y+M;m<=D&&D<f&&(o[M]=y+1)}let _=a.previousIndex;o[_]=m-f}}c!==p&&t(a,c,p)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!u_(t))throw new $(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,i=!1,r,o,a;if(Array.isArray(t)){this.length=t.length;for(let c=0;c<this.length;c++)o=t[c],a=this._trackByFn(c,o),e===null||!Object.is(e.trackById,a)?(e=this._mismatch(e,o,a,c),i=!0):(i&&(e=this._verifyReinsertion(e,o,a,c)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,VE(t,c=>{a=this._trackByFn(r,c),e===null||!Object.is(e.trackById,a)?(e=this._mismatch(e,c,a,r),i=!0):(i&&(e=this._verifyReinsertion(e,c,a,r)),Object.is(e.item,c)||this._addIdentityChange(e,c)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new Qp(e,i),o,r)),t}_verifyReinsertion(t,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,i),this._addToMoves(t,i),t}_moveAfter(t,e,i){return this._unlink(t),this._insertAfter(t,e,i),this._addToMoves(t,i),t}_addAfter(t,e,i){return this._insertAfter(t,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,i){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Rl),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,i=t._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Rl),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Qp=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},Kp=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let e=t._prevDup,i=t._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},Rl=class{map=new Map;put(t){let e=t.trackById,i=this.map.get(e);i||(i=new Kp,this.map.set(e,i)),i.add(t)}get(t,e){let i=t,r=this.map.get(i);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function th(n,t,e){let i=n.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+t+r}function nh(){return new Xf([new Yp])}var Xf=(()=>{class n{factories;static \u0275prov=L({token:n,providedIn:"root",factory:nh});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new n(e)}static extend(e){return{provide:n,useFactory:i=>n.create(e,i||nh()),deps:[[n,new yw,new bw]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new $(901,!1)}}return n})();var U_=Jf(null,"core",[]),B_=(()=>{class n{constructor(e){}static \u0275fac=function(i){return new(i||n)(B(yi))};static \u0275mod=Ye({type:n});static \u0275inj=We({})}return n})();function Si(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Vn(n){return Iu(n)}function ao(n,t){return Cu(n,t?.equal)}var ih=class{[Qt];constructor(t){this[Qt]=t}destroy(){this[Qt].destroy()}};function $_(n){let t=qi(n);if(!t)return null;let e=new zr(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var rt=new q("");var z_=null;function Gt(){return z_}function em(n){z_??=n}var ua=class{},pa=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>j(G_),providedIn:"platform"})}return n})(),tm=new q(""),G_=(()=>{class n extends pa{_location;_history;_doc=j(rt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gt().getBaseHref(this._doc)}onPopState(e){let i=Gt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=Gt().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ic(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function q_(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function gn(n){return n&&n[0]!=="?"?`?${n}`:n}var hn=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>j(oc),providedIn:"root"})}return n})(),rc=new q(""),oc=(()=>{class n extends hn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??j(rt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ic(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+gn(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let a=this.prepareExternalUrl(r+gn(o));this._platformLocation.pushState(e,i,a)}replaceState(e,i,r,o){let a=this.prepareExternalUrl(r+gn(o));this._platformLocation.replaceState(e,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(B(pa),B(rc,8))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ei=(()=>{class n{_subject=new Be;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=iI(q_(H_(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+gn(i))}normalize(e){return n.stripTrailingSlash(nI(this._basePath,H_(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+gn(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+gn(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=gn;static joinWithSlash=ic;static stripTrailingSlash=q_;static \u0275fac=function(i){return new(i||n)(B(hn))};static \u0275prov=L({token:n,factory:()=>tI(),providedIn:"root"})}return n})();function tI(){return new Ei(B(hn))}function nI(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function H_(n){return n.replace(/\/index.html$/,"")}function iI(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var lm=(()=>{class n extends hn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(e){let i=ic(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,o){let a=this.prepareExternalUrl(r+gn(o))||this._platformLocation.pathname;this._platformLocation.pushState(e,i,a)}replaceState(e,i,r,o){let a=this.prepareExternalUrl(r+gn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(e,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||n)(B(pa),B(rc,8))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();var cm=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(cm||{});var vt=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(vt||{}),xe=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(xe||{}),Ft=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ft||{}),Nt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function J_(n){return zt(n)[Ve.LocaleId]}function X_(n,t,e){let i=zt(n),r=[i[Ve.DayPeriodsFormat],i[Ve.DayPeriodsStandalone]],o=tn(r,t);return tn(o,e)}function e1(n,t,e){let i=zt(n),r=[i[Ve.DaysFormat],i[Ve.DaysStandalone]],o=tn(r,t);return tn(o,e)}function t1(n,t,e){let i=zt(n),r=[i[Ve.MonthsFormat],i[Ve.MonthsStandalone]],o=tn(r,t);return tn(o,e)}function n1(n,t){let i=zt(n)[Ve.Eras];return tn(i,t)}function fa(n,t){let e=zt(n);return tn(e[Ve.DateFormat],t)}function ma(n,t){let e=zt(n);return tn(e[Ve.TimeFormat],t)}function ga(n,t){let i=zt(n)[Ve.DateTimeFormat];return tn(i,t)}function jn(n,t){let e=zt(n),i=e[Ve.NumberSymbols][t];if(typeof i>"u"){if(t===Nt.CurrencyDecimal)return e[Ve.NumberSymbols][Nt.Decimal];if(t===Nt.CurrencyGroup)return e[Ve.NumberSymbols][Nt.Group]}return i}function i1(n,t){return zt(n)[Ve.NumberFormats][t]}function r1(n){if(!n[Ve.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Ve.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function o1(n){let t=zt(n);return r1(t),(t[Ve.ExtraData][2]||[]).map(i=>typeof i=="string"?nm(i):[nm(i[0]),nm(i[1])])}function a1(n,t,e){let i=zt(n);r1(i);let r=[i[Ve.ExtraData][0],i[Ve.ExtraData][1]],o=tn(r,t)||[];return tn(o,e)||[]}function tn(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function nm(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var rI=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ac={},oI=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function s1(n,t,e,i){let r=mI(n);t=li(e,t)||t;let a=[],c;for(;t;)if(c=oI.exec(t),c){a=a.concat(c.slice(1));let m=a.pop();if(!m)break;t=m}else{a.push(t);break}let p=r.getTimezoneOffset();i&&(p=c1(i,p),r=fI(r,i));let f="";return a.forEach(m=>{let _=uI(m);f+=_?_(r,e,p):m==="''"?"'":m.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function uc(n,t,e){let i=new Date(0);return i.setFullYear(n,t,e),i.setHours(0,0,0),i}function li(n,t){let e=J_(n);if(ac[e]??={},ac[e][t])return ac[e][t];let i="";switch(t){case"shortDate":i=fa(n,Ft.Short);break;case"mediumDate":i=fa(n,Ft.Medium);break;case"longDate":i=fa(n,Ft.Long);break;case"fullDate":i=fa(n,Ft.Full);break;case"shortTime":i=ma(n,Ft.Short);break;case"mediumTime":i=ma(n,Ft.Medium);break;case"longTime":i=ma(n,Ft.Long);break;case"fullTime":i=ma(n,Ft.Full);break;case"short":let r=li(n,"shortTime"),o=li(n,"shortDate");i=sc(ga(n,Ft.Short),[r,o]);break;case"medium":let a=li(n,"mediumTime"),c=li(n,"mediumDate");i=sc(ga(n,Ft.Medium),[a,c]);break;case"long":let p=li(n,"longTime"),f=li(n,"longDate");i=sc(ga(n,Ft.Long),[p,f]);break;case"full":let m=li(n,"fullTime"),_=li(n,"fullDate");i=sc(ga(n,Ft.Full),[m,_]);break}return i&&(ac[e][t]=i),i}function sc(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,i){return t!=null&&i in t?t[i]:e})),n}function vn(n,t,e="-",i,r){let o="";(n<0||r&&n<=0)&&(r?n=-n+1:(n=-n,o=e));let a=String(n);for(;a.length<t;)a="0"+a;return i&&(a=a.slice(a.length-t)),o+a}function aI(n,t){return vn(n,3).substring(0,t)}function Ze(n,t,e=0,i=!1,r=!1){return function(o,a){let c=sI(n,o);if((e>0||c>-e)&&(c+=e),n===3)c===0&&e===-12&&(c=12);else if(n===6)return aI(c,t);let p=jn(a,Nt.MinusSign);return vn(c,t,p,i,r)}}function sI(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Me(n,t,e=vt.Format,i=!1){return function(r,o){return lI(r,o,n,t,e,i)}}function lI(n,t,e,i,r,o){switch(e){case 2:return t1(t,r,i)[n.getMonth()];case 1:return e1(t,r,i)[n.getDay()];case 0:let a=n.getHours(),c=n.getMinutes();if(o){let f=o1(t),m=a1(t,r,i),_=f.findIndex(M=>{if(Array.isArray(M)){let[y,D]=M,V=a>=y.hours&&c>=y.minutes,U=a<D.hours||a===D.hours&&c<D.minutes;if(y.hours<D.hours){if(V&&U)return!0}else if(V||U)return!0}else if(M.hours===a&&M.minutes===c)return!0;return!1});if(_!==-1)return m[_]}return X_(t,r,i)[a<12?0:1];case 3:return n1(t,i)[n.getFullYear()<=0?0:1];default:let p=e;throw new Error(`unexpected translation type ${p}`)}}function lc(n){return function(t,e,i){let r=-1*i,o=jn(e,Nt.MinusSign),a=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case 0:return(r>=0?"+":"")+vn(a,2,o)+vn(Math.abs(r%60),2,o);case 1:return"GMT"+(r>=0?"+":"")+vn(a,1,o);case 2:return"GMT"+(r>=0?"+":"")+vn(a,2,o)+":"+vn(Math.abs(r%60),2,o);case 3:return i===0?"Z":(r>=0?"+":"")+vn(a,2,o)+":"+vn(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var cI=0,dc=4;function dI(n){let t=uc(n,cI,1).getDay();return uc(n,0,1+(t<=dc?dc:dc+7)-t)}function l1(n){let t=n.getDay(),e=t===0?-3:dc-t;return uc(n.getFullYear(),n.getMonth(),n.getDate()+e)}function im(n,t=!1){return function(e,i){let r;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,a=e.getDate();r=1+Math.floor((a+o)/7)}else{let o=l1(e),a=dI(o.getFullYear()),c=o.getTime()-a.getTime();r=1+Math.round(c/6048e5)}return vn(r,n,jn(i,Nt.MinusSign))}}function cc(n,t=!1){return function(e,i){let o=l1(e).getFullYear();return vn(o,n,jn(i,Nt.MinusSign),t)}}var rm={};function uI(n){if(rm[n])return rm[n];let t;switch(n){case"G":case"GG":case"GGG":t=Me(3,xe.Abbreviated);break;case"GGGG":t=Me(3,xe.Wide);break;case"GGGGG":t=Me(3,xe.Narrow);break;case"y":t=Ze(0,1,0,!1,!0);break;case"yy":t=Ze(0,2,0,!0,!0);break;case"yyy":t=Ze(0,3,0,!1,!0);break;case"yyyy":t=Ze(0,4,0,!1,!0);break;case"Y":t=cc(1);break;case"YY":t=cc(2,!0);break;case"YYY":t=cc(3);break;case"YYYY":t=cc(4);break;case"M":case"L":t=Ze(1,1,1);break;case"MM":case"LL":t=Ze(1,2,1);break;case"MMM":t=Me(2,xe.Abbreviated);break;case"MMMM":t=Me(2,xe.Wide);break;case"MMMMM":t=Me(2,xe.Narrow);break;case"LLL":t=Me(2,xe.Abbreviated,vt.Standalone);break;case"LLLL":t=Me(2,xe.Wide,vt.Standalone);break;case"LLLLL":t=Me(2,xe.Narrow,vt.Standalone);break;case"w":t=im(1);break;case"ww":t=im(2);break;case"W":t=im(1,!0);break;case"d":t=Ze(2,1);break;case"dd":t=Ze(2,2);break;case"c":case"cc":t=Ze(7,1);break;case"ccc":t=Me(1,xe.Abbreviated,vt.Standalone);break;case"cccc":t=Me(1,xe.Wide,vt.Standalone);break;case"ccccc":t=Me(1,xe.Narrow,vt.Standalone);break;case"cccccc":t=Me(1,xe.Short,vt.Standalone);break;case"E":case"EE":case"EEE":t=Me(1,xe.Abbreviated);break;case"EEEE":t=Me(1,xe.Wide);break;case"EEEEE":t=Me(1,xe.Narrow);break;case"EEEEEE":t=Me(1,xe.Short);break;case"a":case"aa":case"aaa":t=Me(0,xe.Abbreviated);break;case"aaaa":t=Me(0,xe.Wide);break;case"aaaaa":t=Me(0,xe.Narrow);break;case"b":case"bb":case"bbb":t=Me(0,xe.Abbreviated,vt.Standalone,!0);break;case"bbbb":t=Me(0,xe.Wide,vt.Standalone,!0);break;case"bbbbb":t=Me(0,xe.Narrow,vt.Standalone,!0);break;case"B":case"BB":case"BBB":t=Me(0,xe.Abbreviated,vt.Format,!0);break;case"BBBB":t=Me(0,xe.Wide,vt.Format,!0);break;case"BBBBB":t=Me(0,xe.Narrow,vt.Format,!0);break;case"h":t=Ze(3,1,-12);break;case"hh":t=Ze(3,2,-12);break;case"H":t=Ze(3,1);break;case"HH":t=Ze(3,2);break;case"m":t=Ze(4,1);break;case"mm":t=Ze(4,2);break;case"s":t=Ze(5,1);break;case"ss":t=Ze(5,2);break;case"S":t=Ze(6,1);break;case"SS":t=Ze(6,2);break;case"SSS":t=Ze(6,3);break;case"Z":case"ZZ":case"ZZZ":t=lc(0);break;case"ZZZZZ":t=lc(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=lc(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=lc(2);break;default:return null}return rm[n]=t,t}function c1(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function pI(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function fI(n,t,e){let r=n.getTimezoneOffset(),o=c1(t,r);return pI(n,-1*(o-r))}function mI(n){if(W_(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[r,o=1,a=1]=n.split("-").map(c=>+c);return uc(r,o-1,a)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let i;if(i=n.match(rI))return gI(i)}let t=new Date(n);if(!W_(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function gI(n){let t=new Date(0),e=0,i=0,r=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let a=Number(n[4]||0)-e,c=Number(n[5]||0)-i,p=Number(n[6]||0),f=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,a,c,p,f),t}function W_(n){return n instanceof Date&&!isNaN(n.valueOf())}var hI=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Y_=22,pc=".",ha="0",vI=";",_I=",",om="#";function bI(n,t,e,i,r,o,a=!1){let c="",p=!1;if(!isFinite(n))c=jn(e,Nt.Infinity);else{let f=wI(n);a&&(f=xI(f));let m=t.minInt,_=t.minFrac,M=t.maxFrac;if(o){let Ce=o.match(hI);if(Ce===null)throw new Error(`${o} is not a valid digit info`);let Fe=Ce[1],z=Ce[3],ye=Ce[5];Fe!=null&&(m=am(Fe)),z!=null&&(_=am(z)),ye!=null?M=am(ye):z!=null&&_>M&&(M=_)}CI(f,_,M);let y=f.digits,D=f.integerLen,V=f.exponent,U=[];for(p=y.every(Ce=>!Ce);D<m;D++)y.unshift(0);for(;D<0;D++)y.unshift(0);D>0?U=y.splice(D,y.length):(U=y,y=[0]);let H=[];for(y.length>=t.lgSize&&H.unshift(y.splice(-t.lgSize,y.length).join(""));y.length>t.gSize;)H.unshift(y.splice(-t.gSize,y.length).join(""));y.length&&H.unshift(y.join("")),c=H.join(jn(e,i)),U.length&&(c+=jn(e,r)+U.join("")),V&&(c+=jn(e,Nt.Exponential)+"+"+V)}return n<0&&!p?c=t.negPre+c+t.negSuf:c=t.posPre+c+t.posSuf,c}function d1(n,t,e){let i=i1(t,cm.Decimal),r=yI(i,jn(t,Nt.MinusSign));return bI(n,r,t,Nt.Group,Nt.Decimal,e)}function yI(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(vI),r=i[0],o=i[1],a=r.indexOf(pc)!==-1?r.split(pc):[r.substring(0,r.lastIndexOf(ha)+1),r.substring(r.lastIndexOf(ha)+1)],c=a[0],p=a[1]||"";e.posPre=c.substring(0,c.indexOf(om));for(let m=0;m<p.length;m++){let _=p.charAt(m);_===ha?e.minFrac=e.maxFrac=m+1:_===om?e.maxFrac=m+1:e.posSuf+=_}let f=c.split(_I);if(e.gSize=f[1]?f[1].length:0,e.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let m=r.length-e.posPre.length-e.posSuf.length,_=o.indexOf(om);e.negPre=o.substring(0,_).replace(/'/g,""),e.negSuf=o.slice(_+m).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function xI(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function wI(n){let t=Math.abs(n)+"",e=0,i,r,o,a,c;for((r=t.indexOf(pc))>-1&&(t=t.replace(pc,"")),(o=t.search(/e/i))>0?(r<0&&(r=o),r+=+t.slice(o+1),t=t.substring(0,o)):r<0&&(r=t.length),o=0;t.charAt(o)===ha;o++);if(o===(c=t.length))i=[0],r=1;else{for(c--;t.charAt(c)===ha;)c--;for(r-=o,i=[],a=0;o<=c;o++,a++)i[a]=Number(t.charAt(o))}return r>Y_&&(i=i.splice(0,Y_-1),e=r-1,r=1),{digits:i,exponent:e,integerLen:r}}function CI(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let i=n.digits,r=i.length-n.integerLen,o=Math.min(Math.max(t,r),e),a=o+n.integerLen,c=i[a];if(a>0){i.splice(Math.max(n.integerLen,a));for(let _=a;_<i.length;_++)i[_]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let _=1;_<a;_++)i[_]=0}if(c>=5)if(a-1<0){for(let _=0;_>a;_--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[a-1]++;for(;r<Math.max(0,o);r++)i.push(0);let p=o!==0,f=t+n.integerLen,m=i.reduceRight(function(_,M,y,D){return M=M+_,D[y]=M<10?M:M-10,p&&(D[y]===0&&y>=f?D.pop():p=!1),M>=10?1:0},0);m&&(i.unshift(m),n.integerLen++)}function am(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}var sm=/\s+/,Z_=[],He=(()=>{class n{_ngEl;_renderer;initialClasses=Z_;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(sm):Z_}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(sm):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(sm).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(O(wt),O(mn))};static \u0275dir=_e({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var fc=class{$implicit;ngForOf;index;count;constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ve=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,a)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new fc(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),Q_(c,r)}});for(let r=0,o=i.length;r<o;r++){let c=i.get(r).context;c.index=r,c.count=o,c.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);Q_(o,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(O(wi),O(Zi),O(Xf))};static \u0275dir=_e({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Q_(n,t){n.context.$implicit=t.item}var le=(()=>{class n{_viewContainer;_context=new mc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){K_(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){K_(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||n)(O(wi),O(Zi))};static \u0275dir=_e({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),mc=class{$implicit=null;ngIf=null};function K_(n,t){if(n&&!n.createEmbeddedView)throw new $(2020,!1)}function gc(n,t){return new $(2100,!1)}var SI=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,_n=(()=>{class n{transform(e){if(e==null)return null;if(typeof e!="string")throw gc(n,e);return e.replace(SI,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=la({name:"titlecase",type:n,pure:!0})}return n})();var EI="mediumDate",u1=new q(""),p1=new q(""),dm=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,i,r){this.locale=e,this.defaultTimezone=i,this.defaultOptions=r}transform(e,i,r,o){if(e==null||e===""||e!==e)return null;try{let a=i??this.defaultOptions?.dateFormat??EI,c=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return s1(e,a,o||this.locale,c)}catch(a){throw gc(n,a.message)}}static \u0275fac=function(i){return new(i||n)(O(da,16),O(u1,24),O(p1,24))};static \u0275pipe=la({name:"date",type:n,pure:!0})}return n})();var um=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,i,r){if(!MI(e))return null;r||=this._locale;try{let o=II(e);return d1(o,r,i)}catch(o){throw gc(n,o.message)}}static \u0275fac=function(i){return new(i||n)(O(da,16))};static \u0275pipe=la({name:"number",type:n,pure:!0})}return n})();function MI(n){return!(n==null||n===""||n!==n)}function II(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var pm=(()=>{class n{transform(e,i,r){if(e==null)return null;if(!(typeof e=="string"||Array.isArray(e)))throw gc(n,e);return e.slice(i,r)}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=la({name:"slice",type:n,pure:!1})}return n})();var Xi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ye({type:n});static \u0275inj=We({})}return n})();function fm(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var mm="browser",f1="server";function hc(n){return n===f1}var va=class{};var m1=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>new gm(j(rt),window)})}return n})(),gm=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=TI(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function TI(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let a=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(a)return a}r=i.nextNode()}}return null}var bc=new q(""),bm=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r,o){return this._findPluginFor(i).addEventListener(e,i,r,o)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new $(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||n)(B(bc),B(ke))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),_a=class{_doc;constructor(t){this._doc=t}manager},vc="ng-app-id";function g1(n){for(let t of n)t.remove()}function h1(n,t){let e=t.createElement("style");return e.textContent=n,e}function kI(n,t,e,i){let r=n.head?.querySelectorAll(`style[${vc}="${t}"],link[${vc}="${t}"]`);if(r)for(let o of r)o.removeAttribute(vc),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function vm(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var ym=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.isServer=hc(o),kI(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,h1);i?.forEach(r=>this.addUsage(r,this.external,vm))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let o=i.get(e);o?o.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(g1(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])g1(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,h1(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,vm(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(vc,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||n)(B(rt),B(yf),B(wf,8),B(no))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),hm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xm=/%COMP%/g;var _1="%COMP%",PI=`_nghost-${_1}`,OI=`_ngcontent-${_1}`,AI=!0,RI=new q("",{providedIn:"root",factory:()=>AI});function FI(n){return OI.replace(xm,n)}function NI(n){return PI.replace(xm,n)}function b1(n,t){return t.map(e=>e.replace(xm,n))}var wm=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,o,a,c,p,f=null,m=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=p,this.nonce=f,this.tracingService=m,this.platformIsServer=hc(c),this.defaultRenderer=new ba(e,a,p,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Pn.ShadowDom&&(i=G(A({},i),{encapsulation:Pn.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof _c?r.applyToHost(e):r instanceof ya&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let a=this.doc,c=this.ngZone,p=this.eventManager,f=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,_=this.platformIsServer,M=this.tracingService;switch(i.encapsulation){case Pn.Emulated:o=new _c(p,f,i,this.appId,m,a,c,_,M);break;case Pn.ShadowDom:return new _m(p,f,e,i,a,c,this.nonce,_,M);default:o=new ya(p,f,i,m,a,c,_,M);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||n)(B(bm),B(ym),B(yf),B(RI),B(rt),B(no),B(ke),B(wf),B(io,8))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),ba=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,r,o){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(hm[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(v1(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(v1(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new $(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=hm[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=hm[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(ii.DashCase|ii.Important)?t.style.setProperty(e,i,r&ii.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&ii.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,r){if(typeof t=="string"&&(t=Gt().getGlobalEventTarget(this.doc,t),!t))throw new $(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,r)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function v1(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var _m=class extends ba{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,r,o,a,c,p,f){super(t,o,a,p,f),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let m=r.styles;m=b1(r.id,m);for(let M of m){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=M,this.shadowRoot.appendChild(y)}let _=r.getExternalStyles?.();if(_)for(let M of _){let y=vm(M,o);c&&y.setAttribute("nonce",c),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ya=class extends ba{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,r,o,a,c,p,f){super(t,o,a,c,p),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let m=i.styles;this.styles=f?b1(f,m):m,this.styleUrls=i.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},_c=class extends ya{contentAttr;hostAttr;constructor(t,e,i,r,o,a,c,p,f){let m=r+"-"+i.id;super(t,e,i,o,a,c,p,f,m),this.contentAttr=FI(m),this.hostAttr=NI(m)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}};var yc=class n extends ua{supportsDOMEvents=!0;static makeCurrent(){em(new n)}onAndCancel(t,e,i,r){return t.addEventListener(e,i,r),()=>{t.removeEventListener(e,i,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=VI();return e==null?null:jI(e)}resetBaseElement(){xa=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return fm(document.cookie,t)}},xa=null;function VI(){return xa=xa||document.head.querySelector("base"),xa?xa.getAttribute("href"):null}function jI(n){return new URL(n,document.baseURI).pathname}var xc=class{addToWindow(t){bt.getAngularTestability=(i,r=!0)=>{let o=t.findTestabilityInTree(i,r);if(o==null)throw new $(5103,!1);return o},bt.getAllAngularTestabilities=()=>t.getAllTestabilities(),bt.getAllAngularRootElements=()=>t.getAllRootElements();let e=i=>{let r=bt.getAllAngularTestabilities(),o=r.length,a=function(){o--,o==0&&i()};r.forEach(c=>{c.whenStable(a)})};bt.frameworkStabilizers||(bt.frameworkStabilizers=[]),bt.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,i){if(e==null)return null;let r=t.getTestability(e);return r??(i?Gt().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},LI=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),x1=(()=>{class n extends _a{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,o){return e.addEventListener(i,r,o),()=>this.removeEventListener(e,i,r,o)}removeEventListener(e,i,r,o){return e.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(B(rt))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),y1=["alt","control","meta","shift"],UI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},BI={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},w1=(()=>{class n extends _a{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r,o){let a=n.parseEventName(i),c=n.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gt().onAndCancel(e,a.domEventName,c,o))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),y1.forEach(f=>{let m=i.indexOf(f);m>-1&&(i.splice(m,1),a+=f+".")}),a+=o,i.length!=0||o.length===0)return null;let p={};return p.domEventName=r,p.fullKey=a,p}static matchEventFullKeyCode(e,i){let r=UI[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),y1.forEach(a=>{if(a!==r){let c=BI[a];c(e)&&(o+=a+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{n.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||n)(B(rt))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function $I(){yc.makeCurrent()}function qI(){return new kn}function HI(){return wv(document),document}var zI=[{provide:no,useValue:mm},{provide:xf,useValue:$I,multi:!0},{provide:rt,useFactory:HI}],Cm=Jf(U_,"browser",zI);var GI=[{provide:ca,useClass:xc},{provide:qf,useClass:Xl,deps:[ke,ec,ca]},{provide:Xl,useClass:Xl,deps:[ke,ec,ca]}],WI=[{provide:Vl,useValue:"root"},{provide:kn,useFactory:qI},{provide:bc,useClass:x1,multi:!0,deps:[rt]},{provide:bc,useClass:w1,multi:!0,deps:[rt]},wm,ym,bm,{provide:Hr,useExisting:wm},{provide:va,useClass:LI},[]],Sm=(()=>{class n{constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ye({type:n});static \u0275inj=We({providers:[...WI,...GI],imports:[Xi,B_]})}return n})();var C1=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||n)(B(rt))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ee="primary",Ra=Symbol("RouteTitle"),Tm=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function nr(n){return new Tm(n)}function O1(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],c=n[o];if(a[0]===":")r[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function YI(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ln(n[e],t[e]))return!1;return!0}function Ln(n,t){let e=n?km(n):void 0,i=t?km(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!A1(n[r],t[r]))return!1;return!0}function km(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function A1(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function R1(n){return n.length>0?n[n.length-1]:null}function ki(n){return ju(n)?n:Ji(n)?De(Promise.resolve(n)):Y(n)}var ZI={exact:N1,subset:V1},F1={exact:QI,subset:KI,ignored:()=>!0};function E1(n,t,e){return ZI[e.paths](n.root,t.root,e.matrixParams)&&F1[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function QI(n,t){return Ln(n,t)}function N1(n,t,e){if(!er(n.segments,t.segments)||!Sc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!N1(n.children[i],t.children[i],e))return!1;return!0}function KI(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>A1(n[e],t[e]))}function V1(n,t,e){return j1(n,t,t.segments,e)}function j1(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!er(r,e)||t.hasChildren()||!Sc(r,e,i))}else if(n.segments.length===e.length){if(!er(n.segments,e)||!Sc(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!V1(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!er(n.segments,r)||!Sc(n.segments,r,i)||!n.children[ee]?!1:j1(n.children[ee],t,o,i)}}function Sc(n,t,e){return t.every((i,r)=>F1[e](n[r].parameters,i.parameters))}var Bn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new ge([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=nr(this.queryParams),this._queryParamMap}toString(){return eD.serialize(this)}},ge=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ec(this)}},Mi=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=nr(this.parameters),this._parameterMap}toString(){return U1(this)}};function JI(n,t){return er(n,t)&&n.every((e,i)=>Ln(e.parameters,t[i].parameters))}function er(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function XI(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===ee&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ee&&(e=e.concat(t(r,i)))}),e}var ir=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>new Ii,providedIn:"root"})}return n})(),Ii=class{parse(t){let e=new Om(t);return new Bn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${wa(t.root,!0)}`,i=iD(t.queryParams),r=typeof t.fragment=="string"?`#${tD(t.fragment)}`:"";return`${e}${i}${r}`}},eD=new Ii;function Ec(n){return n.segments.map(t=>U1(t)).join("/")}function wa(n,t){if(!n.hasChildren())return Ec(n);if(t){let e=n.children[ee]?wa(n.children[ee],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==ee&&i.push(`${r}:${wa(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=XI(n,(i,r)=>r===ee?[wa(n.children[ee],!1)]:[`${r}:${wa(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[ee]!=null?`${Ec(n)}/${e[0]}`:`${Ec(n)}/(${e.join("//")})`}}function L1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wc(n){return L1(n).replace(/%3B/gi,";")}function tD(n){return encodeURI(n)}function Pm(n){return L1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mc(n){return decodeURIComponent(n)}function M1(n){return Mc(n.replace(/\+/g,"%20"))}function U1(n){return`${Pm(n.path)}${nD(n.parameters)}`}function nD(n){return Object.entries(n).map(([t,e])=>`;${Pm(t)}=${Pm(e)}`).join("")}function iD(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${wc(e)}=${wc(r)}`).join("&"):`${wc(e)}=${wc(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var rD=/^[^\/()?;#]+/;function Em(n){let t=n.match(rD);return t?t[0]:""}var oD=/^[^\/()?;=#]+/;function aD(n){let t=n.match(oD);return t?t[0]:""}var sD=/^[^=?&#]+/;function lD(n){let t=n.match(sD);return t?t[0]:""}var cD=/^[^&#]+/;function dD(n){let t=n.match(cD);return t?t[0]:""}var Om=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[ee]=new ge(t,e)),i}parseSegment(){let t=Em(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(t),new Mi(Mc(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=aD(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=Em(this.remaining);r&&(i=r,this.capture(i))}t[Mc(e)]=Mc(i)}parseQueryParam(t){let e=lD(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let a=dD(this.remaining);a&&(i=a,this.capture(i))}let r=M1(e),o=M1(i);if(t.hasOwnProperty(r)){let a=t[r];Array.isArray(a)||(a=[a],t[r]=a),a.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Em(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new $(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=ee);let a=this.parseChildren();e[o]=Object.keys(a).length===1?a[ee]:new ge([],a),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new $(4011,!1)}};function B1(n){return n.segments.length>0?new ge([],{[ee]:n}):n}function $1(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=$1(r);if(i===ee&&o.segments.length===0&&o.hasChildren())for(let[a,c]of Object.entries(o.children))t[a]=c;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new ge(n.segments,t);return uD(e)}function uD(n){if(n.numberOfChildren===1&&n.children[ee]){let t=n.children[ee];return new ge(n.segments.concat(t.segments),t.children)}return n}function Di(n){return n instanceof Bn}function q1(n,t,e=null,i=null){let r=H1(n);return z1(r,t,e,i)}function H1(n){let t;function e(o){let a={};for(let p of o.children){let f=e(p);a[p.outlet]=f}let c=new ge(o.url,a);return o===n&&(t=c),c}let i=e(n.root),r=B1(i);return t??r}function z1(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return Mm(r,r,r,e,i);let o=pD(t);if(o.toRoot())return Mm(r,r,new ge([],{}),e,i);let a=fD(o,r,n),c=a.processChildren?Sa(a.segmentGroup,a.index,o.commands):W1(a.segmentGroup,a.index,o.commands);return Mm(r,a.segmentGroup,c,e,i)}function Dc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ma(n){return typeof n=="object"&&n!=null&&n.outlets}function Mm(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([p,f])=>{o[p]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let a;n===t?a=e:a=G1(n,t,e);let c=B1($1(a));return new Bn(c,o,r)}function G1(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=G1(o,t,e)}),new ge(n.segments,i)}var Tc=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Dc(i[0]))throw new $(4003,!1);let r=i.find(Ma);if(r&&r!==R1(i))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function pD(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Tc(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([p,f])=>{c[p]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:c}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((c,p)=>{p==0&&c==="."||(p==0&&c===""?e=!0:c===".."?t++:c!=""&&r.push(c))}),r):[...r,o]},[]);return new Tc(e,t,i)}var co=class{segmentGroup;processChildren;index;constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function fD(n,t,e){if(n.isAbsolute)return new co(t,!0,0);if(!e)return new co(t,!1,NaN);if(e.parent===null)return new co(e,!0,0);let i=Dc(n.commands[0])?0:1,r=e.segments.length-1+i;return mD(e,r,n.numberOfDoubleDots)}function mD(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new $(4005,!1);r=i.segments.length}return new co(i,!1,r-o)}function gD(n){return Ma(n[0])?n[0].outlets:{[ee]:n}}function W1(n,t,e){if(n??=new ge([],{}),n.segments.length===0&&n.hasChildren())return Sa(n,t,e);let i=hD(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new ge(n.segments.slice(0,i.pathIndex),{});return o.children[ee]=new ge(n.segments.slice(i.pathIndex),n.children),Sa(o,0,r)}else return i.match&&r.length===0?new ge(n.segments,{}):i.match&&!n.hasChildren()?Am(n,t,e):i.match?Sa(n,0,r):Am(n,t,e)}function Sa(n,t,e){if(e.length===0)return new ge(n.segments,{});{let i=gD(e),r={};if(Object.keys(i).some(o=>o!==ee)&&n.children[ee]&&n.numberOfChildren===1&&n.children[ee].segments.length===0){let o=Sa(n.children[ee],t,e);return new ge(n.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=W1(n.children[o],t,a))}),Object.entries(n.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new ge(n.segments,r)}}function hD(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let a=n.segments[r],c=e[i];if(Ma(c))break;let p=`${c}`,f=i<e.length-1?e[i+1]:null;if(r>0&&p===void 0)break;if(p&&f&&typeof f=="object"&&f.outlets===void 0){if(!D1(p,f,a))return o;i+=2}else{if(!D1(p,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Am(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(Ma(o)){let p=vD(o.outlets);return new ge(i,p)}if(r===0&&Dc(e[0])){let p=n.segments[t];i.push(new Mi(p.path,I1(e[0]))),r++;continue}let a=Ma(o)?o.outlets[ee]:`${o}`,c=r<e.length-1?e[r+1]:null;a&&c&&Dc(c)?(i.push(new Mi(a,I1(c))),r+=2):(i.push(new Mi(a,{})),r++)}return new ge(i,{})}function vD(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Am(new ge([],{}),0,i))}),t}function I1(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function D1(n,t,e){return n==e.path&&Ln(t,e.parameters)}var Ic="imperative",it=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(it||{}),Yt=class{id;url;constructor(t,e){this.id=t,this.url=e}},Ti=class extends Yt{type=it.NavigationStart;navigationTrigger;restoredState;constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},lt=class extends Yt{urlAfterRedirects;type=it.NavigationEnd;constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Vt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Vt||{}),po=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(po||{}),Un=class extends Yt{reason;code;type=it.NavigationCancel;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$n=class extends Yt{reason;code;type=it.NavigationSkipped;constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r}},fo=class extends Yt{error;target;type=it.NavigationError;constructor(t,e,i,r){super(t,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ia=class extends Yt{urlAfterRedirects;state;type=it.RoutesRecognized;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kc=class extends Yt{urlAfterRedirects;state;type=it.GuardsCheckStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pc=class extends Yt{urlAfterRedirects;state;shouldActivate;type=it.GuardsCheckEnd;constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Oc=class extends Yt{urlAfterRedirects;state;type=it.ResolveStart;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ac=class extends Yt{urlAfterRedirects;state;type=it.ResolveEnd;constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rc=class{route;type=it.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fc=class{route;type=it.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nc=class{snapshot;type=it.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vc=class{snapshot;type=it.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jc=class{snapshot;type=it.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lc=class{snapshot;type=it.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mo=class{routerEvent;position;anchor;type=it.Scroll;constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Da=class{},go=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function _D(n,t){return n.providers&&!n._injector&&(n._injector=sa(n.providers,t,`Route: ${n.path}`)),n._injector??t}function bn(n){return n.outlet||ee}function bD(n,t){let e=n.filter(i=>bn(i)===t);return e.push(...n.filter(i=>bn(i)!==t)),e}function Fa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Uc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Fa(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new rr(this.rootInjector)}},rr=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Uc(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||n)(B(Dt))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bc=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Rm(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=Rm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Fm(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Fm(t,this._root).map(e=>e.value)}};function Rm(n,t){if(n===t.value)return t;for(let e of t.children){let i=Rm(n,e);if(i)return i}return null}function Fm(n,t){if(n===t.value)return[t];for(let e of t.children){let i=Fm(n,e);if(i.length)return i.unshift(t),i}return[]}var Wt=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function lo(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Ta=class extends Bc{snapshot;constructor(t,e){super(t),this.snapshot=e,qm(this,t)}toString(){return this.snapshot.toString()}};function Y1(n){let t=yD(n),e=new Ne([new Mi("",{})]),i=new Ne({}),r=new Ne({}),o=new Ne({}),a=new Ne(""),c=new Zt(e,i,o,a,r,ee,n,t.root);return c.snapshot=t.root,new Ta(new Wt(c,[]),t)}function yD(n){let t={},e={},i={},r="",o=new tr([],t,i,r,e,ee,n,null,{});return new ka("",new Wt(o,[]))}var Zt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,i,r,o,a,c,p){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=p,this.title=this.dataSubject?.pipe(ue(f=>f[Ra]))??Y(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(t=>nr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(t=>nr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function $c(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:A(A({},t.params),n.params),data:A(A({},t.data),n.data),resolve:A(A(A(A({},n.data),t.data),r?.data),n._resolvedData)}:i={params:A({},n.params),data:A({},n.data),resolve:A(A({},n.data),n._resolvedData??{})},r&&Q1(r)&&(i.resolve[Ra]=r.title),i}var tr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ra]}constructor(t,e,i,r,o,a,c,p,f){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=c,this.routeConfig=p,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=nr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=nr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},ka=class extends Bc{url;constructor(t,e){super(e),this.url=t,qm(this,e)}toString(){return Z1(this._root)}};function qm(n,t){t.value._routerState=n,t.children.forEach(e=>qm(n,e))}function Z1(n){let t=n.children.length>0?` { ${n.children.map(Z1).join(", ")} } `:"";return`${n.value}${t}`}function Im(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ln(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Ln(t.params,e.params)||n.paramsSubject.next(e.params),YI(t.url,e.url)||n.urlSubject.next(e.url),Ln(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Nm(n,t){let e=Ln(n.params,t.params)&&JI(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Nm(n.parent,t.parent))}function Q1(n){return typeof n.title=="string"||n.title===null}var K1=new q(""),or=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ee;activateEvents=new Te;deactivateEvents=new Te;attachEvents=new Te;detachEvents=new Te;routerOutletData=mv(void 0);parentContexts=j(rr);location=j(wi);changeDetector=j(Ci);inputBinder=j(Na,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=e;let r=this.location,a=e.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,p=new Vm(e,c,r.injector,this.routerOutletData);this.activated=r.createComponent(a,{index:r.length,injector:p,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=_e({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ht]})}return n})(),Vm=class{route;childContexts;parent;outletData;constructor(t,e,i,r){this.route=t,this.childContexts=e,this.parent=i,this.outletData=r}get(t,e){return t===Zt?this.route:t===rr?this.childContexts:t===K1?this.outletData:this.parent.get(t,e)}},Na=new q(""),Hm=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=$o([i.queryParams,i.params,i.data]).pipe(Kt(([o,a,c],p)=>(c=A(A(A({},o),a),c),p===0?Y(c):Promise.resolve(c)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let a=$_(i.component);if(!a){this.unsubscribeFromRouteData(e);return}for(let{templateName:c}of a.inputs)e.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(e,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),zm=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ie({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&b(0,"router-outlet")},dependencies:[or],encapsulation:2})}return n})();function Gm(n){let t=n.children&&n.children.map(Gm),e=t?G(A({},n),{children:t}):A({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==ee&&(e.component=zm),e}function xD(n,t,e){let i=Pa(n,t._root,e?e._root:void 0);return new Ta(i,t)}function Pa(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=wD(n,t,e);return new Wt(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(c=>Pa(n,c)),a}}let i=CD(t.value),r=t.children.map(o=>Pa(n,o));return new Wt(i,r)}}function wD(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Pa(n,i,r);return Pa(n,i)})}function CD(n){return new Zt(new Ne(n.url),new Ne(n.params),new Ne(n.queryParams),new Ne(n.fragment),new Ne(n.data),n.outlet,n.component,n)}var ho=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},J1="ngNavigationCancelingError";function qc(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Di(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=X1(!1,Vt.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function X1(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[J1]=!0,e.cancellationCode=t,e}function SD(n){return eb(n)&&Di(n.url)}function eb(n){return!!n&&n[J1]}var ED=(n,t,e,i)=>ue(r=>(new jm(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),jm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Im(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=lo(e);t.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(t,e,a.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=lo(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:c})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=lo(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=lo(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Lc(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Vc(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(Im(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,a.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Im(c.route.value),this.activateChildRoutes(t,null,a.children)}else a.attachRef=null,a.route=r,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(t,null,a.children)}else this.activateChildRoutes(t,null,i)}},Hc=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},uo=class{component;route;constructor(t,e){this.component=t,this.route=e}};function MD(n,t,e){let i=n._root,r=t?t._root:null;return Ca(i,r,e,[i.value])}function ID(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function _o(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!dh(n)?n:t.get(n):i}function Ca(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=lo(t);return n.children.forEach(a=>{DD(a,o[a.value.outlet],e,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>Ea(c,e.getContext(a),r)),r}function DD(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=t?t.value:null,c=e?e.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let p=TD(a,o,o.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new Hc(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Ca(n,t,c?c.children:null,i,r):Ca(n,t,e,i,r),p&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new uo(c.outlet.component,a))}else a&&Ea(t,c,r),r.canActivateChecks.push(new Hc(i)),o.component?Ca(n,null,c?c.children:null,i,r):Ca(n,null,e,i,r);return r}function TD(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!er(n.url,t.url);case"pathParamsOrQueryParamsChange":return!er(n.url,t.url)||!Ln(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nm(n,t)||!Ln(n.queryParams,t.queryParams);case"paramsChange":default:return!Nm(n,t)}}function Ea(n,t,e){let i=lo(n),r=n.value;Object.entries(i).forEach(([o,a])=>{r.component?t?Ea(a,t.children.getContext(o),e):Ea(a,null,e):Ea(a,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new uo(t.outlet.component,r)):e.canDeactivateChecks.push(new uo(null,r)):e.canDeactivateChecks.push(new uo(null,r))}function Va(n){return typeof n=="function"}function kD(n){return typeof n=="boolean"}function PD(n){return n&&Va(n.canLoad)}function OD(n){return n&&Va(n.canActivate)}function AD(n){return n&&Va(n.canActivateChild)}function RD(n){return n&&Va(n.canDeactivate)}function FD(n){return n&&Va(n.canMatch)}function tb(n){return n instanceof Qn||n?.name==="EmptyError"}var Cc=Symbol("INITIAL_VALUE");function vo(){return Kt(n=>$o(n.map(t=>t.pipe(Jn(1),$u(Cc)))).pipe(ue(t=>{for(let e of t)if(e!==!0){if(e===Cc)return Cc;if(e===!1||ND(e))return e}return!0}),at(t=>t!==Cc),Jn(1)))}function ND(n){return Di(n)||n instanceof ho}function VD(n,t){return $e(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=e;return a.length===0&&o.length===0?Y(G(A({},e),{guardsResult:!0})):jD(a,i,r,n).pipe($e(c=>c&&kD(c)?LD(i,o,n,t):Y(c)),ue(c=>G(A({},e),{guardsResult:c})))})}function jD(n,t,e,i){return De(n).pipe($e(r=>HD(r.component,r.route,e,t,i)),Xn(r=>r!==!0,!0))}function LD(n,t,e,i){return De(t).pipe(hi(r=>kr(BD(r.route.parent,i),UD(r.route,i),qD(n,r.path,e),$D(n,r.route,e))),Xn(r=>r!==!0,!0))}function UD(n,t){return n!==null&&t&&t(new jc(n)),Y(!0)}function BD(n,t){return n!==null&&t&&t(new Nc(n)),Y(!0)}function $D(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Y(!0);let r=i.map(o=>Qs(()=>{let a=Fa(t)??e,c=_o(o,a),p=OD(c)?c.canActivate(t,n):Xt(a,()=>c(t,n));return ki(p).pipe(Xn())}));return Y(r).pipe(vo())}function qD(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>ID(a)).filter(a=>a!==null).map(a=>Qs(()=>{let c=a.guards.map(p=>{let f=Fa(a.node)??e,m=_o(p,f),_=AD(m)?m.canActivateChild(i,n):Xt(f,()=>m(i,n));return ki(_).pipe(Xn())});return Y(c).pipe(vo())}));return Y(o).pipe(vo())}function HD(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let a=o.map(c=>{let p=Fa(t)??r,f=_o(c,p),m=RD(f)?f.canDeactivate(n,t,e,i):Xt(p,()=>f(n,t,e,i));return ki(m).pipe(Xn())});return Y(a).pipe(vo())}function zD(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return Y(!0);let o=r.map(a=>{let c=_o(a,n),p=PD(c)?c.canLoad(t,e):Xt(n,()=>c(t,e));return ki(p)});return Y(o).pipe(vo(),nb(i))}function nb(n){return Ru(st(t=>{if(typeof t!="boolean")throw qc(n,t)}),ue(t=>t===!0))}function GD(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return Y(!0);let o=r.map(a=>{let c=_o(a,n),p=FD(c)?c.canMatch(t,e):Xt(n,()=>c(t,e));return ki(p)});return Y(o).pipe(vo(),nb(i))}var Oa=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Aa=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function so(n){return Tr(new Oa(n))}function WD(n){return Tr(new $(4e3,!1))}function YD(n){return Tr(X1(!1,Vt.GuardRejected))}var Lm=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Y(i);if(r.numberOfChildren>1||!r.children[ee])return WD(`${t.redirectTo}`);r=r.children[ee]}}applyRedirectCommands(t,e,i,r,o){if(typeof e!="string"){let c=e,{queryParams:p,fragment:f,routeConfig:m,url:_,outlet:M,params:y,data:D,title:V}=r,U=Xt(o,()=>c({params:y,data:D,queryParams:p,fragment:f,routeConfig:m,url:_,outlet:M,title:V}));if(U instanceof Bn)throw new Aa(U);e=U}let a=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Aa(a);return a}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new Bn(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);i[r]=e[c]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),a={};return Object.entries(e.children).forEach(([c,p])=>{a[c]=this.createSegmentGroup(t,p,i,r)}),new ge(o,a)}createSegments(t,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new $(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},Um={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZD(n,t,e,i,r){let o=ib(n,t,e);return o.matched?(i=_D(t,i),GD(i,t,e,r).pipe(ue(a=>a===!0?o:A({},Um)))):Y(o)}function ib(n,t,e){if(t.path==="**")return QD(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?A({},Um):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||O1)(e,n,t);if(!r)return A({},Um);let o={};Object.entries(r.posParams??{}).forEach(([c,p])=>{o[c]=p.path});let a=r.consumed.length>0?A(A({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function QD(n){return{matched:!0,parameters:n.length>0?R1(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function T1(n,t,e,i){return e.length>0&&XD(n,e,i)?{segmentGroup:new ge(t,JD(i,new ge(e,n.children))),slicedSegments:[]}:e.length===0&&eT(n,e,i)?{segmentGroup:new ge(n.segments,KD(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new ge(n.segments,n.children),slicedSegments:e}}function KD(n,t,e,i){let r={};for(let o of e)if(Gc(n,t,o)&&!i[bn(o)]){let a=new ge([],{});r[bn(o)]=a}return A(A({},i),r)}function JD(n,t){let e={};e[ee]=t;for(let i of n)if(i.path===""&&bn(i)!==ee){let r=new ge([],{});e[bn(i)]=r}return e}function XD(n,t,e){return e.some(i=>Gc(n,t,i)&&bn(i)!==ee)}function eT(n,t,e){return e.some(i=>Gc(n,t,i))}function Gc(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function tT(n,t,e){return t.length===0&&!n.children[e]}var Bm=class{};function nT(n,t,e,i,r,o,a="emptyOnly"){return new $m(n,t,e,i,r,a,o).recognize()}var iT=31,$m=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,i,r,o,a,c){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new Lm(this.urlSerializer,this.urlTree)}noMatchError(t){return new $(4002,`'${t.segmentGroup}'`)}recognize(){let t=T1(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ue(({children:e,rootSnapshot:i})=>{let r=new Wt(i,e),o=new ka("",r),a=q1(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(t){let e=new tr([],Object.freeze({}),Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,ee,e).pipe(ue(i=>({children:i,rootSnapshot:e})),Kn(i=>{if(i instanceof Aa)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Oa?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,o):this.processSegment(t,e,i,i.segments,r,!0,o).pipe(ue(a=>a instanceof Wt?[a]:[]))}processChildren(t,e,i,r){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return De(o).pipe(hi(a=>{let c=i.children[a],p=bD(e,a);return this.processSegmentGroup(t,p,c,a,r)}),Bu((a,c)=>(a.push(...c),a)),vi(null),Uu(),$e(a=>{if(a===null)return so(i);let c=rb(a);return rT(c),Y(c)}))}processSegment(t,e,i,r,o,a,c){return De(e).pipe(hi(p=>this.processSegmentAgainstRoute(p._injector??t,e,p,i,r,o,a,c).pipe(Kn(f=>{if(f instanceof Oa)return Y(null);throw f}))),Xn(p=>!!p),Kn(p=>{if(tb(p))return tT(i,r,o)?Y(new Bm):so(i);throw p}))}processSegmentAgainstRoute(t,e,i,r,o,a,c,p){return bn(i)!==a&&(a===ee||!Gc(r,o,i))?so(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,a,p):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,a,p):so(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,a,c){let{matched:p,parameters:f,consumedSegments:m,positionalParamSegments:_,remainingSegments:M}=ib(e,r,o);if(!p)return so(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>iT&&(this.allowRedirects=!1));let y=new tr(o,f,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,k1(r),bn(r),r.component??r._loadedComponent??null,r,P1(r)),D=$c(y,c,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let V=this.applyRedirects.applyRedirectCommands(m,r.redirectTo,_,y,t);return this.applyRedirects.lineralizeSegments(r,V).pipe($e(U=>this.processSegment(t,i,e,U.concat(M),a,!1,c)))}matchSegmentAgainstRoute(t,e,i,r,o,a){let c=ZD(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),c.pipe(Kt(p=>p.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Kt(({routes:f})=>{let m=i._loadedInjector??t,{parameters:_,consumedSegments:M,remainingSegments:y}=p,D=new tr(M,_,Object.freeze(A({},this.urlTree.queryParams)),this.urlTree.fragment,k1(i),bn(i),i.component??i._loadedComponent??null,i,P1(i)),V=$c(D,a,this.paramsInheritanceStrategy);D.params=Object.freeze(V.params),D.data=Object.freeze(V.data);let{segmentGroup:U,slicedSegments:H}=T1(e,M,y,f);if(H.length===0&&U.hasChildren())return this.processChildren(m,f,U,D).pipe(ue(Fe=>new Wt(D,Fe)));if(f.length===0&&H.length===0)return Y(new Wt(D,[]));let Ce=bn(i)===o;return this.processSegment(m,f,U,H,Ce?ee:o,!0,D).pipe(ue(Fe=>new Wt(D,Fe instanceof Wt?[Fe]:[])))}))):so(e)))}getChildConfig(t,e,i){return e.children?Y({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?Y({routes:e._loadedRoutes,injector:e._loadedInjector}):zD(t,e,i,this.urlSerializer).pipe($e(r=>r?this.configLoader.loadChildren(t,e).pipe(st(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):YD(e))):Y({routes:[],injector:t})}};function rT(n){n.sort((t,e)=>t.value.outlet===ee?-1:e.value.outlet===ee?1:t.value.outlet.localeCompare(e.value.outlet))}function oT(n){let t=n.value.routeConfig;return t&&t.path===""}function rb(n){let t=[],e=new Set;for(let i of n){if(!oT(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=rb(i.children);t.push(new Wt(i.value,r))}return t.filter(i=>!e.has(i))}function k1(n){return n.data||{}}function P1(n){return n.resolve||{}}function aT(n,t,e,i,r,o){return $e(a=>nT(n,t,e,i,a.extractedUrl,r,o).pipe(ue(({state:c,tree:p})=>G(A({},a),{targetSnapshot:c,urlAfterRedirects:p}))))}function sT(n,t){return $e(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Y(e);let o=new Set(r.map(p=>p.route)),a=new Set;for(let p of o)if(!a.has(p))for(let f of ob(p))a.add(f);let c=0;return De(a).pipe(hi(p=>o.has(p)?lT(p,i,n,t):(p.data=$c(p,p.parent,n).resolve,Y(void 0))),st(()=>c++),Pr(1),$e(p=>c===a.size?Y(e):Ct))})}function ob(n){let t=n.children.map(e=>ob(e)).flat();return[n,...t]}function lT(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!Q1(r)&&(o[Ra]=r.title),cT(o,n,t,i).pipe(ue(a=>(n._resolvedData=a,n.data=$c(n,n.parent,e).resolve,null)))}function cT(n,t,e,i){let r=km(n);if(r.length===0)return Y({});let o={};return De(r).pipe($e(a=>dT(n[a],t,e,i).pipe(Xn(),st(c=>{if(c instanceof ho)throw qc(new Ii,c);o[a]=c}))),Pr(1),ue(()=>o),Kn(a=>tb(a)?Ct:Tr(a)))}function dT(n,t,e,i){let r=Fa(t)??i,o=_o(n,r),a=o.resolve?o.resolve(t,e):Xt(r,()=>o(t,e));return ki(a)}function Dm(n){return Kt(t=>{let e=n(t);return e?De(e).pipe(ue(()=>t)):Y(t)})}var Wm=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===ee);return i}getResolvedTitleForRoute(e){return e.data[Ra]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>j(ab),providedIn:"root"})}return n})(),ab=(()=>{class n extends Wm{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(B(C1))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ar=new q("",{providedIn:"root",factory:()=>({})}),bo=new q(""),Wc=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=j(F_);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Y(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=ki(e.loadComponent()).pipe(ue(lb),st(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),qo(()=>{this.componentLoaders.delete(e)})),r=new Dr(i,()=>new Be).pipe(Ir());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Y({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=sb(i,this.compiler,e,this.onLoadEndListener).pipe(qo(()=>{this.childrenLoaders.delete(i)})),a=new Dr(o,()=>new Be).pipe(Ir());return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sb(n,t,e,i){return ki(n.loadChildren()).pipe(ue(lb),$e(r=>r instanceof $f||Array.isArray(r)?Y(r):De(t.compileModuleAsync(r))),ue(r=>{i&&i(n);let o,a,c=!1;return Array.isArray(r)?(a=r,c=!0):(o=r.create(e).injector,a=o.get(bo,[],{optional:!0,self:!0}).flat()),{routes:a.map(Gm),injector:o}}))}function uT(n){return n&&typeof n=="object"&&"default"in n}function lb(n){return uT(n)?n.default:n}var Yc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>j(pT),providedIn:"root"})}return n})(),pT=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ym=new q(""),Zm=new q("");function cb(n,t,e){let i=n.get(Zm),r=n.get(rt);return n.get(ke).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),c=r.startViewTransition(()=>(o(),fT(n))),{onViewTransitionCreated:p}=i;return p&&Xt(n,()=>p({transition:c,from:t,to:e})),a})}function fT(n){return new Promise(t=>{Sf({read:()=>setTimeout(t)},{injector:n})})}var Qm=new q(""),Zc=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Be;transitionAbortSubject=new Be;configLoader=j(Wc);environmentInjector=j(Dt);destroyRef=j(Kr);urlSerializer=j(ir);rootContexts=j(rr);location=j(Ei);inputBindingEnabled=j(Na,{optional:!0})!==null;titleStrategy=j(Wm);options=j(ar,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=j(Yc);createViewTransition=j(Ym,{optional:!0});navigationErrorHandler=j(Qm,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new Rc(r)),i=r=>this.events.next(new Fc(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(G(A({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(e){return this.transitions=new Ne(null),this.transitions.pipe(at(i=>i!==null),Kt(i=>{let r=!1,o=!1;return Y(i).pipe(Kt(a=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Vt.SupersededByNewNavigation),Ct;this.currentTransition=i,this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?G(A({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=a.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&p!=="reload"){let f="";return this.events.next(new $n(a.id,this.urlSerializer.serialize(a.rawUrl),f,po.IgnoredSameUrlNavigation)),a.resolve(!1),Ct}if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Y(a).pipe(Kt(f=>(this.events.next(new Ti(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),f.id!==this.navigationId?Ct:Promise.resolve(f))),aT(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),st(f=>{i.targetSnapshot=f.targetSnapshot,i.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=G(A({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new Ia(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:f,extractedUrl:m,source:_,restoredState:M,extras:y}=a,D=new Ti(f,this.urlSerializer.serialize(m),_,M);this.events.next(D);let V=Y1(this.rootComponentType).snapshot;return this.currentTransition=i=G(A({},a),{targetSnapshot:V,urlAfterRedirects:m,extras:G(A({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Y(i)}else{let f="";return this.events.next(new $n(a.id,this.urlSerializer.serialize(a.extractedUrl),f,po.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Ct}}),st(a=>{let c=new kc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),ue(a=>(this.currentTransition=i=G(A({},a),{guards:MD(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),i)),VD(this.environmentInjector,a=>this.events.next(a)),st(a=>{if(i.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw qc(this.urlSerializer,a.guardsResult);let c=new Pc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(c)}),at(a=>a.guardsResult?!0:(this.cancelNavigationTransition(a,"",Vt.GuardRejected),!1)),Dm(a=>{if(a.guards.canActivateChecks.length!==0)return Y(a).pipe(st(c=>{let p=new Oc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)}),Kt(c=>{let p=!1;return Y(c).pipe(sT(this.paramsInheritanceStrategy,this.environmentInjector),st({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(c,"",Vt.NoDataFromResolver)}}))}),st(c=>{let p=new Ac(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)}))}),Dm(a=>{let c=p=>{let f=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(p.routeConfig).pipe(st(m=>{p.component=m}),ue(()=>{})));for(let m of p.children)f.push(...c(m));return f};return $o(c(a.targetSnapshot.root)).pipe(vi(null),Jn(1))}),Dm(()=>this.afterPreactivation()),Kt(()=>{let{currentSnapshot:a,targetSnapshot:c}=i,p=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return p?De(p).pipe(ue(()=>i)):Y(i)}),ue(a=>{let c=xD(e.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=i=G(A({},a),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,i}),st(()=>{this.events.next(new Da)}),ED(this.rootContexts,e.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),Jn(1),st({next:a=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new lt(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{r=!0}}),qu(this.transitionAbortSubject.pipe(st(a=>{throw a}))),qo(()=>{!r&&!o&&this.cancelNavigationTransition(i,"",Vt.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Kn(a=>{if(this.destroyed)return i.resolve(!1),Ct;if(o=!0,eb(a))this.events.next(new Un(i.id,this.urlSerializer.serialize(i.extractedUrl),a.message,a.cancellationCode)),SD(a)?this.events.next(new go(a.url,a.navigationBehaviorOptions)):i.resolve(!1);else{let c=new fo(i.id,this.urlSerializer.serialize(i.extractedUrl),a,i.targetSnapshot??void 0);try{let p=Xt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(p instanceof ho){let{message:f,cancellationCode:m}=qc(this.urlSerializer,p);this.events.next(new Un(i.id,this.urlSerializer.serialize(i.extractedUrl),f,m)),this.events.next(new go(p.redirectTo,p.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(p){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(p)}}return Ct}))}))}cancelNavigationTransition(e,i,r){let o=new Un(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mT(n){return n!==Ic}var db=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>j(gT),providedIn:"root"})}return n})(),zc=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},gT=(()=>{class n extends zc{static \u0275fac=(()=>{let e;return function(r){return(e||(e=fn(n)))(r||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ub=(()=>{class n{urlSerializer=j(ir);options=j(ar,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=j(Ei);urlHandlingStrategy=j(Yc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Bn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,a=r??o;return a instanceof Bn?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=Y1(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:()=>j(hT),providedIn:"root"})}return n})(),hT=(()=>{class n extends ub{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof Ti?this.updateStateMemento():e instanceof $n?this.commitTransition(i):e instanceof Ia?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Da?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Un&&(e.code===Vt.GuardRejected||e.code===Vt.NoDataFromResolver)?this.restoreHistory(i):e instanceof fo?this.restoreHistory(i,!0):e instanceof lt&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:o,state:a}=i;if(this.location.isCurrentPathEqualTo(e)||o){let c=this.browserPageId,p=A(A({},a),this.generateNgRouterState(r,c));this.location.replaceState(e,"",p)}else{let c=A(A({},a),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",c)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=fn(n)))(r||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qc(n,t){n.events.pipe(at(e=>e instanceof lt||e instanceof Un||e instanceof fo||e instanceof $n),ue(e=>e instanceof lt||e instanceof $n?0:(e instanceof Un?e.code===Vt.Redirect||e.code===Vt.SupersededByNewNavigation:!1)?2:1),at(e=>e!==2),Jn(1)).subscribe(()=>{t()})}var vT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_T={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},fe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=j(g_);stateManager=j(ub);options=j(ar,{optional:!0})||{};pendingTasks=j(Jr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=j(Zc);urlSerializer=j(ir);location=j(Ei);urlHandlingStrategy=j(Yc);_events=new Be;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=j(db);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=j(bo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!j(Na,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Oe;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Un&&i.code!==Vt.Redirect&&i.code!==Vt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof lt)this.navigated=!0;else if(i instanceof go){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),p=A({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||mT(r.source)},a);this.scheduleNavigation(c,Ic,null,p,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}yT(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ic,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let p=A({},r);delete p.navigationId,delete p.\u0275routerPageId,Object.keys(p).length!==0&&(o.state=p)}let c=this.parseUrl(e);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Gm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:p}=i,f=p?this.currentUrlTree.fragment:a,m=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":m=A(A({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let _;try{let M=r?r.snapshot:this.routerState.snapshot.root;_=H1(M)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),_=this.currentUrlTree.root}return z1(_,e,m,f??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Di(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Ic,null,i)}navigate(e,i={skipLocationChange:!1}){return bT(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=A({},vT):i===!1?r=A({},_T):r=i,Di(e))return E1(this.currentUrlTree,e,r);let o=this.parseUrl(e);return E1(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,a){if(this.disposed)return Promise.resolve(!1);let c,p,f;a?(c=a.resolve,p=a.reject,f=a.promise):f=new Promise((_,M)=>{c=_,p=M});let m=this.pendingTasks.add();return Qc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:c,reject:p,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(_=>Promise.reject(_))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bT(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new $(4008,!1)}function yT(n){return!(n instanceof Da)&&!(n instanceof go)}var qn=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Be;constructor(e,i,r,o,a,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=c;let p=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=p==="a"||p==="area",this.isAnchorElement?this.subscription=e.events.subscribe(f=>{f instanceof lt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Di(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(e!==0||i||r||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let p={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,p),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:Tv(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,e,i):r.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Di(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(O(fe),O(Zt),vf("tabindex"),O(mn),O(wt),O(hn))};static \u0275dir=_e({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&x("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&An("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Si],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Si],replaceUrl:[2,"replaceUrl","replaceUrl",Si],routerLink:"routerLink"},features:[Ht]})}return n})(),Jm=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Te;constructor(e,i,r,o,a){this.router=e,this.element=i,this.renderer=r,this.cdr=o,this.link=a,this.routerEventsSubscription=e.events.subscribe(c=>{c instanceof lt&&this.update()})}ngAfterContentInit(){Y(this.links.changes,Y(null)).pipe(gi()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=De(e).pipe(gi()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(e){let i=Array.isArray(e)?e:e.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(i=>{e?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let i=xT(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?e.isActive(o,i):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(i){return new(i||n)(O(fe),O(wt),O(mn),O(Ci),O(qn,8))};static \u0275dir=_e({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(i,r,o){if(i&1&&D_(o,qn,5),i&2){let a;T_(a=k_())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Ht]})}return n})();function xT(n){return!!n.paths}var ja=class{};var pb=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,i,r,o){this.router=e,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(at(e=>e instanceof lt),hi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=sa(o.providers,e,`Route: ${o.path}`));let a=o._injector??e,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(c,o.children??o._loadedRoutes))}return De(r).pipe(gi())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=Y(null);let o=r.pipe($e(a=>a===null?Y(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??e,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return De([o,a]).pipe(gi())}else return o})}static \u0275fac=function(i){return new(i||n)(B(fe),B(Dt),B(ja),B(Wc))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fb=new q(""),wT=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,i,r,o,a={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Ti?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof lt?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof $n&&e.code===po.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof mo&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new mo(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){n_()};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function CT(n){return n.routerState.root}function La(n,t){return{\u0275kind:n,\u0275providers:t}}function ST(){let n=j(kt);return t=>{let e=n.get(yi);if(t!==e.components[0])return;let i=n.get(fe),r=n.get(mb);n.get(Xm)===1&&i.initialNavigation(),n.get(vb,null,te.Optional)?.setUpPreloading(),n.get(fb,null,te.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var mb=new q("",{factory:()=>new Be}),Xm=new q("",{providedIn:"root",factory:()=>1});function gb(){let n=[{provide:Xm,useValue:0},zf(()=>{let t=j(kt);return t.get(tm,Promise.resolve()).then(()=>new Promise(i=>{let r=t.get(fe),o=t.get(mb);Qc(r,()=>{i(!0)}),t.get(Zc).afterPreactivation=()=>(i(!0),o.closed?Y(void 0):o),r.initialNavigation()}))})];return La(2,n)}function hb(){let n=[zf(()=>{j(fe).setUpLocationChangeListener()}),{provide:Xm,useValue:2}];return La(3,n)}var vb=new q("");function _b(n){return La(0,[{provide:vb,useExisting:pb},{provide:ja,useExisting:n}])}function bb(){return La(8,[Hm,{provide:Na,useExisting:Hm}])}function yb(n){oa("NgRouterViewTransitions");let t=[{provide:Ym,useValue:cb},{provide:Zm,useValue:A({skipNextTransition:!!n?.skipInitialTransition},n)}];return La(9,t)}var xb=[Ei,{provide:ir,useClass:Ii},fe,rr,{provide:Zt,useFactory:CT,deps:[fe]},Wc,[]],ci=(()=>{class n{constructor(){}static forRoot(e,i){return{ngModule:n,providers:[xb,[],{provide:bo,multi:!0,useValue:e},[],i?.errorHandler?{provide:Qm,useValue:i.errorHandler}:[],{provide:ar,useValue:i||{}},i?.useHash?MT():IT(),ET(),i?.preloadingStrategy?_b(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?DT(i):[],i?.bindToComponentInputs?bb().\u0275providers:[],i?.enableViewTransitions?yb().\u0275providers:[],TT()]}}static forChild(e){return{ngModule:n,providers:[{provide:bo,multi:!0,useValue:e}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ye({type:n});static \u0275inj=We({})}return n})();function ET(){return{provide:fb,useFactory:()=>{let n=j(m1),t=j(ke),e=j(ar),i=j(Zc),r=j(ir);return e.scrollOffset&&n.setOffset(e.scrollOffset),new wT(r,i,n,t,e)}}}function MT(){return{provide:hn,useClass:lm}}function IT(){return{provide:hn,useClass:oc}}function DT(n){return[n.initialNavigation==="disabled"?hb().\u0275providers:[],n.initialNavigation==="enabledBlocking"?gb().\u0275providers:[]]}var Km=new q("");function TT(){return[{provide:Km,useFactory:ST},{provide:Gf,multi:!0,useExisting:Km}]}var wb=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-5SUDMNYJ.js").then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)};var Ua=class extends Error{constructor(t,e="FunctionsError",i){super(t),this.name=e,this.context=i}},Kc=class extends Ua{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Jc=class extends Ua{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Xc=class extends Ua{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},e0=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(e0||{});var kT=function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(m){try{f(i.next(m))}catch(_){a(_)}}function p(m){try{f(i.throw(m))}catch(_){a(_)}}function f(m){m.done?o(m.value):r(m.value).then(c,p)}f((i=i.apply(n,t||[])).next())})},Ba=class{constructor(t,{headers:e={},customFetch:i,region:r=e0.Any}={}){this.url=t,this.headers=e,this.region=r,this.fetch=wb(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var i;return kT(this,void 0,void 0,function*(){try{let{headers:r,method:o,body:a}=e,c={},{region:p}=e;p||(p=this.region),p&&p!=="any"&&(c["x-region"]=p);let f;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(c["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(c["Content-Type"]="application/json",f=JSON.stringify(a)));let m=yield this.fetch(`${this.url}/${t}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),r),body:f}).catch(D=>{throw new Kc(D)}),_=m.headers.get("x-relay-error");if(_&&_==="true")throw new Jc(m);if(!m.ok)throw new Xc(m);let M=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),y;return M==="application/json"?y=yield m.json():M==="application/octet-stream"?y=yield m.blob():M==="text/event-stream"?y=m:M==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null}}catch(r){return{data:null,error:r}}})}};var Fb=xx(Rb(),1),{PostgrestClient:Nb,PostgrestQueryBuilder:H9,PostgrestFilterBuilder:z9,PostgrestTransformBuilder:G9,PostgrestBuilder:W9,PostgrestError:$T}=Fb.default;function Vb(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}var jb=Vb();var Lb="2.11.15";var Ub=`realtime-js/${Lb}`,Bb="1.0.0";var id=1e4,$b=1e3,Ya=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(Ya||{}),_t=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(_t||{}),nn=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(nn||{}),p0=function(n){return n.websocket="websocket",n}(p0||{}),sr=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(sr||{});var rd=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,e,i)}_decodeBroadcast(t,e,i){let r=e.getUint8(1),o=e.getUint8(2),a=this.HEADER_LENGTH+2,c=i.decode(t.slice(a,a+r));a=a+r;let p=i.decode(t.slice(a,a+o));a=a+o;let f=JSON.parse(i.decode(t.slice(a,t.byteLength)));return{ref:null,topic:c,event:p,payload:f}}};var xo=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Pe=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(Pe||{}),m0=(n,t,e={})=>{var i;let r=(i=e.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((o,a)=>(o[a]=qT(a,n,t,r),o),{})},qT=(n,t,e,i)=>{let r=t.find(c=>c.name===n),o=r?.type,a=e[n];return o&&!i.includes(o)?qb(o,a):f0(a)},qb=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return WT(t,e)}switch(n){case Pe.bool:return HT(t);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return zT(t);case Pe.json:case Pe.jsonb:return GT(t);case Pe.timestamp:return YT(t);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return f0(t);default:return f0(t)}},f0=n=>n,HT=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},zT=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},GT=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},WT=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,i=n[e];if(n[0]==="{"&&i==="}"){let o,a=n.slice(1,e);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(c=>qb(t,c))}return n},YT=n=>typeof n=="string"?n.replace(" ","T"):n,od=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var wo=class{constructor(t,e,i={},r=id){this.channel=t,this.event=e,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var i;return this._hasReceived(t)&&e((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Za=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let i=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{let{onJoin:o,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,r,o,a),this.pendingDiffs.forEach(p=>{this.state=n.syncDiff(this.state,p,o,a)}),this.pendingDiffs=[],c()}),this.channel._on(i.diff,{},r=>{let{onJoin:o,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=n.syncDiff(this.state,r,o,a),c())}),this.onJoin((r,o,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:a})}),this.onLeave((r,o,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,i,r){let o=this.cloneDeep(t),a=this.transformState(e),c={},p={};return this.map(o,(f,m)=>{a[f]||(p[f]=m)}),this.map(a,(f,m)=>{let _=o[f];if(_){let M=m.map(U=>U.presence_ref),y=_.map(U=>U.presence_ref),D=m.filter(U=>y.indexOf(U.presence_ref)<0),V=_.filter(U=>M.indexOf(U.presence_ref)<0);D.length>0&&(c[f]=D),V.length>0&&(p[f]=V)}else c[f]=m}),this.syncDiff(o,{joins:c,leaves:p},i,r)}static syncDiff(t,e,i,r){let{joins:o,leaves:a}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(o,(c,p)=>{var f;let m=(f=t[c])!==null&&f!==void 0?f:[];if(t[c]=this.cloneDeep(p),m.length>0){let _=t[c].map(y=>y.presence_ref),M=m.filter(y=>_.indexOf(y.presence_ref)<0);t[c].unshift(...M)}i(c,m,p)}),this.map(a,(c,p)=>{let f=t[c];if(!f)return;let m=p.map(_=>_.presence_ref);f=f.filter(_=>m.indexOf(_.presence_ref)<0),t[c]=f,r(c,f,p),f.length===0&&delete t[c]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(i=>e(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,i)=>{let r=t[i];return"metas"in r?e[i]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):e[i]=r,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var di=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(di||{});var Qa=class n{constructor(t,e={config:{}},i){this.topic=t,this.params=e,this.socket=i,this.bindings={},this.state=_t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new wo(this,nn.join,this.params,this.timeout),this.rejoinTimer=new xo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_t.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nn.reply,{},(r,o)=>{this._trigger(this._replyEventName(o),r)}),this.presence=new Za(this),this.broadcastEndpointURL=od(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.state==_t.closed){let{config:{broadcast:o,presence:a,private:c}}=this.params;this._onError(m=>t?.(di.CHANNEL_ERROR,m)),this._onClose(()=>t?.(di.CLOSED));let p={},f={broadcast:o,presence:a,postgres_changes:(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(m=>m.filter))!==null&&r!==void 0?r:[],private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},p)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",_=>v(this,[_],function*({postgres_changes:m}){var M;if(this.socket.setAuth(),m===void 0){t?.(di.SUBSCRIBED);return}else{let y=this.bindings.postgres_changes,D=(M=y?.length)!==null&&M!==void 0?M:0,V=[];for(let U=0;U<D;U++){let H=y[U],{filter:{event:Ce,schema:Fe,table:z,filter:ye}}=H,an=m&&m[U];if(an&&an.event===Ce&&an.schema===Fe&&an.table===z&&an.filter===ye)V.push(Object.assign(Object.assign({},H),{id:an.id}));else{this.unsubscribe(),this.state=_t.errored,t?.(di.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=V,t&&t(di.SUBSCRIBED);return}})).receive("error",m=>{this.state=_t.errored,t?.(di.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t?.(di.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(i){return v(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return v(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,i){return this._on(t,e,i)}send(i){return v(this,arguments,function*(t,e={}){var r,o;if(!this._canPush()&&t.type==="broadcast"){let{event:a,payload:c}=t,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:c,private:this.private}]})};try{let m=yield this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=e.timeout)!==null&&r!==void 0?r:this.timeout);return yield(o=m.body)===null||o===void 0?void 0:o.cancel(),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var c,p,f;let m=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((f=(p=(c=this.params)===null||c===void 0?void 0:c.config)===null||p===void 0?void 0:p.broadcast)===null||f===void 0)&&f.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=_t.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new wo(this,nn.leave,{},t),i.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}_fetchWithTimeout(t,e,i){return v(this,null,function*(){let r=new AbortController,o=setTimeout(()=>r.abort(),i),a=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:r.signal}));return clearTimeout(o),a})}_push(t,e,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new wo(this,t,e,i);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(t,e,i){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,i){var r,o;let a=t.toLocaleLowerCase(),{close:c,error:p,leave:f,join:m}=nn;if(i&&[c,p,f,m].indexOf(a)>=0&&i!==this._joinRef())return;let M=this._onMessage(a,e,i);if(e&&!M)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(y=>{var D,V,U;return((D=y.filter)===null||D===void 0?void 0:D.event)==="*"||((U=(V=y.filter)===null||V===void 0?void 0:V.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===a}).map(y=>y.callback(M,i)):(o=this.bindings[a])===null||o===void 0||o.filter(y=>{var D,V,U,H,Ce,Fe;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in y){let z=y.id,ye=(D=y.filter)===null||D===void 0?void 0:D.event;return z&&((V=e.ids)===null||V===void 0?void 0:V.includes(z))&&(ye==="*"||ye?.toLocaleLowerCase()===((U=e.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{let z=(Ce=(H=y?.filter)===null||H===void 0?void 0:H.event)===null||Ce===void 0?void 0:Ce.toLocaleLowerCase();return z==="*"||z===((Fe=e?.event)===null||Fe===void 0?void 0:Fe.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===a}).map(y=>{if(typeof M=="object"&&"ids"in M){let D=M.data,{schema:V,table:U,commit_timestamp:H,type:Ce,errors:Fe}=D;M=Object.assign(Object.assign({},{schema:V,table:U,commit_timestamp:H,eventType:Ce,new:{},old:{},errors:Fe}),this._getPayloadRecords(D))}y.callback(M,i)})}_isClosed(){return this.state===_t.closed}_isJoined(){return this.state===_t.joined}_isJoining(){return this.state===_t.joining}_isLeaving(){return this.state===_t.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,i){let r=t.toLocaleLowerCase(),o={type:r,filter:e,callback:i};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(t,e){let i=t.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&n.isEqual(r.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let i in t)if(t[i]!==e[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(nn.close,{},t)}_onError(t){this._on(nn.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_t.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=m0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=m0(t.columns,t.old_record)),e}};var Hb=()=>{},QT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Ka=class{constructor(t,e){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=id,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hb,this.ref=0,this.logger=Hb,this.conn=null,this.sendBuffer=[],this.serializer=new rd,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...c)=>import("./chunk-5SUDMNYJ.js").then(({default:p})=>p(...c)):a=fetch,(...c)=>a(...c)},this.endPoint=`${t}/${p0.websocket}`,this.httpEndpoint=od(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let r=(i=e?.params)===null||i===void 0?void 0:i.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=e?.encode?e.encode:(o,a)=>a(JSON.stringify(o)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new xo(()=>v(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=jb),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Bb}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}removeChannel(t){return v(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return v(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,e,i){this.logger(t,e,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ya.connecting:return sr.Connecting;case Ya.open:return sr.Open;case Ya.closing:return sr.Closing;default:return sr.Closed}}isConnected(){return this.connectionState()===sr.Open}channel(t,e={config:{}}){let i=`realtime:${t}`,r=this.getChannels().find(o=>o.topic===i);if(r)return r;{let o=new Qa(`realtime:${t}`,e,this);return this.channels.push(o),o}}push(t){let{topic:e,event:i,payload:r,ref:o}=t,a=()=>{this.encode(t,c=>{var p;(p=this.conn)===null||p===void 0||p.send(c)})};this.log("push",`${e} ${i} (${o})`,r),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(t=null){return v(this,null,function*(){let e=t||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(i=>{let r={access_token:e,version:Ub};e&&i.updateJoinPayload(r),i.joinedOnce&&i._isJoined()&&i._push(nn.access_token,{access_token:e})}))})}sendHeartbeat(){return v(this,null,function*(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close($b,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),yield this.setAuth()})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:i,event:r,payload:o,ref:a}=e;i==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(e.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${i} ${r} ${a&&"("+a+")"||""}`,o),Array.from(this.channels).filter(c=>c._isMember(i)).forEach(c=>c._trigger(r,o,a)),this.stateChangeCallbacks.message.forEach(c=>c(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(nn.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let i=t.match(/\?/)?"&":"?",r=new URLSearchParams(e);return`${t}${i}${r}`}_workerObjectUrl(t){let e;if(t)e=t;else{let i=new Blob([QT],{type:"application/javascript"});e=URL.createObjectURL(i)}return e}};var Co=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Qe(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var ad=class extends Co{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},lr=class extends Co{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var KT=function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(m){try{f(i.next(m))}catch(_){a(_)}}function p(m){try{f(i.throw(m))}catch(_){a(_)}}function f(m){m.done?o(m.value):r(m.value).then(c,p)}f((i=i.apply(n,t||[])).next())})},ld=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-5SUDMNYJ.js").then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)},zb=()=>KT(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-5SUDMNYJ.js")).Response:Response}),sd=n=>{if(Array.isArray(n))return n.map(e=>sd(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,i])=>{let r=e.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[r]=sd(i)}),t};var cr=function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(m){try{f(i.next(m))}catch(_){a(_)}}function p(m){try{f(i.throw(m))}catch(_){a(_)}}function f(m){m.done?o(m.value):r(m.value).then(c,p)}f((i=i.apply(n,t||[])).next())})},g0=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),JT=(n,t,e)=>cr(void 0,void 0,void 0,function*(){let i=yield zb();n instanceof i&&!e?.noResolveJson?n.json().then(r=>{t(new ad(g0(r),n.status||500))}).catch(r=>{t(new lr(g0(r),r))}):t(new lr(g0(n),n))}),XT=(n,t,e,i)=>{let r={method:n,headers:t?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i&&(r.body=JSON.stringify(i)),Object.assign(Object.assign({},r),e))};function Ja(n,t,e,i,r,o){return cr(this,void 0,void 0,function*(){return new Promise((a,c)=>{n(e,XT(t,i,r,o)).then(p=>{if(!p.ok)throw p;return i?.noResolveJson?p:p.json()}).then(p=>a(p)).catch(p=>JT(p,c,i))})})}function So(n,t,e,i){return cr(this,void 0,void 0,function*(){return Ja(n,"GET",t,e,i)})}function Hn(n,t,e,i,r){return cr(this,void 0,void 0,function*(){return Ja(n,"POST",t,i,r,e)})}function Gb(n,t,e,i,r){return cr(this,void 0,void 0,function*(){return Ja(n,"PUT",t,i,r,e)})}function Wb(n,t,e,i){return cr(this,void 0,void 0,function*(){return Ja(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),i)})}function cd(n,t,e,i,r){return cr(this,void 0,void 0,function*(){return Ja(n,"DELETE",t,i,r,e)})}var jt=function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(m){try{f(i.next(m))}catch(_){a(_)}}function p(m){try{f(i.throw(m))}catch(_){a(_)}}function f(m){m.done?o(m.value):r(m.value).then(c,p)}f((i=i.apply(n,t||[])).next())})},e4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},dd=class{constructor(t,e={},i,r){this.url=t,this.headers=e,this.bucketId=i,this.fetch=ld(r)}uploadOrUpdate(t,e,i,r){return jt(this,void 0,void 0,function*(){try{let o,a=Object.assign(Object.assign({},Yb),r),c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)}),p=a.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),p&&o.append("metadata",this.encodeMetadata(p)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",a.cacheControl),p&&o.append("metadata",this.encodeMetadata(p))):(o=i,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,p&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(p)))),r?.headers&&(c=Object.assign(Object.assign({},c),r.headers));let f=this._removeEmptyFolders(e),m=this._getFinalPath(f),_=yield this.fetch(`${this.url}/object/${m}`,Object.assign({method:t,body:o,headers:c},a?.duplex?{duplex:a.duplex}:{})),M=yield _.json();return _.ok?{data:{path:f,id:M.Id,fullPath:M.Key},error:null}:{data:null,error:M}}catch(o){if(Qe(o))return{data:null,error:o};throw o}})}upload(t,e,i){return jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,i)})}uploadToSignedUrl(t,e,i,r){return jt(this,void 0,void 0,function*(){let o=this._removeEmptyFolders(t),a=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${a}`);c.searchParams.set("token",e);try{let p,f=Object.assign({upsert:Yb.upsert},r),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&i instanceof Blob?(p=new FormData,p.append("cacheControl",f.cacheControl),p.append("",i)):typeof FormData<"u"&&i instanceof FormData?(p=i,p.append("cacheControl",f.cacheControl)):(p=i,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);let _=yield this.fetch(c.toString(),{method:"PUT",body:p,headers:m}),M=yield _.json();return _.ok?{data:{path:o,fullPath:M.Key},error:null}:{data:null,error:M}}catch(p){if(Qe(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(t,e){return jt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),r=Object.assign({},this.headers);e?.upsert&&(r["x-upsert"]="true");let o=yield Hn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),a=new URL(this.url+o.url),c=a.searchParams.get("token");if(!c)throw new Co("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:c},error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}update(t,e,i){return jt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,i)})}move(t,e,i){return jt(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}copy(t,e,i){return jt(this,void 0,void 0,function*(){try{return{data:{path:(yield Hn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}createSignedUrl(t,e,i){return jt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),o=yield Hn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:e},i?.transform?{transform:i.transform}:{}),{headers:this.headers}),a=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}createSignedUrls(t,e,i){return jt(this,void 0,void 0,function*(){try{let r=yield Hn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}download(t,e){return jt(this,void 0,void 0,function*(){let r=typeof e?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(e?.transform||{}),a=o?`?${o}`:"";try{let c=this._getFinalPath(t);return{data:yield(yield So(this.fetch,`${this.url}/${r}/${c}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(Qe(c))return{data:null,error:c};throw c}})}info(t){return jt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let i=yield So(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:sd(i),error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}exists(t){return jt(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield Wb(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Qe(i)&&i instanceof lr){let r=i.originalError;if([400,404].includes(r?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,e){let i=this._getFinalPath(t),r=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&r.push(o);let c=typeof e?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(e?.transform||{});p!==""&&r.push(p);let f=r.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${i}${f}`)}}}remove(t){return jt(this,void 0,void 0,function*(){try{return{data:yield cd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(Qe(e))return{data:null,error:e};throw e}})}list(t,e,i){return jt(this,void 0,void 0,function*(){try{let r=Object.assign(Object.assign(Object.assign({},e4),e),{prefix:t||""});return{data:yield Hn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(Qe(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var Zb="2.7.1";var Qb={"X-Client-Info":`storage-js/${Zb}`};var Eo=function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(m){try{f(i.next(m))}catch(_){a(_)}}function p(m){try{f(i.throw(m))}catch(_){a(_)}}function f(m){m.done?o(m.value):r(m.value).then(c,p)}f((i=i.apply(n,t||[])).next())})},ud=class{constructor(t,e={},i){this.url=t,this.headers=Object.assign(Object.assign({},Qb),e),this.fetch=ld(i)}listBuckets(){return Eo(this,void 0,void 0,function*(){try{return{data:yield So(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Qe(t))return{data:null,error:t};throw t}})}getBucket(t){return Eo(this,void 0,void 0,function*(){try{return{data:yield So(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(Qe(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return Eo(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}updateBucket(t,e){return Eo(this,void 0,void 0,function*(){try{return{data:yield Gb(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Qe(i))return{data:null,error:i};throw i}})}emptyBucket(t){return Eo(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(Qe(e))return{data:null,error:e};throw e}})}deleteBucket(t){return Eo(this,void 0,void 0,function*(){try{return{data:yield cd(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(Qe(e))return{data:null,error:e};throw e}})}};var Xa=class extends ud{constructor(t,e={},i){super(t,e,i)}from(t){return new dd(this.url,this.headers,t,this.fetch)}};var Kb="2.50.2";var es="";typeof Deno<"u"?es="deno":typeof document<"u"?es="web":typeof navigator<"u"&&navigator.product==="ReactNative"?es="react-native":es="node";var t4={"X-Client-Info":`supabase-js-${es}/${Kb}`},Jb={headers:t4},Xb={schema:"public"},ey={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ty={};U0();var n4=function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(m){try{f(i.next(m))}catch(_){a(_)}}function p(m){try{f(i.throw(m))}catch(_){a(_)}}function f(m){m.done?o(m.value):r(m.value).then(c,p)}f((i=i.apply(n,t||[])).next())})},i4=n=>{let t;return n?t=n:typeof fetch>"u"?t=j0:t=fetch,(...e)=>t(...e)},r4=()=>typeof Headers>"u"?L0:Headers,ny=(n,t,e)=>{let i=i4(e),r=r4();return(o,a)=>n4(void 0,void 0,void 0,function*(){var c;let p=(c=yield t())!==null&&c!==void 0?c:n,f=new r(a?.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${p}`),i(o,Object.assign(Object.assign({},a),{headers:f}))})};var o4=function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(m){try{f(i.next(m))}catch(_){a(_)}}function p(m){try{f(i.throw(m))}catch(_){a(_)}}function f(m){m.done?o(m.value):r(m.value).then(c,p)}f((i=i.apply(n,t||[])).next())})};function iy(n){return n.endsWith("/")?n:n+"/"}function ry(n,t){var e,i;let{db:r,auth:o,realtime:a,global:c}=n,{db:p,auth:f,realtime:m,global:_}=t,M={db:Object.assign(Object.assign({},p),r),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},m),a),global:Object.assign(Object.assign(Object.assign({},_),c),{headers:Object.assign(Object.assign({},(e=_?.headers)!==null&&e!==void 0?e:{}),(i=c?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>o4(this,void 0,void 0,function*(){return""})};return n.accessToken?M.accessToken=n.accessToken:delete M.accessToken,M}var pd="2.70.0";var dr=30*1e3,fd=3,md=fd*dr,oy="http://localhost:9999",ay="supabase.auth.token";var sy={"X-Client-Info":`gotrue-js/${pd}`};var ts="X-Supabase-Api-Version",h0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ly=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cy=6e5;var ns=class extends Error{constructor(t,e,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=i}};function Q(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var gd=class extends ns{constructor(t,e,i){super(t,e,i),this.name="AuthApiError",this.status=e,this.code=i}};function dy(n){return Q(n)&&n.name==="AuthApiError"}var Mo=class extends ns{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},zn=class extends ns{constructor(t,e,i,r){super(t,i,r),this.name=e,this.status=i}},rn=class extends zn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function uy(n){return Q(n)&&n.name==="AuthSessionMissingError"}var ur=class extends zn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},pr=class extends zn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},fr=class extends zn{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function py(n){return Q(n)&&n.name==="AuthImplicitGrantRedirectError"}var is=class extends zn{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Io=class extends zn{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function hd(n){return Q(n)&&n.name==="AuthRetryableFetchError"}var rs=class extends zn{constructor(t,e,i){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=i}};var ui=class extends zn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var vd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fy=` 	
\r=`.split(""),a4=(()=>{let n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<fy.length;t+=1)n[fy[t].charCodeAt(0)]=-2;for(let t=0;t<vd.length;t+=1)n[vd[t].charCodeAt(0)]=t;return n})();function my(n,t,e){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){let i=t.queue>>t.queuedBits-6&63;e(vd[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let i=t.queue>>t.queuedBits-6&63;e(vd[i]),t.queuedBits-=6}}function gy(n,t,e){let i=a4[n];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function v0(n){let t=[],e=a=>{t.push(String.fromCodePoint(a))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},o=a=>{c4(a,i,e)};for(let a=0;a<n.length;a+=1)gy(n.charCodeAt(a),r,o);return t.join("")}function s4(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function l4(n,t){for(let e=0;e<n.length;e+=1){let i=n.charCodeAt(e);if(i>55295&&i<=56319){let r=(i-55296)*1024&65535;i=(n.charCodeAt(e+1)-56320&65535|r)+65536,e+=1}s4(i,t)}}function c4(n,t,e){if(t.utf8seq===0){if(n<=127){e(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function hy(n){let t=[],e={queue:0,queuedBits:0},i=r=>{t.push(r)};for(let r=0;r<n.length;r+=1)gy(n.charCodeAt(r),e,i);return new Uint8Array(t)}function vy(n){let t=[];return l4(n,e=>t.push(e)),new Uint8Array(t)}function _y(n){let t=[],e={queue:0,queuedBits:0},i=r=>{t.push(r)};return n.forEach(r=>my(r,e,i)),my(null,e,i),t.join("")}function by(n){return Math.round(Date.now()/1e3)+n}function yy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var on=()=>typeof window<"u"&&typeof document<"u",mr={tested:!1,writable:!1},Pi=()=>{if(!on())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mr.tested)return mr.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),mr.tested=!0,mr.writable=!0}catch{mr.tested=!0,mr.writable=!1}return mr.writable};function xy(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((r,o)=>{t[o]=r})}catch{}return e.searchParams.forEach((i,r)=>{t[r]=i}),t}var _d=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-5SUDMNYJ.js").then(({default:i})=>i(...e)):t=fetch,(...e)=>t(...e)},wy=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",_0=(n,t,e)=>v(null,null,function*(){yield n.setItem(t,JSON.stringify(e))}),as=(n,t)=>v(null,null,function*(){let e=yield n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),ss=(n,t)=>v(null,null,function*(){yield n.removeItem(t)}),os=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};os.promiseConstructor=Promise;function bd(n){let t=n.split(".");if(t.length!==3)throw new ui("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!ly.test(t[i]))throw new ui("JWT not in base64url format");return{header:JSON.parse(v0(t[0])),payload:JSON.parse(v0(t[1])),signature:hy(t[2]),raw:{header:t[0],payload:t[1]}}}function Cy(n){return v(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})}function Sy(n,t){return new Promise((i,r)=>{v(null,null,function*(){for(let o=0;o<1/0;o++)try{let a=yield n(o);if(!t(o,null,a)){i(a);return}}catch(a){if(!t(o,a)){r(a);return}}})})}function d4(n){return("0"+n.toString(16)).substr(-2)}function u4(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=e.length,r="";for(let o=0;o<56;o++)r+=e.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(t),Array.from(t,d4).join("")}function p4(n){return v(this,null,function*(){let e=new TextEncoder().encode(n),i=yield crypto.subtle.digest("SHA-256",e),r=new Uint8Array(i);return Array.from(r).map(o=>String.fromCharCode(o)).join("")})}function f4(n){return v(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield p4(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function gr(n,t,e=!1){return v(this,null,function*(){let i=u4(),r=i;e&&(r+="/PASSWORD_RECOVERY"),yield _0(n,`${t}-code-verifier`,r);let o=yield f4(i);return[o,i===o?"plain":"s256"]})}var m4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ey(n){let t=n.headers.get(ts);if(!t||!t.match(m4))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function My(n){if(!n)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function Iy(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var g4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hr(n){if(!g4.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var h4=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},vr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),v4=[502,503,504];function Dy(n){return v(this,null,function*(){var t;if(!wy(n))throw new Io(vr(n),0);if(v4.includes(n.status))throw new Io(vr(n),n.status);let e;try{e=yield n.json()}catch(o){throw new Mo(vr(o),o)}let i,r=Ey(n);if(r&&r.getTime()>=h0["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?i=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(i=e.error_code),i){if(i==="weak_password")throw new rs(vr(e),n.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new rn}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new rs(vr(e),n.status,e.weak_password.reasons);throw new gd(vr(e),n.status||500,i)})}var _4=(n,t,e,i)=>{let r={method:n,headers:t?.headers||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),e))};function se(n,t,e,i){return v(this,null,function*(){var r;let o=Object.assign({},i?.headers);o[ts]||(o[ts]=h0["2024-01-01"].name),i?.jwt&&(o.Authorization=`Bearer ${i.jwt}`);let a=(r=i?.query)!==null&&r!==void 0?r:{};i?.redirectTo&&(a.redirect_to=i.redirectTo);let c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",p=yield b4(n,t,e+c,{headers:o,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(p):{data:Object.assign({},p),error:null}})}function b4(n,t,e,i,r,o){return v(this,null,function*(){let a=_4(t,i,r,o),c;try{c=yield n(e,Object.assign({},a))}catch(p){throw console.error(p),new Io(vr(p),0)}if(c.ok||(yield Dy(c)),i?.noResolveJson)return c;try{return yield c.json()}catch(p){yield Dy(p)}})}function Gn(n){var t;let e=null;y4(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=by(n.expires_in)));let i=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:i},error:null}}function b0(n){let t=Gn(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,i)=>e&&typeof i=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Wn(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function Ty(n){return{data:n,error:null}}function ky(n){let{action_link:t,email_otp:e,hashed_token:i,redirect_to:r,verification_type:o}=n,a=h4(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:e,hashed_token:i,redirect_to:r,verification_type:o},p=Object.assign({},a);return{data:{properties:c,user:p},error:null}}function Py(n){return n}function y4(n){return n.access_token&&n.refresh_token&&n.expires_in}var yd=["global","local","others"];var x4=function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(e[i[r]]=n[i[r]]);return e},Do=class{constructor({url:t="",headers:e={},fetch:i}){this.url=t,this.headers=e,this.fetch=_d(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(i){return v(this,arguments,function*(t,e=yd[0]){if(yd.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${yd.join(", ")}`);try{return yield se(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}})}inviteUserByEmail(i){return v(this,arguments,function*(t,e={}){try{return yield se(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Wn})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}})}generateLink(t){return v(this,null,function*(){try{let{options:e}=t,i=x4(t,["options"]),r=Object.assign(Object.assign({},i),e);return"newEmail"in i&&(r.new_email=i?.newEmail,delete r.newEmail),yield se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ky,redirectTo:e?.redirectTo})}catch(e){if(Q(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return v(this,null,function*(){try{return yield se(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Wn})}catch(e){if(Q(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return v(this,null,function*(){var e,i,r,o,a,c,p;try{let f={nextPage:null,lastPage:0,total:0},m=yield se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&i!==void 0?i:"",per_page:(o=(r=t?.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:Py});if(m.error)throw m.error;let _=yield m.json(),M=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,y=(p=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&p!==void 0?p:[];return y.length>0&&(y.forEach(D=>{let V=parseInt(D.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(D.split(";")[1].split("=")[1]);f[`${U}Page`]=V}),f.total=parseInt(M)),{data:Object.assign(Object.assign({},_),f),error:null}}catch(f){if(Q(f))return{data:{users:[]},error:f};throw f}})}getUserById(t){return v(this,null,function*(){hr(t);try{return yield se(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Wn})}catch(e){if(Q(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return v(this,null,function*(){hr(t);try{return yield se(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Wn})}catch(i){if(Q(i))return{data:{user:null},error:i};throw i}})}deleteUser(t,e=!1){return v(this,null,function*(){hr(t);try{return yield se(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Wn})}catch(i){if(Q(i))return{data:{user:null},error:i};throw i}})}_listFactors(t){return v(this,null,function*(){hr(t.userId);try{let{data:e,error:i}=yield se(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:e,error:i}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return v(this,null,function*(){hr(t.userId),hr(t.id);try{return{data:yield se(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(Q(e))return{data:null,error:e};throw e}})}};var Oy={getItem:n=>Pi()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{Pi()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{Pi()&&globalThis.localStorage.removeItem(n)}};function y0(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function Ay(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var _r={debug:!!(globalThis&&Pi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},ls=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},xd=class extends ls{};function x0(n,t,e){return v(this,null,function*(){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);let i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),_r.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},r=>v(null,null,function*(){if(r){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return yield e()}finally{_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(t===0)throw _r.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new xd(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(_r.debug)try{let o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}})))})}Ay();var w4={url:oy,storageKey:ay,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function Ry(n,t,e){return v(this,null,function*(){return yield e()})}var w0=(()=>{class n{constructor(e){var i,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&on()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let o=Object.assign(Object.assign({},w4),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Do({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=_d(o.fetch),this.lock=o.lock||Ry,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:on()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=x0:this.lock=Ry,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:Pi()?this.storage=Oy:(this.memoryStorage={},this.storage=y0(this.memoryStorage)):(this.memoryStorage={},this.storage=y0(this.memoryStorage)),on()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",a=>v(this,null,function*(){this._debug("received broadcast notification from other tab or client",a),yield this._notifyAllSubscribers(a.data.event,a.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${pd}) ${new Date().toISOString()}`,...e),this}initialize(){return v(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=v(this,null,function*(){return yield this._acquireLock(-1,()=>v(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return v(this,null,function*(){var e;try{let i=xy(window.location.href),r="none";if(this._isImplicitGrantCallback(i)?r="implicit":(yield this._isPKCECallback(i))&&(r="pkce"),on()&&this.detectSessionInUrl&&r!=="none"){let{data:o,error:a}=yield this._getSessionFromURL(i,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),py(a)){let f=(e=a.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:a}}return yield this._removeSession(),{error:a}}let{session:c,redirectType:p}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",p),yield this._saveSession(c),setTimeout(()=>v(this,null,function*(){p==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",c):yield this._notifyAllSubscribers("SIGNED_IN",c)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(i){return Q(i)?{error:i}:{error:new Mo("Unexpected error during initialization",i)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return v(this,null,function*(){var i,r,o;try{let a=yield se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(i=e?.options)===null||i===void 0?void 0:i.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Gn}),{data:c,error:p}=a;if(p||!c)return{data:{user:null,session:null},error:p};let f=c.session,m=c.user;return c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}})}signUp(e){return v(this,null,function*(){var i,r,o;try{let a;if("email"in e){let{email:_,password:M,options:y}=e,D=null,V=null;this.flowType==="pkce"&&([D,V]=yield gr(this.storage,this.storageKey)),a=yield se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y?.emailRedirectTo,body:{email:_,password:M,data:(i=y?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:D,code_challenge_method:V},xform:Gn})}else if("phone"in e){let{phone:_,password:M,options:y}=e;a=yield se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:M,data:(r=y?.data)!==null&&r!==void 0?r:{},channel:(o=y?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y?.captchaToken}},xform:Gn})}else throw new pr("You must provide either an email or phone number and a password");let{data:c,error:p}=a;if(p||!c)return{data:{user:null,session:null},error:p};let f=c.session,m=c.user;return c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}})}signInWithPassword(e){return v(this,null,function*(){try{let i;if("email"in e){let{email:a,password:c,options:p}=e;i=yield se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:c,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:b0})}else if("phone"in e){let{phone:a,password:c,options:p}=e;i=yield se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:c,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:b0})}else throw new pr("You must provide either an email or phone number and a password");let{data:r,error:o}=i;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ur}:(r.session&&(yield this._saveSession(r.session),yield this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOAuth(e){return v(this,null,function*(){var i,r,o,a;return yield this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})})}exchangeCodeForSession(e){return v(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>v(this,null,function*(){return this._exchangeCodeForSession(e)}))})}signInWithWeb3(e){return v(this,null,function*(){let{chain:i}=e;if(i==="solana")return yield this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)})}signInWithSolana(e){return v(this,null,function*(){var i,r,o,a,c,p,f,m,_,M,y,D;let V,U;if("message"in e)V=e.message,U=e.signature;else{let{chain:H,wallet:Ce,statement:Fe,options:z}=e,ye;if(on())if(typeof Ce=="object")ye=Ce;else{let Ue=window;if("solana"in Ue&&typeof Ue.solana=="object"&&("signIn"in Ue.solana&&typeof Ue.solana.signIn=="function"||"signMessage"in Ue.solana&&typeof Ue.solana.signMessage=="function"))ye=Ue.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Ce!="object"||!z?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ye=Ce}let an=new URL((i=z?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in ye&&ye.signIn){let Ue=yield ye.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},z?.signInWithSolana),{version:"1",domain:an.host,uri:an.href}),Fe?{statement:Fe}:null)),Bt;if(Array.isArray(Ue)&&Ue[0]&&typeof Ue[0]=="object")Bt=Ue[0];else if(Ue&&typeof Ue=="object"&&"signedMessage"in Ue&&"signature"in Ue)Bt=Ue;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Bt&&"signature"in Bt&&(typeof Bt.signedMessage=="string"||Bt.signedMessage instanceof Uint8Array)&&Bt.signature instanceof Uint8Array)V=typeof Bt.signedMessage=="string"?Bt.signedMessage:new TextDecoder().decode(Bt.signedMessage),U=Bt.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ye)||typeof ye.signMessage!="function"||!("publicKey"in ye)||typeof ye!="object"||!ye.publicKey||!("toBase58"in ye.publicKey)||typeof ye.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");V=[`${an.host} wants you to sign in with your Solana account:`,ye.publicKey.toBase58(),...Fe?["",Fe,""]:[""],"Version: 1",`URI: ${an.href}`,`Issued At: ${(o=(r=z?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=z?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${z.signInWithSolana.notBefore}`]:[],...!((c=z?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${z.signInWithSolana.expirationTime}`]:[],...!((p=z?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${z.signInWithSolana.chainId}`]:[],...!((f=z?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${z.signInWithSolana.nonce}`]:[],...!((m=z?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${z.signInWithSolana.requestId}`]:[],...!((M=(_=z?.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||M===void 0)&&M.length?["Resources",...z.signInWithSolana.resources.map(Bt=>`- ${Bt}`)]:[]].join(`
`);let Ue=yield ye.signMessage(new TextEncoder().encode(V),"utf8");if(!Ue||!(Ue instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");U=Ue}}try{let{data:H,error:Ce}=yield se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:V,signature:_y(U)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(D=e.options)===null||D===void 0?void 0:D.captchaToken}}:null),xform:Gn});if(Ce)throw Ce;return!H||!H.session||!H.user?{data:{user:null,session:null},error:new ur}:(H.session&&(yield this._saveSession(H.session),yield this._notifyAllSubscribers("SIGNED_IN",H.session)),{data:Object.assign({},H),error:Ce})}catch(H){if(Q(H))return{data:{user:null,session:null},error:H};throw H}})}_exchangeCodeForSession(e){return v(this,null,function*(){let i=yield as(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(i??"").split("/");try{let{data:a,error:c}=yield se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gn});if(yield ss(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new ur}:(a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:c})}catch(a){if(Q(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}})}signInWithIdToken(e){return v(this,null,function*(){try{let{options:i,provider:r,token:o,access_token:a,nonce:c}=e,p=yield se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:a,nonce:c,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:Gn}),{data:f,error:m}=p;return m?{data:{user:null,session:null},error:m}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new ur}:(f.session&&(yield this._saveSession(f.session),yield this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:m})}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOtp(e){return v(this,null,function*(){var i,r,o,a,c;try{if("email"in e){let{email:p,options:f}=e,m=null,_=null;this.flowType==="pkce"&&([m,_]=yield gr(this.storage,this.storageKey));let{error:M}=yield se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(i=f?.data)!==null&&i!==void 0?i:{},create_user:(r=f?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:_},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:M}}if("phone"in e){let{phone:p,options:f}=e,{data:m,error:_}=yield se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(o=f?.data)!==null&&o!==void 0?o:{},create_user:(a=f?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(c=f?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:_}}throw new pr("You must provide either an email or phone number.")}catch(p){if(Q(p))return{data:{user:null,session:null},error:p};throw p}})}verifyOtp(e){return v(this,null,function*(){var i,r;try{let o,a;"options"in e&&(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);let{data:c,error:p}=yield se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Gn});if(p)throw p;if(!c)throw new Error("An error occurred on token verification.");let f=c.session,m=c.user;return f?.access_token&&(yield this._saveSession(f),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:m,session:f},error:null}}catch(o){if(Q(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithSSO(e){return v(this,null,function*(){var i,r,o;try{let a=null,c=null;return this.flowType==="pkce"&&([a,c]=yield gr(this.storage,this.storageKey)),yield se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:c}),headers:this.headers,xform:Ty})}catch(a){if(Q(a))return{data:null,error:a};throw a}})}reauthenticate(){return v(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>v(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return v(this,null,function*(){try{return yield this._useSession(e=>v(this,null,function*(){let{data:{session:i},error:r}=e;if(r)throw r;if(!i)throw new rn;let{error:o}=yield se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:o}}))}catch(e){if(Q(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return v(this,null,function*(){try{let i=`${this.url}/resend`;if("email"in e){let{email:r,type:o,options:a}=e,{error:c}=yield se(this.fetch,"POST",i,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){let{phone:r,type:o,options:a}=e,{data:c,error:p}=yield se(this.fetch,"POST",i,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:p}}throw new pr("You must provide either an email or phone number and a type")}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}})}getSession(){return v(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>v(this,null,function*(){return this._useSession(i=>v(this,null,function*(){return i}))}))})}_acquireLock(e,i){return v(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=v(this,null,function*(){return yield r,yield i()});return this.pendingInLock.push(v(this,null,function*(){try{yield o}catch{}})),o}return yield this.lock(`lock:${this.storageKey}`,e,()=>v(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let r=i();for(this.pendingInLock.push(v(this,null,function*(){try{yield r}catch{}})),yield r;this.pendingInLock.length;){let o=[...this.pendingInLock];yield Promise.all(o),this.pendingInLock.splice(0,o.length)}return yield r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return v(this,null,function*(){this._debug("#_useSession","begin");try{let i=yield this.__loadSession();return yield e(i)}finally{this._debug("#_useSession","end")}})}__loadSession(){return v(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,i=yield as(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let r=e.expires_at?e.expires_at*1e3-Date.now()<md:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,m,_)=>(!c&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,m,_))})}return{data:{session:e},error:null}}let{session:o,error:a}=yield this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return v(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>v(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return v(this,null,function*(){try{return e?yield se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wn}):yield this._useSession(i=>v(this,null,function*(){var r,o,a;let{data:c,error:p}=i;if(p)throw p;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rn}:yield se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Wn})}))}catch(i){if(Q(i))return uy(i)&&(yield this._removeSession(),yield ss(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}})}updateUser(r){return v(this,arguments,function*(e,i={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>v(this,null,function*(){return yield this._updateUser(e,i)}))})}_updateUser(r){return v(this,arguments,function*(e,i={}){try{return yield this._useSession(o=>v(this,null,function*(){let{data:a,error:c}=o;if(c)throw c;if(!a.session)throw new rn;let p=a.session,f=null,m=null;this.flowType==="pkce"&&e.email!=null&&([f,m]=yield gr(this.storage,this.storageKey));let{data:_,error:M}=yield se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:m}),jwt:p.access_token,xform:Wn});if(M)throw M;return p.user=_.user,yield this._saveSession(p),yield this._notifyAllSubscribers("USER_UPDATED",p),{data:{user:p.user},error:null}}))}catch(o){if(Q(o))return{data:{user:null},error:o};throw o}})}setSession(e){return v(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>v(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return v(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new rn;let i=Date.now()/1e3,r=i,o=!0,a=null,{payload:c}=bd(e.access_token);if(c.exp&&(r=c.exp,o=r<=i),o){let{session:p,error:f}=yield this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!p)return{data:{user:null,session:null},error:null};a=p}else{let{data:p,error:f}=yield this._getUser(e.access_token);if(f)throw f;a={access_token:e.access_token,refresh_token:e.refresh_token,user:p.user,token_type:"bearer",expires_in:r-i,expires_at:r},yield this._saveSession(a),yield this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(i){if(Q(i))return{data:{session:null,user:null},error:i};throw i}})}refreshSession(e){return v(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>v(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return v(this,null,function*(){try{return yield this._useSession(i=>v(this,null,function*(){var r;if(!e){let{data:c,error:p}=i;if(p)throw p;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new rn;let{session:o,error:a}=yield this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}}))}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}})}_getSessionFromURL(e,i){return v(this,null,function*(){try{if(!on())throw new fr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new is("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fr("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new is("No code detected.");let{data:Fe,error:z}=yield this._exchangeCodeForSession(e.code);if(z)throw z;let ye=new URL(window.location.href);return ye.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ye.toString()),{data:{session:Fe.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:o,access_token:a,refresh_token:c,expires_in:p,expires_at:f,token_type:m}=e;if(!a||!p||!c||!m)throw new fr("No session defined in URL");let _=Math.round(Date.now()/1e3),M=parseInt(p),y=_+M;f&&(y=parseInt(f));let D=y-_;D*1e3<=dr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${D}s, should have been closer to ${M}s`);let V=y-M;_-V>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",V,y,_):_-V<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",V,y,_);let{data:U,error:H}=yield this._getUser(a);if(H)throw H;let Ce={provider_token:r,provider_refresh_token:o,access_token:a,expires_in:M,expires_at:y,refresh_token:c,token_type:m,user:U.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Ce,redirectType:e.type},error:null}}catch(r){if(Q(r))return{data:{session:null,redirectType:null},error:r};throw r}})}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}_isPKCECallback(e){return v(this,null,function*(){let i=yield as(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)})}signOut(){return v(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>v(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return v(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(i=>v(this,null,function*(){var r;let{data:o,error:a}=i;if(a)return{error:a};let c=(r=o.session)===null||r===void 0?void 0:r.access_token;if(c){let{error:p}=yield this.admin.signOut(c,e);if(p&&!(dy(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return e!=="others"&&(yield this._removeSession(),yield ss(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(e){let i=yy(),r={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,r),v(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>v(this,null,function*(){this._emitInitialSession(i)}))}),{data:{subscription:r}}}_emitInitialSession(e){return v(this,null,function*(){return yield this._useSession(i=>v(this,null,function*(){var r,o;try{let{data:{session:a},error:c}=i;if(c)throw c;yield(r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){yield(o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}}))})}resetPasswordForEmail(r){return v(this,arguments,function*(e,i={}){let o=null,a=null;this.flowType==="pkce"&&([o,a]=yield gr(this.storage,this.storageKey,!0));try{return yield se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(c){if(Q(c))return{data:null,error:c};throw c}})}getUserIdentities(){return v(this,null,function*(){var e;try{let{data:i,error:r}=yield this.getUser();if(r)throw r;return{data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(i){if(Q(i))return{data:null,error:i};throw i}})}linkIdentity(e){return v(this,null,function*(){var i;try{let{data:r,error:o}=yield this._useSession(a=>v(this,null,function*(){var c,p,f,m,_;let{data:M,error:y}=a;if(y)throw y;let D=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(p=e.options)===null||p===void 0?void 0:p.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return yield se(this.fetch,"GET",D,{headers:this.headers,jwt:(_=(m=M.session)===null||m===void 0?void 0:m.access_token)!==null&&_!==void 0?_:void 0})}));if(o)throw o;return on()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(Q(r))return{data:{provider:e.provider,url:null},error:r};throw r}})}unlinkIdentity(e){return v(this,null,function*(){try{return yield this._useSession(i=>v(this,null,function*(){var r,o;let{data:a,error:c}=i;if(c)throw c;return yield se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})}))}catch(i){if(Q(i))return{data:null,error:i};throw i}})}_refreshAccessToken(e){return v(this,null,function*(){let i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{let r=Date.now();return yield Sy(o=>v(this,null,function*(){return o>0&&(yield Cy(200*Math.pow(2,o-1))),this._debug(i,"refreshing attempt",o),yield se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gn})}),(o,a)=>{let c=200*Math.pow(2,o);return a&&hd(a)&&Date.now()+c-r<dr})}catch(r){if(this._debug(i,"error",r),Q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(i,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,i){return v(this,null,function*(){let r=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",r),on()&&!i.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}})}_recoverAndRefresh(){return v(this,null,function*(){var e;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let r=yield as(this.storage,this.storageKey);if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&(yield this._removeSession());return}let o=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<md;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${md}s`),o){if(this.autoRefreshToken&&r.refresh_token){let{error:a}=yield this._callRefreshToken(r.refresh_token);a&&(console.error(a),hd(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}})}_callRefreshToken(e){return v(this,null,function*(){var i,r;if(!e)throw new rn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new os;let{data:a,error:c}=yield this._refreshAccessToken(e);if(c)throw c;if(!a.session)throw new rn;yield this._saveSession(a.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);let p={session:a.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(a){if(this._debug(o,"error",a),Q(a)){let c={session:null,error:a};return hd(a)||(yield this._removeSession()),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}})}_notifyAllSubscribers(e,i,r=!0){return v(this,null,function*(){let o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",i,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:i});let a=[],c=Array.from(this.stateChangeEmitters.values()).map(p=>v(this,null,function*(){try{yield p.callback(e,i)}catch(f){a.push(f)}}));if(yield Promise.all(c),a.length>0){for(let p=0;p<a.length;p+=1)console.error(a[p]);throw a[0]}}finally{this._debug(o,"end")}})}_saveSession(e){return v(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield _0(this.storage,this.storageKey,e)})}_removeSession(){return v(this,null,function*(){this._debug("#_removeSession()"),yield ss(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&on()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}_startAutoRefresh(){return v(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),dr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>v(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return v(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return v(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return v(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return v(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>v(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(i=>v(this,null,function*(){let{data:{session:r}}=i;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((r.expires_at*1e3-e)/dr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${dr}ms, refresh threshold is ${fd} ticks`),o<=fd&&(yield this._callRefreshToken(r.refresh_token))}))}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof ls)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return v(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!on()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>v(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return v(this,null,function*(){let i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>v(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,i,r){return v(this,null,function*(){let o=[`provider=${encodeURIComponent(i)}`];if(r?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){let[a,c]=yield gr(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(p.toString())}if(r?.queryParams){let a=new URLSearchParams(r.queryParams);o.push(a.toString())}return r?.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`})}_unenroll(e){return v(this,null,function*(){try{return yield this._useSession(i=>v(this,null,function*(){var r;let{data:o,error:a}=i;return a?{data:null,error:a}:yield se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token})}))}catch(i){if(Q(i))return{data:null,error:i};throw i}})}_enroll(e){return v(this,null,function*(){try{return yield this._useSession(i=>v(this,null,function*(){var r,o;let{data:a,error:c}=i;if(c)return{data:null,error:c};let p=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:m}=yield se(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((o=f?.totp)===null||o===void 0)&&o.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})}))}catch(i){if(Q(i))return{data:null,error:i};throw i}})}_verify(e){return v(this,null,function*(){return this._acquireLock(-1,()=>v(this,null,function*(){try{return yield this._useSession(i=>v(this,null,function*(){var r;let{data:o,error:a}=i;if(a)return{data:null,error:a};let{data:c,error:p}=yield se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:p})}))}catch(i){if(Q(i))return{data:null,error:i};throw i}}))})}_challenge(e){return v(this,null,function*(){return this._acquireLock(-1,()=>v(this,null,function*(){try{return yield this._useSession(i=>v(this,null,function*(){var r;let{data:o,error:a}=i;return a?{data:null,error:a}:yield se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=o?.session)===null||r===void 0?void 0:r.access_token})}))}catch(i){if(Q(i))return{data:null,error:i};throw i}}))})}_challengeAndVerify(e){return v(this,null,function*(){let{data:i,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})})}_listFactors(){return v(this,null,function*(){let{data:{user:e},error:i}=yield this.getUser();if(i)return{data:null,error:i};let r=e?.factors||[],o=r.filter(c=>c.factor_type==="totp"&&c.status==="verified"),a=r.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:r,totp:o,phone:a},error:null}})}_getAuthenticatorAssuranceLevel(){return v(this,null,function*(){return this._acquireLock(-1,()=>v(this,null,function*(){return yield this._useSession(e=>v(this,null,function*(){var i,r;let{data:{session:o},error:a}=e;if(a)return{data:null,error:a};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:c}=bd(o.access_token),p=null;c.aal&&(p=c.aal);let f=p;((r=(i=o.user.factors)===null||i===void 0?void 0:i.filter(M=>M.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");let _=c.amr||[];return{data:{currentLevel:p,nextLevel:f,currentAuthenticationMethods:_},error:null}}))}))})}fetchJwk(r){return v(this,arguments,function*(e,i={keys:[]}){let o=i.keys.find(p=>p.kid===e);if(o||(o=this.jwks.keys.find(p=>p.kid===e),o&&this.jwks_cached_at+cy>Date.now()))return o;let{data:a,error:c}=yield se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;if(!a.keys||a.keys.length===0)throw new ui("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),o=a.keys.find(p=>p.kid===e),!o)throw new ui("No matching signing key found in JWKS");return o})}getClaims(r){return v(this,arguments,function*(e,i={keys:[]}){try{let o=e;if(!o){let{data:V,error:U}=yield this.getSession();if(U||!V.session)return{data:null,error:U};o=V.session.access_token}let{header:a,payload:c,signature:p,raw:{header:f,payload:m}}=bd(o);if(My(c.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){let{error:V}=yield this.getUser(o);if(V)throw V;return{data:{claims:c,header:a,signature:p},error:null}}let _=Iy(a.alg),M=yield this.fetchJwk(a.kid,i),y=yield crypto.subtle.importKey("jwk",M,_,!0,["verify"]);if(!(yield crypto.subtle.verify(_,y,p,vy(`${f}.${m}`))))throw new ui("Invalid JWT signature");return{data:{claims:c,header:a,signature:p},error:null}}catch(o){if(Q(o))return{data:null,error:o};throw o}})}}return n.nextInstanceID=0,n})();var C4=w0,C0=C4;var wd=class extends C0{constructor(t){super(t)}};var S4=function(n,t,e,i){function r(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function c(m){try{f(i.next(m))}catch(_){a(_)}}function p(m){try{f(i.throw(m))}catch(_){a(_)}}function f(m){m.done?o(m.value):r(m.value).then(c,p)}f((i=i.apply(n,t||[])).next())})},Cd=class{constructor(t,e,i){var r,o,a;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let c=iy(t),p=new URL(c);this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);let f=`sb-${p.hostname.split(".")[0]}-auth-token`,m={db:Xb,realtime:ty,auth:Object.assign(Object.assign({},ey),{storageKey:f}),global:Jb},_=ry(i??{},m);this.storageKey=(r=_.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(o=_.global.headers)!==null&&o!==void 0?o:{},_.accessToken?(this.accessToken=_.accessToken,this.auth=new Proxy({},{get:(M,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=_.auth)!==null&&a!==void 0?a:{},this.headers,_.global.fetch),this.fetch=ny(e,this._getAccessToken.bind(this),_.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},_.realtime)),this.rest=new Nb(new URL("rest/v1",p).href,{headers:this.headers,schema:_.db.schema,fetch:this.fetch}),_.accessToken||this._listenForAuthEvents()}get functions(){return new Ba(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Xa(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return S4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:i}=yield this.auth.getSession();return(e=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:r,storageKey:o,flowType:a,lock:c,debug:p},f,m){let _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wd({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),f),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:r,flowType:a,lock:c,debug:p,fetch:m,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Ka(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,i)=>{this._handleTokenChanged(e,"CLIENT",i?.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Fy=(n,t,e)=>new Cd(n,t,e);var S0={production:!1,supabaseUrl:"https://shkxmthkdtkyllizapqj.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNoa3htdGhrZHRreWxsaXphcHFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEwNzQ1NTMsImV4cCI6MjA2NjY1MDU1M30.XaHIB5eoR9BZJhE3CFPhQkL1S0J9fb_qYF40S9xSqUE",socialProviders:{google:!0,facebook:!0}};var me=class n{supabase;currentUserSubject=new Ne(null);currentUser$=this.currentUserSubject.asObservable();constructor(){this.supabase=Fy(S0.supabaseUrl,S0.supabaseKey),this.loadUser()}loadUser(){return v(this,null,function*(){let{data:{user:t}}=yield this.supabase.auth.getUser();this.currentUserSubject.next(t)})}signUp(t,e,i){return v(this,null,function*(){let{data:r,error:o}=yield this.supabase.auth.signUp({email:t,password:e,options:{data:i}});return r.user&&this.currentUserSubject.next(r.user),{data:r,error:o}})}signIn(t,e){return v(this,null,function*(){let{data:i,error:r}=yield this.supabase.auth.signInWithPassword({email:t,password:e});return i.user&&this.currentUserSubject.next(i.user),{data:i,error:r}})}signOut(){return v(this,null,function*(){let{error:t}=yield this.supabase.auth.signOut();return this.currentUserSubject.next(null),{error:t}})}getCurrentUser(){return v(this,null,function*(){return yield this.supabase.auth.getUser()})}getProfile(t){return v(this,null,function*(){try{let e=t||this.currentUserSubject.value?.id;if(!e)throw new Error("No user ID provided");let{data:i,error:r}=yield this.supabase.from("profiles").select("*").eq("id",e).single();if(r)throw r;return i}catch(e){return console.error("Error obteniendo perfil:",e),null}})}updateProfile(t){return v(this,null,function*(){try{let e=this.currentUserSubject.value?.id;if(!e)throw new Error("No authenticated user");let{data:i,error:r}=yield this.supabase.from("profiles").update(G(A({},t),{updated_at:new Date().toISOString()})).eq("id",e).select().single();if(r)throw r;return i}catch(e){throw console.error("Error actualizando perfil:",e),e}})}uploadAvatar(t){return v(this,null,function*(){try{let e=this.currentUserSubject.value?.id;if(!e)throw new Error("No authenticated user");let i=t.name.split(".").pop(),o=`avatars/${`${e}-${Math.random()}.${i}`}`,{error:a}=yield this.supabase.storage.from("avatars").upload(o,t);if(a)throw a;let{data:c}=this.supabase.storage.from("avatars").getPublicUrl(o);return c.publicUrl}catch(e){return console.error("Error subiendo avatar:",e),null}})}getData(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabase.from(t).select("*").order("id",{ascending:!1});if(i)throw i;return e}catch(e){throw console.error("Error en getData:",e),e}})}getDataWithFilters(t,e="*",i){return v(this,null,function*(){try{let r=this.supabase.from(t).select(e);i&&Object.keys(i).forEach(c=>{r=r.eq(c,i[c])}),r=r.order("id",{ascending:!1});let{data:o,error:a}=yield r;if(a)throw a;return o}catch(r){throw console.error("Error en getDataWithFilters:",r),r}})}insertData(t,e){return v(this,null,function*(){try{let{data:i,error:r}=yield this.supabase.from(t).insert(e).select();if(r)throw r;return i}catch(i){throw console.error("Error en insertData:",i),i}})}insertBulkData(t,e){return v(this,null,function*(){try{let{data:i,error:r}=yield this.supabase.from(t).insert(e).select();if(r)throw r;return i}catch(i){throw console.error("Error en insertBulkData:",i),i}})}deleteData(t,e){return v(this,null,function*(){try{let{error:i}=yield this.supabase.from(t).delete().eq("id",e);if(i)throw i;return!0}catch(i){throw console.error("Error en deleteData:",i),i}})}updateData(t,e,i){return v(this,null,function*(){try{let{data:r,error:o}=yield this.supabase.from(t).update(i).eq("id",e).select();if(o)throw o;return r}catch(r){throw console.error("Error en updateData:",r),r}})}getDataCustomQuery(t,e,i,r){return v(this,null,function*(){try{let o=this.supabase.from(t).select(e);r?o=o.order(r.column,{ascending:r.ascending}):o=o.order("id",{ascending:!1});let{data:a,error:c}=yield o;if(c)throw c;return a}catch(o){throw console.error("Error en getDataCustomQuery:",o),o}})}executeRPC(t,e){return v(this,null,function*(){try{let{data:i,error:r}=yield this.supabase.rpc(t,e);if(r)throw r;return i}catch(i){throw console.error("Error en executeRPC:",i),i}})}get client(){return this.supabase}isAuthenticated(){return this.currentUserSubject.value!==null}getCurrentUser$(){return this.currentUser$}ensureArray(t){return t||[]}static \u0275fac=function(e){return new(e||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var re=class n{constructor(t,e){this.supabaseService=t;this.router=e;this.loadUserFromStorage()}currentUser=null;loadUserFromStorage(){let t=localStorage.getItem("currentUser");if(t)try{this.currentUser=JSON.parse(t)}catch(e){console.error("Error parsing stored user:",e),localStorage.removeItem("currentUser")}}login(t){return v(this,null,function*(){try{console.log("Intentando login con:",t.username);let{data:e,error:i}=yield this.supabaseService.client.from("profiles").select("*").eq("username",t.username).eq("status",1);if(console.log("Respuesta de Supabase:",{users:e,error:i}),i)return console.error("Error de Supabase:",i),{success:!1,message:"Error al conectar con la base de datos"};if(!e||e.length===0)return{success:!1,message:"Usuario no encontrado o inactivo"};let r=e[0];if(r.password!==t.password)return{success:!1,message:"Contrase\xF1a incorrecta"};let o={id:r.id,username:r.username,full_name:r.full_name,password:r.password,status:r.status,id_perfil:r.id_perfil,created_at:r.created_at};return this.currentUser=o,localStorage.setItem("currentUser",JSON.stringify(o)),console.log("Login exitoso para:",o.username),{success:!0,message:"Login exitoso",user:o}}catch(e){return console.error("Error en login:",e),{success:!1,message:"Error inesperado del servidor"}}})}register(t){return v(this,null,function*(){try{console.log("Intentando registrar usuario:",t.username);let{data:e,error:i}=yield this.supabaseService.client.from("profiles").select("username").eq("username",t.username);if(console.log("Verificaci\xF3n de usuario existente:",{existingUser:e,checkError:i}),i)return console.error("Error verificando usuario:",i),{success:!1,message:"Error al verificar usuario existente"};if(e&&e.length>0)return{success:!1,message:"El nombre de usuario ya existe"};let r={username:t.username,full_name:t.full_name,password:t.password,status:1,id_perfil:t.id_perfil||2};console.log("Datos a insertar:",r);let{data:o,error:a}=yield this.supabaseService.client.from("profiles").insert(r).select();return console.log("Resultado de inserci\xF3n:",{newUser:o,insertError:a}),a?(console.error("Error insertando usuario:",a),{success:!1,message:"Error al crear usuario: "+a.message}):o&&o.length>0?(console.log("Usuario creado exitosamente:",o[0]),{success:!0,message:"Usuario creado exitosamente",user:{id:o[0].id,username:o[0].username,full_name:o[0].full_name,password:o[0].password,status:o[0].status,id_perfil:o[0].id_perfil,created_at:o[0].created_at}}):{success:!1,message:"Error al crear usuario - no se recibieron datos"}}catch(e){return console.error("Error en registro:",e),{success:!1,message:"Error inesperado del servidor"}}})}logout(){console.log("Cerrando sesi\xF3n"),this.currentUser=null,localStorage.removeItem("currentUser"),this.router.navigate(["/langing"])}getCurrentUser(){return this.currentUser}isAuthenticated(){return this.getCurrentUser()!==null}getCurrentUserProfile(){return this.getCurrentUser()?.id_perfil||null}hasProfile(t){return this.getCurrentUserProfile()===t}isAdmin(){return this.hasProfile(1)}static \u0275fac=function(e){return new(e||n)(B(me),B(fe))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var pi=class n{constructor(t,e){this.supabaseService=t;this.authService=e}userMenuSubject=new Ne([]);userMenu$=this.userMenuSubject.asObservable();userPermissionsSubject=new Ne([]);userPermissions$=this.userPermissionsSubject.asObservable();loadUserMenu(){return v(this,null,function*(){let t=this.authService.getCurrentUser();if(!t?.id)return this.userMenuSubject.next([]),[];try{let{data:e,error:i}=yield this.supabaseService.client.rpc("get_user_menu",{p_user_id:t.id});if(i)return console.error("Error obteniendo men\xFA del usuario:",i),this.userMenuSubject.next([]),[];let r=this.buildMenuTree(e||[]);return this.userMenuSubject.next(r),r}catch(e){return console.error("Error en loadUserMenu:",e),this.userMenuSubject.next([]),[]}})}loadUserPermissions(){return v(this,null,function*(){let t=this.authService.getCurrentUser();if(!t?.id)return this.userPermissionsSubject.next([]),[];try{let{data:e,error:i}=yield this.supabaseService.client.from("v_permisos_usuario").select("*").eq("user_id",t.id).eq("granted",!0);if(i)return console.error("Error obteniendo permisos del usuario:",i),this.userPermissionsSubject.next([]),[];let r=e||[];return this.userPermissionsSubject.next(r),r}catch(e){return console.error("Error en loadUserPermissions:",e),this.userPermissionsSubject.next([]),[]}})}getCurrentUserMenu(){return v(this,null,function*(){return yield this.loadUserMenu()})}hasPermission(t,e){return v(this,null,function*(){let i=this.authService.getCurrentUser();if(!i?.id)return!1;try{let{data:r,error:o}=yield this.supabaseService.client.rpc("user_has_permission",{p_user_id:i.id,p_route:t,p_permission_code:e});return o?(console.error("Error verificando permiso:",o),!1):r===!0}catch(r){return console.error("Error en hasPermission:",r),!1}})}canAccessRoute(t){return v(this,null,function*(){return yield this.hasPermission(t,"view")})}hasAnyPermission(t,e){return v(this,null,function*(){for(let i of e)if(yield this.hasPermission(t,i))return!0;return!1})}getUserPermissions(){return v(this,null,function*(){return yield this.loadUserPermissions()})}buildMenuTree(t){let e=new Map,i=[];return t.forEach(r=>{let o={id_modulo:r.modulo_id||r.id_modulo,nombre:r.nombre,descripcion:r.descripcion,icono:r.icono,ruta:r.ruta,orden:r.orden,es_padre:r.es_padre,modulo_padre_id:r.modulo_padre_id,permisos:r.permisos||[],children:[],expanded:!1};e.set(o.id_modulo,o)}),e.forEach(r=>{if(r.modulo_padre_id===null)i.push(r);else{let o=e.get(r.modulo_padre_id);o&&(o.children||(o.children=[]),o.children.push(r))}}),this.sortMenuItems(i),i}sortMenuItems(t){t.sort((e,i)=>e.orden-i.orden),t.forEach(e=>{e.children&&e.children.length>0&&this.sortMenuItems(e.children)})}canView(t){return v(this,null,function*(){return yield this.hasPermission(t,"view")})}canCreate(t){return v(this,null,function*(){return yield this.hasPermission(t,"create")})}canEdit(t){return v(this,null,function*(){return yield this.hasPermission(t,"edit")})}canDelete(t){return v(this,null,function*(){return yield this.hasPermission(t,"delete")})}canExport(t){return v(this,null,function*(){return yield this.hasPermission(t,"export")})}canAdmin(t){return v(this,null,function*(){return yield this.hasPermission(t,"admin")})}clearUserData(){this.userMenuSubject.next([]),this.userPermissionsSubject.next([])}refreshUserData(){return v(this,null,function*(){yield Promise.all([this.loadUserMenu(),this.loadUserPermissions()])})}getUserMenu(){return this.userMenu$}getUserPermissionsObservable(){return this.userPermissions$}createDefaultMenu(){let t=[{id_modulo:1,nombre:"Dashboard",descripcion:"Panel principal",icono:"fas fa-tachometer-alt",ruta:"/dashboard",orden:1,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1},{id_modulo:2,nombre:"Usuarios",descripcion:"Gesti\xF3n de usuarios",icono:"fas fa-users",ruta:"/usuarios",orden:2,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1},{id_modulo:3,nombre:"Reportes",descripcion:"Sistema de reportes",icono:"fas fa-chart-bar",ruta:"/reportes",orden:3,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1},{id_modulo:4,nombre:"Configuraci\xF3n",descripcion:"Configuraci\xF3n del sistema",icono:"fas fa-cog",ruta:"/configuracion",orden:4,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1}];return this.userMenuSubject.next(t),t}static \u0275fac=function(e){return new(e||n)(B(me),B(re))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var Oi=class n{constructor(t,e,i){this.authService=t;this.permissionsService=e;this.router=i}canActivate(t,e){return v(this,null,function*(){if(!this.authService.isAuthenticated())return console.log("Usuario no autenticado, redirigiendo a login"),this.router.navigate(["/login"]),!1;if(!this.authService.getCurrentUser())return console.log("No se pudo obtener el usuario actual"),this.router.navigate(["/login"]),!1;let r=e.url;if(console.log("Verificando acceso a ruta:",r),["/dashboard","/login","/register"].includes(r))return console.log("Ruta p\xFAblica, acceso permitido"),!0;try{return(yield this.permissionsService.canAccessRoute(r))?(console.log("Acceso autorizado a:",r),!0):(console.log("Usuario sin permisos para acceder a:",r),this.router.navigate(["/dashboard"],{queryParams:{error:"no_permissions",attempted_route:r}}),!1)}catch(a){return console.error("Error verificando permisos:",a),!0}})}static \u0275fac=function(e){return new(e||n)(B(re),B(pi),B(fe))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})},br=class n{constructor(t,e,i){this.authService=t;this.permissionsService=e;this.router=i}canActivate(t,e){return v(this,null,function*(){if(!this.authService.isAuthenticated())return this.router.navigate(["/login"]),!1;let i=t.data.permissions,r=e.url;if(!i||i.length===0)return yield this.permissionsService.canAccessRoute(r);try{return(yield this.permissionsService.hasAnyPermission(r,i))?!0:(console.log("Permisos insuficientes para:",r,"Requeridos:",i),this.router.navigate(["/dashboard"],{queryParams:{error:"insufficient_permissions",required:i.join(","),attempted_route:r}}),!1)}catch(o){return console.error("Error en PermissionGuard:",o),!1}})}static \u0275fac=function(e){return new(e||n)(B(re),B(pi),B(fe))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})},cs=class n{constructor(t,e){this.authService=t;this.router=e}canActivate(t,e){if(!this.authService.isAuthenticated())return this.router.navigate(["/login"]),!1;let i=this.authService.getCurrentUser(),r=t.data.profiles;if(!r||r.length===0)return!0;let o=i?.id_perfil;return o?r.includes(o)?!0:(console.log("Perfil insuficiente:",o,"Requeridos:",r),this.router.navigate(["/dashboard"],{queryParams:{error:"insufficient_role",required:r.join(",")}}),!1):(console.log("Usuario sin perfil asignado"),this.router.navigate(["/dashboard"],{queryParams:{error:"no_profile"}}),!1)}static \u0275fac=function(e){return new(e||n)(B(re),B(fe))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var zy=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(O(mn),O(wt))};static \u0275dir=_e({type:n})}return n})(),Fd=(()=>{class n extends zy{static \u0275fac=(()=>{let e;return function(r){return(e||(e=fn(n)))(r||n)}})();static \u0275dir=_e({type:n,features:[mt]})}return n})(),Ao=new q("");var E4={provide:Ao,useExisting:Pt(()=>we),multi:!0};function M4(){let n=Gt()?Gt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var I4=new q(""),we=(()=>{class n extends zy{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!M4())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(O(mn),O(wt),O(I4,8))};static \u0275dir=_e({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&x("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[en([E4]),mt]})}return n})();function T0(n){return n==null||k0(n)===0}function k0(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var xr=new q(""),Nd=new q(""),D4=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ze=class{static min(t){return Gy(t)}static max(t){return Wy(t)}static required(t){return Yy(t)}static requiredTrue(t){return T4(t)}static email(t){return k4(t)}static minLength(t){return P4(t)}static maxLength(t){return O4(t)}static pattern(t){return A4(t)}static nullValidator(t){return Ed()}static compose(t){return ex(t)}static composeAsync(t){return tx(t)}};function Gy(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function Wy(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function Yy(n){return T0(n.value)?{required:!0}:null}function T4(n){return n.value===!0?null:{required:!0}}function k4(n){return T0(n.value)||D4.test(n.value)?null:{email:!0}}function P4(n){return t=>{let e=t.value?.length??k0(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function O4(n){return t=>{let e=t.value?.length??k0(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function A4(n){if(!n)return Ed;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(T0(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Ed(n){return null}function Zy(n){return n!=null}function Qy(n){return Ji(n)?De(n):n}function Ky(n){let t={};return n.forEach(e=>{t=e!=null?A(A({},t),e):t}),Object.keys(t).length===0?null:t}function Jy(n,t){return t.map(e=>e(n))}function R4(n){return!n.validate}function Xy(n){return n.map(t=>R4(t)?t:e=>t.validate(e))}function ex(n){if(!n)return null;let t=n.filter(Zy);return t.length==0?null:function(e){return Ky(Jy(e,t))}}function P0(n){return n!=null?ex(Xy(n)):null}function tx(n){if(!n)return null;let t=n.filter(Zy);return t.length==0?null:function(e){let i=Jy(e,t).map(Qy);return Lu(i).pipe(ue(Ky))}}function O0(n){return n!=null?tx(Xy(n)):null}function Ny(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function nx(n){return n._rawValidators}function ix(n){return n._rawAsyncValidators}function M0(n){return n?Array.isArray(n)?n:[n]:[]}function Md(n,t){return Array.isArray(n)?n.includes(t):n===t}function Vy(n,t){let e=M0(t);return M0(n).forEach(r=>{Md(e,r)||e.push(r)}),e}function jy(n,t){return M0(t).filter(e=>!Md(n,e))}var Id=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=P0(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=O0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},fi=class extends Id{name;get formDirective(){return null}get path(){return null}},yr=class extends Id{_parent=null;name=null;valueAccessor=null},Dd=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},F4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Q$=G(A({},F4),{"[class.ng-submitted]":"isSubmitted"}),Ie=(()=>{class n extends Dd{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(O(yr,2))};static \u0275dir=_e({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&X("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[mt]})}return n})(),Ke=(()=>{class n extends Dd{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(O(fi,10))};static \u0275dir=_e({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&X("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[mt]})}return n})();var ds="VALID",Sd="INVALID",To="PENDING",us="DISABLED",Ai=class{},Td=class extends Ai{value;source;constructor(t,e){super(),this.value=t,this.source=e}},fs=class extends Ai{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},ms=class extends Ai{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},ko=class extends Ai{status;source;constructor(t,e){super(),this.status=t,this.source=e}},kd=class extends Ai{source;constructor(t){super(),this.source=t}},Pd=class extends Ai{source;constructor(t){super(),this.source=t}};function A0(n){return(Vd(n)?n.validators:n)||null}function N4(n){return Array.isArray(n)?P0(n):n||null}function R0(n,t){return(Vd(t)?t.asyncValidators:n)||null}function V4(n){return Array.isArray(n)?O0(n):n||null}function Vd(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function rx(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new $(1e3,"");if(!i[e])throw new $(1001,"")}function ox(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new $(1002,"")})}var Po=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Vn(this.statusReactive)}set status(t){Vn(()=>this.statusReactive.set(t))}_status=ao(()=>this.statusReactive());statusReactive=eo(void 0);get valid(){return this.status===ds}get invalid(){return this.status===Sd}get pending(){return this.status==To}get disabled(){return this.status===us}get enabled(){return this.status!==us}errors;get pristine(){return Vn(this.pristineReactive)}set pristine(t){Vn(()=>this.pristineReactive.set(t))}_pristine=ao(()=>this.pristineReactive());pristineReactive=eo(!0);get dirty(){return!this.pristine}get touched(){return Vn(this.touchedReactive)}set touched(t){Vn(()=>this.touchedReactive.set(t))}_touched=ao(()=>this.touchedReactive());touchedReactive=eo(!1);get untouched(){return!this.touched}_events=new Be;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Vy(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Vy(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(jy(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(jy(t,this._rawAsyncValidators))}hasValidator(t){return Md(this._rawValidators,t)}hasAsyncValidator(t){return Md(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(G(A({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new ms(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new ms(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(G(A({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new fs(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new fs(!0,i))}markAsPending(t={}){this.status=To;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ko(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(G(A({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=us,this.errors=null,this._forEachChild(r=>{r.disable(G(A({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Td(this.value,i)),this._events.next(new ko(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(G(A({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=ds,this._forEachChild(i=>{i.enable(G(A({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(G(A({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ds||this.status===To)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Td(this.value,e)),this._events.next(new ko(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(G(A({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?us:ds}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=To,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=Qy(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new ko(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?us:this.errors?Sd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(To)?To:this._anyControlsHaveStatus(Sd)?Sd:ds}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new fs(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new ms(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Vd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=N4(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=V4(this._rawAsyncValidators)}},Oo=class extends Po{constructor(t,e,i){super(A0(e),R0(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){ox(this,!0,t),Object.keys(t).forEach(i=>{rx(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var I0=class extends Oo{};var hs=new q("",{providedIn:"root",factory:()=>jd}),jd="always";function ax(n,t){return[...t.path,n]}function Od(n,t,e=jd){F0(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),L4(n,t),B4(n,t),U4(n,t),j4(n,t)}function Ly(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Rd(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ad(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function j4(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function F0(n,t){let e=nx(n);t.validator!==null?n.setValidators(Ny(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=ix(n);t.asyncValidator!==null?n.setAsyncValidators(Ny(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Ad(t._rawValidators,r),Ad(t._rawAsyncValidators,r)}function Rd(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=nx(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=ix(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Ad(t._rawValidators,i),Ad(t._rawAsyncValidators,i),e}function L4(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&sx(n,t)})}function U4(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&sx(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function sx(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function B4(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function lx(n,t){n==null,F0(n,t)}function $4(n,t){return Rd(n,t)}function cx(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function q4(n){return Object.getPrototypeOf(n.constructor)===Fd}function dx(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function ux(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===we?e=o:q4(o)?i=o:r=o}),r||i||e||null}function H4(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var z4={provide:fi,useExisting:Pt(()=>ut)},ps=Promise.resolve(),ut=(()=>{class n extends fi{callSetDisabledState;get submitted(){return Vn(this.submittedReactive)}_submitted=ao(()=>this.submittedReactive());submittedReactive=eo(!1);_directives=new Set;form;ngSubmit=new Te;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new Oo({},P0(e),O0(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ps.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Od(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ps.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){ps.then(()=>{let i=this._findContainer(e.path),r=new Oo({});lx(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ps.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){ps.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),dx(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new kd(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1),this.form._events.next(new Pd(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(O(xr,10),O(Nd,10),O(hs,8))};static \u0275dir=_e({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&x("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[en([z4]),mt]})}return n})();function Uy(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function By(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var gs=class extends Po{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(A0(e),R0(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vd(e)&&(e.nonNullable||e.initialValueIsDefault)&&(By(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Uy(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Uy(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){By(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var G4=n=>n instanceof gs;var W4={provide:yr,useExisting:Pt(()=>Re)},$y=Promise.resolve(),Re=(()=>{class n extends yr{_changeDetectorRef;callSetDisabledState;control=new gs;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Te;constructor(e,i,r,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=ux(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),cx(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Od(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){$y.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Si(i);$y.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?ax(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(O(fi,9),O(xr,10),O(Nd,10),O(Ao,10),O(Ci,8),O(hs,8))};static \u0275dir=_e({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[en([W4]),mt,Ht]})}return n})();var Je=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=_e({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),Y4={provide:Ao,useExisting:Pt(()=>xn),multi:!0},xn=(()=>{class n extends Fd{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=fn(n)))(r||n)}})();static \u0275dir=_e({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&x("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},standalone:!1,features:[en([Y4]),mt]})}return n})();var px=new q("");var Z4={provide:fi,useExisting:Pt(()=>vs)},vs=(()=>{class n extends fi{callSetDisabledState;get submitted(){return Vn(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=ao(()=>this._submittedReactive());_submittedReactive=eo(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Te;constructor(e,i,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return Od(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Ly(e.control||null,e,!1),H4(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),dx(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new kd(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Pd(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(Ly(i||null,e),G4(r)&&(Od(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);lx(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&$4(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){F0(this.form,this),this._oldForm&&Rd(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(O(xr,10),O(Nd,10),O(hs,8))};static \u0275dir=_e({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&x("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[en([Z4]),mt,Ht]})}return n})();var Q4={provide:yr,useExisting:Pt(()=>_s)},_s=(()=>{class n extends yr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new Te;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,i,r,o,a){super(),this._ngModelWarningConfig=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=ux(this,o)}ngOnChanges(e){this._added||this._setUpControl(),cx(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return ax(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(O(fi,13),O(xr,10),O(Nd,10),O(Ao,10),O(px,8))};static \u0275dir=_e({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[en([Q4]),mt,Ht]})}return n})();var K4={provide:Ao,useExisting:Pt(()=>Ae),multi:!0};function fx(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function J4(n){return n.split(":")[0]}var Ae=(()=>{class n extends Fd{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i=this._getOptionId(e),r=fx(i,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){let i=J4(e);return this._optionMap.has(i)?this._optionMap.get(i):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=fn(n)))(r||n)}})();static \u0275dir=_e({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&x("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[en([K4]),mt]})}return n})(),je=(()=>{class n{_element;_renderer;_select;id;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(fx(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(O(wt),O(mn),O(Ae,9))};static \u0275dir=_e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),X4={provide:Ao,useExisting:Pt(()=>mx),multi:!0};function qy(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function e3(n){return n.split(":")[0]}var mx=(()=>{class n extends Fd{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let i;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(r.indexOf(a.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let p=a[c],f=this._getOptionValue(p.value);r.push(f)}}else{let a=i.options;for(let c=0;c<a.length;c++){let p=a[c];if(p.selected){let f=this._getOptionValue(p.value);r.push(f)}}}this.value=r,e(r)}}_registerOption(e){let i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){let i=e3(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=fn(n)))(r||n)}})();static \u0275dir=_e({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&x("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[en([X4]),mt]})}return n})(),Le=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(qy(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(qy(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(i){return new(i||n)(O(wt),O(mn),O(mx,9))};static \u0275dir=_e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function gx(n){return typeof n=="number"?n:parseFloat(n)}var N0=(()=>{class n{_validator=Ed;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Ed,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=_e({type:n,features:[Ht]})}return n})(),t3={provide:xr,useExisting:Pt(()=>wn),multi:!0},wn=(()=>{class n extends N0{max;inputName="max";normalizeInput=e=>gx(e);createValidator=e=>Wy(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=fn(n)))(r||n)}})();static \u0275dir=_e({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&An("max",r._enabled?r.max:null)},inputs:{max:"max"},standalone:!1,features:[en([t3]),mt]})}return n})(),n3={provide:xr,useExisting:Pt(()=>Cn),multi:!0},Cn=(()=>{class n extends N0{min;inputName="min";normalizeInput=e=>gx(e);createValidator=e=>Gy(e);static \u0275fac=(()=>{let e;return function(r){return(e||(e=fn(n)))(r||n)}})();static \u0275dir=_e({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&An("min",r._enabled?r.min:null)},inputs:{min:"min"},standalone:!1,features:[en([n3]),mt]})}return n})(),i3={provide:xr,useExisting:Pt(()=>Sn),multi:!0};var Sn=(()=>{class n extends N0{required;inputName="required";normalizeInput=Si;createValidator=e=>Yy;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=fn(n)))(r||n)}})();static \u0275dir=_e({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&An("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[en([i3]),mt]})}return n})();var hx=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ye({type:n});static \u0275inj=We({})}return n})(),D0=class extends Po{constructor(t,e,i){super(A0(e),R0(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){ox(this,!1,t),t.forEach((i,r)=>{rx(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Hy(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Ld=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,i=null){let r=this._reduceControls(e),o={};return Hy(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Oo(r,o)}record(e,i=null){let r=this._reduceControls(e);return new I0(r,i)}control(e,i,r){let o={};return this.useNonNullable?(Hy(i)?o=i:(o.validators=i,o.asyncValidators=r),new gs(e,G(A({},o),{nonNullable:!0}))):new gs(e,i,r)}array(e,i,r){let o=e.map(a=>this._createControl(a));return new D0(o,i,r)}_reduceControls(e){let i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){if(e instanceof gs)return e;if(e instanceof Po)return e;if(Array.isArray(e)){let i=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(i,r,o)}else return this.control(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ud=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:hs,useValue:e.callSetDisabledState??jd}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ye({type:n});static \u0275inj=We({imports:[hx]})}return n})(),vx=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:px,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:hs,useValue:e.callSetDisabledState??jd}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Ye({type:n});static \u0275inj=We({imports:[hx]})}return n})();function r3(n,t){n&1&&(I(),s(0,"svg",14),b(1,"path",25)(2,"path",26),l())}function o3(n,t){n&1&&(I(),s(0,"svg",14),b(1,"path",27),l())}function a3(n,t){if(n&1&&(s(0,"div",28)(1,"div",29),I(),s(2,"svg",30),b(3,"path",31),l(),T(),s(4,"div",32)(5,"p",33),d(6),l()()()()),n&2){let e=h();u(6),k(e.errorMessage)}}function s3(n,t){n&1&&(s(0,"span",34),I(),s(1,"svg",35),b(2,"path",36),l()())}var Bd=class n{constructor(t,e){this.authService=t;this.router=e;console.log("LoginComponent inicializado")}credentials={username:"",password:""};loading=!1;errorMessage="";showPassword=!1;onLogin(){return v(this,null,function*(){if(console.log("onLogin ejecutado"),!this.credentials.username||!this.credentials.password){this.errorMessage="Por favor complete todos los campos",console.log("Error: Campos vac\xEDos");return}this.loading=!0,this.errorMessage="";try{console.log("Intentando login con:",this.credentials.username);let t=yield this.authService.login(this.credentials);t.success?(console.log("Login exitoso, navegando a dashboard"),this.router.navigate(["/dashboard"])):(console.log("Login fall\xF3:",t.message),this.errorMessage=t.message)}catch(t){console.error("Error inesperado en login:",t),this.errorMessage="Error inesperado. Intente nuevamente."}finally{this.loading=!1}})}togglePasswordVisibility(){this.showPassword=!this.showPassword,console.log("Password visibility toggled:",this.showPassword)}goToRegister(){console.log("goToRegister ejecutado - navegando a /register");try{this.router.navigate(["/register"]),console.log("Navegaci\xF3n a /register iniciada")}catch(t){console.error("Error al navegar a register:",t)}}testNavigation(){console.log("Test navigation button clicked!"),alert("\xA1El bot\xF3n funciona! Navegando a register..."),this.goToRegister()}static \u0275fac=function(e){return new(e||n)(O(re),O(fe))};static \u0275cmp=ie({type:n,selectors:[["app-login"]],standalone:!1,decls:38,vars:9,consts:[[1,"min-h-screen","bg-gradient-to-br","from-blue-50","to-indigo-100","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"mx-auto","h-12","w-12","bg-indigo-600","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"mt-6","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"bg-white","rounded-lg","shadow-xl","p-8"],[1,"space-y-6",3,"ngSubmit"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1","relative"],["id","username","name","username","type","text","autocomplete","username","required","","placeholder","Ingresa tu usuario",1,"appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngModelChange","ngModel"],[1,"absolute","inset-y-0","right-0","pr-3","flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-400"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","name","password","autocomplete","current-password","required","","placeholder","Ingresa tu contrase\xF1a",1,"appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm","pr-10",3,"ngModelChange","type","ngModel"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center",3,"click"],["class","h-5 w-5 text-gray-400","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","bg-red-50 border border-red-200 rounded-md p-4",4,"ngIf"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","duration-200",3,"disabled"],["class","absolute left-0 inset-y-0 flex items-center pl-3",4,"ngIf"],[1,"text-center","mt-6"],[1,"text-sm","text-gray-600"],["type","button",1,"font-medium","text-indigo-600","hover:text-indigo-500","transition-colors","duration-200","ml-1",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-indigo-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),I(),s(4,"svg",4),b(5,"path",5),l()(),T(),s(6,"h2",6),d(7," Iniciar Sesi\xF3n "),l(),s(8,"p",7),d(9," Ingresa a tu cuenta "),l()(),s(10,"div",8)(11,"form",9),x("ngSubmit",function(){return i.onLogin()}),s(12,"div")(13,"label",10),d(14," Nombre de Usuario "),l(),s(15,"div",11)(16,"input",12),F("ngModelChange",function(o){return N(i.credentials.username,o)||(i.credentials.username=o),o}),l(),s(17,"div",13),I(),s(18,"svg",14),b(19,"path",5),l()()()(),T(),s(20,"div")(21,"label",15),d(22," Contrase\xF1a "),l(),s(23,"div",11)(24,"input",16),F("ngModelChange",function(o){return N(i.credentials.password,o)||(i.credentials.password=o),o}),l(),s(25,"button",17),x("click",function(){return i.togglePasswordVisibility()}),w(26,r3,3,0,"svg",18)(27,o3,2,0,"svg",18),l()()(),w(28,a3,7,1,"div",19),s(29,"div")(30,"button",20),w(31,s3,3,0,"span",21),d(32),l()()(),s(33,"div",22)(34,"p",23),d(35," \xBFNo tienes cuenta? "),s(36,"button",24),x("click",function(){return i.goToRegister()}),d(37," Reg\xEDstrate aqu\xED "),l()()()()()()),e&2&&(u(16),R("ngModel",i.credentials.username),u(8),g("type",i.showPassword?"text":"password"),R("ngModel",i.credentials.password),u(2),g("ngIf",!i.showPassword),u(),g("ngIf",i.showPassword),u(),g("ngIf",i.errorMessage),u(2),g("disabled",i.loading),u(),g("ngIf",i.loading),u(),E(" ",i.loading?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"," "))},dependencies:[le,Je,we,Ie,Ke,Sn,Re,ut],styles:['.login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.login-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:40px;box-shadow:0 20px 40px #0000001a;width:100%;max-width:400px}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:8px;font-size:28px;font-weight:600}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:12px;border-radius:8px;margin-bottom:20px;text-align:center;font-size:14px}.social-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:20px}.social-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px;padding:12px;border:1px solid #ddd;border-radius:8px;background:#fff;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}.social-btn[_ngcontent-%COMP%]:hover{background:#f8f9fa;transform:translateY(-1px)}.social-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.google-btn[_ngcontent-%COMP%]{color:#4285f4;border-color:#4285f4}.facebook-btn[_ngcontent-%COMP%]{color:#1877f2;border-color:#1877f2}.divider[_ngcontent-%COMP%]{text-align:center;margin:20px 0;position:relative}.divider[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#eee}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 16px;color:#666;font-size:14px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;color:#333;font-weight:500;font-size:14px}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #ddd;border-radius:8px;font-size:14px;transition:border-color .2s;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.error-text[_ngcontent-%COMP%]{color:#c33;font-size:12px;margin-top:4px}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.toggle-mode[_ngcontent-%COMP%]{text-align:center;margin-top:30px;padding-top:20px;border-top:1px solid #eee}.toggle-mode[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#667eea;cursor:pointer;font-weight:600;text-decoration:underline;margin-left:4px}.link-btn[_ngcontent-%COMP%]:hover{color:#5a67d8}']})};function l3(n,t){n&1&&(I(),s(0,"svg",30),b(1,"path",31)(2,"path",32),l())}function c3(n,t){n&1&&(I(),s(0,"svg",30),b(1,"path",33),l())}function d3(n,t){n&1&&(I(),s(0,"svg",30),b(1,"path",31)(2,"path",32),l())}function u3(n,t){n&1&&(I(),s(0,"svg",30),b(1,"path",33),l())}function p3(n,t){if(n&1&&(s(0,"div",34)(1,"div",35),I(),s(2,"svg",36),b(3,"path",37),l(),T(),s(4,"div",38)(5,"p",39),d(6),l()()()()),n&2){let e=h();u(6),k(e.errorMessage)}}function f3(n,t){if(n&1&&(s(0,"div",40)(1,"div",35),I(),s(2,"svg",41),b(3,"path",42),l(),T(),s(4,"div",38)(5,"p",43),d(6),l()()()()),n&2){let e=h();u(6),k(e.successMessage)}}function m3(n,t){n&1&&(s(0,"span",44),I(),s(1,"svg",45),b(2,"path",46),l()())}var $d=class n{constructor(t,e){this.authService=t;this.router=e;console.log("RegisterComponent inicializado")}user={username:"",full_name:"",password:"",status:1,id_perfil:2};confirmPassword="";loading=!1;errorMessage="";successMessage="";showPassword=!1;showConfirmPassword=!1;onRegister(){return v(this,null,function*(){if(console.log("onRegister llamado"),console.log("Datos del formulario:",this.user),this.errorMessage="",this.successMessage="",!this.user.username||!this.user.full_name||!this.user.password||!this.confirmPassword){this.errorMessage="Por favor complete todos los campos",console.log("Error: Campos vac\xEDos");return}if(this.user.password!==this.confirmPassword){this.errorMessage="Las contrase\xF1as no coinciden",console.log("Error: Contrase\xF1as no coinciden");return}if(this.user.password.length<6){this.errorMessage="La contrase\xF1a debe tener al menos 6 caracteres",console.log("Error: Contrase\xF1a muy corta");return}if(this.user.username.length<3){this.errorMessage="El nombre de usuario debe tener al menos 3 caracteres",console.log("Error: Username muy corto");return}if(this.user.username.includes(" ")){this.errorMessage="El nombre de usuario no puede contener espacios",console.log("Error: Username con espacios");return}if(!/^[a-zA-Z0-9_.-]+$/.test(this.user.username)){this.errorMessage="El nombre de usuario solo puede contener letras, n\xFAmeros, guiones, puntos y guiones bajos",console.log("Error: Username con caracteres inv\xE1lidos");return}this.loading=!0,console.log("Iniciando proceso de registro...");try{let e=yield this.authService.register(this.user);console.log("Resultado del registro:",e),e.success?(this.successMessage="Usuario creado exitosamente. Redirigiendo al login...",console.log("Registro exitoso, redirigiendo..."),this.user={username:"",full_name:"",password:"",status:1,id_perfil:2},this.confirmPassword="",setTimeout(()=>{this.router.navigate(["/login"])},2e3)):(this.errorMessage=e.message,console.log("Error en registro:",e.message))}catch(e){console.error("Error inesperado:",e),this.errorMessage="Error inesperado. Intente nuevamente."}finally{this.loading=!1}})}togglePasswordVisibility(){this.showPassword=!this.showPassword,console.log("Password visibility toggled:",this.showPassword)}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword,console.log("Confirm password visibility toggled:",this.showConfirmPassword)}goToLogin(){console.log("Navegando a login"),this.router.navigate(["/login"])}testButton(){console.log("Test button clicked!"),console.log("Current user data:",this.user),console.log("Confirm password:",this.confirmPassword)}static \u0275fac=function(e){return new(e||n)(O(re),O(fe))};static \u0275cmp=ie({type:n,selectors:[["app-register"]],standalone:!1,decls:53,vars:15,consts:[["registerForm","ngForm"],[1,"min-h-screen","bg-gradient-to-br","from-green-50","to-teal-100","flex","items-center","justify-center","py-12","px-4","sm:px-6","lg:px-8"],[1,"max-w-md","w-full","space-y-8"],[1,"text-center"],[1,"mx-auto","h-12","w-12","bg-green-600","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],[1,"mt-6","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"bg-white","rounded-lg","shadow-xl","p-8"],[1,"space-y-6",3,"ngSubmit"],["for","fullName",1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1","relative"],["id","fullName","name","fullName","type","text","autocomplete","name","required","","placeholder","Ingresa tu nombre completo",1,"appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-green-500","focus:border-green-500","focus:z-10","sm:text-sm",3,"ngModelChange","ngModel"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],["id","username","name","username","type","text","autocomplete","username","required","","placeholder","Elige un nombre de usuario",1,"appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-green-500","focus:border-green-500","focus:z-10","sm:text-sm",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","name","password","autocomplete","new-password","required","","placeholder","Crea una contrase\xF1a",1,"appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-green-500","focus:border-green-500","focus:z-10","sm:text-sm","pr-10",3,"ngModelChange","type","ngModel"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center",3,"click"],["class","h-5 w-5 text-gray-400","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700"],["id","confirmPassword","name","confirmPassword","autocomplete","new-password","required","","placeholder","Confirma tu contrase\xF1a",1,"appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-green-500","focus:border-green-500","focus:z-10","sm:text-sm","pr-10",3,"ngModelChange","type","ngModel"],["class","bg-red-50 border border-red-200 rounded-md p-4",4,"ngIf"],["class","bg-green-50 border border-green-200 rounded-md p-4",4,"ngIf"],[1,"flex","space-x-2"],["type","button",1,"flex-1","bg-yellow-500","text-white","py-2","px-4","rounded","text-sm",3,"click"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-green-600","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","duration-200",3,"disabled"],["class","absolute left-0 inset-y-0 flex items-center pl-3",4,"ngIf"],[1,"text-sm","text-gray-600"],["type","button",1,"font-medium","text-green-600","hover:text-green-500","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"bg-green-50","border","border-green-200","rounded-md","p-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-green-700"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-green-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"]],template:function(e,i){if(e&1){let r=P();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),I(),s(4,"svg",5),b(5,"path",6),l()(),T(),s(6,"h2",7),d(7," Crear Cuenta "),l(),s(8,"p",8),d(9," Reg\xEDstrate para comenzar "),l()(),s(10,"div",9)(11,"form",10,0),x("ngSubmit",function(){return C(r),S(i.onRegister())}),s(13,"div")(14,"label",11),d(15," Nombre Completo "),l(),s(16,"div",12)(17,"input",13),F("ngModelChange",function(a){return C(r),N(i.user.full_name,a)||(i.user.full_name=a),S(a)}),l()()(),s(18,"div")(19,"label",14),d(20," Nombre de Usuario "),l(),s(21,"div",12)(22,"input",15),F("ngModelChange",function(a){return C(r),N(i.user.username,a)||(i.user.username=a),S(a)}),l()()(),s(23,"div")(24,"label",16),d(25," Contrase\xF1a "),l(),s(26,"div",12)(27,"input",17),F("ngModelChange",function(a){return C(r),N(i.user.password,a)||(i.user.password=a),S(a)}),l(),s(28,"button",18),x("click",function(){return C(r),S(i.togglePasswordVisibility())}),w(29,l3,3,0,"svg",19)(30,c3,2,0,"svg",19),l()()(),s(31,"div")(32,"label",20),d(33," Confirmar Contrase\xF1a "),l(),s(34,"div",12)(35,"input",21),F("ngModelChange",function(a){return C(r),N(i.confirmPassword,a)||(i.confirmPassword=a),S(a)}),l(),s(36,"button",18),x("click",function(){return C(r),S(i.toggleConfirmPasswordVisibility())}),w(37,d3,3,0,"svg",19)(38,u3,2,0,"svg",19),l()()(),w(39,p3,7,1,"div",22)(40,f3,7,1,"div",23),s(41,"div",24)(42,"button",25),x("click",function(){return C(r),S(i.onRegister())}),d(43," Test onRegister() "),l()(),s(44,"div")(45,"button",26),w(46,m3,3,0,"span",27),d(47),l()(),s(48,"div",3)(49,"p",28),d(50," \xBFYa tienes cuenta? "),s(51,"button",29),x("click",function(){return C(r),S(i.goToLogin())}),d(52," Inicia sesi\xF3n aqu\xED "),l()()()()()()()}e&2&&(u(17),R("ngModel",i.user.full_name),u(5),R("ngModel",i.user.username),u(5),g("type",i.showPassword?"text":"password"),R("ngModel",i.user.password),u(2),g("ngIf",!i.showPassword),u(),g("ngIf",i.showPassword),u(5),g("type",i.showConfirmPassword?"text":"password"),R("ngModel",i.confirmPassword),u(2),g("ngIf",!i.showConfirmPassword),u(),g("ngIf",i.showConfirmPassword),u(),g("ngIf",i.errorMessage),u(),g("ngIf",i.successMessage),u(5),g("disabled",i.loading),u(),g("ngIf",i.loading),u(),E(" ",i.loading?"Creando cuenta...":"Crear Cuenta"," "))},dependencies:[le,Je,we,Ie,Ke,Sn,Re,ut],encapsulation:2})};function g3(n,t){n&1&&(s(0,"div",6),b(1,"div",7),l())}function h3(n,t){if(n&1&&(s(0,"div")(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11),I(),s(5,"svg",12),b(6,"path",13),l()(),T(),s(7,"div",14)(8,"h2",15),d(9),l(),s(10,"p",16),d(11,"Has iniciado sesi\xF3n exitosamente en el sistema Rehabimovementgt"),l()()()()(),s(12,"div",17)(13,"div",18)(14,"div",19)(15,"div",10)(16,"div",11),I(),s(17,"svg",20),b(18,"path",21),l()(),T(),s(19,"div",22)(20,"dl")(21,"dt",23),d(22,"Usuarios Totales"),l(),s(23,"dd",24),d(24,"1,247"),l()()()()()(),s(25,"div",18)(26,"div",19)(27,"div",10)(28,"div",11),I(),s(29,"svg",25),b(30,"path",26),l()(),T(),s(31,"div",22)(32,"dl")(33,"dt",23),d(34,"Proyectos Activos"),l(),s(35,"dd",24),d(36,"23"),l()()()()()(),s(37,"div",18)(38,"div",19)(39,"div",10)(40,"div",11),I(),s(41,"svg",27),b(42,"path",28),l()(),T(),s(43,"div",22)(44,"dl")(45,"dt",23),d(46,"Tareas Pendientes"),l(),s(47,"dd",24),d(48,"47"),l()()()()()(),s(49,"div",18)(50,"div",19)(51,"div",10)(52,"div",11),I(),s(53,"svg",29),b(54,"path",30),l()(),T(),s(55,"div",22)(56,"dl")(57,"dt",23),d(58,"Reportes"),l(),s(59,"dd",24),d(60,"156"),l()()()()()()(),s(61,"div",31)(62,"div",32)(63,"h3",33),d(64," Informaci\xF3n del Usuario "),l(),s(65,"dl",34)(66,"div")(67,"dt",35),d(68,"Nombre Completo"),l(),s(69,"dd",36),d(70),l()(),s(71,"div")(72,"dt",35),d(73,"Nombre de Usuario"),l(),s(74,"dd",36),d(75),l()(),s(76,"div")(77,"dt",35),d(78,"ID de Usuario"),l(),s(79,"dd",36),d(80),l()(),s(81,"div")(82,"dt",35),d(83,"Estado"),l(),s(84,"dd",37)(85,"span",38),I(),s(86,"svg",39),b(87,"circle",40),l(),d(88," Activo "),l()()(),T(),s(89,"div")(90,"dt",35),d(91,"Fecha de Registro"),l(),s(92,"dd",36),d(93),tt(94,"date"),l()(),s(95,"div")(96,"dt",35),d(97,"Perfil"),l(),s(98,"dd",36),d(99),l()()()()()()),n&2){let e=h();u(9),E("\xA1Bienvenido, ",e.currentUser==null?null:e.currentUser.full_name,"!"),u(61),k(e.currentUser==null?null:e.currentUser.full_name),u(5),k(e.currentUser==null?null:e.currentUser.username),u(5),k(e.currentUser==null?null:e.currentUser.id),u(13),E(" ",nc(94,6,e.currentUser==null?null:e.currentUser.created_at,"dd/MM/yyyy HH:mm")," "),u(6),E(" ID Perfil: ",(e.currentUser==null?null:e.currentUser.id_perfil)||"No asignado"," ")}}var qd=class n{constructor(t,e,i){this.authService=t;this.permissionsService=e;this.router=i}currentUser=null;menuItems=[];isSidebarCollapsed=!1;loading=!0;error="";currentRoute="";expandedModules=new Set;stats={totalUsers:0,activeProjects:0,pendingTasks:0,totalReports:0};subscriptions=new Oe;ngOnInit(){return v(this,null,function*(){console.log("Dashboard inicializado");try{if(this.currentUser=this.authService.getCurrentUser(),console.log("Usuario actual:",this.currentUser),!this.currentUser){console.log("No hay usuario autenticado, redirigiendo a login"),this.router.navigate(["/login"]);return}yield this.loadUserMenu(),yield this.loadDashboardStats(),this.subscriptions.add(this.router.events.pipe(at(t=>t instanceof lt)).subscribe(t=>{this.currentRoute=t.urlAfterRedirects,console.log("Ruta actual:",this.currentRoute)})),this.currentRoute=this.router.url}catch(t){console.error("Error inicializando dashboard:",t),this.error="Error cargando el dashboard"}finally{this.loading=!1}})}ngOnDestroy(){this.subscriptions.unsubscribe()}loadUserMenu(){return v(this,null,function*(){try{console.log("Cargando men\xFA del usuario..."),this.menuItems=yield this.permissionsService.loadUserMenu(),(!this.menuItems||this.menuItems.length===0)&&(console.log("No se obtuvo men\xFA de la BD, usando men\xFA por defecto"),this.menuItems=this.createDefaultMenu()),this.updateExpandedModules(),console.log("Men\xFA cargado:",this.menuItems)}catch(t){console.error("Error cargando men\xFA:",t),this.menuItems=this.createDefaultMenu(),this.updateExpandedModules()}})}createDefaultMenu(){return[{id_modulo:1,nombre:"Dashboard",descripcion:"Panel principal",icono:"fas fa-tachometer-alt",ruta:"/dashboard",orden:1,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1},{id_modulo:2,nombre:"Usuarios",descripcion:"Gesti\xF3n de usuarios",icono:"fas fa-users",ruta:"/usuarios",orden:2,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1},{id_modulo:3,nombre:"Reportes",descripcion:"Sistema de reportes",icono:"fas fa-chart-bar",ruta:"/reportes",orden:3,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1},{id_modulo:4,nombre:"Configuraci\xF3n",descripcion:"Configuraci\xF3n del sistema",icono:"fas fa-cog",ruta:"/configuracion",orden:4,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1}]}updateExpandedModules(){this.menuItems.forEach(t=>{t.expanded===void 0&&(t.expanded=!1),t.children&&t.children.forEach(e=>{e.expanded===void 0&&(e.expanded=!1)})})}loadDashboardStats(){return v(this,null,function*(){try{this.stats={totalUsers:1247,activeProjects:23,pendingTasks:47,totalReports:156}}catch(t){console.error("Error cargando estad\xEDsticas:",t)}})}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed,console.log("Sidebar colapsado:",this.isSidebarCollapsed)}toggleModule(t){this.expandedModules.has(t)?this.expandedModules.delete(t):this.expandedModules.add(t);let e=this.menuItems.find(i=>i.id_modulo===t);e&&(e.expanded=this.expandedModules.has(t),console.log(`M\xF3dulo ${e.nombre} ${e.expanded?"expandido":"colapsado"}`))}isModuleExpanded(t){return this.expandedModules.has(t)}logout(){console.log("Cerrando sesi\xF3n desde dashboard"),this.permissionsService.clearUserData(),this.currentUser=null,this.menuItems=[],this.authService.logout()}getFilteredMenuItems(){return this.menuItems.filter(t=>!t.modulo_padre_id)}getFilteredChildren(t){return t.children?t.children:this.menuItems.filter(e=>e.modulo_padre_id===t.id_modulo)}isRouteActive(t){return!t||t==="#"?!1:this.currentRoute===t||this.currentRoute.startsWith(t+"/")}navigateTo(t){t&&t!=="#"&&(console.log("Navegando a:",t),this.router.navigate([t]))}getUserInitials(){if(!this.currentUser?.full_name)return"U";let t=this.currentUser.full_name.split(" ");return t.length>=2?(t[0].charAt(0)+t[1].charAt(0)).toUpperCase():this.currentUser.full_name.charAt(0).toUpperCase()}getUserRole(){switch(this.currentUser?.id_perfil){case 1:return"Administrador";case 2:return"Usuario";case 3:return"Supervisor";case 4:return"Invitado";default:return"Usuario"}}getPageTitle(){switch(this.currentRoute){case"/dashboard":return"Dashboard";case"/usuarios":return"Gesti\xF3n de Usuarios";case"/reportes":return"Reportes";case"/configuracion":return"Configuraci\xF3n";default:return"Dashboard"}}isDashboardHome(){return this.currentRoute==="/dashboard"}isUsersPage(){return this.currentRoute==="/usuarios"}formatDate(t){return t?new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"N/A"}getCurrentTime(){return new Date().toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}refreshDashboard(){return v(this,null,function*(){this.loading=!0;try{yield this.loadUserMenu(),yield this.loadDashboardStats(),yield this.permissionsService.loadUserPermissions()}catch(t){console.error("Error refrescando dashboard:",t)}finally{this.loading=!1}})}static \u0275fac=function(e){return new(e||n)(O(re),O(pi),O(fe))};static \u0275cmp=ie({type:n,selectors:[["app-dashboard"]],standalone:!1,decls:6,vars:2,consts:[[1,"min-h-screen","bg-gray-50","flex"],[1,"flex-1","flex","flex-col","overflow-hidden"],[1,"flex-1","overflow-auto"],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],["class","flex justify-center items-center h-64",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-indigo-600"],[1,"mb-8"],[1,"bg-gradient-to-r","from-indigo-500","to-purple-600","rounded-lg","shadow-lg","p-6","text-white"],[1,"flex","items-center"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-12","w-12","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"],[1,"ml-4"],[1,"text-2xl","font-bold"],[1,"text-indigo-100"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"bg-white","overflow-hidden","shadow","rounded-lg"],[1,"p-5"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m3 5.197H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-5","w-0","flex-1"],[1,"text-sm","font-medium","text-gray-500","truncate"],[1,"text-lg","font-medium","text-gray-900"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"bg-white","shadow","rounded-lg"],[1,"px-4","py-5","sm:p-6"],[1,"text-lg","leading-6","font-medium","text-gray-900","mb-4"],[1,"grid","grid-cols-1","gap-x-4","gap-y-6","sm:grid-cols-2"],[1,"text-sm","font-medium","text-gray-500"],[1,"mt-1","text-sm","text-gray-900"],[1,"mt-1"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-green-100","text-green-800"],["fill","currentColor","viewBox","0 0 8 8",1,"w-2","h-2","mr-1"],["cx","4","cy","4","r","3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"main",2)(3,"div",3),w(4,g3,2,0,"div",4)(5,h3,100,9,"div",5),l()()()()),e&2&&(u(4),g("ngIf",i.loading),u(),g("ngIf",!i.loading))},dependencies:[le,dm],encapsulation:2})};var v3=(n,t,e,i)=>({"bg-purple-100 text-purple-800":n,"bg-blue-100 text-blue-800":t,"bg-yellow-100 text-yellow-800":e,"bg-gray-100 text-gray-800":i}),_3=(n,t)=>({"bg-green-100 text-green-800":n,"bg-red-100 text-red-800":t});function b3(n,t){if(n&1){let e=P();s(0,"div",38)(1,"div",39),I(),s(2,"svg",40),b(3,"path",41),l(),T(),s(4,"div",42)(5,"p",43),d(6),l()(),s(7,"div",44)(8,"button",45),x("click",function(){C(e);let r=h();return S(r.error="")}),I(),s(9,"svg",46),b(10,"path",47),l()()()()()}if(n&2){let e=h();u(6),k(e.error)}}function y3(n,t){n&1&&(s(0,"div",48)(1,"div",49),b(2,"div",50),s(3,"p",51),d(4,"Cargando usuarios..."),l()()())}function x3(n,t){if(n&1){let e=P();s(0,"button",83),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.deactivateUser(r))}),I(),s(1,"svg",79),b(2,"path",84),l()()}}function w3(n,t){if(n&1){let e=P();s(0,"button",85),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.reactivateUser(r))}),I(),s(1,"svg",79),b(2,"path",86),l()()}}function C3(n,t){if(n&1){let e=P();s(0,"tr",64)(1,"td",65)(2,"div",66)(3,"div",67)(4,"div")(5,"span",68),d(6),l()()(),s(7,"div",69)(8,"div",70),d(9),l(),s(10,"div",56),d(11),l()()()(),s(12,"td",65)(13,"div",71),d(14),l()(),s(15,"td",65)(16,"span",72),d(17),l()(),s(18,"td",65)(19,"span",72),I(),s(20,"svg",73),b(21,"circle",74),l(),d(22),l()(),T(),s(23,"td",75),d(24),l(),s(25,"td",76)(26,"div",77)(27,"button",78),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.openEditModal(r))}),I(),s(28,"svg",79),b(29,"path",80),l()(),w(30,x3,3,0,"button",81)(31,w3,3,0,"button",82),l()()()}if(n&2){let e=t.$implicit,i=h(2);u(4),W("h-10 w-10 rounded-full flex items-center justify-center "+i.getAvatarColor(e)),u(2),E(" ",i.getUserInitials(e)," "),u(3),k(e.username),u(2),E("ID: ",e.id,""),u(3),k(e.full_name),u(2),g("ngClass",Fn(13,v3,e.id_perfil===1,e.id_perfil===2,e.id_perfil===3,e.id_perfil===4)),u(),E(" ",i.getPerfilName(e.id_perfil)," "),u(2),g("ngClass",si(18,_3,e.status===1,e.status===0)),u(3),E(" ",i.getStatusText(e.status)," "),u(2),E(" ",i.formatDate(e.created_at)," "),u(6),g("ngIf",e.status===1),u(),g("ngIf",e.status===0)}}function S3(n,t){if(n&1){let e=P();s(0,"button",95),x("click",function(){C(e);let r=h(3);return S(r.openCreateModal())}),d(1," Crear primer usuario "),l()}}function E3(n,t){if(n&1){let e=P();s(0,"button",96),x("click",function(){C(e);let r=h(3);return S(r.clearFilters())}),d(1," Limpiar filtros "),l()}}function M3(n,t){if(n&1&&(s(0,"div",87),I(),s(1,"svg",88),b(2,"path",89),l(),T(),s(3,"h3",90),d(4,"No hay usuarios"),l(),s(5,"p",91),d(6),l(),s(7,"div",92),w(8,S3,2,0,"button",93)(9,E3,2,0,"button",94),l()()),n&2){let e=h(2);u(6),E(" ",e.usuarios.length===0?"No se encontraron usuarios en la base de datos.":"No se encontraron usuarios con los filtros aplicados."," "),u(2),g("ngIf",e.usuarios.length===0),u(),g("ngIf",e.usuarios.length>0)}}function I3(n,t){if(n&1&&(s(0,"div",52)(1,"div",53)(2,"div",54)(3,"h3",55),d(4),l(),s(5,"span",56),d(6),l()()(),s(7,"div",57)(8,"table",58)(9,"thead",59)(10,"tr")(11,"th",60),d(12," Usuario "),l(),s(13,"th",60),d(14," Nombre Completo "),l(),s(15,"th",60),d(16," Perfil "),l(),s(17,"th",60),d(18," Estado "),l(),s(19,"th",60),d(20," Fecha Creaci\xF3n "),l(),s(21,"th",60),d(22," Acciones "),l()()(),s(23,"tbody",61),w(24,C3,32,21,"tr",62),l()(),w(25,M3,10,3,"div",63),l()()),n&2){let e=h();u(4),be(" Lista de Usuarios (",e.filteredUsuarios.length," de ",e.usuarios.length,") "),u(2),be(" Mostrando ",e.filteredUsuarios.length," resultado",e.filteredUsuarios.length!==1?"s":""," "),u(18),g("ngForOf",e.filteredUsuarios)("ngForTrackBy",e.trackByUserId),u(),g("ngIf",e.filteredUsuarios.length===0&&!e.loading)}}function D3(n,t){n&1&&(s(0,"span",112),d(1,"*"),l())}function T3(n,t){if(n&1&&(s(0,"div",130)(1,"div",39),I(),s(2,"svg",40),b(3,"path",41),l(),T(),s(4,"div",42)(5,"p",43),d(6),l()()()()),n&2){let e=h(2);u(6),k(e.error)}}function k3(n,t){n&1&&(I(),s(0,"svg",131),b(1,"path",8),l())}function P3(n,t){if(n&1){let e=P();s(0,"div",97)(1,"div",98)(2,"div",99),x("click",function(){C(e);let r=h();return S(r.closeModal())}),l(),s(3,"span",100),d(4,"\u200B"),l(),s(5,"div",101)(6,"div",102)(7,"div",103)(8,"div",104),I(),s(9,"svg",105),b(10,"path",106),l()(),T(),s(11,"div",107)(12,"h3",55),d(13),l(),s(14,"div",108)(15,"p",56),d(16),l()()()()(),s(17,"div",109)(18,"form",110)(19,"div")(20,"label",111),d(21," Nombre de Usuario "),s(22,"span",112),d(23,"*"),l()(),s(24,"input",113),F("ngModelChange",function(r){C(e);let o=h();return N(o.userForm.username,r)||(o.userForm.username=r),S(r)}),l(),s(25,"p",114),d(26," Solo letras, n\xFAmeros, puntos, guiones y guiones bajos "),l()(),s(27,"div")(28,"label",115),d(29," Nombre Completo "),s(30,"span",112),d(31,"*"),l()(),s(32,"input",116),F("ngModelChange",function(r){C(e);let o=h();return N(o.userForm.full_name,r)||(o.userForm.full_name=r),S(r)}),l()(),s(33,"div")(34,"label",117),d(35),w(36,D3,2,0,"span",118),l(),s(37,"input",119),F("ngModelChange",function(r){C(e);let o=h();return N(o.userForm.password,r)||(o.userForm.password=r),S(r)}),l(),s(38,"p",114),d(39),l()(),s(40,"div")(41,"label",120),d(42," Perfil de Usuario "),l(),s(43,"select",121),F("ngModelChange",function(r){C(e);let o=h();return N(o.userForm.id_perfil,r)||(o.userForm.id_perfil=r),S(r)}),s(44,"option",28),d(45,"Administrador"),l(),s(46,"option",29),d(47,"Usuario"),l(),s(48,"option",30),d(49,"Supervisor"),l(),s(50,"option",31),d(51,"Invitado"),l()()(),s(52,"div")(53,"label",122),d(54," Estado "),l(),s(55,"select",123),F("ngModelChange",function(r){C(e);let o=h();return N(o.userForm.status,r)||(o.userForm.status=r),S(r)}),s(56,"option",28),d(57,"Activo"),l(),s(58,"option",124),d(59,"Inactivo"),l()()()(),w(60,T3,7,1,"div",125),l(),s(61,"div",126)(62,"button",127),x("click",function(){C(e);let r=h();return S(r.saveUser())}),w(63,k3,2,0,"svg",128),d(64),l(),s(65,"button",129),x("click",function(){C(e);let r=h();return S(r.closeModal())}),d(66," Cancelar "),l()()()()()}if(n&2){let e=h();u(13),E(" ",e.modalMode==="create"?"Crear Nuevo Usuario":"Editar Usuario"," "),u(3),E(" ",e.modalMode==="create"?"Complete los datos para crear un nuevo usuario.":"Modifique los datos del usuario seleccionado."," "),u(8),R("ngModel",e.userForm.username),u(8),R("ngModel",e.userForm.full_name),u(3),E(" ",e.modalMode==="create"?"Contrase\xF1a":"Nueva Contrase\xF1a (opcional)"," "),u(),g("ngIf",e.modalMode==="create"),u(),R("ngModel",e.userForm.password),g("placeholder",e.modalMode==="create"?"M\xEDnimo 6 caracteres":"Dejar vac\xEDo para no cambiar"),u(2),E(" ",e.modalMode==="create"?"M\xEDnimo 6 caracteres":"Dejar vac\xEDo si no desea cambiar la contrase\xF1a"," "),u(4),R("ngModel",e.userForm.id_perfil),u(12),R("ngModel",e.userForm.status),u(5),g("ngIf",e.error),u(2),g("disabled",!e.userForm.username||!e.userForm.full_name||e.modalMode==="create"&&!e.userForm.password),u(),g("ngIf",e.loading),u(),E(" ",e.modalMode==="create"?"Crear Usuario":"Guardar Cambios"," ")}}var Hd=class n{constructor(t,e){this.supabaseService=t;this.authService=e}usuarios=[];filteredUsuarios=[];loading=!0;error="";searchTerm="";showModal=!1;modalMode="create";selectedUser=null;userForm={username:"",full_name:"",password:"",status:1,id_perfil:2};statusFilter="all";perfilFilter="all";ngOnInit(){return v(this,null,function*(){console.log("UsuariosComponent inicializado"),yield this.loadUsuarios()})}loadUsuarios(){return v(this,null,function*(){this.loading=!0,this.error="";try{console.log("Cargando usuarios desde la base de datos...");let t=yield this.supabaseService.getData("profiles");console.log("Datos recibidos:",t),this.usuarios=t||[],this.filteredUsuarios=[...this.usuarios],this.applyFilters(),console.log("Usuarios cargados exitosamente:",this.usuarios.length)}catch(t){console.error("Error cargando usuarios:",t),this.error="Error al cargar los usuarios. Verifique la conexi\xF3n a la base de datos."}finally{this.loading=!1}})}applyFilters(){let t=[...this.usuarios];if(this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.username?.toLowerCase().includes(e)||i.full_name?.toLowerCase().includes(e))}this.statusFilter==="active"?t=t.filter(e=>e.status===1):this.statusFilter==="inactive"&&(t=t.filter(e=>e.status===0)),this.perfilFilter!=="all"&&(t=t.filter(e=>e.id_perfil===parseInt(this.perfilFilter))),this.filteredUsuarios=t,console.log("Usuarios filtrados:",this.filteredUsuarios.length)}onSearch(){this.applyFilters()}onFilterChange(){this.applyFilters()}openCreateModal(){console.log("Abriendo modal para crear usuario"),this.modalMode="create",this.userForm={username:"",full_name:"",password:"",status:1,id_perfil:2},this.error="",this.showModal=!0}openEditModal(t){console.log("Abriendo modal para editar usuario:",t.username),this.modalMode="edit",this.selectedUser=t,this.userForm=G(A({},t),{password:""}),this.error="",this.showModal=!0}closeModal(){console.log("Cerrando modal"),this.showModal=!1,this.selectedUser=null,this.error=""}saveUser(){return v(this,null,function*(){try{if(console.log("Guardando usuario:",this.userForm),this.error="",!this.userForm.username||!this.userForm.full_name){this.error="Nombre de usuario y nombre completo son requeridos";return}if(this.userForm.username.length<3){this.error="El nombre de usuario debe tener al menos 3 caracteres";return}if(!/^[a-zA-Z0-9_.-]+$/.test(this.userForm.username)){this.error="El nombre de usuario solo puede contener letras, n\xFAmeros, guiones, puntos y guiones bajos";return}if(this.modalMode==="create"){if(!this.userForm.password){this.error="La contrase\xF1a es requerida para crear un usuario";return}if(this.userForm.password.length<6){this.error="La contrase\xF1a debe tener al menos 6 caracteres";return}console.log("Verificando si el username existe...");let e=yield this.supabaseService.client.from("profiles").select("username").eq("username",this.userForm.username);if(e.data&&e.data.length>0){this.error="El nombre de usuario ya existe";return}let i={username:this.userForm.username,full_name:this.userForm.full_name,password:this.userForm.password,status:this.userForm.status,id_perfil:this.userForm.id_perfil};console.log("Creando usuario:",i),yield this.supabaseService.insertData("profiles",i),console.log("Usuario creado exitosamente")}else{let e={username:this.userForm.username,full_name:this.userForm.full_name,status:this.userForm.status,id_perfil:this.userForm.id_perfil};if(this.userForm.password&&this.userForm.password.length>0){if(this.userForm.password.length<6){this.error="La nueva contrase\xF1a debe tener al menos 6 caracteres";return}e.password=this.userForm.password}console.log("Actualizando usuario:",e),yield this.supabaseService.updateData("profiles",this.selectedUser.id.toString(),e),console.log("Usuario actualizado exitosamente")}yield this.loadUsuarios(),this.closeModal()}catch(t){console.error("Error guardando usuario:",t),this.error="Error al guardar el usuario. Intente nuevamente."}})}deactivateUser(t){return v(this,null,function*(){let e=`\xBFEst\xE1 seguro de desactivar al usuario "${t.username}"?`;if(confirm(e))try{console.log("Desactivando usuario:",t.username),yield this.supabaseService.updateData("profiles",t.id.toString(),{status:0}),yield this.loadUsuarios(),console.log("Usuario desactivado exitosamente")}catch(i){console.error("Error desactivando usuario:",i),this.error="Error al desactivar el usuario",setTimeout(()=>this.error="",5e3)}})}reactivateUser(t){return v(this,null,function*(){let e=`\xBFEst\xE1 seguro de reactivar al usuario "${t.username}"?`;if(confirm(e))try{console.log("Reactivando usuario:",t.username),yield this.supabaseService.updateData("profiles",t.id.toString(),{status:1}),yield this.loadUsuarios(),console.log("Usuario reactivado exitosamente")}catch(i){console.error("Error reactivando usuario:",i),this.error="Error al reactivar el usuario",setTimeout(()=>this.error="",5e3)}})}getPerfilName(t){switch(t){case 1:return"Administrador";case 2:return"Usuario";case 3:return"Supervisor";case 4:return"Invitado";default:return"Sin asignar"}}getStatusText(t){return t===1?"Activo":"Inactivo"}getStatusColor(t){return t===1?"green":"red"}formatDate(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formateando fecha:",e),"Fecha inv\xE1lida"}}getUserInitials(t){if(!t.full_name)return"U";let e=t.full_name.split(" ");return e.length>=2?(e[0].charAt(0)+e[1].charAt(0)).toUpperCase():t.full_name.charAt(0).toUpperCase()}getAvatarColor(t){let e=["bg-indigo-600","bg-green-600","bg-yellow-600","bg-red-600","bg-purple-600","bg-pink-600","bg-blue-600"];if(!t.full_name)return"bg-gray-600";let i=t.full_name.charCodeAt(0);return e[i%e.length]}refreshUsers(){return v(this,null,function*(){console.log("Refrescando lista de usuarios"),yield this.loadUsuarios()})}clearFilters(){console.log("Limpiando filtros"),this.searchTerm="",this.statusFilter="all",this.perfilFilter="all",this.applyFilters()}trackByUserId(t,e){return e.id||t}static \u0275fac=function(e){return new(e||n)(O(me),O(re))};static \u0275cmp=ie({type:n,selectors:[["app-usuarios"]],standalone:!1,decls:58,vars:8,consts:[[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"flex","space-x-2"],["title","Refrescar lista",1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"bg-white","rounded-lg","shadow","mb-6","p-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"md:col-span-2"],["for","search",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["id","search","type","text","placeholder","Buscar por nombre o usuario...",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:placeholder-gray-400","focus:ring-1","focus:ring-indigo-500","focus:border-indigo-500",3,"ngModelChange","input","ngModel"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["for","statusFilter",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","statusFilter",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500",3,"ngModelChange","change","ngModel"],["value","all"],["value","active"],["value","inactive"],["for","perfilFilter",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","perfilFilter",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500",3,"ngModelChange","change","ngModel"],["value","1"],["value","2"],["value","3"],["value","4"],[1,"mt-4","flex","justify-end"],[1,"text-sm","text-indigo-600","hover:text-indigo-800",3,"click"],["class","bg-red-50 border border-red-200 rounded-md p-4 mb-6",4,"ngIf"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","bg-white shadow overflow-hidden sm:rounded-md",4,"ngIf"],["class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-6"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"ml-auto","pl-3"],[1,"text-red-400","hover:text-red-600",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","justify-center","items-center","h-64"],[1,"text-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-indigo-600","mx-auto"],[1,"mt-4","text-gray-600"],[1,"bg-white","shadow","overflow-hidden","sm:rounded-md"],[1,"px-4","py-5","sm:px-6","border-b","border-gray-200"],[1,"flex","justify-between","items-center"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors duration-150",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-12",4,"ngIf"],[1,"hover:bg-gray-50","transition-colors","duration-150"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center"],[1,"h-10","w-10","flex-shrink-0"],[1,"text-sm","font-medium","text-white"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-900"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],["fill","currentColor","viewBox","0 0 8 8",1,"w-2","h-2","mr-1"],["cx","4","cy","4","r","3"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","justify-end","space-x-2"],["title","Editar usuario",1,"text-indigo-600","hover:text-indigo-900","p-1","rounded","hover:bg-indigo-50","transition-colors","duration-150",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["class","text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors duration-150","title","Desactivar usuario",3,"click",4,"ngIf"],["class","text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50 transition-colors duration-150","title","Reactivar usuario",3,"click",4,"ngIf"],["title","Desactivar usuario",1,"text-red-600","hover:text-red-900","p-1","rounded","hover:bg-red-50","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636"],["title","Reactivar usuario",1,"text-green-600","hover:text-green-900","p-1","rounded","hover:bg-green-50","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],["class","inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",3,"click",4,"ngIf"],["class","inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","shadow-sm","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-indigo-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-indigo-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","w-full"],[1,"mt-2"],[1,"bg-white","px-4","pb-4","sm:px-6"],[1,"space-y-4"],["for","username",1,"block","text-sm","font-medium","text-gray-700"],[1,"text-red-500"],["id","username","type","text","name","username","required","","placeholder","Ej: juan.perez",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"mt-1","text-xs","text-gray-500"],["for","fullName",1,"block","text-sm","font-medium","text-gray-700"],["id","fullName","type","text","name","fullName","required","","placeholder","Ej: Juan P\xE9rez Garc\xEDa",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"ngModelChange","ngModel"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["class","text-red-500",4,"ngIf"],["id","password","type","password","name","password",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"ngModelChange","ngModel","placeholder"],["for","perfil",1,"block","text-sm","font-medium","text-gray-700"],["id","perfil","name","perfil",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"ngModelChange","ngModel"],["for","status",1,"block","text-sm","font-medium","text-gray-700"],["id","status","name","status",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","sm:text-sm",3,"ngModelChange","ngModel"],["value","0"],["class","mt-4 bg-red-50 border border-red-200 rounded-md p-3",4,"ngIf"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-indigo-600","text-base","font-medium","text-white","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","sm:ml-3","sm:w-auto","sm:text-sm","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm",3,"click"],[1,"mt-4","bg-red-50","border","border-red-200","rounded-md","p-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),d(5,"Gesti\xF3n de Usuarios"),l(),s(6,"p",4),d(7),l()(),s(8,"div",5)(9,"button",6),x("click",function(){return i.refreshUsers()}),I(),s(10,"svg",7),b(11,"path",8),l(),d(12," Refrescar "),l(),T(),s(13,"button",9),x("click",function(){return i.openCreateModal()}),I(),s(14,"svg",10),b(15,"path",11),l(),d(16," Nuevo Usuario "),l()()()(),T(),s(17,"div",12)(18,"div",13)(19,"div",14)(20,"label",15),d(21," Buscar "),l(),s(22,"div",16)(23,"input",17),F("ngModelChange",function(o){return N(i.searchTerm,o)||(i.searchTerm=o),o}),x("input",function(){return i.onSearch()}),l(),s(24,"div",18),I(),s(25,"svg",19),b(26,"path",20),l()()()(),T(),s(27,"div")(28,"label",21),d(29," Estado "),l(),s(30,"select",22),F("ngModelChange",function(o){return N(i.statusFilter,o)||(i.statusFilter=o),o}),x("change",function(){return i.onFilterChange()}),s(31,"option",23),d(32,"Todos"),l(),s(33,"option",24),d(34,"Activos"),l(),s(35,"option",25),d(36,"Inactivos"),l()()(),s(37,"div")(38,"label",26),d(39," Perfil "),l(),s(40,"select",27),F("ngModelChange",function(o){return N(i.perfilFilter,o)||(i.perfilFilter=o),o}),x("change",function(){return i.onFilterChange()}),s(41,"option",23),d(42,"Todos"),l(),s(43,"option",28),d(44,"Administrador"),l(),s(45,"option",29),d(46,"Usuario"),l(),s(47,"option",30),d(48,"Supervisor"),l(),s(49,"option",31),d(50,"Invitado"),l()()()(),s(51,"div",32)(52,"button",33),x("click",function(){return i.clearFilters()}),d(53," Limpiar filtros "),l()()(),w(54,b3,11,1,"div",34)(55,y3,5,0,"div",35)(56,I3,26,7,"div",36),l(),w(57,P3,67,15,"div",37)),e&2&&(u(7),E(" Administra los usuarios del sistema - Total: ",i.usuarios.length," "),u(16),R("ngModel",i.searchTerm),u(7),R("ngModel",i.statusFilter),u(10),R("ngModel",i.perfilFilter),u(14),g("ngIf",i.error),u(),g("ngIf",i.loading),u(),g("ngIf",!i.loading),u(),g("ngIf",i.showModal))},dependencies:[He,ve,le,Je,je,Le,we,Ae,Ie,Ke,Sn,Re,ut],styles:[`.table-container[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.user-row[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.user-row[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.modal-backdrop[_ngcontent-%COMP%]{backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:500;line-height:1}.badge-status[_ngcontent-%COMP%]{gap:.25rem}.action-button[_ngcontent-%COMP%]{transition:all .15s ease-in-out;border-radius:.375rem;padding:.25rem}.action-button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin:0 auto 1rem;color:#9ca3af}@media (max-width: 640px){.table-container[_ngcontent-%COMP%]{font-size:.875rem}.user-avatar[_ngcontent-%COMP%]{width:2rem;height:2rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}}.filter-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:1px solid #e2e8f0}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:16rem}.loading-spinner[_ngcontent-%COMP%]{width:3rem;height:3rem;border:2px solid #e5e7eb;border-top:2px solid #4f46e5;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.error-message[_ngcontent-%COMP%]{background-color:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:1rem;border-radius:.5rem;margin-bottom:1.5rem}.error-icon[_ngcontent-%COMP%]{flex-shrink:0;width:1.25rem;height:1.25rem;color:#f87171}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:50;background-color:#00000080;display:flex;align-items:center;justify-content:center;padding:1rem}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;box-shadow:0 25px 50px -12px #00000040;max-width:32rem;width:100%;max-height:90vh;overflow-y:auto}.form-input[_ngcontent-%COMP%]{transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a;outline:none}.form-select[_ngcontent-%COMP%]{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right .5rem center;background-repeat:no-repeat;background-size:1.5em 1.5em;padding-right:2.5rem}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.shadow-subtle[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.shadow-hover[_ngcontent-%COMP%]{transition:box-shadow .15s ease-in-out}.shadow-hover[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}`]})};function O3(n,t){if(n&1&&(s(0,"li"),b(1,"i",110),d(2),l()),n&2){let e=t.$implicit;u(2),E("",e," ")}}function A3(n,t){if(n&1){let e=P();s(0,"div",103)(1,"div",104)(2,"div",105),b(3,"i"),l(),s(4,"h3",106),d(5),l(),s(6,"p",64),d(7),l(),s(8,"ul",107),w(9,O3,3,1,"li",108),l(),s(10,"button",109),x("click",function(){let r=C(e).$implicit,o=h();return S(o.showMoreInfo(r))}),d(11," M\xE1s informaci\xF3n \u2192 "),l()()()}if(n&2){let e=t.$implicit;u(3),W(e.icon+" text-white text-2xl"),u(2),k(e.title),u(2),k(e.description),u(2),g("ngForOf",e.features)}}function R3(n,t){if(n&1&&(s(0,"div",111)(1,"div",104),b(2,"img",112),s(3,"h4",113),d(4),l(),s(5,"p",114),d(6),l(),s(7,"p",115),d(8),l(),s(9,"p",116),d(10),l()()()),n&2){let e=t.$implicit;u(2),g("src",e.image,If)("alt",e.name),u(2),k(e.name),u(2),k(e.role),u(2),k(e.specialization),u(2),E(" ",e.experience," ")}}function F3(n,t){n&1&&(s(0,"div",126)(1,"span",127),d(2," M\xE1s Popular "),l()())}function N3(n,t){if(n&1&&(s(0,"li",43),b(1,"i",128),s(2,"span",129),d(3),l()()),n&2){let e=t.$implicit;u(3),k(e)}}function V3(n,t){if(n&1){let e=P();s(0,"div"),w(1,F3,3,0,"div",117),s(2,"div",118)(3,"div",104)(4,"h3",119),d(5),l(),s(6,"div",120)(7,"span",121),d(8),l(),s(9,"span",122),d(10),l()(),s(11,"ul",123),w(12,N3,4,1,"li",124),l(),s(13,"button",125),x("click",function(){C(e);let r=h();return S(r.bookAppointment())}),d(14),l()()()()}if(n&2){let e=t.$implicit;W("relative bg-white rounded-2xl shadow-lg border "+(e.popular?"border-red-500 ring-2 ring-red-500":"border-gray-200")),u(),g("ngIf",e.popular),u(4),k(e.name),u(3),k(e.price),u(2),k(e.period),u(2),g("ngForOf",e.features),u(),W("w-full py-3 px-6 rounded-lg font-medium transition-colors "+(e.popular?"bg-red-600 text-white hover:bg-red-700":"bg-gray-100 text-gray-900 hover:bg-gray-200")),u(),E(" ",e.buttonText," ")}}var bs=class n{constructor(t){this.router=t}services=[{icon:"fas fa-walking",title:"Evaluaci\xF3n fisioterap\xE9utica personalizada",description:"Realizamos una valoraci\xF3n integral mediante test ortop\xE9dicos, an\xE1lisis de rangos de movimiento, patrones de marcha y pruebas funcionales. Nuestro objetivo es identificar tu condici\xF3n actual, emitir un diagn\xF3stico fisioterap\xE9utico preciso y establecer el mejor plan de tratamiento basado en tus necesidades.",features:["Terapia manual","Ejercicios terap\xE9uticos","Reeducaci\xF3n postural"]},{icon:"fas fa-heartbeat",title:"Fisioterapia Deportiva",description:"Tratamiento especializado para la prevenci\xF3n, recuperaci\xF3n y readaptaci\xF3n de lesiones deportivas. Nos enfocamos en restaurar el movimiento funcional, reducir el dolor y optimizar el rendimiento f\xEDsico mediante ejercicio terap\xE9utico, t\xE9cnicas manuales y programaci\xF3n espec\xEDfica seg\xFAn tu disciplina deportiva.",features:["Prevenci\xF3n de lesiones","Recuperaci\xF3n deportiva","Acondicionamiento f\xEDsico"]},{icon:"fas fa-user-md",title:"Fisioterapia geri\xE1trica",description:"Dise\xF1amos programas de ejercicio seguros y eficaces para personas mayores, basados en herramientas de evaluaci\xF3n cl\xEDnica y funcional. Nuestro enfoque est\xE1 en mejorar fuerza, equilibrio, resistencia y capacidad aer\xF3bica, promoviendo una vejez activa, aut\xF3noma y con prop\xF3sito desde etapas tempranas.",features:["Evaluaci\xF3n completa","Seguimiento continuo","Planes personalizados"]},{icon:"fas fa-spa",title:"Programaci\xF3n de movilidad",description:"A trav\xE9s de ejercicios de movilidad articular, control motor y fuerza, buscamos aumentar tu rango de movimiento y mejorar la calidad del mismo. Ideal para personas con rigidez, dolor, sobrecargas o para quienes desean moverse mejor en su d\xEDa a d\xEDa o actividad f\xEDsica.",features:["Masoterapia","Electroterapia","Termoterapia"]},{icon:"fas fa-spa",title:"Programaci\xF3n de ejercicios funcionales",description:"Creamos un plan de entrenamiento adaptado a tus objetivos individuales: ya sea ganar fuerza, mejorar la postura, prevenir lesiones o aumentar tu rendimiento. Utilizamos movimientos funcionales y progresiones terap\xE9uticas para que alcances tus metas de forma segura, eficiente y sostenible.",features:["Masoterapia","Electroterapia","Termoterapia"]}];pricingPlans=[{name:"B\xE1sico",price:"Q275",period:"por sesi\xF3n",features:["Gu\xEDa de ejercicios","Sesi\xF3n de 45 a 60 minutos","Seguimiento personalizado"],popular:!1,buttonText:"Reservar Cita"},{name:"Profesional",price:"Q1,125",period:"paquete 5 sesiones",features:["Gu\xEDa de ejercicios","Sesiones de 45 a 60 minutos","Seguimiento personalizado"],popular:!0,buttonText:"M\xE1s Popular"},{name:"Premium",price:"Q2,250",period:"paquete 10 sesiones",features:["Gu\xEDa de ejercicios","Sesiones de 45 a 60 minutos","Seguimiento personalizado"],popular:!1,buttonText:"Mejor Valor"}];team=[{name:"Lic. Estuardo Ponciano",role:"Fisioterapeuta Principal",specialization:"Licenciado en fisioterapia",image:"/lucciuki.png",experience:"5 a\xF1os de experiencia"}];ngOnInit(){}scrollToSection(t){let e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}goToLogin(){this.router.navigate(["/login"])}contactUs(){this.scrollToSection("contacto")}bookAppointment(){alert("\xA1Pronto podr\xE1s reservar tu cita online! Por ahora cont\xE1ctanos directamente.")}showMoreInfo(t){alert(`M\xE1s informaci\xF3n sobre: ${t.title}

${t.description}`)}getTeamGridClasses(){let t=this.team.length;return t===1?"grid grid-cols-1 justify-items-center":t===2?"grid grid-cols-1 md:grid-cols-2 justify-items-center":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 justify-items-center"}static \u0275fac=function(e){return new(e||n)(O(fe))};static \u0275cmp=ie({type:n,selectors:[["app-landing"]],standalone:!1,decls:264,vars:4,consts:[[1,"min-h-screen","bg-white"],[1,"fixed","top-0","w-full","bg-white/95","backdrop-blur-sm","shadow-sm","z-50"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","h-16"],[1,"flex","items-center"],[1,"flex-shrink-0","flex","items-center"],[1,"h-8","w-8","bg-red-600","rounded-lg","flex","items-center","justify-center","mr-3"],[1,"fas","fa-heartbeat","text-white"],[1,"text-xl","font-bold","text-gray-900"],[1,"hidden","md:block"],[1,"ml-10","flex","items-baseline","space-x-8"],[1,"text-gray-900","hover:text-red-600","cursor-pointer","transition-colors",3,"click"],[1,"text-gray-700","hover:text-red-600","cursor-pointer","transition-colors",3,"click"],[1,"flex","items-center","space-x-4"],[1,"bg-red-600","text-white","px-4","py-2","rounded-md","hover:bg-red-700","transition-colors",3,"click"],[1,"fas","fa-sign-in-alt","mr-2"],["id","inicio",1,"pt-16","bg-gradient-to-br","from-gray-900","via-gray-800","to-black"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-20"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-12","items-center"],[1,"text-3xl","md:text-6xl","font-bold","text-white","mb-6"],[1,"text-red-500"],[1,"text-xl","text-gray-300","mb-8"],[1,"flex","flex-col","sm:flex-row","gap-4"],[1,"bg-red-600","text-white","px-8","py-3","rounded-lg","hover:bg-red-700","transition-colors","flex","items-center","justify-center",3,"click"],[1,"fas","fa-calendar-check","mr-2"],[1,"border","border-red-600","text-red-500","px-8","py-3","rounded-lg","hover:bg-red-600","hover:text-white","transition-colors",3,"click"],[1,"relative"],[1,"bg-white","rounded-2xl","shadow-2xl","p-8","transform","rotate-3","hover:rotate-0","transition-transform","duration-300"],["src","https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=600&h=400&fit=crop","alt","Fisioterapia",1,"rounded-xl","w-full","h-64","object-cover"],[1,"mt-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-gray-600"],["id","servicios",1,"py-20","bg-white"],[1,"max-w-7xl","mx-auto","px-5","sm:px-6","lg:px-8"],[1,"text-center","mb-16"],[1,"text-3xl","md:text-4xl","font-bold","text-gray-900","mb-4"],[1,"text-xl","text-gray-600","max-w-2xl","mx-auto"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8"],["class","bg-gray-50 rounded-xl p-6 hover:shadow-lg transition-shadow duration-300 hover:border-red-200 border border-transparent",4,"ngFor","ngForOf"],["id","nosotros",1,"py-20","bg-gray-100"],[1,"text-3xl","md:text-4xl","font-bold","text-gray-900","mb-6"],[1,"text-lg","text-gray-600","mb-6"],[1,"space-y-4"],[1,"flex","items-start"],[1,"w-8","h-8","bg-red-600","rounded-full","flex","items-center","justify-center","mr-4","mt-1"],[1,"fas","fa-award","text-white","text-sm"],[1,"font-semibold","text-gray-900"],[1,"fas","fa-heart","text-white","text-sm"],[1,"fas","fa-cogs","text-white","text-sm"],["src","https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=600&h=500&fit=crop","alt","Equipo m\xE9dico",1,"rounded-2xl","shadow-2xl"],[1,"absolute","-bottom-6","-left-6","bg-white","rounded-xl","p-6","shadow-lg"],[1,"w-12","h-12","bg-red-100","rounded-full","flex","items-center","justify-center","mr-4"],[1,"fas","fa-users","text-red-600","text-xl"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"mt-20"],[1,"text-2xl","md:text-3xl","font-bold","text-gray-900","text-center","mb-12"],[1,"flex","justify-center"],[1,"gap-8","max-w-4xl",3,"ngClass"],["class","bg-white rounded-xl p-8 shadow-lg hover:shadow-xl transition-shadow border border-gray-200 hover:border-red-200",4,"ngFor","ngForOf"],["id","precios",1,"py-20","bg-white"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-8"],[3,"class",4,"ngFor","ngForOf"],[1,"text-center","mt-12"],[1,"text-gray-600","mb-4"],[1,"text-red-600","hover:text-red-800","font-medium",3,"click"],["id","contacto",1,"py-20","bg-gray-100"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-12"],[1,"space-y-8"],[1,"w-12","h-12","bg-red-600","rounded-full","flex","items-center","justify-center","mr-4"],[1,"fas","fa-map-marker-alt","text-white"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"fas","fa-phone","text-white"],[1,"fas","fa-envelope","text-white"],[1,"fas","fa-clock","text-white"],[1,"bg-white","rounded-2xl","shadow-lg","p-8"],[1,"text-2xl","font-bold","text-gray-900","mb-6"],[1,"space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-red-500","focus:border-transparent"],["type","email",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-red-500","focus:border-transparent"],["type","tel",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-red-500","focus:border-transparent"],["rows","4",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-red-500","focus:border-transparent"],["type","submit",1,"w-full","bg-red-600","text-white","py-3","px-6","rounded-lg","hover:bg-red-700","transition-colors"],[1,"fas","fa-paper-plane","mr-2"],[1,"bg-gray-900","text-white","py-12"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-8"],[1,"flex","items-center","mb-4"],[1,"text-xl","font-bold"],[1,"text-gray-400"],[1,"font-semibold","mb-4"],[1,"space-y-2","text-gray-400"],["href","#",1,"hover:text-red-400","transition-colors"],[1,"hover:text-red-400","transition-colors","cursor-pointer",3,"click"],[1,"flex","space-x-4"],["href","https://www.facebook.com/RehabiMovementGT","target","_blank",1,"w-10","h-10","bg-red-600","rounded-full","flex","items-center","justify-center","hover:bg-red-700","transition-colors"],[1,"fab","fa-facebook-f"],["href","https://www.instagram.com/rehabimovementgt/","target","_blank",1,"w-10","h-10","bg-red-600","rounded-full","flex","items-center","justify-center","hover:bg-red-700","transition-colors"],[1,"fab","fa-instagram"],["href","#","target","_blank",1,"w-10","h-10","b]g-red-600","rounded-full","flex","items-center","justify-center","hover:bg-red-700","transition-colors"],[1,"fab","fa-whatsapp"],[1,"border-t","border-gray-800","mt-12","pt-8","text-center","text-gray-400"],[1,"bg-gray-50","rounded-xl","p-6","hover:shadow-lg","transition-shadow","duration-300","hover:border-red-200","border","border-transparent"],[1,"text-center"],[1,"w-16","h-16","bg-red-600","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"text-xl","font-semibold","text-gray-900","mb-3"],[1,"text-sm","text-gray-500","space-y-1"],[4,"ngFor","ngForOf"],[1,"mt-4","text-red-600","hover:text-red-800","font-medium",3,"click"],[1,"fas","fa-check","text-red-600","mr-2"],[1,"bg-white","rounded-xl","p-8","shadow-lg","hover:shadow-xl","transition-shadow","border","border-gray-200","hover:border-red-200"],[1,"w-32","h-32","rounded-full","mx-auto","mb-6","object-cover","border-4","border-red-100",3,"src","alt"],[1,"text-2xl","font-semibold","text-gray-900","mb-2"],[1,"text-red-600","font-medium","text-lg","mb-3"],[1,"text-gray-600","mb-2"],[1,"text-gray-500","text-sm","bg-gray-50","px-4","py-2","rounded-full","inline-block"],["class","absolute -top-4 left-1/2 transform -translate-x-1/2",4,"ngIf"],[1,"p-8"],[1,"text-2xl","font-bold","text-gray-900","mb-4"],[1,"mb-6"],[1,"text-4xl","font-bold","text-red-600"],[1,"text-gray-600","ml-2"],[1,"space-y-3","mb-8"],["class","flex items-start",4,"ngFor","ngForOf"],[3,"click"],[1,"absolute","-top-4","left-1/2","transform","-translate-x-1/2"],[1,"bg-red-600","text-white","px-4","py-1","rounded-full","text-sm","font-medium"],[1,"fas","fa-check","text-red-600","mr-3","mt-1"],[1,"text-gray-700"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),b(7,"i",7),l(),s(8,"span",8),d(9,"RehabiMovement"),l()()(),s(10,"div",9)(11,"div",10)(12,"a",11),x("click",function(){return i.scrollToSection("inicio")}),d(13,"Inicio"),l(),s(14,"a",12),x("click",function(){return i.scrollToSection("servicios")}),d(15,"Servicios"),l(),s(16,"a",12),x("click",function(){return i.scrollToSection("nosotros")}),d(17,"Nosotros"),l(),s(18,"a",12),x("click",function(){return i.scrollToSection("precios")}),d(19,"Precios"),l(),s(20,"a",12),x("click",function(){return i.scrollToSection("contacto")}),d(21,"Contacto"),l()()(),s(22,"div",13)(23,"button",14),x("click",function(){return i.goToLogin()}),b(24,"i",15),d(25,"Login "),l()()()()(),s(26,"section",16)(27,"div",17)(28,"div",18)(29,"div")(30,"h1",19),d(31," Recupera y optimiza "),s(32,"span",20),d(33,"Tu Movimiento"),l()(),s(34,"p",21),d(35," Fisioterapia especializada en Guatemala. El movimiento es vida. Nosotros te ayudamos a recuperarlo. Devolvemos calidad de vida a nuestros pacientes a trav\xE9s de tratamientos personalizados que combinan ejercicio terap\xE9utico, atenci\xF3n cercana y rehabilitaci\xF3n basada en evidencia. Dise\xF1amos planes \xFAnicos para cada etapa de la vida, enfoc\xE1ndonos en el movimiento, la funcionalidad y tu bienestar integral. "),l(),s(36,"div",22)(37,"button",23),x("click",function(){return i.bookAppointment()}),b(38,"i",24),d(39," Reservar Cita "),l(),s(40,"button",25),x("click",function(){return i.scrollToSection("servicios")}),d(41," Conocer Servicios "),l()()(),s(42,"div",26)(43,"div",27),b(44,"img",28),s(45,"div",29)(46,"h3",30),d(47,"Tratamiento Profesional"),l(),s(48,"p",31),d(49,"Con equipos de \xFAltima generaci\xF3n"),l()()()()()()(),s(50,"section",32)(51,"div",33)(52,"div",34)(53,"h2",35),d(54," Nuestros Servicios "),l(),s(55,"p",36),d(56," Ofrecemos una amplia gama de servicios especializaos para tu recuperaci\xF3n y bienestar "),l()(),s(57,"div",37),w(58,A3,12,5,"div",38),l()()(),s(59,"section",39)(60,"div",2)(61,"div",18)(62,"div")(63,"h2",40),d(64," Qui\xE9nes Somos "),l(),s(65,"p",41),d(66," RehabiMovement es una cl\xEDnica de fisioterapia ubicada en zona 15, Ciudad de Guatemala, comprometida con devolver el movimiento y la calidad de vida a nuestros pacientes. Nos especializamos en la atenci\xF3n personalizada a trav\xE9s del ejercicio terap\xE9utico, siendo este el pilar fundamental de nuestros tratamientos. "),l(),s(67,"p",41),d(68," Con m\xE1s de 5 a\xF1os de experiencia cl\xEDnica, hemos acompa\xF1ado a cientos de personas en su proceso de rehabilitaci\xF3n, desde adultos mayores hasta deportistas, ayud\xE1ndoles a recuperar su funcionalidad, reducir el dolor y alcanzar sus objetivos de salud. "),l(),s(69,"p",41),d(70," Creemos firmemente en el poder del movimiento, el trato humano y la planificaci\xF3n basada en evidencia cient\xEDfica. Nuestro equipo est\xE1 en constante formaci\xF3n para ofrecerte lo mejor de la fisioterapia actual, adaptada a tus necesidades espec\xEDficas. "),l(),s(71,"div",42)(72,"div",43)(73,"div",44),b(74,"i",45),l(),s(75,"div")(76,"h4",46),d(77,"Profesionales Certificados"),l(),s(78,"p",31),d(79,"Nuestro equipo cuenta con las mejores certificaciones internacionales"),l()()(),s(80,"div",43)(81,"div",44),b(82,"i",47),l(),s(83,"div")(84,"h4",46),d(85,"Atenci\xF3n Personalizada"),l(),s(86,"p",31),d(87,"Cada paciente recibe un plan de tratamiento \xFAnico y personalizado"),l()()(),s(88,"div",43)(89,"div",44),b(90,"i",48),l(),s(91,"div")(92,"h4",46),d(93,"Tecnolog\xEDa Avanzada"),l(),s(94,"p",31),d(95,"Utilizamos equipos de \xFAltima generaci\xF3n para mejores resultados"),l()()()()(),s(96,"div",26),b(97,"img",49),s(98,"div",50)(99,"div",4)(100,"div",51),b(101,"i",52),l(),s(102,"div")(103,"p",53),d(104,"500+"),l(),s(105,"p",54),d(106,"Pacientes Satisfechos"),l()()()()()(),s(107,"div",55)(108,"h3",56),d(109," Nuestro Equipo "),l(),s(110,"div",57)(111,"div",58),w(112,R3,11,6,"div",59),l()()()()(),s(113,"section",60)(114,"div",2)(115,"div",34)(116,"h2",35),d(117," Nuestros Precios "),l(),s(118,"p",36),d(119," Planes accesibles para todos los presupuestos. Inversi\xF3n en tu salud y bienestar. "),l()(),s(120,"div",61),w(121,V3,15,10,"div",62),l(),s(122,"div",63)(123,"p",64),d(124," \xBFNecesitas un plan personalizado? "),l(),s(125,"button",65),x("click",function(){return i.contactUs()}),d(126," Cont\xE1ctanos para una consulta gratuita \u2192 "),l()()()(),s(127,"section",66)(128,"div",2)(129,"div",34)(130,"h2",35),d(131," Cont\xE1ctenos "),l(),s(132,"p",36),d(133," Estamos aqu\xED para ayudarte. Cont\xE1ctanos para programar tu consulta inicial. "),l()(),s(134,"div",67)(135,"div")(136,"div",68)(137,"div",43)(138,"div",69),b(139,"i",70),l(),s(140,"div")(141,"h4",71),d(142,"Direcci\xF3n"),l(),s(143,"p",31),d(144," Zona 15, Ciudad de Guatemala"),b(145,"br"),d(146," 19 avenida, 4-02 Vista Hermosa I"),b(147,"br"),d(148," Guatemala, Guatemala "),l()()(),s(149,"div",43)(150,"div",69),b(151,"i",72),l(),s(152,"div")(153,"h4",71),d(154,"Tel\xE9fono"),l(),s(155,"p",31),d(156," +502 5412-1199"),b(157,"br"),d(158," +502 5879-5979 "),l()()(),s(159,"div",43)(160,"div",69),b(161,"i",73),l(),s(162,"div")(163,"h4",71),d(164,"Email"),l(),s(165,"p",31),d(166," rehabimovementgt@gmail.com"),b(167,"br"),l()()(),s(168,"div",43)(169,"div",69),b(170,"i",74),l(),s(171,"div")(172,"h4",71),d(173,"Horarios"),l(),s(174,"p",31),d(175," Lunes a Viernes: 7:00 AM - 8:00 PM"),b(176,"br"),d(177," S\xE1bados: 8:00 AM - 4:00 PM"),b(178,"br"),d(179," Domingos: Cerrado "),l()()()()(),s(180,"div",75)(181,"h3",76),d(182,"Env\xEDanos un mensaje"),l(),s(183,"form",77)(184,"div",78)(185,"div")(186,"label",79),d(187,"Nombre"),l(),b(188,"input",80),l(),s(189,"div")(190,"label",79),d(191,"Apellido"),l(),b(192,"input",80),l()(),s(193,"div")(194,"label",79),d(195,"Email"),l(),b(196,"input",81),l(),s(197,"div")(198,"label",79),d(199,"Tel\xE9fono"),l(),b(200,"input",82),l(),s(201,"div")(202,"label",79),d(203,"Mensaje"),l(),b(204,"textarea",83),l(),s(205,"button",84),b(206,"i",85),d(207," Enviar Mensaje "),l()()()()()(),s(208,"footer",86)(209,"div",2)(210,"div",87)(211,"div")(212,"div",88)(213,"div",6),b(214,"i",7),l(),s(215,"span",89),d(216,"RehabiMovement"),l()(),s(217,"p",90),d(218," Recupera tu movimiento y mejora tu calidad de vida con nuestros tratamientos especializados. "),l()(),s(219,"div")(220,"h4",91),d(221,"Servicios"),l(),s(222,"ul",92)(223,"li")(224,"a",93),d(225,"Rehabilitaci\xF3n Motora"),l()(),s(226,"li")(227,"a",93),d(228,"Fisioterapia Deportiva"),l()(),s(229,"li")(230,"a",93),d(231,"Terapia Personalizada"),l()(),s(232,"li")(233,"a",93),d(234,"Terapias Alternativas"),l()()()(),s(235,"div")(236,"h4",91),d(237,"Enlaces"),l(),s(238,"ul",92)(239,"li")(240,"a",94),x("click",function(){return i.scrollToSection("inicio")}),d(241,"Inicio"),l()(),s(242,"li")(243,"a",94),x("click",function(){return i.scrollToSection("nosotros")}),d(244,"Nosotros"),l()(),s(245,"li")(246,"a",94),x("click",function(){return i.scrollToSection("precios")}),d(247,"Precios"),l()(),s(248,"li")(249,"a",94),x("click",function(){return i.scrollToSection("contacto")}),d(250,"Contacto"),l()()()(),s(251,"div")(252,"h4",91),d(253,"S\xEDguenos"),l(),s(254,"div",95)(255,"a",96),b(256,"i",97),l(),s(257,"a",98),b(258,"i",99),l(),s(259,"a",100),b(260,"i",101),l()()()(),s(261,"div",102)(262,"p"),d(263,"\xA9 2025 RehabiMovement. Todos los derechos reservados."),l()()()()()),e&2&&(u(58),g("ngForOf",i.services),u(53),g("ngClass",i.getTeamGridClasses()),u(),g("ngForOf",i.team),u(9),g("ngForOf",i.pricingPlans))},dependencies:[He,ve,le,Je,Ke,ut],styles:['html[_ngcontent-%COMP%]{scroll-behavior:smooth}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.hero-title[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}.hero-subtitle[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp 1s ease-out .2s both}.hero-buttons[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp 1s ease-out .4s both}.hero-image[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp 1s ease-out .6s both}.hero-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.service-card[_ngcontent-%COMP%]{transition:all .3s ease}.service-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a;border-color:#dc2626!important}.service-icon[_ngcontent-%COMP%]{transition:all .3s ease}.service-card[_ngcontent-%COMP%]:hover   .service-icon[_ngcontent-%COMP%]{transform:scale(1.1);animation:_ngcontent-%COMP%_pulse 2s infinite}.team-card[_ngcontent-%COMP%]{transition:all .3s ease;max-width:350px}.team-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);border-color:#dc2626!important}.team-avatar[_ngcontent-%COMP%]{transition:all .3s ease}.team-card[_ngcontent-%COMP%]:hover   .team-avatar[_ngcontent-%COMP%]{transform:scale(1.1)}.team-single[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.team-single[_ngcontent-%COMP%]   .team-avatar[_ngcontent-%COMP%]{width:8rem;height:8rem;border-width:4px}.team-experience-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#e2e8f0);border:1px solid #e2e8f0}.pricing-card[_ngcontent-%COMP%]{transition:all .3s ease}.pricing-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.navbar[_ngcontent-%COMP%]{backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}.nav-link[_ngcontent-%COMP%]{position:relative;transition:all .3s ease}.nav-link[_ngcontent-%COMP%]:hover{color:#dc2626}.nav-link[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;width:0;height:2px;background-color:#dc2626;transition:width .3s ease}.nav-link[_ngcontent-%COMP%]:hover:after{width:100%}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#b91c1c);transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#b91c1c,#991b1b);transform:translateY(-2px);box-shadow:0 10px 20px #dc26264d}.btn-secondary[_ngcontent-%COMP%]{transition:all .3s ease;border-color:#dc2626;color:#dc2626}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#dc2626;color:#fff;transform:translateY(-2px);box-shadow:0 10px 20px #dc26264d}.form-input[_ngcontent-%COMP%]{transition:all .3s ease}.form-input[_ngcontent-%COMP%]:focus{border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.gradient-bg[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1f2937,#111827)}.gradient-text[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#991b1b);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.hero-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1f2937,#111827,#000)}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#dc2626;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#b91c1c}.text-accent[_ngcontent-%COMP%]{color:#dc2626}.bg-accent[_ngcontent-%COMP%]{background-color:#dc2626}.border-accent[_ngcontent-%COMP%]{border-color:#dc2626}.hover-accent[_ngcontent-%COMP%]:hover{color:#dc2626}@media (max-width: 768px){.hero-title[_ngcontent-%COMP%]{font-size:2.5rem}.section-title[_ngcontent-%COMP%]{font-size:2rem}.mobile-menu[_ngcontent-%COMP%]{display:block}.desktop-menu[_ngcontent-%COMP%]{display:none}}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-468px 0}to{background-position:468px 0}}.loading-shimmer[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shimmer 1.5s ease-in-out infinite;background:linear-gradient(to right,#f6f7f8,#edeef1 20%,#f6f7f8 40% 100%);background-size:800px 104px}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:120px;background-color:#1f2937;color:#fff;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1;bottom:150%;left:50%;margin-left:-60px;opacity:0;transition:opacity .3s}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible;opacity:1}.card-shadow[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.card-shadow-lg[_ngcontent-%COMP%]{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.card-shadow-xl[_ngcontent-%COMP%]{box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a}.card-shadow-red[_ngcontent-%COMP%]:hover{box-shadow:0 20px 25px -5px #dc26261a,0 10px 10px -5px #dc26260a}.stat-counter[_ngcontent-%COMP%]{transition:all .3s ease}.stat-counter[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.section-padding[_ngcontent-%COMP%]{padding:5rem 0}@media (max-width: 768px){.section-padding[_ngcontent-%COMP%]{padding:3rem 0}}.image-overlay[_ngcontent-%COMP%]{position:relative;overflow:hidden}.image-overlay[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(45deg,#dc26261a,#b91c1c1a);opacity:0;transition:opacity .3s ease}.image-overlay[_ngcontent-%COMP%]:hover:before{opacity:1}.contact-form[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc)}.contact-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.contact-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#374151;margin-bottom:.5rem;display:block}.contact-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .contact-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:1rem;transition:all .3s ease}.contact-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .contact-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#dc2626;box-shadow:0 0 0 3px #dc26261a}.footer[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1f2937,#111827)}.footer-link[_ngcontent-%COMP%]{transition:all .3s ease}.footer-link[_ngcontent-%COMP%]:hover{color:#fca5a5;transform:translate(4px)}.social-btn[_ngcontent-%COMP%]{transition:all .3s ease}.social-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #dc26264d}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.focus-visible[_ngcontent-%COMP%]:focus{outline:2px solid #dc2626;outline-offset:2px}.btn-red[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#b91c1c);color:#fff;transition:all .3s ease}.btn-red[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#b91c1c,#991b1b);transform:translateY(-2px);box-shadow:0 8px 16px #dc26264d}.btn-red-outline[_ngcontent-%COMP%]{border:2px solid #dc2626;color:#dc2626;background:transparent;transition:all .3s ease}.btn-red-outline[_ngcontent-%COMP%]:hover{background:#dc2626;color:#fff;transform:translateY(-2px)}.dark-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1f2937,#111827,#000)}.dark-card[_ngcontent-%COMP%]{background:#1f2937cc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(75,85,99,.3)}@media print{.no-print[_ngcontent-%COMP%]{display:none}*[_ngcontent-%COMP%]{-webkit-print-color-adjust:exact!important;color-adjust:exact!important}.card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #e5e7eb}.text-red-600[_ngcontent-%COMP%], .bg-red-600[_ngcontent-%COMP%]{color:#dc2626!important;background-color:#dc2626!important}}']})};var j3=()=>["/dashboard"],L3=()=>({exact:!0}),_x=n=>[n];function U3(n,t){if(n&1&&b(0,"i"),n&2){let e=h(2).$implicit;W("flex-shrink-0 w-5 h-5 mr-3 "+e.icono)}}function B3(n,t){n&1&&(I(),s(0,"svg",10),b(1,"path",40),l())}function $3(n,t){if(n&1&&(I(),s(0,"svg",41),b(1,"path",42),l()),n&2){let e=h(2).$implicit,i=h();W("w-4 h-4 transition-transform duration-200 "+(i.isModuleExpanded(e.id_modulo)?"transform rotate-90":""))}}function q3(n,t){if(n&1&&b(0,"i"),n&2){let e=h().$implicit;W("flex-shrink-0 w-4 h-4 mr-3 "+e.icono)}}function H3(n,t){n&1&&(I(),s(0,"svg",47),b(1,"path",48),l())}function z3(n,t){if(n&1&&(s(0,"a",45),w(1,q3,1,2,"i",36)(2,H3,2,0,"svg",46),d(3),l()),n&2){let e=t.$implicit;g("routerLink",Qf(4,_x,e.ruta)),u(),g("ngIf",e.icono),u(),g("ngIf",!e.icono),u(),E(" ",e.nombre," ")}}function G3(n,t){if(n&1&&(s(0,"div",43),w(1,z3,4,6,"a",44),l()),n&2){let e=h(2).$implicit,i=h();u(),g("ngForOf",i.getFilteredChildren(e))}}function W3(n,t){if(n&1){let e=P();s(0,"div")(1,"button",35),x("click",function(){C(e);let r=h().$implicit,o=h();return S(o.toggleModule(r.id_modulo))}),w(2,U3,1,2,"i",36)(3,B3,2,0,"svg",37),s(4,"span"),d(5),l(),w(6,$3,2,2,"svg",38),l(),w(7,G3,2,1,"div",39),l()}if(n&2){let e=h().$implicit,i=h();u(2),g("ngIf",e.icono),u(),g("ngIf",!e.icono),u(),W(i.isSidebarCollapsed?"hidden":"flex-1 text-left"),u(),k(e.nombre),u(),g("ngIf",!i.isSidebarCollapsed),u(),g("ngIf",i.isModuleExpanded(e.id_modulo)&&!i.isSidebarCollapsed)}}function Y3(n,t){if(n&1&&b(0,"i"),n&2){let e=h(2).$implicit;W("flex-shrink-0 w-5 h-5 mr-3 "+e.icono)}}function Z3(n,t){n&1&&(I(),s(0,"svg",10),b(1,"path",40),l())}function Q3(n,t){if(n&1&&(s(0,"a",49),w(1,Y3,1,2,"i",36)(2,Z3,2,0,"svg",37),s(3,"span"),d(4),l()()),n&2){let e=h().$implicit,i=h();g("routerLink",Qf(7,_x,e.ruta)),An("title",i.isSidebarCollapsed?e.nombre:null),u(),g("ngIf",e.icono),u(),g("ngIf",!e.icono),u(),W(i.isSidebarCollapsed?"hidden":"block"),u(),k(e.nombre)}}function K3(n,t){if(n&1&&(s(0,"div",8),w(1,W3,8,7,"div",33)(2,Q3,5,9,"a",34),l()),n&2){let e=t.$implicit,i=h();u(),g("ngIf",e.es_padre&&i.getFilteredChildren(e).length>0),u(),g("ngIf",!e.es_padre||i.getFilteredChildren(e).length===0)}}var zd=class n{constructor(t,e,i,r){this.authService=t;this.permissionsService=e;this.supabaseService=i;this.router=r}currentUser=null;menuItems=[];isSidebarCollapsed=!1;currentRoute="";expandedModules=new Set;loading=!1;stats={totalUsers:0,activeProjects:23,pendingTasks:47,totalReports:156};subscriptions=new Oe;ngOnInit(){return v(this,null,function*(){if(console.log("Layout inicializado"),this.currentUser=this.authService.getCurrentUser(),!this.currentUser){console.log("No hay usuario autenticado, redirigiendo a login"),this.router.navigate(["/login"]);return}yield this.loadUserMenu(),yield this.loadDashboardStats(),this.subscriptions.add(this.router.events.pipe(at(t=>t instanceof lt)).subscribe(t=>{this.currentRoute=t.urlAfterRedirects,console.log("Ruta actual en layout:",this.currentRoute)})),this.currentRoute=this.router.url})}ngOnDestroy(){this.subscriptions.unsubscribe()}loadUserMenu(){return v(this,null,function*(){try{console.log("Cargando men\xFA del usuario en layout..."),this.menuItems=yield this.permissionsService.loadUserMenu(),(!this.menuItems||this.menuItems.length===0)&&(console.log("No se obtuvo men\xFA de la BD, usando men\xFA por defecto"),this.menuItems=this.createDefaultMenu()),this.updateExpandedModules(),console.log("Men\xFA cargado en layout:",this.menuItems)}catch(t){console.error("Error cargando men\xFA:",t),this.menuItems=this.createDefaultMenu(),this.updateExpandedModules()}})}createDefaultMenu(){return[{id_modulo:1,nombre:"Dashboard",descripcion:"Panel principal",icono:"fas fa-tachometer-alt",ruta:"/dashboard",orden:1,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1},{id_modulo:2,nombre:"Mis Rutinas",descripcion:"Gesti\xF3n de rutinas de entrenamiento",icono:"fas fa-dumbbell",ruta:"/rutinas",orden:2,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1},{id_modulo:3,nombre:"Usuarios",descripcion:"Gesti\xF3n de usuarios",icono:"fas fa-users",ruta:"/usuarios",orden:3,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1},{id_modulo:4,nombre:"Reportes",descripcion:"Sistema de reportes",icono:"fas fa-chart-bar",ruta:"/reportes",orden:4,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1},{id_modulo:5,nombre:"Configuraci\xF3n",descripcion:"Configuraci\xF3n del sistema",icono:"fas fa-cog",ruta:"/configuracion",orden:5,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1}]}loadDashboardStats(){return v(this,null,function*(){try{let t=yield this.supabaseService.getData("profiles");this.stats.totalUsers=t?.length||0}catch(t){console.error("Error cargando estad\xEDsticas:",t)}})}updateExpandedModules(){this.menuItems.forEach(t=>{t.expanded===void 0&&(t.expanded=!1),t.children&&t.children.forEach(e=>{e.expanded===void 0&&(e.expanded=!1)})})}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed,console.log("Sidebar colapsado:",this.isSidebarCollapsed)}toggleModule(t){this.expandedModules.has(t)?this.expandedModules.delete(t):this.expandedModules.add(t);let e=this.menuItems.find(i=>i.id_modulo===t);e&&(e.expanded=this.expandedModules.has(t))}isModuleExpanded(t){return this.expandedModules.has(t)}getFilteredMenuItems(){return this.menuItems.filter(t=>!t.modulo_padre_id)}getFilteredChildren(t){return t.children?t.children:this.menuItems.filter(e=>e.modulo_padre_id===t.id_modulo)}isRouteActive(t){return!t||t==="#"?!1:this.currentRoute===t||this.currentRoute.startsWith(t+"/")}navigateTo(t){t&&t!=="#"&&(console.log("Navegando a:",t),this.router.navigate([t]))}getUserInitials(){if(!this.currentUser?.full_name)return"U";let t=this.currentUser.full_name.split(" ");return t.length>=2?(t[0].charAt(0)+t[1].charAt(0)).toUpperCase():this.currentUser.full_name.charAt(0).toUpperCase()}getUserRole(){switch(this.currentUser?.id_perfil){case 1:return"Administrador";case 2:return"Usuario";case 3:return"Supervisor";case 4:return"Invitado";default:return"Usuario"}}logout(){console.log("Cerrando sesi\xF3n desde layout"),this.permissionsService.clearUserData(),this.currentUser=null,this.menuItems=[],this.expandedModules.clear(),this.authService.logout()}getPageTitle(){switch(this.currentRoute){case"/dashboard":return"Dashboard";case"/rutinas":return"Mis Rutinas";case"/usuarios":return"Gesti\xF3n de Usuarios";case"/reportes":return"Reportes";case"/configuracion":return"Configuraci\xF3n";default:return"Sistema de Gesti\xF3n"}}isDashboardRoute(){return this.currentRoute==="/dashboard"}isRutinasRoute(){return this.currentRoute==="/rutinas"}formatDate(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inv\xE1lida"}}refreshDashboard(){return v(this,null,function*(){this.loading=!0;try{yield this.loadUserMenu(),yield this.loadDashboardStats(),yield this.permissionsService.loadUserPermissions()}catch(t){console.error("Error refrescando dashboard:",t)}finally{this.loading=!1}})}static \u0275fac=function(e){return new(e||n)(O(re),O(pi),O(me),O(fe))};static \u0275cmp=ie({type:n,selectors:[["app-layout"]],standalone:!1,decls:48,vars:22,consts:[[1,"min-h-screen","bg-gray-50","flex"],[1,"flex","items-center","justify-between","p-4","border-b","border-gray-700"],[1,"text-xl","font-bold"],[1,"text-sm","text-gray-300"],[1,"p-2","rounded-lg","hover:bg-gray-800","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"mt-4","px-2"],[1,"space-y-1"],["routerLinkActive","bg-gray-800 text-white",1,"group","flex","items-center","px-3","py-2","text-sm","font-medium","rounded-lg","transition-colors","duration-200","text-gray-300","hover:bg-gray-800","hover:text-white",3,"routerLink","routerLinkActiveOptions"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"flex-shrink-0","w-5","h-5","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 5a2 2 0 012-2h4a2 2 0 012 2v14l-6-3-6 3V5z"],["class","space-y-1",4,"ngFor","ngForOf"],[1,"absolute","bottom-0","w-full","p-4","border-t","border-gray-700"],[1,"flex-shrink-0"],[1,"h-8","w-8","bg-indigo-600","rounded-full","flex","items-center","justify-center"],[1,"text-xs","font-medium","text-white"],[1,"text-sm","font-medium","text-white","truncate"],[1,"text-xs","text-gray-400","truncate"],["title","Cerrar Sesi\xF3n",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"flex-1","flex","flex-col","overflow-hidden"],[1,"bg-white","shadow-sm","border-b","border-gray-200"],[1,"px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","h-16"],[1,"flex","items-center"],[1,"text-xl","font-semibold","text-gray-900"],[1,"flex","items-center","space-x-4"],[1,"inline-flex","items-center","px-3","py-2","border","border-transparent","text-sm","leading-4","font-medium","rounded-md","text-white","bg-red-600","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-1"],[1,"flex-1","overflow-auto"],[4,"ngIf"],["routerLinkActive","bg-indigo-600 text-white","class","group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 text-gray-300 hover:bg-gray-800 hover:text-white",3,"routerLink",4,"ngIf"],[1,"group","w-full","flex","items-center","px-3","py-2","text-sm","font-medium","text-gray-300","rounded-lg","hover:bg-gray-800","hover:text-white","transition-colors","duration-200",3,"click"],[3,"class",4,"ngIf"],["class","flex-shrink-0 w-5 h-5 mr-3","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",3,"class",4,"ngIf"],["class","ml-6 space-y-1",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 00-2 2v2a2 2 0 002 2m0 0h14"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"ml-6","space-y-1"],["routerLinkActive","bg-indigo-600 text-white","class","group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 text-gray-400 hover:bg-gray-800 hover:text-white",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","bg-indigo-600 text-white",1,"group","flex","items-center","px-3","py-2","text-sm","font-medium","rounded-lg","transition-colors","duration-200","text-gray-400","hover:bg-gray-800","hover:text-white",3,"routerLink"],["class","flex-shrink-0 w-4 h-4 mr-3","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"flex-shrink-0","w-4","h-4","mr-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m3 5.197H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"],["routerLinkActive","bg-indigo-600 text-white",1,"group","flex","items-center","px-3","py-2","text-sm","font-medium","rounded-lg","transition-colors","duration-200","text-gray-300","hover:bg-gray-800","hover:text-white",3,"routerLink"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div")(2,"div",1)(3,"div")(4,"h1",2),d(5,"Rehabimovementgt"),l(),s(6,"p",3),d(7,"Sistema de Gesti\xF3n"),l()(),s(8,"button",4),x("click",function(){return i.toggleSidebar()}),I(),s(9,"svg",5),b(10,"path",6),l()()(),T(),s(11,"nav",7)(12,"div",8)(13,"a",9),I(),s(14,"svg",10),b(15,"path",11)(16,"path",12),l(),T(),s(17,"span"),d(18,"Dashboard"),l()(),w(19,K3,3,2,"div",13),l()(),s(20,"div",14)(21,"div")(22,"div",15)(23,"div",16)(24,"span",17),d(25),l()()(),s(26,"div")(27,"p",18),d(28),l(),s(29,"p",19),d(30),l()(),s(31,"button",20),x("click",function(){return i.logout()}),I(),s(32,"svg",21),b(33,"path",22),l()()()()(),T(),s(34,"div",23)(35,"header",24)(36,"div",25)(37,"div",26)(38,"div",27)(39,"h1",28),d(40),l()(),s(41,"div",29)(42,"button",30),x("click",function(){return i.logout()}),I(),s(43,"svg",31),b(44,"path",22),l(),d(45," Cerrar Sesi\xF3n "),l()()()()(),T(),s(46,"main",32),b(47,"router-outlet"),l()()()),e&2&&(u(),W("bg-gray-900 text-white transition-all duration-300 ease-in-out "+(i.isSidebarCollapsed?"w-16":"w-64")),u(2),W(i.isSidebarCollapsed?"hidden":"block"),u(7),An("d",i.isSidebarCollapsed?"M9 5l7 7-7 7":"M15 19l-7-7 7-7"),u(3),g("routerLink",Zf(20,j3))("routerLinkActiveOptions",Zf(21,L3)),u(4),W(i.isSidebarCollapsed?"hidden":"block"),u(2),g("ngForOf",i.getFilteredMenuItems()),u(2),W("flex items-center "+(i.isSidebarCollapsed?"justify-center":"")),u(4),E(" ",i.getUserInitials()," "),u(),W(i.isSidebarCollapsed?"hidden":"ml-3 flex-1"),u(2),E(" ",(i.currentUser==null?null:i.currentUser.full_name)||"Usuario"," "),u(2),E(" ",i.getUserRole()," "),u(),W("ml-2 p-1 rounded-lg hover:bg-gray-800 transition-colors duration-200 "+(i.isSidebarCollapsed?"hidden":"")),u(9),k(i.getPageTitle()))},dependencies:[ve,le,or,qn,Jm],styles:['.layout-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f9fafb}.sidebar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1f2937,#111827);transition:width .3s ease-in-out;position:relative;z-index:10}.sidebar-collapsed[_ngcontent-%COMP%]{width:4rem}.sidebar-expanded[_ngcontent-%COMP%]{width:16rem}.nav-item[_ngcontent-%COMP%]{transition:all .2s ease-in-out;border-radius:.5rem}.nav-item[_ngcontent-%COMP%]:hover{background-color:#374151b3;transform:translate(2px)}.nav-item.active[_ngcontent-%COMP%]{background-color:#4f46e5;color:#fff}.nav-item.active[_ngcontent-%COMP%]:hover{background-color:#4338ca}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.content-area[_ngcontent-%COMP%]{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch}.main-header[_ngcontent-%COMP%]{background:#fff;border-bottom:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.user-section[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background:#111827cc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-top:1px solid rgba(75,85,99,.3)}.user-avatar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#7c3aed);transition:transform .2s ease-in-out}.user-avatar[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.sidebar-toggle-btn[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.sidebar-toggle-btn[_ngcontent-%COMP%]:hover{background-color:#374151cc;transform:scale(1.05)}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;z-index:50}.sidebar-collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.main-content[_ngcontent-%COMP%]{margin-left:0}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:40}}.dashboard-card[_ngcontent-%COMP%]{background:#fff;border-radius:.5rem;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:all .2s ease-in-out}.dashboard-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;transform:translateY(-1px)}.stat-icon[_ngcontent-%COMP%]{border-radius:.375rem;padding:.75rem}.stat-number[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#111827}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;font-weight:500}.welcome-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4f46e5,#7c3aed);border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.welcome-icon[_ngcontent-%COMP%]{background:#fff3;border-radius:50%;padding:.75rem}.quick-action-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:.5rem;padding:1.5rem;transition:all .2s ease-in-out;cursor:pointer}.quick-action-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;transform:translateY(-2px);border-color:#4f46e5}.quick-action-icon[_ngcontent-%COMP%]{border-radius:.5rem;padding:.75rem;margin-bottom:1rem}.logout-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#b91c1c);transition:all .2s ease-in-out}.logout-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#b91c1c,#991b1b);transform:translateY(-1px);box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.loading-spinner[_ngcontent-%COMP%]{width:3rem;height:3rem;border:2px solid #e5e7eb;border-top:2px solid #4f46e5;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.tooltip[_ngcontent-%COMP%]{position:relative}.tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);position:absolute;bottom:100%;left:50%;transform:translate(-50%);background-color:#1f2937;color:#fff;padding:.5rem;border-radius:.375rem;font-size:.875rem;white-space:nowrap;z-index:100;margin-bottom:.25rem}.tooltip[_ngcontent-%COMP%]:hover:before{content:"";position:absolute;bottom:100%;left:50%;transform:translate(-50%);border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #1f2937;z-index:100}.success-message[_ngcontent-%COMP%]{background-color:#d1fae5;border:1px solid #a7f3d0;color:#065f46;padding:1rem;border-radius:.5rem;margin-bottom:1rem}.error-message[_ngcontent-%COMP%]{background-color:#fee2e2;border:1px solid #fecaca;color:#991b1b;padding:1rem;border-radius:.5rem;margin-bottom:1rem}.user-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}.user-info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.user-info-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#6b7280}.user-info-value[_ngcontent-%COMP%]{font-size:.875rem;color:#111827}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.transition-smooth[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.shadow-subtle[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.shadow-moderate[_ngcontent-%COMP%]{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.shadow-strong[_ngcontent-%COMP%]{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.custom-scrollbar[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#d1d5db #f3f4f6}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f3f4f6;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#9ca3af}@media (max-width: 1024px){.dashboard-stats[_ngcontent-%COMP%], .quick-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 640px){.dashboard-stats[_ngcontent-%COMP%], .quick-actions[_ngcontent-%COMP%], .user-info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.main-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.welcome-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}']})};function J3(n,t){if(n&1){let e=P();s(0,"button",33),x("click",function(){C(e);let r=h();return S(r.openCreateModal())}),I(),s(1,"svg",34),b(2,"path",35),l(),d(3," Nueva Rutina "),l()}}function X3(n,t){if(n&1&&(s(0,"div",36)(1,"div",37),I(),s(2,"svg",38),b(3,"path",39),l(),T(),s(4,"div",40)(5,"p",41),d(6),l()()()()),n&2){let e=h();u(6),k(e.error)}}function ek(n,t){n&1&&(s(0,"div",42),b(1,"div",43),l())}function tk(n,t){if(n&1&&(s(0,"span",70),d(1),l()),n&2){let e=t.$implicit;u(),be(" ",e.nombre," (",e.seccion.ejercicios.length,") ")}}function nk(n,t){if(n&1&&(s(0,"div",66)(1,"div",67),d(2,"Secciones:"),l(),s(3,"div",68),w(4,tk,2,2,"span",69),l()()),n&2){let e=h().$implicit,i=h(2);u(4),g("ngForOf",i.getSeccionesConEjercicios(e))}}function ik(n,t){if(n&1&&(s(0,"span",73),d(1),l()),n&2){let e=t.$implicit;u(),E(" #",e," ")}}function rk(n,t){if(n&1&&(s(0,"div",71)(1,"div",68),w(2,ik,2,1,"span",72),l()()),n&2){let e=h().$implicit;u(2),g("ngForOf",e.tags)}}function ok(n,t){if(n&1){let e=P();s(0,"button",74),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.openViewModal(r))}),I(),s(1,"svg",62),b(2,"path",75)(3,"path",76),l()()}}function ak(n,t){if(n&1){let e=P();s(0,"button",77),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.openEditModal(r))}),I(),s(1,"svg",62),b(2,"path",78),l()()}}function sk(n,t){if(n&1){let e=P();s(0,"button",79),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.deleteRutina(r))}),I(),s(1,"svg",62),b(2,"path",80),l()()}}function lk(n,t){if(n&1){let e=P();s(0,"button",81),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.reactivateRutina(r))}),I(),s(1,"svg",62),b(2,"path",82),l()()}}function ck(n,t){if(n&1){let e=P();s(0,"div",46)(1,"div")(2,"div",47)(3,"div",48)(4,"h3",49),d(5),l(),s(6,"p",50),d(7),l()(),s(8,"span"),d(9),l()()(),s(10,"div",51)(11,"div",52)(12,"span",53),d(13),l(),s(14,"span",54),d(15),l()(),w(16,nk,5,1,"div",55),s(17,"div",56),d(18),l(),w(19,rk,3,1,"div",57),s(20,"div",58),w(21,ok,4,0,"button",59)(22,ak,3,0,"button",60),s(23,"button",61),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.exportarRutina(r))}),I(),s(24,"svg",62),b(25,"path",63),l()(),w(26,sk,3,0,"button",64)(27,lk,3,0,"button",65),l()()()}if(n&2){let e=t.$implicit,i=h(2);X("opacity-50",e.status===0),u(),W("px-6 py-4 "+(e.status===1?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-gray-400 to-gray-500")),u(4),k(e.nombre),u(2),k(e.descripcion),u(),W("inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(e.status===1?"bg-green-100 text-green-800":"bg-red-100 text-red-800")),u(),E(" ",e.status===1?"Activo":"Inactivo"," "),u(4),E(" ",e.nivel," "),u(2),k(i.formatDuracion(e.duracion_estimada)),u(),g("ngIf",i.getSeccionesConEjercicios(e).length>0),u(2),E(" Total de ejercicios: ",i.getTotalEjercicios(e)," "),u(),g("ngIf",e.tags&&e.tags.length>0),u(2),g("ngIf",i.canViewRutina()),u(),g("ngIf",e.status===1&&i.canEditRutina()),u(4),g("ngIf",e.status===1&&i.canEditRutina()),u(),g("ngIf",e.status===0&&i.canEditRutina())}}function dk(n,t){if(n&1&&(s(0,"div",44),w(1,ck,28,18,"div",45),l()),n&2){let e=h();u(),g("ngForOf",e.filteredRutinas)("ngForTrackBy",e.trackByRutinaId)}}function uk(n,t){if(n&1){let e=P();s(0,"button",91),x("click",function(){C(e);let r=h(2);return S(r.openCreateModal())}),d(1," Crear primera rutina "),l()}}function pk(n,t){if(n&1){let e=P();s(0,"button",92),x("click",function(){C(e);let r=h(2);return S(r.clearFilters())}),d(1," Limpiar filtros "),l()}}function fk(n,t){if(n&1&&(s(0,"div",83),I(),s(1,"svg",84),b(2,"path",85),l(),T(),s(3,"h3",86),d(4,"No hay rutinas"),l(),s(5,"p",87),d(6),l(),s(7,"div",88),w(8,uk,2,0,"button",89)(9,pk,2,0,"button",90),l()()),n&2){let e=h();u(6),E(" ",e.rutinas.length===0?"No se encontraron rutinas en la base de datos.":"No se encontraron rutinas con los filtros aplicados."," "),u(2),g("ngIf",e.rutinas.length===0&&e.canEditRutina()),u(),g("ngIf",e.rutinas.length>0)}}function mk(n,t){if(n&1){let e=P();s(0,"label",121)(1,"input",122),x("change",function(){let r=C(e).$implicit,o=h(2);return S(o.toggleSeccion(r.key))}),l(),s(2,"span",123),d(3),l()()}if(n&2){let e=t.$implicit,i=h(2);X("bg-red-50",i.isSeccionActiva(e.key))("border-red-300",i.isSeccionActiva(e.key)),u(),g("checked",i.isSeccionActiva(e.key)),u(2),k(e.nombre)}}function gk(n,t){if(n&1){let e=P();s(0,"div",71)(1,"label",13),d(2),l(),s(3,"input",133),x("input",function(r){C(e);let o=h().$implicit,a=h(2);return S(a.updateSeccionDescripcion(o.key,r))}),l()()}if(n&2){let e,i=h().$implicit,r=h(2);u(2),E("Descripci\xF3n de ",i.nombre,""),u(),g("value",((e=r.getSeccionData(r.rutinaForm,i.key))==null?null:e.descripcion)||"")}}function hk(n,t){if(n&1){let e=P();s(0,"div",134)(1,"div")(2,"label",135),d(3,"Tiempo Total"),l(),s(4,"input",136),x("input",function(r){C(e);let o=h().$implicit,a=h(2);return S(a.updateSeccionTiempoTotal(o.key,r))}),l()(),s(5,"div")(6,"label",135),d(7,"Series"),l(),s(8,"input",137),x("input",function(r){C(e);let o=h().$implicit,a=h(2);return S(a.updateSeccionSeries(o.key,r))}),l()(),s(9,"div")(10,"label",135),d(11,"Time Cap"),l(),s(12,"input",138),x("input",function(r){C(e);let o=h().$implicit,a=h(2);return S(a.updateSeccionTimeCap(o.key,r))}),l()()()}if(n&2){let e,i,r,o=h().$implicit,a=h(2);u(4),g("value",((e=a.getSeccionData(a.rutinaForm,o.key))==null?null:e.tiempo_total)||""),u(4),g("value",((i=a.getSeccionData(a.rutinaForm,o.key))==null?null:i.series)||""),u(4),g("value",((r=a.getSeccionData(a.rutinaForm,o.key))==null?null:r.time_cap)||"")}}function vk(n,t){if(n&1){let e=P();s(0,"div",139)(1,"div",140)(2,"div",141)(3,"label",142),d(4,"Ejercicio"),l(),s(5,"input",143),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.nombre,r)||(o.nombre=r),S(r)}),l()(),s(6,"div")(7,"label",142),d(8,"Tipo"),l(),s(9,"select",144),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.tipo,r)||(o.tipo=r),S(r)}),s(10,"option",145),d(11,"Resistencia Cardiovascular"),l(),s(12,"option",146),d(13,"Fuerza"),l(),s(14,"option",147),d(15,"Funcional"),l(),s(16,"option",148),d(17,"Core"),l(),s(18,"option",149),d(19,"Movilidad"),l(),s(20,"option",150),d(21,"Activaci\xF3n"),l(),s(22,"option",151),d(23,"Equilibrio/Balance"),l(),s(24,"option",152),d(25,"Coordinaci\xF3n"),l()()(),s(26,"div",153)(27,"button",154),x("click",function(){let r=C(e).index,o=h().$implicit,a=h(2);return S(a.removeEjercicio(o.key,r))}),I(),s(28,"svg",155),b(29,"path",80),l()()()(),T(),s(30,"div",156)(31,"div")(32,"label",142),d(33,"Reps"),l(),s(34,"input",157),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.repeticiones,r)||(o.repeticiones=r),S(r)}),l()(),s(35,"div")(36,"label",142),d(37,"Series"),l(),s(38,"input",158),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.series,r)||(o.series=r),S(r)}),l()(),s(39,"div")(40,"label",142),d(41,"Duraci\xF3n"),l(),s(42,"input",159),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.duracion,r)||(o.duracion=r),S(r)}),l()(),s(43,"div")(44,"label",142),d(45,"Distancia"),l(),s(46,"input",160),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.distancia,r)||(o.distancia=r),S(r)}),l()(),s(47,"div")(48,"label",142),d(49,"RPE"),l(),s(50,"input",161),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.rpe,r)||(o.rpe=r),S(r)}),l()(),s(51,"div")(52,"label",142),d(53,"Peso"),l(),s(54,"input",162),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.peso,r)||(o.peso=r),S(r)}),l()()(),s(55,"div",163)(56,"label",142),d(57,"Observaciones"),l(),s(58,"input",164),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.observaciones,r)||(o.observaciones=r),S(r)}),l()()()}if(n&2){let e=t.$implicit;u(5),R("ngModel",e.nombre),u(4),R("ngModel",e.tipo),u(25),R("ngModel",e.repeticiones),u(4),R("ngModel",e.series),u(4),R("ngModel",e.duracion),u(4),R("ngModel",e.distancia),u(4),R("ngModel",e.rpe),u(4),R("ngModel",e.peso),u(4),R("ngModel",e.observaciones)}}function _k(n,t){if(n&1){let e=P();s(0,"div",165),I(),s(1,"svg",166),b(2,"path",35),l(),T(),s(3,"p",167),d(4,"No hay ejercicios en esta secci\xF3n"),l(),s(5,"button",168),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.addEjercicio(r.key))}),d(6," Agregar primer ejercicio "),l()()}}function bk(n,t){if(n&1){let e=P();s(0,"div",124)(1,"h5",125)(2,"span",126),d(3),l(),d(4),l(),w(5,gk,4,2,"div",57)(6,hk,13,3,"div",127),s(7,"div",128)(8,"div",129)(9,"h6",67),d(10,"Ejercicios"),l(),s(11,"button",130),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.addEjercicio(r.key))}),d(12," + Agregar Ejercicio "),l()(),w(13,vk,59,9,"div",131)(14,_k,7,0,"div",132),l()()}if(n&2){let e,i,r=t.$implicit,o=h(2);X("hidden",!o.isSeccionActiva(r.key)),u(3),k(r.nombre),u(),E(" ",r.descripcion," "),u(),g("ngIf",o.getSeccionData(o.rutinaForm,r.key)),u(),g("ngIf",o.getSeccionData(o.rutinaForm,r.key)),u(7),g("ngForOf",(e=o.getSeccionData(o.rutinaForm,r.key))==null?null:e.ejercicios)("ngForTrackBy",o.trackByEjercicioOrden),u(),g("ngIf",!((i=(i=o.getSeccionData(o.rutinaForm,r.key))==null||i.ejercicios==null?null:i.ejercicios.length)!==null&&i!==void 0&&i))}}function yk(n,t){if(n&1&&(s(0,"div",169)(1,"div",37),I(),s(2,"svg",38),b(3,"path",39),l(),T(),s(4,"div",40)(5,"p",41),d(6),l()()()()),n&2){let e=h(2);u(6),k(e.error)}}function xk(n,t){n&1&&(I(),s(0,"svg",170),b(1,"path",8),l())}function wk(n,t){if(n&1){let e=P();s(0,"div",93)(1,"div",94)(2,"div",95),x("click",function(){C(e);let r=h();return S(r.closeModal())}),l(),s(3,"div",96)(4,"div",97)(5,"div",98)(6,"div",99),I(),s(7,"svg",100),b(8,"path",85),l()(),T(),s(9,"div",101)(10,"h3",102),d(11),l()()()(),s(12,"div",103)(13,"div",104)(14,"div")(15,"label",13),d(16," Nombre "),s(17,"span",105),d(18,"*"),l()(),s(19,"input",106),F("ngModelChange",function(r){C(e);let o=h();return N(o.rutinaForm.nombre,r)||(o.rutinaForm.nombre=r),S(r)}),l()(),s(20,"div")(21,"label",13),d(22,"Duraci\xF3n (minutos)"),l(),s(23,"input",107),F("ngModelChange",function(r){C(e);let o=h();return N(o.rutinaForm.duracion_estimada,r)||(o.rutinaForm.duracion_estimada=r),S(r)}),l()(),s(24,"div")(25,"label",13),d(26,"Tipo"),l(),s(27,"select",108),F("ngModelChange",function(r){C(e);let o=h();return N(o.rutinaForm.tipo,r)||(o.rutinaForm.tipo=r),S(r)}),s(28,"option",19),d(29,"Entrenamiento"),l(),s(30,"option",20),d(31,"Recuperaci\xF3n"),l(),s(32,"option",21),d(33,"Evaluaci\xF3n"),l()()(),s(34,"div")(35,"label",13),d(36,"Nivel"),l(),s(37,"select",108),F("ngModelChange",function(r){C(e);let o=h();return N(o.rutinaForm.nivel,r)||(o.rutinaForm.nivel=r),S(r)}),s(38,"option",22),d(39,"Principiante"),l(),s(40,"option",23),d(41,"Intermedio"),l(),s(42,"option",24),d(43,"Avanzado"),l()()(),s(44,"div",12)(45,"label",13),d(46,"Descripci\xF3n"),l(),s(47,"textarea",109),F("ngModelChange",function(r){C(e);let o=h();return N(o.rutinaForm.descripcion,r)||(o.rutinaForm.descripcion=r),S(r)}),l()()(),s(48,"div",110)(49,"h4",111),d(50,"Secciones de la Rutina"),l(),s(51,"div",112),w(52,mk,4,6,"label",113),l(),s(53,"div",114),w(54,bk,15,9,"div",115),l()(),w(55,yk,7,1,"div",116),l(),s(56,"div",117)(57,"button",118),x("click",function(){C(e);let r=h();return S(r.saveRutina())}),w(58,xk,2,0,"svg",119),d(59),l(),s(60,"button",120),x("click",function(){C(e);let r=h();return S(r.closeModal())}),d(61," Cancelar "),l()()()()()}if(n&2){let e=h();u(11),E(" ",e.modalMode==="create"?"Crear Nueva Rutina":"Editar Rutina"," "),u(8),R("ngModel",e.rutinaForm.nombre),u(4),R("ngModel",e.rutinaForm.duracion_estimada),u(4),R("ngModel",e.rutinaForm.tipo),u(10),R("ngModel",e.rutinaForm.nivel),u(10),R("ngModel",e.rutinaForm.descripcion),u(5),g("ngForOf",e.seccionesDisponibles),u(2),g("ngForOf",e.seccionesDisponibles),u(),g("ngIf",e.error),u(2),g("disabled",e.loading),u(),g("ngIf",e.loading),u(),E(" ",e.modalMode==="create"?"Crear Rutina":"Guardar Cambios"," "),u(),g("disabled",e.loading)}}function Ck(n,t){if(n&1){let e=P();s(0,"button",171),x("click",function(){C(e);let r=h();return S(r.openCreateModal())}),I(),s(1,"svg",172),b(2,"path",35),l()()}}function Sk(n,t){n&1&&(s(0,"div",192)(1,"div",37),I(),s(2,"svg",193),b(3,"path",82),l(),T(),s(4,"div",40)(5,"p",194),d(6,"\xA1Rutina copiada al portapapeles!"),l()()()())}function Ek(n,t){if(n&1){let e=P();s(0,"div",93)(1,"div",94)(2,"div",95),x("click",function(){C(e);let r=h();return S(r.closeViewModal())}),l(),s(3,"div",173)(4,"div",97)(5,"div",98)(6,"div",174),I(),s(7,"svg",175),b(8,"path",75)(9,"path",76),l()(),T(),s(10,"div",101)(11,"h3",102),d(12),l(),s(13,"div",176)(14,"p",54),d(15," Visualizaci\xF3n completa de la rutina en formato de entrenamiento "),l()()()()(),s(16,"div",177)(17,"div",178)(18,"div",179)(19,"div",5),b(20,"div",180)(21,"div",181)(22,"div",182),l(),s(23,"div",183),d(24),l()(),s(25,"pre",184),d(26),l()(),w(27,Sk,7,0,"div",185),s(28,"div",186)(29,"button",187),x("click",function(){C(e);let r=h();return S(r.copyToClipboard(r.getFormattedRutina(r.selectedViewRutina)))}),I(),s(30,"svg",188),b(31,"path",189),l(),d(32," Copiar "),l(),T(),s(33,"button",190),x("click",function(){C(e);let r=h();return S(r.exportarRutina(r.selectedViewRutina))}),I(),s(34,"svg",188),b(35,"path",63),l(),d(36," Descargar "),l()()(),T(),s(37,"div",117)(38,"button",191),x("click",function(){C(e);let r=h();return S(r.closeViewModal())}),d(39," Cerrar "),l()()()()()}if(n&2){let e=h();u(12),E(" ",e.selectedViewRutina==null?null:e.selectedViewRutina.nombre," "),u(12),E(" ",e.getFileName(e.selectedViewRutina)," "),u(2),k(e.getFormattedRutina(e.selectedViewRutina)),u(),g("ngIf",e.copySuccess)}}var Gd=class n{constructor(t,e){this.supabaseService=t;this.authService=e}rutinas=[];filteredRutinas=[];tiposSeccion=[];loading=!1;error="";showModal=!1;modalMode="create";selectedRutina=null;showViewModal=!1;selectedViewRutina=null;copySuccess=!1;rutinaForm={nombre:"",descripcion:"",tipo:"entrenamiento",nivel:"intermedio",duracion_estimada:60,tags:[],status:1};seccionesDisponibles=[{key:"warm_up",nombre:"Warm Up",descripcion:"Calentamiento"},{key:"met_con",nombre:"Met-Con",descripcion:"Metabolic Conditioning"},{key:"strength",nombre:"Strength",descripcion:"Entrenamiento de Fuerza"},{key:"core",nombre:"Core",descripcion:"Trabajo de Core"},{key:"extra",nombre:"Extra",descripcion:"Trabajo Adicional"}];searchTerm="";tipoFilter="all";nivelFilter="all";statusFilter="active";seccionesActivas=new Set;ngOnInit(){return v(this,null,function*(){yield this.loadTiposSeccion(),yield this.loadRutinas()})}loadTiposSeccion(){return v(this,null,function*(){try{let t=yield this.supabaseService.getData("tipos_seccion");this.tiposSeccion=t?.filter(e=>e.status===1)||[]}catch(t){console.error("Error cargando tipos de secci\xF3n:",t)}})}loadRutinas(){return v(this,null,function*(){this.loading=!0,this.error="";try{let t=yield this.supabaseService.getData("rutinas");this.rutinas=t||[],this.rutinas=this.rutinas.sort((e,i)=>e.nombre.toLowerCase().localeCompare(i.nombre.toLowerCase())),this.filteredRutinas=[...this.rutinas],this.applyFilters(),console.log("Rutinas cargadas:",this.rutinas.length)}catch(t){console.error("Error cargando rutinas:",t),this.error="Error al cargar las rutinas"}finally{this.loading=!1}})}applyFilters(){let t=[...this.rutinas];if(this.statusFilter==="active"?t=t.filter(e=>e.status===1):this.statusFilter==="inactive"&&(t=t.filter(e=>e.status===0)),this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.nombre.toLowerCase().includes(e)||i.descripcion?.toLowerCase().includes(e)||i.tags?.some(r=>r.toLowerCase().includes(e)))}this.tipoFilter!=="all"&&(t=t.filter(e=>e.tipo===this.tipoFilter)),this.nivelFilter!=="all"&&(t=t.filter(e=>e.nivel===this.nivelFilter)),t=t.sort((e,i)=>e.nombre.toLowerCase().localeCompare(i.nombre.toLowerCase())),this.filteredRutinas=t}openCreateModal(){this.modalMode="create",this.rutinaForm={nombre:"",descripcion:"",tipo:"entrenamiento",nivel:"intermedio",duracion_estimada:60,tags:[],status:1},this.seccionesActivas.clear(),this.error="",this.showModal=!0}openEditModal(t){this.modalMode="edit",this.selectedRutina=t,this.rutinaForm=JSON.parse(JSON.stringify(t)),this.seccionesActivas.clear(),this.seccionesDisponibles.forEach(e=>{this.getSeccionData(this.rutinaForm,e.key)&&this.seccionesActivas.add(e.key)}),this.error="",this.showModal=!0}openViewModal(t){console.log("Abriendo modal de vista para rutina:",t.nombre),this.selectedViewRutina=t,this.showViewModal=!0}closeViewModal(){console.log("Cerrando modal de vista"),this.showViewModal=!1,this.selectedViewRutina=null,this.copySuccess=!1}closeModal(){this.showModal=!1,this.selectedRutina=null,this.error="",this.seccionesActivas.clear()}saveRutina(){return v(this,null,function*(){try{if(this.error="",!this.rutinaForm.nombre.trim()){this.error="El nombre es requerido";return}if(this.seccionesActivas.size===0){this.error="Debe activar al menos una secci\xF3n";return}let t=A({},this.rutinaForm);this.seccionesDisponibles.forEach(e=>{this.seccionesActivas.has(e.key)||delete t[e.key]}),this.modalMode==="create"?(console.log("Creando rutina:",t),yield this.supabaseService.insertData("rutinas",t)):(t.updated_at=new Date().toISOString(),console.log("Actualizando rutina:",t),yield this.supabaseService.updateData("rutinas",this.selectedRutina.id.toString(),t)),yield this.loadRutinas(),this.closeModal()}catch(t){console.error("Error guardando rutina:",t),this.error="Error al guardar la rutina"}})}deleteRutina(t){return v(this,null,function*(){let e=`\xBFEst\xE1 seguro de eliminar la rutina "${t.nombre}"?`;if(confirm(e))try{yield this.supabaseService.updateData("rutinas",t.id.toString(),{status:0}),yield this.loadRutinas()}catch(i){console.error("Error eliminando rutina:",i),this.error="Error al eliminar la rutina"}})}reactivateRutina(t){return v(this,null,function*(){let e=`\xBFEst\xE1 seguro de reactivar la rutina "${t.nombre}"?`;if(confirm(e))try{yield this.supabaseService.updateData("rutinas",t.id.toString(),{status:1}),yield this.loadRutinas()}catch(i){console.error("Error reactivando rutina:",i),this.error="Error al reactivar la rutina"}})}toggleSeccion(t){this.seccionesActivas.has(t)?(this.seccionesActivas.delete(t),this.setSeccionData(this.rutinaForm,t,void 0)):(this.seccionesActivas.add(t),this.setSeccionData(this.rutinaForm,t,{descripcion:"",ejercicios:[]}))}isSeccionActiva(t){return this.seccionesActivas.has(t)}getSeccionData(t,e){return t[e]}setSeccionData(t,e,i){t[e]=i}updateSeccionDescripcion(t,e){let i=this.getSeccionData(this.rutinaForm,t);i&&(i.descripcion=e.target.value)}updateSeccionTiempoTotal(t,e){let i=this.getSeccionData(this.rutinaForm,t);i&&(i.tiempo_total=e.target.value)}updateSeccionSeries(t,e){let i=this.getSeccionData(this.rutinaForm,t);i&&(i.series=parseInt(e.target.value)||void 0)}updateSeccionTimeCap(t,e){let i=this.getSeccionData(this.rutinaForm,t);i&&(i.time_cap=e.target.value)}addEjercicio(t){let e=this.getSeccionData(this.rutinaForm,t);if(e&&e.ejercicios){let i={orden:e.ejercicios.length+1,nombre:"",tipo:"funcional"};e.ejercicios.push(i)}}removeEjercicio(t,e){let i=this.getSeccionData(this.rutinaForm,t);i&&i.ejercicios&&(i.ejercicios.splice(e,1),i.ejercicios.forEach((r,o)=>{r.orden=o+1}))}addTag(t){let e=t.target,i=e.value.trim();i&&t.key==="Enter"&&(this.rutinaForm.tags||(this.rutinaForm.tags=[]),this.rutinaForm.tags.includes(i)||this.rutinaForm.tags.push(i),e.value="",t.preventDefault())}removeTag(t){this.rutinaForm.tags&&this.rutinaForm.tags.splice(t,1)}getSeccionNombre(t){let e=this.seccionesDisponibles.find(i=>i.key===t);return e?e.nombre:t}getSeccionesConEjercicios(t){let e=[];return this.seccionesDisponibles.forEach(i=>{let r=this.getSeccionData(t,i.key);r&&r.ejercicios&&r.ejercicios.length>0&&e.push({key:i.key,nombre:i.nombre,seccion:r})}),e}formatDuracion(t){if(!t)return"N/A";let e=Math.floor(t/60),i=t%60;return e>0?`${e}h ${i}m`:`${i}m`}getTotalEjercicios(t){let e=0;return this.seccionesDisponibles.forEach(i=>{let r=this.getSeccionData(t,i.key);r&&r.ejercicios&&(e+=r.ejercicios.length)}),e}onSearch(){this.applyFilters()}onFilterChange(){this.applyFilters()}clearFilters(){this.searchTerm="",this.tipoFilter="all",this.nivelFilter="all",this.statusFilter="active",this.applyFilters()}refreshRutinas(){return v(this,null,function*(){yield this.loadRutinas()})}trackByRutinaId(t,e){return e.id||t}trackByEjercicioOrden(t,e){return e.orden||t}getFormattedRutina(t){if(!t)return"";let e=`${t.nombre}
`;return e+=`${t.descripcion||"Rutina de entrenamiento"}
`,e+=`Nivel: ${t.nivel} | Duraci\xF3n: ${this.formatDuracion(t.duracion_estimada)}

`,["warm_up","met_con","strength","core","extra"].forEach(r=>{let o=this.seccionesDisponibles.find(c=>c.key===r),a=this.getSeccionData(t,r);if(a&&a.ejercicios&&a.ejercicios.length>0&&o){e+=`${o.nombre.toUpperCase()}
`,a.descripcion&&(e+=`${a.descripcion}
`);let c=[];a.tiempo_total&&c.push(`Tiempo: ${a.tiempo_total}`),a.series&&c.push(`Series: ${a.series}`),a.time_cap&&c.push(`Time Cap: ${a.time_cap}`),c.length>0&&(e+=`${c.join(" | ")}
`),a.ejercicios.forEach(p=>{let f=p.nombre,m=[];p.repeticiones&&m.push(`${p.repeticiones} reps`),p.series&&m.push(`x ${p.series}`),p.duracion&&m.push(`${p.duracion}`),p.distancia&&m.push(`${p.distancia}`),p.peso&&m.push(`${p.peso}`),m.length>0&&(f+=` - ${m.join(" ")}`),p.rpe&&(f+=` (RPE ${p.rpe})`),p.observaciones&&(f+=` - ${p.observaciones}`),e+=`${f}
`}),e+=`
`}}),t.tags&&t.tags.length>0&&(e+=`Tags: ${t.tags.map(r=>`#${r}`).join(" ")}
`),e}copyToClipboard(t){return v(this,null,function*(){try{yield navigator.clipboard.writeText(t),this.copySuccess=!0,console.log("Texto copiado al portapapeles"),setTimeout(()=>{this.copySuccess=!1},2e3)}catch(e){console.error("Error al copiar al portapapeles:",e),this.fallbackCopyTextToClipboard(t)}})}fallbackCopyTextToClipboard(t){let e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")&&(this.copySuccess=!0,setTimeout(()=>{this.copySuccess=!1},2e3))}catch(i){console.error("Fallback: Error al copiar al portapapeles:",i)}document.body.removeChild(e)}canViewRutina(){return this.authService.isAuthenticated()}canEditRutina(){return this.authService.isAdmin()||this.authService.hasProfile(3)}exportarRutina(t){let e=this.getFormattedRutina(t),i=new Blob([e],{type:"text/plain;charset=utf-8"}),r=window.URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download=`${t.nombre.replace(/\s+/g,"_")}.txt`,o.click(),window.URL.revokeObjectURL(r),console.log("Rutina exportada:",t.nombre)}getFileName(t){return!t||!t.nombre?"rutina.txt":t.nombre.replace(/\s+/g,"_")+".txt"}static \u0275fac=function(e){return new(e||n)(O(me),O(re))};static \u0275cmp=ie({type:n,selectors:[["app-rutinas"]],standalone:!1,decls:64,vars:13,consts:[[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"flex","space-x-2"],[1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["class","inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",3,"click",4,"ngIf"],[1,"bg-white","rounded-lg","shadow","mb-6","p-6"],[1,"grid","grid-cols-1","md:grid-cols-5","gap-4"],[1,"md:col-span-2"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","placeholder","Buscar rutinas...",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","input","ngModel"],[1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","change","ngModel"],["value","all"],["value","active"],["value","inactive"],["value","entrenamiento"],["value","recuperacion"],["value","evaluacion"],["value","principiante"],["value","intermedio"],["value","avanzado"],[1,"mt-4","flex","justify-end"],[1,"text-sm","text-red-600","hover:text-red-800",3,"click"],["class","bg-red-50 border border-red-200 rounded-md p-4 mb-6",4,"ngIf"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],["class","md:hidden fixed bottom-6 right-6 w-14 h-14 bg-red-600 text-white rounded-full shadow-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all duration-200 z-40","title","Crear nueva rutina",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-red-600","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-6"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-red-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300",3,"opacity-50",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","rounded-lg","shadow-lg","overflow-hidden","hover:shadow-xl","transition-shadow","duration-300"],[1,"flex","justify-between","items-start"],[1,"flex-1"],[1,"text-xl","font-bold","text-white"],[1,"text-red-100","text-sm"],[1,"p-6"],[1,"flex","justify-between","items-center","mb-4"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-red-100","text-red-800"],[1,"text-sm","text-gray-500"],["class","space-y-2 mb-4",4,"ngIf"],[1,"text-sm","text-gray-600","mb-4"],["class","mb-4",4,"ngIf"],[1,"flex","justify-end","space-x-2"],["class","text-blue-600 hover:text-blue-900 p-2 rounded-full hover:bg-blue-50 transition-colors duration-150","title","Ver rutina completa",3,"click",4,"ngIf"],["class","text-red-600 hover:text-red-900 p-2 rounded-full hover:bg-red-50 transition-colors duration-150","title","Editar rutina",3,"click",4,"ngIf"],["title","Descargar rutina",1,"text-green-600","hover:text-green-900","p-2","rounded-full","hover:bg-green-50","transition-colors","duration-150",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["class","text-red-600 hover:text-red-900 p-2 rounded-full hover:bg-red-50 transition-colors duration-150","title","Desactivar rutina",3,"click",4,"ngIf"],["class","text-green-600 hover:text-green-900 p-2 rounded-full hover:bg-green-50 transition-colors duration-150","title","Reactivar rutina",3,"click",4,"ngIf"],[1,"space-y-2","mb-4"],[1,"text-sm","font-medium","text-gray-900"],[1,"flex","flex-wrap","gap-1"],["class","inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","text-xs","font-medium","bg-gray-100","text-gray-800"],[1,"mb-4"],["class","inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","text-xs","font-medium","bg-blue-100","text-blue-800"],["title","Ver rutina completa",1,"text-blue-600","hover:text-blue-900","p-2","rounded-full","hover:bg-blue-50","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["title","Editar rutina",1,"text-red-600","hover:text-red-900","p-2","rounded-full","hover:bg-red-50","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Desactivar rutina",1,"text-red-600","hover:text-red-900","p-2","rounded-full","hover:bg-red-50","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["title","Reactivar rutina",1,"text-green-600","hover:text-green-900","p-2","rounded-full","hover:bg-green-50","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],["class","inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",3,"click",4,"ngIf"],["class","inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-red-600","hover:bg-red-700",3,"click"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","shadow-sm","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-center","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-6xl","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-red-600"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","w-full"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"bg-white","px-4","pb-4","sm:px-6","max-h-96","overflow-y-auto"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-6"],[1,"text-red-500"],["type","text","placeholder","Nombre de la rutina",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["type","number","placeholder","60",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["rows","3","placeholder","Descripci\xF3n de la rutina",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"border-t","pt-6"],[1,"text-lg","font-medium","text-gray-900","mb-4"],[1,"grid","grid-cols-2","md:grid-cols-5","gap-2","mb-6"],["class","flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",3,"bg-red-50","border-red-300",4,"ngFor","ngForOf"],[1,"space-y-6"],["class","border border-gray-200 rounded-lg p-4",3,"hidden",4,"ngFor","ngForOf"],["class","mt-4 bg-red-50 border border-red-200 rounded-md p-3",4,"ngIf"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-red-600","text-base","font-medium","text-white","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","sm:ml-3","sm:w-auto","sm:text-sm","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm","disabled:opacity-50",3,"click","disabled"],[1,"flex","items-center","p-3","border","border-gray-300","rounded-lg","cursor-pointer","hover:bg-gray-50"],["type","checkbox",1,"h-4","w-4","text-red-600","focus:ring-red-500","border-gray-300","rounded",3,"change","checked"],[1,"ml-2","text-sm","font-medium","text-gray-900"],[1,"border","border-gray-200","rounded-lg","p-4"],[1,"text-md","font-medium","text-gray-900","mb-3","flex","items-center"],[1,"bg-red-100","text-red-800","px-2","py-1","rounded","text-sm","mr-2"],["class","grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",4,"ngIf"],[1,"space-y-3"],[1,"flex","justify-between","items-center"],["type","button",1,"inline-flex","items-center","px-2","py-1","border","border-transparent","text-xs","font-medium","rounded","text-red-700","bg-red-100","hover:bg-red-200",3,"click"],["class","border border-gray-200 rounded-lg p-3 bg-gray-50",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-8 text-gray-500",4,"ngIf"],["type","text","placeholder","Ej: AMRAP 20:00, 3 Series, etc.",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"input","value"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","placeholder","20:00",1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"input","value"],["type","number","placeholder","3",1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"input","value"],["type","text","placeholder","10:00",1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"input","value"],[1,"border","border-gray-200","rounded-lg","p-3","bg-gray-50"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-3"],[1,"lg:col-span-2"],[1,"block","text-xs","font-medium","text-gray-700","mb-1"],["type","text","placeholder","Nombre del ejercicio",1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["value","cardio"],["value","fuerza"],["value","funcional"],["value","core"],["value","movilidad"],["value","activacion"],["value","equilibrio"],["value","coordinaci\xF3n"],[1,"flex","items-end"],["type","button","title","Eliminar ejercicio",1,"text-red-600","hover:text-red-800","p-1",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],[1,"grid","grid-cols-2","md:grid-cols-4","lg:grid-cols-6","gap-3","mt-3"],["type","number","placeholder","12",1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["type","number","placeholder","3",1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["type","text","placeholder","2:00",1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["type","text","placeholder","800m",1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["type","number","min","1","max","10","placeholder","7",1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["type","text","placeholder","20kg",1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"mt-3"],["type","text","placeholder","Notas adicionales sobre el ejercicio",1,"block","w-full","px-2","py-1","text-sm","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"text-center","py-8","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-8","w-8","text-gray-400","mb-2"],[1,"text-sm"],["type","button",1,"mt-2","text-red-600","hover:text-red-800","text-sm",3,"click"],[1,"mt-4","bg-red-50","border","border-red-200","rounded-md","p-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["title","Crear nueva rutina",1,"md:hidden","fixed","bottom-6","right-6","w-14","h-14","bg-red-600","text-white","rounded-full","shadow-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-all","duration-200","z-40",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","mx-auto"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-5xl","sm:w-full"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-blue-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-blue-600"],[1,"mt-2"],[1,"bg-white","px-4","pb-4","sm:px-6"],[1,"bg-gray-900","text-green-400","rounded-lg","p-6","font-mono","text-sm","overflow-auto","max-h-96","relative",2,"font-family","'Courier New', monospace","line-height","1.6"],[1,"flex","items-center","justify-between","mb-4","pb-2","border-b","border-gray-700"],[1,"w-3","h-3","bg-red-500","rounded-full"],[1,"w-3","h-3","bg-yellow-500","rounded-full"],[1,"w-3","h-3","bg-green-500","rounded-full"],[1,"text-gray-400","text-xs"],[1,"whitespace-pre-wrap","text-white"],["class","mt-4 bg-green-50 border border-green-200 rounded-md p-3",4,"ngIf"],[1,"mt-4","flex","justify-between"],[1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"inline-flex","items-center","px-3","py-2","border","border-transparent","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","sm:w-auto","sm:text-sm",3,"click"],[1,"mt-4","bg-green-50","border","border-green-200","rounded-md","p-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-green-400"],[1,"text-sm","text-green-700"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),d(5,"Gesti\xF3n de Rutinas"),l(),s(6,"p",4),d(7),l()(),s(8,"div",5)(9,"button",6),x("click",function(){return i.refreshRutinas()}),I(),s(10,"svg",7),b(11,"path",8),l(),d(12," Refrescar "),l(),w(13,J3,4,0,"button",9),l()()(),T(),s(14,"div",10)(15,"div",11)(16,"div",12)(17,"label",13),d(18,"Buscar"),l(),s(19,"input",14),F("ngModelChange",function(o){return N(i.searchTerm,o)||(i.searchTerm=o),o}),x("input",function(){return i.onSearch()}),l()(),s(20,"div")(21,"label",13),d(22,"Estado"),l(),s(23,"select",15),F("ngModelChange",function(o){return N(i.statusFilter,o)||(i.statusFilter=o),o}),x("change",function(){return i.onFilterChange()}),s(24,"option",16),d(25,"Todos"),l(),s(26,"option",17),d(27,"Activos"),l(),s(28,"option",18),d(29,"Inactivos"),l()()(),s(30,"div")(31,"label",13),d(32,"Tipo"),l(),s(33,"select",15),F("ngModelChange",function(o){return N(i.tipoFilter,o)||(i.tipoFilter=o),o}),x("change",function(){return i.onFilterChange()}),s(34,"option",16),d(35,"Todos"),l(),s(36,"option",19),d(37,"Entrenamiento"),l(),s(38,"option",20),d(39,"Recuperaci\xF3n"),l(),s(40,"option",21),d(41,"Evaluaci\xF3n"),l()()(),s(42,"div")(43,"label",13),d(44,"Nivel"),l(),s(45,"select",15),F("ngModelChange",function(o){return N(i.nivelFilter,o)||(i.nivelFilter=o),o}),x("change",function(){return i.onFilterChange()}),s(46,"option",16),d(47,"Todos"),l(),s(48,"option",22),d(49,"Principiante"),l(),s(50,"option",23),d(51,"Intermedio"),l(),s(52,"option",24),d(53,"Avanzado"),l()()()(),s(54,"div",25)(55,"button",26),x("click",function(){return i.clearFilters()}),d(56," Limpiar filtros "),l()()(),w(57,X3,7,1,"div",27)(58,ek,2,0,"div",28)(59,dk,2,2,"div",29)(60,fk,10,3,"div",30),l(),w(61,wk,62,13,"div",31)(62,Ck,3,0,"button",32)(63,Ek,40,4,"div",31)),e&2&&(u(7),E(" Crea y administra rutinas de entrenamiento - Total: ",i.rutinas.length," "),u(6),g("ngIf",i.canEditRutina()),u(6),R("ngModel",i.searchTerm),u(4),R("ngModel",i.statusFilter),u(10),R("ngModel",i.tipoFilter),u(12),R("ngModel",i.nivelFilter),u(12),g("ngIf",i.error&&!i.showModal&&!i.showViewModal),u(),g("ngIf",i.loading),u(),g("ngIf",!i.loading),u(),g("ngIf",!i.loading&&i.filteredRutinas.length===0),u(),g("ngIf",i.showModal),u(),g("ngIf",!i.showModal&&!i.showViewModal&&i.canEditRutina()),u(),g("ngIf",i.showViewModal))},dependencies:[ve,le,je,Le,we,xn,Ae,Ie,Cn,wn,Re],styles:['.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.rutina-card[_ngcontent-%COMP%]{transition:all .3s ease}.rutina-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.btn-floating[_ngcontent-%COMP%]{box-shadow:0 4px 20px #ef444466;transition:all .3s ease}.btn-floating[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 25px #ef444499}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:10px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#dc2626;border-radius:10px}.modal-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#b91c1c}.tag[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_tagAppear .2s ease-out}@keyframes _ngcontent-%COMP%_tagAppear{0%{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}.custom-spinner[_ngcontent-%COMP%]{border:3px solid #f3f3f3;border-top:3px solid #dc2626;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #ef44441a;border-color:#dc2626}.rutinas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}@media (max-width: 640px){.rutinas-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.checkbox-seccion[_ngcontent-%COMP%]{transform:scale(1.2);transition:transform .2s ease}.checkbox-seccion[_ngcontent-%COMP%]:checked{transform:scale(1.3)}.empty-state[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.gradient-red[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc2626,#b91c1c)}.gradient-gray[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#4b5563)}.badge-status[_ngcontent-%COMP%]{position:relative;overflow:hidden}.badge-status[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.badge-status[_ngcontent-%COMP%]:hover:before{left:100%}.modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background-color:#0009}.action-btn[_ngcontent-%COMP%]{position:relative;overflow:hidden;transition:all .3s ease}.action-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background-color:#fff3;border-radius:50%;transform:translate(-50%,-50%);transition:width .6s,height .6s}.action-btn[_ngcontent-%COMP%]:hover:before{width:300px;height:300px}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:120px;background-color:#374151;color:#fff;text-align:center;border-radius:6px;padding:5px;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-60px;opacity:0;transition:opacity .3s;font-size:12px}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible;opacity:1}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{max-height:90vh}.grid-responsive[_ngcontent-%COMP%]{grid-template-columns:1fr}.text-responsive[_ngcontent-%COMP%]{font-size:.875rem}}@media (prefers-color-scheme: dark){.card-dark[_ngcontent-%COMP%]{background-color:#1f2937;border-color:#374151}.text-dark[_ngcontent-%COMP%]{color:#f9fafb}}@media print{.no-print[_ngcontent-%COMP%]{display:none!important}.print-only[_ngcontent-%COMP%]{display:block!important}}.focus-visible[_ngcontent-%COMP%]:focus{outline:2px solid #dc2626;outline-offset:2px}@media (prefers-contrast: high){.btn-primary[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]{border:2px solid #000}}']})};var Mk=(n,t)=>({"bg-green-100 text-green-800":n,"bg-red-100 text-red-800":t});function Ik(n,t){if(n&1){let e=P();s(0,"div",32)(1,"div",33),I(),s(2,"svg",34),b(3,"path",35),l(),T(),s(4,"div",36)(5,"p",37),d(6),l()(),s(7,"div",38)(8,"button",39),x("click",function(){C(e);let r=h();return S(r.error="")}),I(),s(9,"svg",40),b(10,"path",41),l()()()()()}if(n&2){let e=h();u(6),k(e.error)}}function Dk(n,t){n&1&&(s(0,"div",42)(1,"div",43),b(2,"div",44),s(3,"p",45),d(4,"Cargando tipos de secci\xF3n..."),l()()())}function Tk(n,t){if(n&1&&b(0,"i"),n&2){let e=h().$implicit;W(e.icono+" text-red-600 text-2xl")}}function kk(n,t){n&1&&(I(),s(0,"svg",68),b(1,"path",69),l())}function Pk(n,t){if(n&1){let e=P();s(0,"button",70),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.deleteTipo(r))}),I(),s(1,"svg",64),b(2,"path",71),l(),d(3," Desactivar "),l()}}function Ok(n,t){if(n&1){let e=P();s(0,"button",72),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.reactivateTipo(r))}),I(),s(1,"svg",64),b(2,"path",73),l(),d(3," Reactivar "),l()}}function Ak(n,t){if(n&1){let e=P();s(0,"div",49)(1,"div",50)(2,"div",51),w(3,Tk,1,2,"i",52)(4,kk,2,0,"svg",53),l(),s(5,"h3",54),d(6),l(),s(7,"p",55),d(8),l(),s(9,"div",56)(10,"span",57),I(),s(11,"svg",58),b(12,"circle",59),l(),d(13),l()(),T(),s(14,"p",60),d(15),l()(),s(16,"div",61)(17,"div",62)(18,"button",63),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.openEditModal(r))}),I(),s(19,"svg",64),b(20,"path",65),l(),d(21," Editar "),l(),w(22,Pk,4,0,"button",66)(23,Ok,4,0,"button",67),l()()()}if(n&2){let e=t.$implicit,i=h(2);u(3),g("ngIf",e.icono),u(),g("ngIf",!e.icono),u(2),k(e.descripcion),u(2),k(e.nombre),u(2),g("ngClass",si(9,Mk,e.status===1,e.status===0)),u(3),E(" ",i.getStatusText(e.status)," "),u(2),E(" Creado: ",i.formatDate(e.created_at)," "),u(7),g("ngIf",e.status===1),u(),g("ngIf",e.status===0)}}function Rk(n,t){if(n&1){let e=P();s(0,"button",81),x("click",function(){C(e);let r=h(3);return S(r.openCreateModal())}),d(1," Crear primer tipo "),l()}}function Fk(n,t){if(n&1){let e=P();s(0,"button",82),x("click",function(){C(e);let r=h(3);return S(r.clearFilters())}),d(1," Limpiar filtros "),l()}}function Nk(n,t){if(n&1&&(s(0,"div",74),I(),s(1,"svg",75),b(2,"path",69),l(),T(),s(3,"h3",76),d(4,"No hay tipos de secci\xF3n"),l(),s(5,"p",77),d(6),l(),s(7,"div",78),w(8,Rk,2,0,"button",79)(9,Fk,2,0,"button",80),l()()),n&2){let e=h(2);u(6),E(" ",e.tiposSecciones.length===0?"No se encontraron tipos de secci\xF3n.":"No se encontraron resultados con los filtros aplicados."," "),u(2),g("ngIf",e.tiposSecciones.length===0),u(),g("ngIf",e.tiposSecciones.length>0)}}function Vk(n,t){if(n&1&&(s(0,"div",46),w(1,Ak,24,12,"div",47)(2,Nk,10,3,"div",48),l()),n&2){let e=h();u(),g("ngForOf",e.filteredTiposSecciones)("ngForTrackBy",e.trackByTipoId),u(),g("ngIf",e.filteredTiposSecciones.length===0)}}function jk(n,t){if(n&1){let e=P();s(0,"div",116)(1,"div",117),b(2,"i"),s(3,"span",118),d(4),l(),s(5,"button",119),x("click",function(){C(e);let r=h(2);return S(r.clearIcon())}),I(),s(6,"svg",120),b(7,"path",41),l()()()()}if(n&2){let e=h(2);u(2),W(e.tipoForm.icono+" text-red-600 text-2xl mr-3"),u(2),k(e.tipoForm.icono)}}function Lk(n,t){if(n&1){let e=P();s(0,"button",121),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.selectIcon(r.clase))}),b(1,"i"),l()}if(n&2){let e=t.$implicit,i=h(2);W(i.getIconButtonClass(e.clase)),g("title",e.nombre),u(),W(e.clase)}}function Uk(n,t){if(n&1&&(s(0,"div",122)(1,"div",33),I(),s(2,"svg",34),b(3,"path",35),l(),T(),s(4,"div",36)(5,"p",37),d(6),l()()()()),n&2){let e=h(2);u(6),k(e.error)}}function Bk(n,t){if(n&1){let e=P();s(0,"div",83)(1,"div",84)(2,"div",85),x("click",function(){C(e);let r=h();return S(r.closeModal())}),l(),s(3,"span",86),d(4,"\u200B"),l(),s(5,"div",87)(6,"div",88)(7,"div",89)(8,"div",90),I(),s(9,"svg",91),b(10,"path",69),l()(),T(),s(11,"div",92)(12,"h3",93),d(13),l(),s(14,"div",94)(15,"p",95),d(16),l()()()()(),s(17,"div",96)(18,"form",97)(19,"div")(20,"label",98),d(21," Nombre (Identificador) "),s(22,"span",99),d(23,"*"),l()(),s(24,"input",100),F("ngModelChange",function(r){C(e);let o=h();return N(o.tipoForm.nombre,r)||(o.tipoForm.nombre=r),S(r)}),l(),s(25,"p",101),d(26," Se convertir\xE1 autom\xE1ticamente a formato snake_case (ej: warm_up) "),l()(),s(27,"div")(28,"label",102),d(29," Descripci\xF3n "),s(30,"span",99),d(31,"*"),l()(),s(32,"input",103),F("ngModelChange",function(r){C(e);let o=h();return N(o.tipoForm.descripcion,r)||(o.tipoForm.descripcion=r),S(r)}),l()(),s(33,"div")(34,"label",104),d(35," Icono "),l(),w(36,jk,8,3,"div",105),s(37,"div",106),w(38,Lk,2,5,"button",107),l(),s(39,"p",101),d(40," Selecciona un icono de la lista o deja vac\xEDo para usar el icono por defecto "),l()(),s(41,"div")(42,"label",108),d(43," Estado "),l(),s(44,"select",109),F("ngModelChange",function(r){C(e);let o=h();return N(o.tipoForm.status,r)||(o.tipoForm.status=r),S(r)}),s(45,"option",110),d(46,"Activo"),l(),s(47,"option",111),d(48,"Inactivo"),l()()()(),w(49,Uk,7,1,"div",112),l(),s(50,"div",113)(51,"button",114),x("click",function(){C(e);let r=h();return S(r.saveTipo())}),d(52),l(),s(53,"button",115),x("click",function(){C(e);let r=h();return S(r.closeModal())}),d(54," Cancelar "),l()()()()()}if(n&2){let e=h();u(13),E(" ",e.modalMode==="create"?"Crear Nuevo Tipo de Secci\xF3n":"Editar Tipo de Secci\xF3n"," "),u(3),E(" ",e.modalMode==="create"?"Complete los datos para crear un nuevo tipo de secci\xF3n.":"Modifique los datos del tipo de secci\xF3n seleccionado."," "),u(8),R("ngModel",e.tipoForm.nombre),u(8),R("ngModel",e.tipoForm.descripcion),u(4),g("ngIf",e.tipoForm.icono),u(2),g("ngForOf",e.iconosDisponibles),u(6),R("ngModel",e.tipoForm.status),u(5),g("ngIf",e.error),u(2),g("disabled",!e.isFormValid()),u(),E(" ",e.modalMode==="create"?"Crear Tipo":"Guardar Cambios"," ")}}var Wd=class n{constructor(t,e){this.supabaseService=t;this.authService=e}tiposSecciones=[];filteredTiposSecciones=[];loading=!1;error="";showModal=!1;modalMode="create";selectedTipo=null;tipoForm={nombre:"",descripcion:"",icono:"",status:1};searchTerm="";statusFilter="active";iconosDisponibles=[{clase:"fas fa-fire",nombre:"Fuego - Intensidad"},{clase:"fas fa-heartbeat",nombre:"Cardio"},{clase:"fas fa-dumbbell",nombre:"Pesas"},{clase:"fas fa-circle-dot",nombre:"Core"},{clase:"fas fa-plus-circle",nombre:"Extra"},{clase:"fas fa-running",nombre:"Corriendo"},{clase:"fas fa-hand-paper",nombre:"Flexibilidad"},{clase:"fas fa-spa",nombre:"Recuperaci\xF3n"},{clase:"fas fa-bolt",nombre:"Potencia"},{clase:"fas fa-star",nombre:"Destacado"},{clase:"fas fa-shield-alt",nombre:"Resistencia"},{clase:"fas fa-stopwatch",nombre:"Tiempo"},{clase:"fas fa-trophy",nombre:"Competici\xF3n"},{clase:"fas fa-chart-line",nombre:"Progreso"},{clase:"fas fa-weight-hanging",nombre:"Peso"},{clase:"fas fa-bicycle",nombre:"Ciclismo"},{clase:"fas fa-swimming-pool",nombre:"Nataci\xF3n"},{clase:"fas fa-hiking",nombre:"Funcional"},{clase:"fas fa-mountain",nombre:"Resistencia"},{clase:"fas fa-thermometer-half",nombre:"Calentamiento"}];ngOnInit(){return v(this,null,function*(){if(!this.authService.isAdmin()){this.error="No tienes permisos para acceder a esta secci\xF3n";return}yield this.loadTiposSecciones()})}loadTiposSecciones(){return v(this,null,function*(){this.loading=!0,this.error="";try{console.log("Cargando tipos de secci\xF3n...");let t=yield this.supabaseService.getData("tipos_seccion");this.tiposSecciones=t||[],this.filteredTiposSecciones=[...this.tiposSecciones],this.applyFilters(),console.log("Tipos de secci\xF3n cargados:",this.tiposSecciones.length)}catch(t){console.error("Error cargando tipos de secci\xF3n:",t),this.error="Error al cargar los tipos de secci\xF3n. Verifique la conexi\xF3n a la base de datos."}finally{this.loading=!1}})}applyFilters(){let t=[...this.tiposSecciones];if(this.statusFilter==="active"?t=t.filter(e=>e.status===1):this.statusFilter==="inactive"&&(t=t.filter(e=>e.status===0)),this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.nombre.toLowerCase().includes(e)||i.descripcion.toLowerCase().includes(e))}this.filteredTiposSecciones=t}openCreateModal(){this.modalMode="create",this.tipoForm={nombre:"",descripcion:"",icono:"",status:1},this.error="",this.showModal=!0}openEditModal(t){this.modalMode="edit",this.selectedTipo=t,this.tipoForm=A({},t),this.error="",this.showModal=!0}closeModal(){this.showModal=!1,this.selectedTipo=null,this.error=""}saveTipo(){return v(this,null,function*(){try{if(this.error="",!this.tipoForm.nombre?.trim()){this.error="El nombre es requerido";return}if(!this.tipoForm.descripcion?.trim()){this.error="La descripci\xF3n es requerida";return}if(this.tipoForm.nombre.trim().length>50){this.error="El nombre no puede exceder 50 caracteres";return}if(this.tipoForm.descripcion.trim().length>100){this.error="La descripci\xF3n no puede exceder 100 caracteres";return}let t=this.tipoForm.nombre;if(this.tipoForm.nombre=this.tipoForm.nombre.toLowerCase().trim().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,""),!this.tipoForm.nombre){this.error="El nombre debe contener al menos una letra o n\xFAmero v\xE1lido";return}if(console.log(`Nombre convertido de "${t}" a "${this.tipoForm.nombre}"`),this.tiposSecciones.some(i=>i.nombre.toLowerCase()===this.tipoForm.nombre.toLowerCase()&&(this.modalMode==="create"||i.id!==this.selectedTipo?.id))){this.error="Ya existe un tipo de secci\xF3n con ese nombre";return}this.tipoForm.icono?.trim()||(this.tipoForm.icono=""),this.modalMode==="create"?(console.log("Creando tipo de secci\xF3n:",this.tipoForm),yield this.supabaseService.insertData("tipos_seccion",this.tipoForm),console.log("Tipo de secci\xF3n creado exitosamente")):(console.log("Actualizando tipo de secci\xF3n:",this.tipoForm),yield this.supabaseService.updateData("tipos_seccion",this.selectedTipo.id.toString(),this.tipoForm),console.log("Tipo de secci\xF3n actualizado exitosamente")),yield this.loadTiposSecciones(),this.closeModal()}catch(t){console.error("Error guardando tipo de secci\xF3n:",t),this.error="Error al guardar el tipo de secci\xF3n. Intente nuevamente."}})}deleteTipo(t){return v(this,null,function*(){let e=`\xBFEst\xE1 seguro de desactivar el tipo de secci\xF3n "${t.descripcion}"?`;if(confirm(e))try{console.log("Desactivando tipo de secci\xF3n:",t.nombre),yield this.supabaseService.updateData("tipos_seccion",t.id.toString(),{status:0}),yield this.loadTiposSecciones(),console.log("Tipo de secci\xF3n desactivado exitosamente")}catch(i){console.error("Error desactivando tipo de secci\xF3n:",i),this.error="Error al desactivar el tipo de secci\xF3n",setTimeout(()=>this.error="",5e3)}})}reactivateTipo(t){return v(this,null,function*(){let e=`\xBFEst\xE1 seguro de reactivar el tipo de secci\xF3n "${t.descripcion}"?`;if(confirm(e))try{console.log("Reactivando tipo de secci\xF3n:",t.nombre),yield this.supabaseService.updateData("tipos_seccion",t.id.toString(),{status:1}),yield this.loadTiposSecciones(),console.log("Tipo de secci\xF3n reactivado exitosamente")}catch(i){console.error("Error reactivando tipo de secci\xF3n:",i),this.error="Error al reactivar el tipo de secci\xF3n",setTimeout(()=>this.error="",5e3)}})}getStatusText(t){return t===1?"Activo":"Inactivo"}getStatusColor(t){return t===1?"green":"red"}formatDate(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formateando fecha:",e),"Fecha inv\xE1lida"}}onSearch(){this.applyFilters()}onFilterChange(){this.applyFilters()}clearFilters(){this.searchTerm="",this.statusFilter="active",this.applyFilters()}refreshTipos(){return v(this,null,function*(){console.log("Refrescando tipos de secci\xF3n"),yield this.loadTiposSecciones()})}selectIcon(t){this.tipoForm.icono=t,console.log("Icono seleccionado:",t)}trackByTipoId(t,e){return e.id||t}isIconSelected(t){return this.tipoForm.icono===t}clearIcon(){this.tipoForm.icono=""}isFormValid(){return!!(this.tipoForm.nombre?.trim()&&this.tipoForm.descripcion?.trim())}getIconButtonClass(t){let e="p-2 rounded-md border transition-colors duration-150 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500";return this.isIconSelected(t)?`${e} border-red-500 bg-red-50`:`${e} border-gray-200`}static \u0275fac=function(e){return new(e||n)(O(me),O(re))};static \u0275cmp=ie({type:n,selectors:[["app-tipos-seccion"]],standalone:!1,decls:44,vars:7,consts:[[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"flex","space-x-2"],["title","Refrescar lista",1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-red-600","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"bg-white","rounded-lg","shadow","mb-6","p-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"md:col-span-2"],["for","search",1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"relative"],["id","search","type","text","placeholder","Buscar por nombre o descripci\xF3n...",1,"block","w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","leading-5","bg-white","placeholder-gray-500","focus:outline-none","focus:placeholder-gray-400","focus:ring-1","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","input","ngModel"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["for","statusFilter",1,"block","text-sm","font-medium","text-gray-700","mb-2"],["id","statusFilter",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","change","ngModel"],["value","all"],["value","active"],["value","inactive"],[1,"mt-4","flex","justify-end"],[1,"text-sm","text-red-600","hover:text-red-800",3,"click"],["class","bg-red-50 border border-red-200 rounded-md p-4 mb-6",4,"ngIf"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",4,"ngIf"],["class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-6"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"ml-auto","pl-3"],[1,"text-red-400","hover:text-red-600",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex","justify-center","items-center","h-64"],[1,"text-center"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-red-600","mx-auto"],[1,"mt-4","text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],["class","bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 border border-gray-200",4,"ngFor","ngForOf","ngForTrackBy"],["class","col-span-full text-center py-12",4,"ngIf"],[1,"bg-white","rounded-lg","shadow-md","hover:shadow-lg","transition-shadow","duration-200","border","border-gray-200"],[1,"p-6","text-center"],[1,"mx-auto","h-16","w-16","bg-red-100","rounded-full","flex","items-center","justify-center","mb-4"],[3,"class",4,"ngIf"],["class","h-8 w-8 text-red-600","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-sm","text-gray-500","mb-3"],[1,"mb-4"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],["fill","currentColor","viewBox","0 0 8 8",1,"w-2","h-2","mr-1"],["cx","4","cy","4","r","3"],[1,"text-xs","text-gray-400","mb-4"],[1,"px-6","pb-6"],[1,"flex","justify-center","space-x-2"],["title","Editar tipo",1,"flex-1","inline-flex","items-center","justify-center","px-3","py-2","border","border-gray-300","shadow-sm","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["class","flex-1 inline-flex items-center justify-center px-3 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-red-50 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500","title","Desactivar",3,"click",4,"ngIf"],["class","flex-1 inline-flex items-center justify-center px-3 py-2 border border-green-300 shadow-sm text-sm font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500","title","Reactivar",3,"click",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-8","w-8","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 00-2 2v2a2 2 0 002 2m0 0h14"],["title","Desactivar",1,"flex-1","inline-flex","items-center","justify-center","px-3","py-2","border","border-red-300","shadow-sm","text-sm","font-medium","rounded-md","text-red-700","bg-red-50","hover:bg-red-100","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636"],["title","Reactivar",1,"flex-1","inline-flex","items-center","justify-center","px-3","py-2","border","border-green-300","shadow-sm","text-sm","font-medium","rounded-md","text-green-700","bg-green-50","hover:bg-green-100","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-green-500",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"col-span-full","text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],["class","inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",3,"click",4,"ngIf"],["class","inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-red-600","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","shadow-sm","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-2xl","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-red-600"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","w-full"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"mt-2"],[1,"text-sm","text-gray-500"],[1,"bg-white","px-4","pb-4","sm:px-6"],[1,"space-y-4"],["for","nombre",1,"block","text-sm","font-medium","text-gray-700"],[1,"text-red-500"],["id","nombre","type","text","name","nombre","required","","placeholder","Ej: warm_up, strength, cardio",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-red-500","focus:border-red-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"mt-1","text-xs","text-gray-500"],["for","descripcion",1,"block","text-sm","font-medium","text-gray-700"],["id","descripcion","type","text","name","descripcion","required","","placeholder","Ej: Calentamiento, Entrenamiento de Fuerza, Cardiovascular",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-red-500","focus:border-red-500","sm:text-sm",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["class","mb-3 p-3 bg-gray-50 rounded-md",4,"ngIf"],[1,"grid","grid-cols-5","sm:grid-cols-8","gap-2","max-h-48","overflow-y-auto","border","border-gray-200","rounded-md","p-3"],["type","button",3,"class","title","click",4,"ngFor","ngForOf"],["for","status",1,"block","text-sm","font-medium","text-gray-700"],["id","status","name","status",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-red-500","focus:border-red-500","sm:text-sm",3,"ngModelChange","ngModel"],["value","1"],["value","0"],["class","mt-4 bg-red-50 border border-red-200 rounded-md p-3",4,"ngIf"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-red-600","text-base","font-medium","text-white","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","sm:ml-3","sm:w-auto","sm:text-sm","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm",3,"click"],[1,"mb-3","p-3","bg-gray-50","rounded-md"],[1,"flex","items-center"],[1,"text-sm","text-gray-700"],["type","button","title","Limpiar icono",1,"ml-auto","text-red-600","hover:text-red-800",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["type","button",3,"click","title"],[1,"mt-4","bg-red-50","border","border-red-200","rounded-md","p-3"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),d(5,"Gesti\xF3n de Tipos de Secci\xF3n"),l(),s(6,"p",4),d(7),l()(),s(8,"div",5)(9,"button",6),x("click",function(){return i.refreshTipos()}),I(),s(10,"svg",7),b(11,"path",8),l(),d(12," Refrescar "),l(),T(),s(13,"button",9),x("click",function(){return i.openCreateModal()}),I(),s(14,"svg",10),b(15,"path",11),l(),d(16," Nuevo Tipo "),l()()()(),T(),s(17,"div",12)(18,"div",13)(19,"div",14)(20,"label",15),d(21," Buscar "),l(),s(22,"div",16)(23,"input",17),F("ngModelChange",function(o){return N(i.searchTerm,o)||(i.searchTerm=o),o}),x("input",function(){return i.onSearch()}),l(),s(24,"div",18),I(),s(25,"svg",19),b(26,"path",20),l()()()(),T(),s(27,"div")(28,"label",21),d(29," Estado "),l(),s(30,"select",22),F("ngModelChange",function(o){return N(i.statusFilter,o)||(i.statusFilter=o),o}),x("change",function(){return i.onFilterChange()}),s(31,"option",23),d(32,"Todos"),l(),s(33,"option",24),d(34,"Activos"),l(),s(35,"option",25),d(36,"Inactivos"),l()()()(),s(37,"div",26)(38,"button",27),x("click",function(){return i.clearFilters()}),d(39," Limpiar filtros "),l()()(),w(40,Ik,11,1,"div",28)(41,Dk,5,0,"div",29)(42,Vk,3,3,"div",30),l(),w(43,Bk,55,10,"div",31)),e&2&&(u(7),E(" Administra los tipos de secci\xF3n para entrenamientos - Total: ",i.tiposSecciones.length," "),u(16),R("ngModel",i.searchTerm),u(7),R("ngModel",i.statusFilter),u(10),g("ngIf",i.error),u(),g("ngIf",i.loading),u(),g("ngIf",!i.loading),u(),g("ngIf",i.showModal))},dependencies:[He,ve,le,Je,je,Le,we,Ae,Ie,Ke,Sn,Re,ut],styles:['.tipo-card[_ngcontent-%COMP%]{transition:all .3s ease}.tipo-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.icon-grid[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#e5e7eb #f9fafb}.icon-grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.icon-grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f9fafb;border-radius:3px}.icon-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#e5e7eb;border-radius:3px}.icon-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#d1d5db}.icon-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;transition:all .2s ease}.icon-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.icon-button.selected[_ngcontent-%COMP%]{box-shadow:0 0 0 2px #dc2626}.card-enter[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cardEnter .3s ease-out}@keyframes _ngcontent-%COMP%_cardEnter{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;font-weight:500;font-size:.75rem;padding:.25rem .5rem;border-radius:9999px}.status-active[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.status-inactive[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}.action-button[_ngcontent-%COMP%]{transition:all .2s ease}.action-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}@media (max-width: 768px){.icon-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.icon-button[_ngcontent-%COMP%]{width:36px;height:36px}}.focus-ring[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #dc2626}.icon-preview[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem;background-color:#f9fafb;border-radius:.375rem;margin-bottom:.75rem}.icon-preview[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.75rem;font-size:1.5rem;color:#dc2626}.error-message[_ngcontent-%COMP%]{background-color:#fef2f2;border:1px solid #fecaca;color:#991b1b;padding:.75rem;border-radius:.375rem;font-size:.875rem;margin-top:1rem}.tooltip[_ngcontent-%COMP%]{position:relative}.tooltip[_ngcontent-%COMP%]:hover:after{content:attr(title);position:absolute;bottom:100%;left:50%;transform:translate(-50%);background-color:#1f2937;color:#fff;padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;white-space:nowrap;z-index:10;margin-bottom:.25rem}.button-loading[_ngcontent-%COMP%]{opacity:.7;cursor:not-allowed}.button-loading[_ngcontent-%COMP%]:before{content:"";width:1rem;height:1rem;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-right:.5rem;display:inline-block}']})};var $k=(n,t,e,i,r)=>({"bg-green-100 text-green-800":n,"bg-blue-100 text-blue-800":t,"bg-yellow-100 text-yellow-800":e,"bg-red-100 text-red-800":i,"bg-gray-100 text-gray-600":r}),qk=(n,t,e,i)=>({"bg-gray-100 text-gray-800":n,"bg-yellow-100 text-yellow-800":t,"bg-green-100 text-green-800":e,"bg-red-100 text-red-800":i});function Hk(n,t){if(n&1){let e=P();s(0,"button",34),x("click",function(){C(e);let r=h();return S(r.openAsignarModal())}),I(),s(1,"svg",35),b(2,"path",36),l(),d(3," Asignar Rutina "),l()}}function zk(n,t){if(n&1&&(s(0,"option",37),d(1),l()),n&2){let e=t.$implicit;g("value",e.nombre),u(),E(" ",e.nombre," ")}}function Gk(n,t){if(n&1&&(s(0,"div",38)(1,"div",39),I(),s(2,"svg",40),b(3,"path",41),l(),T(),s(4,"div",42)(5,"p",43),d(6),l()()()()),n&2){let e=h();u(6),k(e.error)}}function Wk(n,t){n&1&&(s(0,"div",44),b(1,"div",45),l())}function Yk(n,t){if(n&1&&(s(0,"span",78),d(1),l()),n&2){let e=h(2).$implicit,i=h(2);u(),E(" ",i.getDiasRestantes(e.fecha_fin_programada)," d\xEDas restantes ")}}function Zk(n,t){n&1&&(s(0,"span",79),d(1," Vence hoy "),l())}function Qk(n,t){if(n&1&&(s(0,"div",75),w(1,Yk,2,1,"span",76)(2,Zk,2,0,"span",77),l()),n&2){let e=h().$implicit,i=h(2);u(),g("ngIf",i.getDiasRestantes(e.fecha_fin_programada)>0),u(),g("ngIf",i.getDiasRestantes(e.fecha_fin_programada)===0)}}function Kk(n,t){n&1&&(s(0,"div",80),d(1," Vencida "),l())}function Jk(n,t){if(n&1){let e=P();s(0,"button",81),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.cancelarAsignacion(r.asignacion_id))}),I(),s(1,"svg",73),b(2,"path",82),l()()}}function Xk(n,t){if(n&1){let e=P();s(0,"tr",56)(1,"td",57)(2,"div")(3,"div",58),d(4),l(),s(5,"div",59),d(6),l()()(),s(7,"td",57)(8,"div",60),I(),s(9,"svg",61),b(10,"path",62),l(),T(),s(11,"span",58),d(12),l(),s(13,"span",63),d(14,"usuarios"),l()()(),s(15,"td",64)(16,"div")(17,"div"),d(18),l(),s(19,"div",65),d(20),l(),w(21,Qk,3,2,"div",66)(22,Kk,2,0,"div",67),l()(),s(23,"td",57)(24,"span",68),b(25,"i"),d(26),l()(),s(27,"td",57)(28,"div",69),d(29),l(),s(30,"div",59),d(31),l()(),s(32,"td",70)(33,"div",71)(34,"button",72),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.openVerModal(r))}),I(),s(35,"svg",73),b(36,"path",10)(37,"path",11),l()(),w(38,Jk,3,0,"button",74),l()()()}if(n&2){let e=t.$implicit,i=h(2);X("opacity-50",!e.es_activa)("bg-gray-50",!e.es_activa),u(3),X("text-gray-500",!e.es_activa),u(),E(" ",e.rutina_nombre," "),u(2),k(e.rutina_descripcion),u(5),X("text-gray-500",!e.es_activa),u(),E(" ",e.usuarios_count," "),u(4),X("text-gray-500",!e.es_activa),u(2),k(i.formatDate(e.fecha_inicio_programada)),u(2),k(i.formatDate(e.fecha_fin_programada)),u(),g("ngIf",e.es_activa),u(),g("ngIf",!e.es_activa&&i.isVencida(e.fecha_fin_programada)),u(2),g("ngClass",oo(30,$k,e.estado_asignacion==="activa"&&e.es_activa,e.estado_asignacion==="completada",e.estado_asignacion==="pausada",e.estado_asignacion==="cancelada"||e.estado_asignacion==="expirada",!e.es_activa)),u(),W(i.getEstadoIcon(e.estado_asignacion)+" mr-1"),u(),E(" ",!e.es_activa&&e.estado_asignacion==="activa"?"expirada":e.estado_asignacion," "),u(2),X("text-gray-500",!e.es_activa),u(),E(" ",e.asignado_por_nombre," "),u(2),k(i.formatDate(e.fecha_asignacion)),u(3),X("text-gray-400",!e.es_activa)("hover:text-gray-600",!e.es_activa),u(4),g("ngIf",e.es_activa&&e.estado_asignacion==="activa"&&i.canAssignRoutines())}}function e5(n,t){n&1&&(gt(0),d(1," No se han creado asignaciones a\xFAn. "),ht())}function t5(n,t){n&1&&d(0," No se encontraron asignaciones con los filtros aplicados. ")}function n5(n,t){if(n&1){let e=P();s(0,"button",92),x("click",function(){C(e);let r=h(3);return S(r.openAsignarModal())}),d(1," Crear primera asignaci\xF3n "),l()}}function i5(n,t){if(n&1){let e=P();s(0,"button",93),x("click",function(){C(e);let r=h(3);return S(r.clearFilters())}),d(1," Limpiar filtros "),l()}}function r5(n,t){if(n&1&&(s(0,"div",83),I(),s(1,"svg",84),b(2,"path",85),l(),T(),s(3,"h3",86),d(4,"No hay asignaciones"),l(),s(5,"p",87),w(6,e5,2,0,"ng-container",88)(7,t5,1,0,"ng-template",null,0,Nn),l(),s(9,"div",89),w(10,n5,2,0,"button",90)(11,i5,2,0,"button",91),l()()),n&2){let e=Rn(8),i=h(2);u(6),g("ngIf",i.asignaciones.length===0)("ngIfElse",e),u(4),g("ngIf",i.asignaciones.length===0&&i.canAssignRoutines()),u(),g("ngIf",i.asignaciones.length>0)}}function o5(n,t){if(n&1&&(s(0,"div",46)(1,"div",47)(2,"h3",48),d(3),l()(),s(4,"div",49)(5,"table",50)(6,"thead",51)(7,"tr")(8,"th",52),d(9," Rutina "),l(),s(10,"th",52),d(11," Usuarios "),l(),s(12,"th",52),d(13," Fechas / Duraci\xF3n "),l(),s(14,"th",52),d(15," Estado "),l(),s(16,"th",52),d(17," Asignado por "),l(),s(18,"th",52),d(19," Acciones "),l()()(),s(20,"tbody",53),w(21,Xk,39,36,"tr",54),l()(),w(22,r5,12,4,"div",55),l()()),n&2){let e=h();u(3),E(" Asignaciones Realizadas (",e.filteredAsignaciones.length,") "),u(18),g("ngForOf",e.filteredAsignaciones)("ngForTrackBy",e.trackByAsignacionId),u(),g("ngIf",e.filteredAsignaciones.length===0)}}function a5(n,t){if(n&1&&(s(0,"option",37),d(1),l()),n&2){let e=t.$implicit;g("value",e.id),u(),be(" ",e.nombre," - ",e.nivel," ")}}function s5(n,t){if(n&1&&(s(0,"div",130)(1,"div",60),I(),s(2,"svg",131),b(3,"path",132),l(),T(),s(4,"div",133)(5,"span",134),d(6,"Fecha de finalizaci\xF3n:"),l(),s(7,"span",135),d(8),l()()()()),n&2){let e=h(2);u(8),k(e.formatDate(e.calcularFechaFin(e.asignacionForm.fecha_inicio)))}}function l5(n,t){if(n&1){let e=P();s(0,"label",136)(1,"input",137),x("change",function(){let r=C(e).$implicit,o=h(2);return S(o.toggleUsuario(r.id))}),l(),s(2,"div",138)(3,"div",58),d(4),l(),s(5,"div",139),d(6),l()()()}if(n&2){let e=t.$implicit,i=h(2);X("bg-red-50",i.isUsuarioSelected(e.id)),u(),g("checked",i.isUsuarioSelected(e.id)),u(3),k(e.full_name),u(2),E("@",e.username,"")}}function c5(n,t){n&1&&(s(0,"span"),d(1," usuario seleccionado"),l())}function d5(n,t){n&1&&d(0," usuarios seleccionados")}function u5(n,t){if(n&1&&(s(0,"div",140)(1,"div",39),I(),s(2,"svg",40),b(3,"path",41),l(),T(),s(4,"div",42)(5,"p",43),d(6),l()()()()),n&2){let e=h(2);u(6),k(e.error)}}function p5(n,t){n&1&&(I(),s(0,"svg",141),b(1,"path",12),l())}function f5(n,t){if(n&1){let e=P();s(0,"div",94)(1,"div",95)(2,"div",96),x("click",function(){C(e);let r=h();return S(r.closeAsignarModal())}),l(),s(3,"span",97),d(4,"\u200B"),l(),s(5,"div",98)(6,"div",99)(7,"div",100)(8,"div",101),I(),s(9,"svg",102),b(10,"path",36),l()(),T(),s(11,"div",103)(12,"h3",48),d(13," Asignar Rutina a Usuarios "),l(),s(14,"div",104)(15,"p",59),d(16," Selecciona una rutina y los usuarios. La asignaci\xF3n durar\xE1 autom\xE1ticamente 1 mes. "),l()()()()(),s(17,"div",105)(18,"form",106)(19,"div")(20,"label",17),d(21," Rutina "),s(22,"span",107),d(23,"*"),l()(),s(24,"select",108),F("ngModelChange",function(r){C(e);let o=h();return N(o.asignacionForm.id_rutina,r)||(o.asignacionForm.id_rutina=r),S(r)}),s(25,"option",109),d(26,"Selecciona una rutina"),l(),w(27,a5,2,3,"option",26),l()(),s(28,"div",110)(29,"div")(30,"label",17),d(31," Fecha de Inicio "),s(32,"span",107),d(33,"*"),l()(),s(34,"input",111),F("ngModelChange",function(r){C(e);let o=h();return N(o.asignacionForm.fecha_inicio,r)||(o.asignacionForm.fecha_inicio=r),S(r)}),l()(),s(35,"div")(36,"label",17),d(37," Duraci\xF3n "),l(),s(38,"div",112),I(),s(39,"svg",113),b(40,"path",114),l(),T(),s(41,"span",115),d(42,"1 mes (autom\xE1tico)"),l()()()(),w(43,s5,9,1,"div",116),s(44,"div")(45,"label",17),d(46," Notas (Opcional) "),l(),s(47,"textarea",117),F("ngModelChange",function(r){C(e);let o=h();return N(o.asignacionForm.notas,r)||(o.asignacionForm.notas=r),S(r)}),l()(),s(48,"div")(49,"div",118)(50,"label",119),d(51," Usuarios "),s(52,"span",107),d(53,"*"),l()(),s(54,"div",7)(55,"button",120),x("click",function(){C(e);let r=h();return S(r.selectAllUsuarios())}),d(56," Seleccionar todos "),l(),s(57,"button",121),x("click",function(){C(e);let r=h();return S(r.clearAllUsuarios())}),d(58," Limpiar selecci\xF3n "),l()()(),s(59,"div",122)(60,"div",123),w(61,l5,7,5,"label",124),l()(),s(62,"div",6)(63,"span"),d(64),l(),w(65,c5,2,0,"span",88)(66,d5,1,0,"ng-template",null,1,Nn),l()()(),w(68,u5,7,1,"div",125),l(),s(69,"div",126)(70,"button",127),x("click",function(){C(e);let r=h();return S(r.asignarRutina())}),w(71,p5,2,0,"svg",128),d(72," Asignar por 1 mes "),l(),s(73,"button",129),x("click",function(){C(e);let r=h();return S(r.closeAsignarModal())}),d(74," Cancelar "),l()()()()()}if(n&2){let e=Rn(67),i=h();u(24),R("ngModel",i.asignacionForm.id_rutina),u(3),g("ngForOf",i.rutinas)("ngForTrackBy",i.trackByRutinaId),u(7),R("ngModel",i.asignacionForm.fecha_inicio),u(9),g("ngIf",i.asignacionForm.fecha_inicio),u(4),R("ngModel",i.asignacionForm.notas),u(14),g("ngForOf",i.usuarios)("ngForTrackBy",i.trackByUserId),u(3),k(i.asignacionForm.usuarios_seleccionados.length),u(),g("ngIf",i.asignacionForm.usuarios_seleccionados.length===1)("ngIfElse",e),u(3),g("ngIf",i.error),u(2),g("disabled",i.loading||!i.asignacionForm.id_rutina||i.asignacionForm.usuarios_seleccionados.length===0),u(),g("ngIf",i.loading),u(2),g("disabled",i.loading)}}function m5(n,t){n&1&&(s(0,"span",156),d(1," (Asignaci\xF3n vencida) "),l())}function g5(n,t){if(n&1&&(s(0,"span",78),d(1),l()),n&2){let e=h(3);u(),E(" ",e.getDiasRestantes(e.selectedAsignacion.fecha_fin_programada)," d\xEDas restantes ")}}function h5(n,t){n&1&&(s(0,"span",79),d(1," Vence hoy "),l())}function v5(n,t){n&1&&(s(0,"span",158),d(1," Asignaci\xF3n vencida "),l())}function _5(n,t){if(n&1&&(s(0,"div",75),w(1,g5,2,1,"span",76)(2,h5,2,0,"span",77)(3,v5,2,0,"span",157),l()),n&2){let e=h(2);u(),g("ngIf",e.selectedAsignacion.es_activa&&e.getDiasRestantes(e.selectedAsignacion.fecha_fin_programada)>0),u(),g("ngIf",e.selectedAsignacion.es_activa&&e.getDiasRestantes(e.selectedAsignacion.fecha_fin_programada)===0),u(),g("ngIf",!e.selectedAsignacion.es_activa)}}function b5(n,t){if(n&1){let e=P();s(0,"div",104)(1,"input",171),x("input",function(r){C(e);let o=h().$implicit,a=h(2);return S(a.actualizarProgreso(o.seguimiento_id,r))}),l()()}if(n&2){let e=h().$implicit;u(),g("value",e.progreso)}}function y5(n,t){n&1&&(s(0,"div",172),d(1," Progreso final "),l())}function x5(n,t){if(n&1&&(s(0,"div")(1,"strong"),d(2,"Inicio:"),l(),d(3),l()),n&2){let e=h().$implicit,i=h(2);u(3),E(" ",i.formatDate(e.fecha_inicio_real)," ")}}function w5(n,t){if(n&1&&(s(0,"div")(1,"strong"),d(2,"Fin:"),l(),d(3),l()),n&2){let e=h().$implicit,i=h(2);u(3),E(" ",i.formatDate(e.fecha_fin_real)," ")}}function C5(n,t){n&1&&(s(0,"div",65),d(1," Sin fechas registradas "),l())}function S5(n,t){if(n&1){let e=P();s(0,"button",173),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.editarNotasIndividuales(r))}),I(),s(1,"svg",73),b(2,"path",174),l()()}}function E5(n,t){n&1&&(s(0,"span",175),d(1," Solo lectura "),l())}function M5(n,t){if(n&1&&(s(0,"tr",56)(1,"td",57)(2,"div",60)(3,"div",159)(4,"span",160),d(5),l()(),s(6,"div")(7,"div",58),d(8),l(),s(9,"div",59),d(10),l()()()(),s(11,"td",57)(12,"div",60)(13,"div",161),b(14,"div",162),l(),s(15,"span",58),d(16),l()(),w(17,b5,2,1,"div",163)(18,y5,2,0,"div",164),l(),s(19,"td",57)(20,"span",68),d(21),l()(),s(22,"td",64),w(23,x5,4,1,"div",165)(24,w5,4,1,"div",165)(25,C5,2,0,"div",166),l(),s(26,"td",167)(27,"div",168),d(28),l()(),s(29,"td",70)(30,"div",71),w(31,S5,3,0,"button",169)(32,E5,2,0,"span",170),l()()()),n&2){let e=t.$implicit,i=h(2);u(5),E(" ",(e.full_name||"U").charAt(0).toUpperCase()," "),u(3),k(e.full_name),u(2),E("@",e.username,""),u(4),At("width",e.progreso,"%"),u(2),E("",e.progreso,"%"),u(),g("ngIf",i.canAssignRoutines()&&(i.selectedAsignacion==null?null:i.selectedAsignacion.es_activa)),u(),g("ngIf",!(i.selectedAsignacion!=null&&i.selectedAsignacion.es_activa)),u(2),g("ngClass",Fn(16,qk,e.estado_individual==="pendiente",e.estado_individual==="en_progreso",e.estado_individual==="completada",e.estado_individual==="cancelada")),u(),E(" ",e.estado_individual," "),u(2),g("ngIf",e.fecha_inicio_real),u(),g("ngIf",e.fecha_fin_real),u(),g("ngIf",!e.fecha_inicio_real&&!e.fecha_fin_real),u(3),E(" ",e.notas_individuales||"-"," "),u(3),g("ngIf",i.canAssignRoutines()&&(i.selectedAsignacion==null?null:i.selectedAsignacion.es_activa)),u(),g("ngIf",!(i.selectedAsignacion!=null&&i.selectedAsignacion.es_activa))}}function I5(n,t){n&1&&(s(0,"div",176),I(),s(1,"svg",177),b(2,"path",178),l(),T(),s(3,"h3",86),d(4,"Sin seguimiento disponible"),l(),s(5,"p",87),d(6," No se encontraron datos de seguimiento para esta asignaci\xF3n. "),l()())}function D5(n,t){if(n&1&&(s(0,"div",179)(1,"h4",180),d(2,"Resumen del Progreso"),l(),s(3,"div",181)(4,"div")(5,"div",182),d(6),l(),s(7,"div",139),d(8,"Pendientes"),l()(),s(9,"div")(10,"div",183),d(11),l(),s(12,"div",139),d(13,"En Progreso"),l()(),s(14,"div")(15,"div",184),d(16),l(),s(17,"div",139),d(18,"Completadas"),l()(),s(19,"div")(20,"div",185),d(21),l(),s(22,"div",139),d(23,"Progreso Promedio"),l()()()()),n&2){let e=h(2);u(6),E(" ",e.getEstadisticasProgreso().pendientes," "),u(5),E(" ",e.getEstadisticasProgreso().enProgreso," "),u(5),E(" ",e.getEstadisticasProgreso().completadas," "),u(5),E(" ",e.getEstadisticasProgreso().promedioProgreso,"% ")}}function T5(n,t){if(n&1){let e=P();s(0,"div",94)(1,"div",95)(2,"div",96),x("click",function(){C(e);let r=h();return S(r.closeVerModal())}),l(),s(3,"span",97),d(4,"\u200B"),l(),s(5,"div",142)(6,"div",99)(7,"div",100)(8,"div",143),I(),s(9,"svg",144),b(10,"path",145),l()(),T(),s(11,"div",103)(12,"h3",48),d(13),l(),s(14,"div",104)(15,"p",59),d(16," Progreso individual de cada usuario asignado "),w(17,m5,2,0,"span",146),l()()()()(),s(18,"div",147)(19,"div",148)(20,"div",149)(21,"div")(22,"span",150),d(23,"Per\xEDodo:"),l(),s(24,"div",151),d(25),l(),w(26,_5,4,3,"div",66),l(),s(27,"div")(28,"span",150),d(29,"Total usuarios:"),l(),s(30,"div",151),d(31),l()(),s(32,"div")(33,"span",150),d(34,"Asignado por:"),l(),s(35,"div",151),d(36),l()()()(),s(37,"div",49)(38,"table",50)(39,"thead",51)(40,"tr")(41,"th",52),d(42," Usuario "),l(),s(43,"th",52),d(44," Progreso "),l(),s(45,"th",52),d(46," Estado "),l(),s(47,"th",52),d(48," Fechas Reales "),l(),s(49,"th",52),d(50," Notas "),l(),s(51,"th",52),d(52," Acciones "),l()()(),s(53,"tbody",53),w(54,M5,33,21,"tr",152),l()(),w(55,I5,7,0,"div",153),l(),w(56,D5,24,4,"div",154),l(),s(57,"div",126)(58,"button",155),x("click",function(){C(e);let r=h();return S(r.closeVerModal())}),d(59," Cerrar "),l()()()()()}if(n&2){let e=h();u(13),E(" Seguimiento: ",e.selectedAsignacion==null?null:e.selectedAsignacion.rutina_nombre," "),u(4),g("ngIf",e.selectedAsignacion&&!e.selectedAsignacion.es_activa),u(2),X("bg-red-50",e.selectedAsignacion&&!e.selectedAsignacion.es_activa),u(6),be(" ",e.formatDate((e.selectedAsignacion==null?null:e.selectedAsignacion.fecha_inicio_programada)||"")," - ",e.formatDate((e.selectedAsignacion==null?null:e.selectedAsignacion.fecha_fin_programada)||"")," "),u(),g("ngIf",e.selectedAsignacion),u(5),k(e.selectedAsignacion==null?null:e.selectedAsignacion.usuarios_count),u(5),k(e.selectedAsignacion==null?null:e.selectedAsignacion.asignado_por_nombre),u(18),g("ngForOf",e.seguimientoDetalle)("ngForTrackBy",e.trackByUserId),u(),g("ngIf",e.seguimientoDetalle.length===0),u(),g("ngIf",e.seguimientoDetalle.length>0)}}function k5(n,t){if(n&1){let e=P();s(0,"button",186),x("click",function(){C(e);let r=h();return S(r.openAsignarModal())}),I(),s(1,"svg",187),b(2,"path",36),l()()}}var Yd=class n{constructor(t,e){this.supabaseService=t;this.authService=e}rutinas=[];usuarios=[];asignaciones=[];loading=!1;error="";showAsignarModal=!1;showVerModal=!1;selectedAsignacion=null;seguimientoDetalle=[];asignacionForm={id_rutina:0,usuarios_seleccionados:[],fecha_inicio:"",notas:""};searchTerm="";estadoFilter="all";rutinaFilter="all";mostrarInactivas=!0;ngOnInit(){return v(this,null,function*(){yield this.loadInitialData(),yield this.procesarAsignacionesVencidas()})}loadInitialData(){return v(this,null,function*(){this.loading=!0;try{yield Promise.all([this.loadRutinas(),this.loadUsuarios(),this.loadAsignaciones()])}catch(t){console.error("Error cargando datos iniciales:",t),this.error="Error al cargar los datos"}finally{this.loading=!1}})}loadRutinas(){return v(this,null,function*(){try{let t=yield this.supabaseService.getData("rutinas");this.rutinas=t?.filter(e=>e.status===1)||[]}catch(t){console.error("Error cargando rutinas:",t)}})}loadUsuarios(){return v(this,null,function*(){try{let t=yield this.supabaseService.getData("profiles");this.usuarios=t?.filter(e=>e.status===1)||[]}catch(t){console.error("Error cargando usuarios:",t)}})}loadAsignaciones(){return v(this,null,function*(){try{let t=this.supabaseService.client.from("rutina_asignaciones_masivas").select(`
          id,
          id_rutina,
          usuarios_asignados,
          fecha_inicio,
          fecha_fin,
          estado,
          notas,
          created_at,
          status,
          rutinas(nombre, descripcion),
          profiles!rutina_asignaciones_masivas_asignado_por_fkey(full_name)
        `);this.mostrarInactivas||(t=t.eq("status",1));let{data:e,error:i}=yield t.order("created_at",{ascending:!1});if(i)throw i;this.asignaciones=(e||[]).map(r=>{let o=new Date(r.fecha_fin),a=new Date,c=r.status===1&&o>=a;return{asignacion_id:r.id,rutina_nombre:r.rutinas?.nombre||"Rutina no encontrada",rutina_descripcion:r.rutinas?.descripcion||"",fecha_inicio_programada:r.fecha_inicio,fecha_fin_programada:r.fecha_fin,usuarios_count:r.usuarios_asignados?.length||0,estado_asignacion:r.estado,asignado_por_nombre:r.profiles?.full_name||"Usuario no encontrado",fecha_asignacion:r.created_at,notas_asignacion:r.notas,status:r.status,es_activa:c}})}catch(t){console.error("Error cargando asignaciones:",t),yield this.loadAsignacionesAlternativo()}})}loadAsignacionesAlternativo(){return v(this,null,function*(){try{let[t,e,i]=yield Promise.all([this.supabaseService.getData("rutina_asignaciones_masivas"),this.supabaseService.getData("rutinas"),this.supabaseService.getData("profiles")]),r=t||[];this.mostrarInactivas||(r=r.filter(o=>o.status===1)),this.asignaciones=r.map(o=>{let a=e?.find(_=>_.id===o.id_rutina),c=i?.find(_=>_.id===o.asignado_por),p=new Date(o.fecha_fin),f=new Date,m=o.status===1&&p>=f;return{asignacion_id:o.id,rutina_nombre:a?.nombre||"Rutina no encontrada",rutina_descripcion:a?.descripcion||"",fecha_inicio_programada:o.fecha_inicio,fecha_fin_programada:o.fecha_fin,usuarios_count:o.usuarios_asignados?.length||0,estado_asignacion:o.estado,asignado_por_nombre:c?.full_name||"Usuario no encontrado",fecha_asignacion:o.created_at,notas_asignacion:o.notas,status:o.status,es_activa:m}})}catch(t){console.error("Error en m\xE9todo alternativo:",t),this.asignaciones=[]}})}procesarAsignacionesVencidas(){return v(this,null,function*(){try{let e=new Date().toISOString().split("T")[0],{data:i,error:r}=yield this.supabaseService.client.from("rutina_asignaciones_masivas").select("id").eq("status",1).lt("fecha_fin",e);if(r){console.error("Error buscando asignaciones vencidas:",r);return}if(i&&i.length>0){let o=i.map(c=>c.id),{error:a}=yield this.supabaseService.client.from("rutina_asignaciones_masivas").update({status:0,estado:"expirada",updated_at:new Date().toISOString()}).in("id",o);a?console.error("Error actualizando asignaciones vencidas:",a):console.log(`${o.length} asignaciones marcadas como vencidas`)}}catch(t){console.error("Error procesando asignaciones vencidas:",t)}})}openAsignarModal(){this.asignacionForm={id_rutina:0,usuarios_seleccionados:[],fecha_inicio:this.getTomorrowDate(),notas:""},this.error="",this.showAsignarModal=!0}closeAsignarModal(){this.showAsignarModal=!1,this.error=""}openVerModal(t){return v(this,null,function*(){this.selectedAsignacion=t,yield this.loadSeguimientoDetalle(t.asignacion_id),this.showVerModal=!0})}closeVerModal(){this.showVerModal=!1,this.selectedAsignacion=null,this.seguimientoDetalle=[]}loadSeguimientoDetalle(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.client.from("v_rutinas_asignadas_usuarios").select("*").eq("asignacion_id",t).order("full_name");if(!i&&e){this.seguimientoDetalle=e;return}let{data:r,error:o}=yield this.supabaseService.client.from("rutina_seguimiento_individual").select(`
          id,
          id_asignacion_masiva,
          id_profile,
          progreso,
          estado_individual,
          fecha_inicio_real,
          fecha_fin_real,
          notas_individuales,
          profiles(username, full_name)
        `).eq("id_asignacion_masiva",t);if(o)throw o;this.seguimientoDetalle=(r||[]).map(a=>({seguimiento_id:a.id,asignacion_id:a.id_asignacion_masiva,id_profile:a.id_profile,username:a.profiles?.username||"N/A",full_name:a.profiles?.full_name||"Usuario no encontrado",progreso:a.progreso,estado_individual:a.estado_individual,fecha_inicio_real:a.fecha_inicio_real,fecha_fin_real:a.fecha_fin_real,notas_individuales:a.notas_individuales}))}catch(e){console.error("Error cargando seguimiento detalle:",e),this.seguimientoDetalle=[]}})}toggleUsuario(t){let e=this.asignacionForm.usuarios_seleccionados.indexOf(t);e>-1?this.asignacionForm.usuarios_seleccionados.splice(e,1):this.asignacionForm.usuarios_seleccionados.push(t)}isUsuarioSelected(t){return this.asignacionForm.usuarios_seleccionados.includes(t)}selectAllUsuarios(){this.asignacionForm.usuarios_seleccionados=this.usuarios.map(t=>t.id)}clearAllUsuarios(){this.asignacionForm.usuarios_seleccionados=[]}calcularFechaFin(t){if(!t)return"";let e=new Date(t);return e.setMonth(e.getMonth()+1),e.toISOString().split("T")[0]}asignarRutina(){return v(this,null,function*(){try{if(this.error="",!this.asignacionForm.id_rutina){this.error="Debe seleccionar una rutina";return}if(this.asignacionForm.usuarios_seleccionados.length===0){this.error="Debe seleccionar al menos un usuario";return}if(!this.asignacionForm.fecha_inicio){this.error="Debe especificar la fecha de inicio";return}this.loading=!0;let t=this.authService.getCurrentUser();if(!t?.id)throw new Error("Usuario no autenticado");let e=this.calcularFechaFin(this.asignacionForm.fecha_inicio),i;try{let{data:r,error:o}=yield this.supabaseService.client.rpc("asignar_rutina_a_usuarios",{p_id_rutina:this.asignacionForm.id_rutina,p_usuarios_ids:this.asignacionForm.usuarios_seleccionados,p_asignado_por:t.id,p_fecha_inicio:this.asignacionForm.fecha_inicio,p_fecha_fin:e,p_notas:this.asignacionForm.notas||null});if(o)throw o;i=r}catch{console.log("Funci\xF3n RPC no disponible, usando m\xE9todo manual");let o={id_rutina:this.asignacionForm.id_rutina,usuarios_asignados:this.asignacionForm.usuarios_seleccionados,asignado_por:t.id,fecha_inicio:this.asignacionForm.fecha_inicio,fecha_fin:e,notas:this.asignacionForm.notas||null,estado:"activa"},{data:a,error:c}=yield this.supabaseService.client.from("rutina_asignaciones_masivas").insert(o).select().single();if(c)throw c;i=a.id;let p=this.asignacionForm.usuarios_seleccionados.map(m=>({id_asignacion_masiva:i,id_profile:m,id_rutina:this.asignacionForm.id_rutina,progreso:0,estado_individual:"pendiente"})),{error:f}=yield this.supabaseService.client.from("rutina_seguimiento_individual").insert(p);if(f)throw f}console.log("Rutina asignada exitosamente, ID:",i),yield this.loadAsignaciones(),this.closeAsignarModal(),alert(`Rutina asignada exitosamente a ${this.asignacionForm.usuarios_seleccionados.length} usuarios por 1 mes`)}catch(t){console.error("Error asignando rutina:",t),this.error=t instanceof Error?t.message:"Error al asignar la rutina"}finally{this.loading=!1}})}cancelarAsignacion(t){return v(this,null,function*(){if(confirm("\xBFEst\xE1 seguro de cancelar esta asignaci\xF3n? Esta acci\xF3n afectar\xE1 a todos los usuarios asignados."))try{let{error:i}=yield this.supabaseService.client.from("rutina_asignaciones_masivas").update({estado:"cancelada",status:0,updated_at:new Date().toISOString()}).eq("id",t);if(i)throw i;yield this.loadAsignaciones(),alert("Asignaci\xF3n cancelada exitosamente")}catch(i){console.error("Error cancelando asignaci\xF3n:",i),alert("Error al cancelar la asignaci\xF3n")}})}actualizarProgreso(t,e){return v(this,null,function*(){try{let i=parseInt(e.target?.value||e)||0;if(i<0||i>100){alert("El progreso debe estar entre 0 y 100");return}let r={progreso:i,updated_at:new Date().toISOString()};if(i===0)r.estado_individual="pendiente";else if(i<100){r.estado_individual="en_progreso";let a=this.seguimientoDetalle.find(c=>c.seguimiento_id===t);a&&!a.fecha_inicio_real&&(r.fecha_inicio_real=new Date().toISOString().split("T")[0])}else r.estado_individual="completada",r.fecha_fin_real=new Date().toISOString().split("T")[0];let{error:o}=yield this.supabaseService.client.from("rutina_seguimiento_individual").update(r).eq("id",t);if(o)throw o;this.selectedAsignacion&&(yield this.loadSeguimientoDetalle(this.selectedAsignacion.asignacion_id))}catch(i){console.error("Error actualizando progreso:",i),alert("Error al actualizar el progreso")}})}editarNotasIndividuales(t){return v(this,null,function*(){let e=prompt("Ingrese las notas para este usuario:",t.notas_individuales||"");if(e!==null)try{let{error:i}=yield this.supabaseService.client.from("rutina_seguimiento_individual").update({notas_individuales:e,updated_at:new Date().toISOString()}).eq("id",t.seguimiento_id);if(i)throw i;this.selectedAsignacion&&(yield this.loadSeguimientoDetalle(this.selectedAsignacion.asignacion_id))}catch(i){console.error("Error actualizando notas:",i),alert("Error al actualizar las notas")}})}getEstadisticasProgreso(){if(!this.seguimientoDetalle||this.seguimientoDetalle.length===0)return{pendientes:0,enProgreso:0,completadas:0,promedioProgreso:0};let t=this.seguimientoDetalle.filter(a=>a.estado_individual==="pendiente").length,e=this.seguimientoDetalle.filter(a=>a.estado_individual==="en_progreso").length,i=this.seguimientoDetalle.filter(a=>a.estado_individual==="completada").length,r=this.seguimientoDetalle.reduce((a,c)=>a+(c.progreso||0),0),o=Math.round(r/this.seguimientoDetalle.length);return{pendientes:t,enProgreso:e,completadas:i,promedioProgreso:o}}toggleMostrarInactivas(){return v(this,null,function*(){this.mostrarInactivas=!this.mostrarInactivas,yield this.loadAsignaciones()})}getRutinaNombre(t){return this.rutinas.find(i=>i.id===t)?.nombre||"Rutina no encontrada"}getUserName(t){let e=this.usuarios.find(i=>i.id===t);return e?.full_name||e?.username||"Usuario no encontrado"}getEstadoColor(t,e=!0){if(!e)return"gray";switch(t){case"activa":return"green";case"completada":return"blue";case"pausada":return"yellow";case"cancelada":case"expirada":return"red";default:return"gray"}}getEstadoIcon(t){switch(t){case"activa":return"fas fa-play-circle";case"completada":return"fas fa-check-circle";case"pausada":return"fas fa-pause-circle";case"cancelada":return"fas fa-times-circle";case"expirada":return"fas fa-clock";default:return"fas fa-circle"}}formatDate(t){return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})}getTomorrowDate(){let t=new Date;return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]}getDiasRestantes(t){let e=new Date(t),i=new Date,r=e.getTime()-i.getTime();return Math.ceil(r/(1e3*60*60*24))}isVencida(t){return this.getDiasRestantes(t)<0}get filteredAsignaciones(){let t=[...this.asignaciones];if(this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.rutina_nombre.toLowerCase().includes(e)||i.asignado_por_nombre.toLowerCase().includes(e))}return this.estadoFilter!=="all"&&(t=t.filter(e=>e.estado_asignacion===this.estadoFilter)),this.rutinaFilter!=="all"&&(t=t.filter(e=>e.rutina_nombre===this.rutinaFilter)),t}clearFilters(){this.searchTerm="",this.estadoFilter="all",this.rutinaFilter="all"}refreshData(){return v(this,null,function*(){yield this.procesarAsignacionesVencidas(),yield this.loadAsignaciones()})}canAssignRoutines(){return this.authService.isAdmin()||this.authService.hasProfile(3)}trackByAsignacionId(t,e){return e.asignacion_id}trackByUserId(t,e){return e.id}trackByRutinaId(t,e){return e.id}static \u0275fac=function(e){return new(e||n)(O(me),O(re))};static \u0275cmp=ie({type:n,selectors:[["app-rutinas-usuario"]],standalone:!1,decls:57,vars:16,consts:[["filtrosAplicados",""],["pluralUsuarios",""],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"flex","space-x-2"],[1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["class","inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",3,"click",4,"ngIf"],[1,"bg-white","rounded-lg","shadow","mb-6","p-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"md:col-span-2"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","placeholder","Buscar por rutina o asignador...",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["value","all"],["value","activa"],["value","completada"],["value","pausada"],["value","cancelada"],["value","expirada"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mt-4","flex","justify-end"],[1,"text-sm","text-red-600","hover:text-red-800",3,"click"],["class","bg-red-50 border border-red-200 rounded-md p-4 mb-6",4,"ngIf"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","bg-white shadow overflow-hidden sm:rounded-md",4,"ngIf"],["class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],["class","md:hidden fixed bottom-6 right-6 w-14 h-14 bg-red-600 text-white rounded-full shadow-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all duration-200 z-40","title","Asignar rutina",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-red-600","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[3,"value"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-6"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-red-600"],[1,"bg-white","shadow","overflow-hidden","sm:rounded-md"],[1,"px-4","py-5","sm:px-6","border-b","border-gray-200"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",3,"opacity-50","bg-gray-50",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-12",4,"ngIf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-gray-400","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"text-sm","text-gray-500","ml-1"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"text-gray-500"],["class","text-xs mt-1",4,"ngIf"],["class","text-xs text-red-500 mt-1",4,"ngIf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-sm","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","justify-end","space-x-2"],["title","Ver seguimiento",1,"text-blue-600","hover:text-blue-900","p-2","rounded-full","hover:bg-blue-50",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["class","text-red-600 hover:text-red-900 p-2 rounded-full hover:bg-red-50","title","Cancelar asignaci\xF3n",3,"click",4,"ngIf"],[1,"text-xs","mt-1"],["class","text-green-600",4,"ngIf"],["class","text-yellow-600",4,"ngIf"],[1,"text-green-600"],[1,"text-yellow-600"],[1,"text-xs","text-red-500","mt-1"],["title","Cancelar asignaci\xF3n",1,"text-red-600","hover:text-red-900","p-2","rounded-full","hover:bg-red-50",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[4,"ngIf","ngIfElse"],[1,"mt-6"],["class","inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",3,"click",4,"ngIf"],["class","inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-red-600","hover:bg-red-700",3,"click"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","shadow-sm","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-center","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-4xl","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-red-600"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","w-full"],[1,"mt-2"],[1,"bg-white","px-4","pb-4","sm:px-6","max-h-96","overflow-y-auto"],[1,"space-y-6"],[1,"text-red-500"],["name","rutina",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["value","0"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","date","name","fechaInicio",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"flex","items-center","h-10","px-3","py-2","border","border-gray-200","rounded-md","bg-gray-50"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-gray-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-gray-600","font-medium"],["class","bg-blue-50 border border-blue-200 rounded-md p-3",4,"ngIf"],["name","notas","rows","3","placeholder","Notas adicionales sobre la asignaci\xF3n...",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"flex","justify-between","items-center","mb-3"],[1,"block","text-sm","font-medium","text-gray-700"],["type","button",1,"text-xs","text-red-600","hover:text-red-800",3,"click"],["type","button",1,"text-xs","text-gray-600","hover:text-gray-800",3,"click"],[1,"border","border-gray-300","rounded-md","p-3","max-h-48","overflow-y-auto"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2"],["class","flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",3,"bg-red-50",4,"ngFor","ngForOf","ngForTrackBy"],["class","mt-4 bg-red-50 border border-red-200 rounded-md p-3",4,"ngIf"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-red-600","text-base","font-medium","text-white","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","sm:ml-3","sm:w-auto","sm:text-sm","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm","disabled:opacity-50",3,"click","disabled"],[1,"bg-blue-50","border","border-blue-200","rounded-md","p-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-blue-400","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm"],[1,"font-medium","text-blue-800"],[1,"text-blue-700","ml-1"],[1,"flex","items-center","p-2","hover:bg-gray-50","rounded","cursor-pointer"],["type","checkbox",1,"h-4","w-4","text-red-600","focus:ring-red-500","border-gray-300","rounded",3,"change","checked"],[1,"ml-3","flex-1"],[1,"text-xs","text-gray-500"],[1,"mt-4","bg-red-50","border","border-red-200","rounded-md","p-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-6xl","sm:w-full"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-blue-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],["class","text-red-500 font-medium ml-2",4,"ngIf"],[1,"bg-white","px-4","pb-4","sm:px-6"],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4","text-sm"],[1,"font-medium","text-gray-700"],[1,"text-gray-900"],["class","hover:bg-gray-50",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-8",4,"ngIf"],["class","mt-6 bg-gray-50 rounded-lg p-4",4,"ngIf"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","sm:w-auto","sm:text-sm",3,"click"],[1,"text-red-500","font-medium","ml-2"],["class","text-red-600",4,"ngIf"],[1,"text-red-600"],[1,"h-8","w-8","bg-gray-300","rounded-full","flex","items-center","justify-center","mr-3"],[1,"text-xs","font-medium","text-gray-700"],[1,"w-16","bg-gray-200","rounded-full","h-2","mr-3"],[1,"bg-blue-600","h-2","rounded-full"],["class","mt-2",4,"ngIf"],["class","mt-2 text-xs text-gray-500",4,"ngIf"],[4,"ngIf"],["class","text-gray-500",4,"ngIf"],[1,"px-6","py-4"],[1,"text-sm","text-gray-900","max-w-xs"],["class","text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50","title","Editar notas",3,"click",4,"ngIf"],["class","text-xs text-gray-400 px-2 py-1",4,"ngIf"],["type","range","min","0","max","100",1,"w-full","h-2","bg-gray-200","rounded-lg","appearance-none","cursor-pointer","slider",3,"input","value"],[1,"mt-2","text-xs","text-gray-500"],["title","Editar notas",1,"text-indigo-600","hover:text-indigo-900","p-1","rounded","hover:bg-indigo-50",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-xs","text-gray-400","px-2","py-1"],[1,"text-center","py-8"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-8","w-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"],[1,"mt-6","bg-gray-50","rounded-lg","p-4"],[1,"text-sm","font-medium","text-gray-900","mb-3"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","text-center"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-2xl","font-bold","text-yellow-600"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-2xl","font-bold","text-blue-600"],["title","Asignar rutina",1,"md:hidden","fixed","bottom-6","right-6","w-14","h-14","bg-red-600","text-white","rounded-full","shadow-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-all","duration-200","z-40",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","mx-auto"]],template:function(e,i){e&1&&(s(0,"div",2)(1,"div",3)(2,"div",4)(3,"div")(4,"h1",5),d(5,"Asignaci\xF3n de Rutinas a Usuarios"),l(),s(6,"p",6),d(7),l()(),s(8,"div",7)(9,"button",8),x("click",function(){return i.toggleMostrarInactivas()}),I(),s(10,"svg",9),b(11,"path",10)(12,"path",11),l(),d(13),l(),T(),s(14,"button",8),x("click",function(){return i.refreshData()}),I(),s(15,"svg",9),b(16,"path",12),l(),d(17," Refrescar "),l(),w(18,Hk,4,0,"button",13),l()()(),T(),s(19,"div",14)(20,"div",15)(21,"div",16)(22,"label",17),d(23,"Buscar"),l(),s(24,"input",18),F("ngModelChange",function(o){return N(i.searchTerm,o)||(i.searchTerm=o),o}),l()(),s(25,"div")(26,"label",17),d(27,"Estado"),l(),s(28,"select",19),F("ngModelChange",function(o){return N(i.estadoFilter,o)||(i.estadoFilter=o),o}),s(29,"option",20),d(30,"Todos los estados"),l(),s(31,"option",21),d(32,"Activa"),l(),s(33,"option",22),d(34,"Completada"),l(),s(35,"option",23),d(36,"Pausada"),l(),s(37,"option",24),d(38,"Cancelada"),l(),s(39,"option",25),d(40,"Expirada"),l()()(),s(41,"div")(42,"label",17),d(43,"Rutina"),l(),s(44,"select",19),F("ngModelChange",function(o){return N(i.rutinaFilter,o)||(i.rutinaFilter=o),o}),s(45,"option",20),d(46,"Todas las rutinas"),l(),w(47,zk,2,2,"option",26),l()()(),s(48,"div",27)(49,"button",28),x("click",function(){return i.clearFilters()}),d(50," Limpiar filtros "),l()()(),w(51,Gk,7,1,"div",29)(52,Wk,2,0,"div",30)(53,o5,23,4,"div",31),l(),w(54,f5,75,15,"div",32)(55,T5,60,13,"div",32)(56,k5,3,0,"button",33)),e&2&&(u(7),E(" Gestiona las asignaciones masivas de rutinas (duraci\xF3n: 1 mes) - Total: ",i.asignaciones.length," "),u(2),X("bg-gray-200",i.mostrarInactivas),u(4),E(" ",i.mostrarInactivas?"Ocultar":"Mostrar"," vencidas "),u(5),g("ngIf",i.canAssignRoutines()),u(6),R("ngModel",i.searchTerm),u(4),R("ngModel",i.estadoFilter),u(16),R("ngModel",i.rutinaFilter),u(3),g("ngForOf",i.rutinas)("ngForTrackBy",i.trackByRutinaId),u(4),g("ngIf",i.error&&!i.showAsignarModal&&!i.showVerModal),u(),g("ngIf",i.loading&&!i.showAsignarModal&&!i.showVerModal),u(),g("ngIf",!i.loading),u(),g("ngIf",i.showAsignarModal),u(),g("ngIf",i.showVerModal),u(),g("ngIf",!i.showAsignarModal&&!i.showVerModal&&i.canAssignRoutines()))},dependencies:[He,ve,le,Je,je,Le,we,Ae,Ie,Ke,Re,ut],styles:['.modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.modal-panel[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .3s ease-out}.asignacion-card[_ngcontent-%COMP%]{transition:all .3s ease}.asignacion-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000001a}.checkbox-usuario[_ngcontent-%COMP%]{transition:all .2s ease}.checkbox-usuario[_ngcontent-%COMP%]:checked{transform:scale(1.1)}.progress-bar[_ngcontent-%COMP%]{transition:width .8s ease-in-out;background:linear-gradient(90deg,#ef4444,#dc2626)}.progress-container[_ngcontent-%COMP%]{background-color:#f3f4f6;border-radius:9999px;overflow:hidden}.estado-activa[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff}.estado-completada[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff}.estado-pausada[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff}.estado-cancelada[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff}.btn-action[_ngcontent-%COMP%]{transition:all .2s ease}.btn-action[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.estado-badge[_ngcontent-%COMP%]{position:relative;overflow:hidden}.estado-badge[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.estado-badge[_ngcontent-%COMP%]:hover:before{left:100%}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@media (max-width: 768px){.tabla-responsive[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}.tabla-responsive[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{min-width:600px}}.input-focus[_ngcontent-%COMP%]:focus{outline:none;ring:2px;ring-color:#ef4444;border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.usuario-seleccionado[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef2f2,#fee2e2);border:2px solid #ef4444;transform:scale(1.02)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.tooltip[_ngcontent-%COMP%]{position:relative}.tooltip[_ngcontent-%COMP%]:hover:after{content:attr(data-tooltip);position:absolute;bottom:100%;left:50%;transform:translate(-50%);background:#1f2937;color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;white-space:nowrap;z-index:1000}.seguimiento-table[_ngcontent-%COMP%]{border-collapse:separate;border-spacing:0}.seguimiento-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .seguimiento-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb}.seguimiento-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.progress-input[_ngcontent-%COMP%]{transition:all .2s ease}.progress-input[_ngcontent-%COMP%]:focus{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.tiempo-vigente[_ngcontent-%COMP%]{color:#059669;font-weight:600}.tiempo-vencido[_ngcontent-%COMP%]{color:#dc2626;font-weight:600}.tiempo-pendiente[_ngcontent-%COMP%]{color:#d97706;font-weight:600}.stat-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fff,#f8fafc);border:1px solid #e2e8f0;transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover{border-color:#ef4444;box-shadow:0 8px 25px #ef44441a}@media (max-width: 640px){.modal-panel[_ngcontent-%COMP%]{margin:0;max-height:100vh;border-radius:0}.grid-responsive[_ngcontent-%COMP%]{grid-template-columns:1fr}.flex-responsive[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.slide-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .5s ease-out}.slide-in-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInDown .5s ease-out}.loading-skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}']})};var Zd=class n{constructor(t,e){this.supabaseService=t;this.authService=e}getRutinasUsuarioSimple(){return v(this,null,function*(){try{let t=this.authService.getCurrentUser();if(!t?.id)throw new Error("Usuario no autenticado");let{data:e,error:i}=yield this.supabaseService.client.from("rutina_seguimiento_individual").select(`
          id,
          id_asignacion_masiva,
          id_profile,
          id_rutina,
          progreso,
          estado_individual,
          fecha_inicio_real,
          fecha_fin_real,
          notas_individuales,
          rutina_asignaciones_masivas!inner(
            fecha_inicio,
            fecha_fin,
            estado,
            notas,
            status
          ),
          rutinas!inner(
            id,
            nombre,
            descripcion,
            tipo,
            nivel,
            duracion_estimada,
            warm_up,
            met_con,
            strength,
            core,
            extra,
            tags,
            status
          )
        `).eq("id_profile",t.id).eq("rutina_asignaciones_masivas.status",1).eq("rutinas.status",1).order("id",{ascending:!1});if(i)throw i;return e||[]}catch(t){return console.error("Error obteniendo rutinas del usuario:",t),[]}})}actualizarProgresoSimple(t,e){return v(this,null,function*(){try{let i={progreso:e,updated_at:new Date().toISOString()};if(e===0)i.estado_individual="pendiente";else if(e<100){i.estado_individual="en_progreso";let{data:o}=yield this.supabaseService.client.from("rutina_seguimiento_individual").select("fecha_inicio_real").eq("id",t).single();o&&!o.fecha_inicio_real&&(i.fecha_inicio_real=new Date().toISOString().split("T")[0])}else i.estado_individual="completada",i.fecha_fin_real=new Date().toISOString().split("T")[0];let{error:r}=yield this.supabaseService.client.from("rutina_seguimiento_individual").update(i).eq("id",t);if(r)throw r;return!0}catch(i){return console.error("Error actualizando progreso:",i),!1}})}calcularEstadoTemporal(t,e){let i=new Date,r=new Date(t),o=new Date(e),a;i<r?a="pendiente":i>o?a="vencida":a="vigente";let c=Math.ceil((o.getTime()-i.getTime())/(1e3*3600*24));return{estado:a,diasRestantes:c}}static \u0275fac=function(e){return new(e||n)(B(me),B(re))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function O5(n,t){if(n&1&&(s(0,"div",30),d(1),l()),n&2){let e=t.$implicit;u(),E(" ",e," ")}}function A5(n,t){n&1&&b(0,"div",38)}function R5(n,t){if(n&1&&(s(0,"span",46),d(1),l()),n&2){let e=h().$implicit;u(),E(" \u{1F4C5} Inicio (",e.seguimiento.progreso,"%) ")}}function F5(n,t){if(n&1&&(s(0,"span",47),d(1),l()),n&2){let e=h().$implicit;u(),E(" \u{1F3C1} Fin (",e.seguimiento.progreso,"%) ")}}function N5(n,t){if(n&1&&(s(0,"span",48),d(1),l()),n&2){let e=h().$implicit;u(),E(" \u{1F3C3} En curso (",e.seguimiento.progreso,"%) ")}}function V5(n,t){if(n&1){let e=P();s(0,"div",39),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.onClickRutina(r))}),s(1,"div",3)(2,"span",40),d(3),l(),b(4,"div",41),l(),s(5,"div",42),w(6,R5,2,1,"span",43)(7,F5,2,1,"span",44)(8,N5,2,1,"span",45),l()()}if(n&2){let e=t.$implicit,i=h(2);g("ngClass",i.getColorByTipo(e.tipoEvento))("title",e.seguimiento.rutina_nombre+" - "+e.tipoEvento),u(3),E(" ",e.seguimiento.rutina_nombre," "),u(),g("ngClass",i.getColorByEstado(e.seguimiento.estado_temporal)),u(2),g("ngIf",e.tipoEvento==="inicio"),u(),g("ngIf",e.tipoEvento==="fin"),u(),g("ngIf",e.tipoEvento==="progreso")}}function j5(n,t){if(n&1&&(s(0,"div",49),d(1),l()),n&2){let e=h().$implicit;u(),E(" +",e.rutinas.length-3," m\xE1s ")}}function L5(n,t){if(n&1&&(s(0,"div",31)(1,"div",32)(2,"span",33),d(3),l(),w(4,A5,1,0,"div",34),l(),s(5,"div",35),w(6,V5,9,7,"div",36),l(),w(7,j5,2,1,"div",37),l()),n&2){let e=t.$implicit,i=h();X("bg-gray-50",!e.esMesActual)("bg-blue-50",i.esHoy(e.fecha)),u(2),X("text-gray-400",!e.esMesActual)("text-gray-900",e.esMesActual&&!i.esHoy(e.fecha))("text-blue-600",i.esHoy(e.fecha))("font-bold",i.esHoy(e.fecha)),u(),E(" ",e.fecha.getDate()," "),u(),g("ngIf",i.esHoy(e.fecha)),u(2),g("ngForOf",e.rutinas)("ngForTrackBy",i.trackByRutina),u(),g("ngIf",e.rutinas.length>3)}}function U5(n,t){n&1&&(s(0,"div",50),I(),s(1,"svg",51),b(2,"path",52),l(),T(),s(3,"h3",53),d(4,"No hay rutinas para mostrar"),l(),s(5,"p",54),d(6," No tienes rutinas asignadas para mostrar en el calendario. "),l()())}function B5(n,t){n&1&&(s(0,"div",93)(1,"div",94),I(),s(2,"svg",95),b(3,"path",96),l(),T(),s(4,"div",97)(5,"p",98),d(6,"\xA1Rutina copiada al portapapeles!"),l()()()())}function $5(n,t){if(n&1){let e=P();s(0,"button",99),x("click",function(){C(e);let r=h(2);return S(r.exportarRutina(r.selectedRutina,r.selectedSeguimiento||void 0))}),I(),s(1,"svg",5),b(2,"path",100),l(),d(3," Descargar "),l()}}function q5(n,t){if(n&1){let e=P();s(0,"div",55)(1,"div",56)(2,"div",57),x("click",function(){C(e);let r=h();return S(r.closeViewModal())}),l(),s(3,"span",58),d(4,"\u200B"),l(),s(5,"div",59)(6,"div",60)(7,"div",61)(8,"div",62),I(),s(9,"svg",63),b(10,"path",52),l()(),T(),s(11,"div",64)(12,"h3",65),d(13),l(),s(14,"div",66)(15,"p",67),d(16),l()()()()(),s(17,"div",68)(18,"div",69)(19,"div",70)(20,"div")(21,"span",71),d(22,"Mi Progreso:"),l(),s(23,"div",72)(24,"div",73),b(25,"div",74),l(),d(26),l()(),s(27,"div")(28,"span",71),d(29,"Estado:"),l(),s(30,"div",75),d(31),l()(),s(32,"div")(33,"span",71),d(34,"Per\xEDodo:"),l(),s(35,"div",75),d(36),l()(),s(37,"div")(38,"span",71),d(39,"D\xEDas restantes:"),l(),s(40,"div",75),d(41),l()()()(),s(42,"div",76)(43,"div",77),b(44,"img",78),l(),s(45,"div",79)(46,"div",80),b(47,"div",81)(48,"div",82)(49,"div",83),l(),s(50,"div",84),d(51),l()(),s(52,"pre",85),d(53),l()(),w(54,B5,7,0,"div",86),s(55,"div",87)(56,"button",88),x("click",function(){C(e);let r=h();return S(r.copyToClipboard(r.getFormattedRutina(r.selectedRutina,r.selectedSeguimiento||void 0)))}),I(),s(57,"svg",5),b(58,"path",89),l(),d(59," Copiar "),l(),w(60,$5,4,0,"button",90),l()(),T(),s(61,"div",91)(62,"button",92),x("click",function(){C(e);let r=h();return S(r.closeViewModal())}),d(63," Cerrar "),l()()()()()}if(n&2){let e=h();u(13),E(" ",e.selectedRutina==null?null:e.selectedRutina.nombre," "),u(3),E(" Rutina desde calendario - Progreso: ",e.selectedSeguimiento==null?null:e.selectedSeguimiento.progreso,"% "),u(9),At("width",e.selectedSeguimiento==null?null:e.selectedSeguimiento.progreso,"%"),u(),E(" ",e.selectedSeguimiento==null?null:e.selectedSeguimiento.progreso,"% "),u(5),k(e.selectedSeguimiento==null?null:e.selectedSeguimiento.estado_individual),u(5),be(" ",e.formatDate(e.selectedSeguimiento==null?null:e.selectedSeguimiento.fecha_inicio_programada)," - ",e.formatDate(e.selectedSeguimiento==null?null:e.selectedSeguimiento.fecha_fin_programada)," "),u(4),X("text-green-600",((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)>7)("text-yellow-600",((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)<=7&&((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)>0)("text-red-600",((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)<=0),u(),E(" ",((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)>0?e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes:"Vencida"," "),u(10),E(" ",e.getFileName()," "),u(2),k(e.getFormattedRutina(e.selectedRutina,e.selectedSeguimiento||void 0)),u(),g("ngIf",e.copySuccess),u(6),g("ngIf",e.selectedRutina)}}var Qd=class n{rutinas=[];volverAVista=new Te;abrirRutina=new Te;fechaActual=new Date;mesActual=new Date;diasCalendario=[];showViewModal=!1;selectedRutina=null;selectedSeguimiento=null;copySuccess=!1;meses=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];diasSemana=["Dom","Lun","Mar","Mi\xE9","Jue","Vie","S\xE1b"];constructor(){}ngOnInit(){this.generarCalendario()}ngOnChanges(){this.generarCalendario()}generarCalendario(){this.diasCalendario=[];let t=new Date(this.mesActual.getFullYear(),this.mesActual.getMonth(),1),e=new Date(this.mesActual.getFullYear(),this.mesActual.getMonth()+1,0),i=t.getDay();for(let o=i-1;o>=0;o--){let a=new Date(t);a.setDate(a.getDate()-(o+1)),this.diasCalendario.push({fecha:new Date(a),esMesActual:!1,rutinas:this.getRutinasDelDia(a)})}for(let o=1;o<=e.getDate();o++){let a=new Date(this.mesActual.getFullYear(),this.mesActual.getMonth(),o);this.diasCalendario.push({fecha:new Date(a),esMesActual:!0,rutinas:this.getRutinasDelDia(a)})}let r=42-this.diasCalendario.length;for(let o=1;o<=r;o++){let a=new Date(e);a.setDate(a.getDate()+o),this.diasCalendario.push({fecha:new Date(a),esMesActual:!1,rutinas:this.getRutinasDelDia(a)})}}getRutinasDelDia(t){let e=[],i=this.formatDateForComparison(t);return this.rutinas.forEach(r=>{let o=new Date(r.fecha_inicio_programada),a=new Date(r.fecha_fin_programada),c=t>=o&&t<=a;this.formatDateForComparison(o)===i&&e.push({seguimiento:r,tipoEvento:"inicio",enRango:!0}),this.formatDateForComparison(a)===i&&e.push({seguimiento:r,tipoEvento:"fin",enRango:!0}),c&&this.formatDateForComparison(o)!==i&&this.formatDateForComparison(a)!==i&&e.push({seguimiento:r,tipoEvento:"progreso",enRango:!0})}),e}formatDateForComparison(t){return t.toISOString().split("T")[0]}mesAnterior(){this.mesActual=new Date(this.mesActual.getFullYear(),this.mesActual.getMonth()-1,1),this.generarCalendario()}mesSiguiente(){this.mesActual=new Date(this.mesActual.getFullYear(),this.mesActual.getMonth()+1,1),this.generarCalendario()}irAHoy(){this.mesActual=new Date,this.generarCalendario()}onVolverAVista(){this.volverAVista.emit()}onClickRutina(t){this.abrirModalRutina(t.seguimiento)}abrirModalRutina(t){this.selectedSeguimiento=t,this.selectedRutina=t.rutina_completa||null,this.showViewModal=!0}closeViewModal(){this.showViewModal=!1,this.selectedRutina=null,this.selectedSeguimiento=null,this.copySuccess=!1}esHoy(t){let e=new Date;return t.toDateString()===e.toDateString()}getColorByEstado(t){switch(t){case"vigente":return"bg-green-500";case"pendiente":return"bg-blue-500";case"vencida":return"bg-red-500";default:return"bg-gray-500"}}getColorByTipo(t){switch(t){case"inicio":return"border-green-500 bg-green-100";case"fin":return"border-red-500 bg-red-100";case"progreso":return"border-blue-500 bg-blue-100";default:return"border-gray-500 bg-gray-100"}}formatDate(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return"Fecha inv\xE1lida"}}getFormattedRutina(t,e){if(!t)return"";let i=`${t.nombre}
`;return i+=`${t.descripcion||"Rutina de entrenamiento"}
`,i+=`Nivel: ${t.nivel} | Duraci\xF3n: ${this.formatDuracion(t.duracion_estimada)}
`,e&&(i+=`Progreso: ${e.progreso}% | Estado: ${e.estado_individual}
`,i+=`Per\xEDodo: ${this.formatDate(e.fecha_inicio_programada)} - ${this.formatDate(e.fecha_fin_programada)}
`,e.estado_temporal==="vigente"&&(i+=`D\xEDas restantes: ${e.dias_restantes}
`)),i+=`
`,i}formatDuracion(t){if(!t)return"N/A";let e=Math.floor(t/60),i=t%60;return e>0?`${e}h ${i}m`:`${i}m`}copyToClipboard(t){return v(this,null,function*(){try{yield navigator.clipboard.writeText(t),this.copySuccess=!0,setTimeout(()=>this.copySuccess=!1,2e3)}catch(e){console.error("Error al copiar:",e)}})}exportarRutina(t,e){let i=this.getFormattedRutina(t,e),r=new Blob([i],{type:"text/plain;charset=utf-8"}),o=window.URL.createObjectURL(r),a=document.createElement("a");a.href=o,a.download=`${t.nombre.replace(/\s+/g,"_")}_calendario.txt`,a.click(),window.URL.revokeObjectURL(o)}getFileName(){return!this.selectedRutina||!this.selectedRutina.nombre?"rutina_calendario.txt":this.selectedRutina.nombre.replace(/\s+/g,"_")+"_calendario.txt"}trackByDate(t,e){return e.fecha.getTime()}trackByRutina(t,e){return e.seguimiento.seguimiento_id}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ie({type:n,selectors:[["app-calendario-rutinas"]],inputs:{rutinas:"rutinas"},outputs:{volverAVista:"volverAVista",abrirRutina:"abrirRutina"},standalone:!1,features:[Ht],decls:48,vars:7,consts:[[1,"max-w-7xl","mx-auto"],[1,"bg-white","rounded-lg","shadow","mb-6"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],[1,"flex","items-center","space-x-4"],[1,"p-2","rounded-full","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","font-semibold","text-gray-900","min-w-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"inline-flex","items-center","px-3","py-2","border","border-red-300","rounded-md","shadow-sm","text-sm","font-medium","text-red-700","bg-red-50","hover:bg-red-100","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],[1,"px-6","py-3","bg-gray-50"],[1,"flex","flex-wrap","items-center","gap-4","text-sm"],[1,"flex","items-center"],[1,"w-3","h-3","bg-green-500","rounded-full","mr-2"],[1,"text-gray-700"],[1,"w-3","h-3","bg-blue-500","rounded-full","mr-2"],[1,"w-3","h-3","bg-red-500","rounded-full","mr-2"],[1,"w-3","h-3","border-2","border-green-500","bg-green-100","rounded","mr-2"],[1,"w-3","h-3","border-2","border-red-500","bg-red-100","rounded","mr-2"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"grid","grid-cols-7","gap-0","bg-gray-50","border-b","border-gray-200"],["class","px-4 py-3 text-center text-sm font-medium text-gray-700 border-r border-gray-200 last:border-r-0",4,"ngFor","ngForOf"],[1,"grid","grid-cols-7","gap-0"],["class","min-h-32 border-r border-b border-gray-200 last:border-r-0 p-2 relative",3,"bg-gray-50","bg-blue-50",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-12",4,"ngIf"],["class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[1,"px-4","py-3","text-center","text-sm","font-medium","text-gray-700","border-r","border-gray-200","last:border-r-0"],[1,"min-h-32","border-r","border-b","border-gray-200","last:border-r-0","p-2","relative"],[1,"flex","justify-between","items-start","mb-1"],[1,"text-sm","font-medium"],["class","w-2 h-2 bg-blue-600 rounded-full",4,"ngIf"],[1,"space-y-1"],["class","text-xs p-1 rounded border cursor-pointer hover:shadow-sm transition-all duration-150",3,"ngClass","title","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-xs text-gray-500 mt-1 text-center",4,"ngIf"],[1,"w-2","h-2","bg-blue-600","rounded-full"],[1,"text-xs","p-1","rounded","border","cursor-pointer","hover:shadow-sm","transition-all","duration-150",3,"click","ngClass","title"],[1,"truncate","flex-1","font-medium"],[1,"w-2","h-2","rounded-full","ml-1","flex-shrink-0",3,"ngClass"],[1,"text-gray-600","mt-1"],["class","text-green-700",4,"ngIf"],["class","text-red-700",4,"ngIf"],["class","text-blue-700",4,"ngIf"],[1,"text-green-700"],[1,"text-red-700"],[1,"text-blue-700"],[1,"text-xs","text-gray-500","mt-1","text-center"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3a2 2 0 012-2h8a2 2 0 012 2v4m-4 0V3m-4 4h8m-8 0H6a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V9a2 2 0 00-2-2h-2"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-center","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-5xl","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-blue-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-blue-600"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","w-full"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"mt-2"],[1,"text-sm","text-gray-500"],[1,"bg-white","px-4","pb-4","sm:px-6"],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","text-sm"],[1,"font-medium","text-gray-700"],[1,"text-gray-900","flex","items-center"],[1,"w-16","bg-gray-200","rounded-full","h-2","mr-2"],[1,"bg-blue-600","h-2","rounded-full"],[1,"text-gray-900"],[1,"bg-gray-900","text-green-400","rounded-lg","p-6","font-mono","text-sm","overflow-auto","max-h-96","relative",2,"font-family","'Courier New', monospace","line-height","1.6"],[1,"absolute","inset-15","flex","items-center","justify-center","pointer-events-none","opacity-25"],["src","/rh.png","alt","RehabiMovement",1,"max-w-50","max-h-50","object-contain","transform","rotate-12","select-none"],[1,"flex","items-center","justify-between","mb-4","pb-2","border-b","border-gray-700","relative","z-10"],[1,"flex","space-x-2"],[1,"w-3","h-3","bg-red-500","rounded-full"],[1,"w-3","h-3","bg-yellow-500","rounded-full"],[1,"w-3","h-3","bg-green-500","rounded-full"],[1,"text-gray-400","text-xs"],[1,"whitespace-pre-wrap","text-white","relative","z-10"],["class","mt-4 bg-green-50 border border-green-200 rounded-md p-3",4,"ngIf"],[1,"mt-4","flex","justify-between"],[1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],["class","inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",3,"click",4,"ngIf"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","sm:w-auto","sm:text-sm",3,"click"],[1,"mt-4","bg-green-50","border","border-green-200","rounded-md","p-3"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-green-700"],[1,"inline-flex","items-center","px-3","py-2","border","border-transparent","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),x("click",function(){return i.onVolverAVista()}),I(),s(5,"svg",5),b(6,"path",6),l(),d(7," Volver a tarjetas "),l(),T(),s(8,"div",7)(9,"button",8),x("click",function(){return i.mesAnterior()}),I(),s(10,"svg",9),b(11,"path",10),l()(),T(),s(12,"h2",11),d(13),l(),s(14,"button",8),x("click",function(){return i.mesSiguiente()}),I(),s(15,"svg",9),b(16,"path",12),l()()(),T(),s(17,"button",13),x("click",function(){return i.irAHoy()}),d(18," Hoy "),l()()(),s(19,"div",14)(20,"div",15)(21,"div",16),b(22,"div",17),s(23,"span",18),d(24,"Rutinas Vigentes"),l()(),s(25,"div",16),b(26,"div",19),s(27,"span",18),d(28,"Rutinas Pendientes"),l()(),s(29,"div",16),b(30,"div",20),s(31,"span",18),d(32,"Rutinas Vencidas"),l()(),s(33,"div",16),b(34,"div",21),s(35,"span",18),d(36,"Inicio"),l()(),s(37,"div",16),b(38,"div",22),s(39,"span",18),d(40,"Fin"),l()()()()(),s(41,"div",23)(42,"div",24),w(43,O5,2,1,"div",25),l(),s(44,"div",26),w(45,L5,8,17,"div",27),l()(),w(46,U5,7,0,"div",28),l(),w(47,q5,64,19,"div",29)),e&2&&(u(13),be(" ",i.meses[i.mesActual.getMonth()]," ",i.mesActual.getFullYear()," "),u(30),g("ngForOf",i.diasSemana),u(2),g("ngForOf",i.diasCalendario)("ngForTrackBy",i.trackByDate),u(),g("ngIf",i.rutinas.length===0),u(),g("ngIf",i.showViewModal))},dependencies:[He,ve,le],styles:[".calendar-transition[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.calendar-cell[_ngcontent-%COMP%]{min-height:120px;transition:all .2s ease-in-out}.calendar-cell[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.rutina-item[_ngcontent-%COMP%]{transition:all .15s ease-in-out;transform:scale(1)}.rutina-item[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 2px 8px #0000001a}.evento-inicio[_ngcontent-%COMP%]{border-left:4px solid #10b981;background:linear-gradient(90deg,#d1fae5,#ecfdf5)}.evento-fin[_ngcontent-%COMP%]{border-left:4px solid #ef4444;background:linear-gradient(90deg,#fee2e2,#fef2f2)}.evento-progreso[_ngcontent-%COMP%]{border-left:4px solid #3b82f6;background:linear-gradient(90deg,#dbeafe,#eff6ff)}.dia-actual[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dbeafe,#bfdbfe);border:2px solid #3b82f6}.indicador-hoy[_ngcontent-%COMP%]{background:#3b82f6;box-shadow:0 0 0 2px #bfdbfe;animation:_ngcontent-%COMP%_pulse-blue 2s infinite}@keyframes _ngcontent-%COMP%_pulse-blue{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}.nav-button[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.nav-button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;transform:scale(1.05)}.modal-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.terminal[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1f2937,#111827);box-shadow:inset 0 0 20px #00000080,0 0 20px #0000004d}.terminal-header[_ngcontent-%COMP%]{background:linear-gradient(90deg,#374151,#4b5563)}.terminal-button[_ngcontent-%COMP%]{box-shadow:inset 0 1px #fff3,0 1px 2px #00000080}.terminal[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.terminal[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1f2937;border-radius:4px}.terminal[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4b5563;border-radius:4px}.terminal[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}.watermark[_ngcontent-%COMP%]{opacity:.1;filter:grayscale(100%) brightness(150%);-webkit-user-select:none;user-select:none;pointer-events:none}.rutina-entrada[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromLeft .3s ease-out}@keyframes _ngcontent-%COMP%_slideInFromLeft{0%{transform:translate(-10px);opacity:0}to{transform:translate(0);opacity:1}}@media (max-width: 768px){.calendar-cell[_ngcontent-%COMP%]{min-height:100px;font-size:.875rem}.rutina-item[_ngcontent-%COMP%]{padding:.25rem;font-size:.75rem}.nav-button[_ngcontent-%COMP%]{padding:.5rem}}@media (max-width: 640px){.calendar-cell[_ngcontent-%COMP%]{min-height:80px;padding:.25rem}.rutina-item[_ngcontent-%COMP%]{padding:.125rem;font-size:.625rem}}.leyenda-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.25rem .5rem;border-radius:.375rem;transition:background-color .2s ease-in-out}.leyenda-item[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.estado-vigente[_ngcontent-%COMP%]{background-color:#10b981;box-shadow:0 0 8px #10b9814d}.estado-pendiente[_ngcontent-%COMP%]{background-color:#3b82f6;box-shadow:0 0 8px #3b82f64d}.estado-vencida[_ngcontent-%COMP%]{background-color:#ef4444;box-shadow:0 0 8px #ef44444d}.mes-titulo[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.mes-titulo.changing[_ngcontent-%COMP%]{transform:scale(.95);opacity:.7}.loading-calendario[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInOut 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_fadeInOut{0%,to{opacity:.4}50%{opacity:.8}}"]})};var z5=(n,t,e,i)=>({"bg-gray-100 text-gray-800":n,"bg-yellow-100 text-yellow-800":t,"bg-green-100 text-green-800":e,"bg-red-100 text-red-800":i});function G5(n,t){if(n&1){let e=P();s(0,"div")(1,"app-calendario-rutinas",17),x("volverAVista",function(){C(e);let r=h();return S(r.onVolverDeCalendario())})("abrirRutina",function(r){C(e);let o=h();return S(o.onAbrirRutinaDesdeCalendario(r))}),l()()}if(n&2){let e=h();u(),g("rutinas",e.filteredRutinas)}}function W5(n,t){if(n&1&&(s(0,"div",39)(1,"div",40),I(),s(2,"svg",41),b(3,"path",42),l(),T(),s(4,"div",43)(5,"p",44),d(6),l()()()()),n&2){let e=h(2);u(6),k(e.error)}}function Y5(n,t){n&1&&(s(0,"div",45),b(1,"div",46),l())}function Z5(n,t){if(n&1&&(s(0,"span",83),d(1),l()),n&2){let e=t.$implicit;u(),E(" #",e," ")}}function Q5(n,t){if(n&1&&(s(0,"div",56)(1,"div",81),w(2,Z5,2,1,"span",82),l()()),n&2){let e=h().$implicit;u(2),g("ngForOf",e.rutina_tags)}}function K5(n,t){if(n&1&&(s(0,"div"),d(1),l()),n&2){let e=h(2).$implicit,i=h(3);u(),E(" Iniciado: ",i.formatDate(e.fecha_inicio_real)," ")}}function J5(n,t){if(n&1&&(s(0,"div"),d(1),l()),n&2){let e=h(2).$implicit,i=h(3);u(),E(" Completado: ",i.formatDate(e.fecha_fin_real)," ")}}function X5(n,t){if(n&1&&(s(0,"div",84),w(1,K5,2,1,"div",15)(2,J5,2,1,"div",15),l()),n&2){let e=h().$implicit;u(),g("ngIf",e.fecha_inicio_real),u(),g("ngIf",e.fecha_fin_real)}}function eP(n,t){if(n&1&&(s(0,"div",85)(1,"p",86)(2,"strong"),d(3,"Mis notas:"),l(),d(4),l()()),n&2){let e=h().$implicit;u(4),E(" ",e.notas_individuales," ")}}function tP(n,t){if(n&1){let e=P();s(0,"div",49)(1,"div")(2,"div",50)(3,"div",51)(4,"h3",52),d(5),l(),s(6,"p",53),d(7),l()(),s(8,"span",54),d(9),l()()(),s(10,"div",55)(11,"div",56)(12,"div",57)(13,"span",58),d(14,"Mi Progreso"),l(),s(15,"span",59),d(16),l()(),s(17,"div",60),b(18,"div",61),l(),s(19,"div",62)(20,"input",63),x("input",function(r){let o=C(e).$implicit,a=h(3);return S(a.actualizarMiProgreso(o,+r.target.value))}),l()()(),s(21,"div",64)(22,"span",65),d(23),l(),s(24,"span",66),d(25),l()(),s(26,"div",67)(27,"div",68)(28,"span"),d(29,"Inicio:"),l(),s(30,"span"),d(31),l()(),s(32,"div",68)(33,"span"),d(34,"Fin:"),l(),s(35,"span"),d(36),l()(),s(37,"div",69)(38,"span"),d(39,"D\xEDas restantes:"),l(),s(40,"span"),d(41),l()()(),s(42,"div",64)(43,"span",70),d(44),l(),s(45,"span",66),d(46),l()(),w(47,Q5,3,1,"div",71)(48,X5,3,2,"div",72)(49,eP,5,1,"div",73),s(50,"div",74)(51,"button",75),x("click",function(){let r=C(e).$implicit,o=h(3);return S(o.openViewModal(r))}),I(),s(52,"svg",76),b(53,"path",77)(54,"path",78),l()(),T(),s(55,"button",79),x("click",function(){let r=C(e).$implicit,o=h(3);return S(o.safeExportRutina(r))}),I(),s(56,"svg",76),b(57,"path",80),l()()()()()}if(n&2){let e=t.$implicit,i=h(3);X("border-green-500",e.estado_temporal==="vigente")("border-blue-500",e.estado_temporal==="pendiente")("border-red-500",e.estado_temporal==="vencida"),u(),W("px-6 py-4 "+(e.estado_temporal==="vigente"?"bg-gradient-to-r from-green-500 to-green-600":e.estado_temporal==="pendiente"?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-red-500 to-red-600")),u(4),k(e.rutina_nombre),u(2),k(e.rutina_descripcion),u(2),E(" ",e.estado_temporal," "),u(7),E("",e.progreso,"%"),u(2),At("width",e.progreso,"%"),X("bg-gray-400",e.progreso===0)("bg-red-400",e.progreso>0&&e.progreso<30)("bg-yellow-400",e.progreso>=30&&e.progreso<70)("bg-green-400",e.progreso>=70),u(2),g("value",e.progreso),u(2),g("ngClass",Fn(40,z5,e.estado_individual==="pendiente",e.estado_individual==="en_progreso",e.estado_individual==="completada",e.estado_individual==="abandonada")),u(),E(" ",e.estado_individual," "),u(2),k(e.rutina_nivel),u(6),k(i.formatDate(e.fecha_inicio_programada)),u(5),k(i.formatDate(e.fecha_fin_programada)),u(),X("text-green-600",e.dias_restantes>7)("text-yellow-600",e.dias_restantes<=7&&e.dias_restantes>0)("text-red-600",e.dias_restantes<=0),u(4),k(e.dias_restantes>0?e.dias_restantes:"Vencida"),u(3),E(" ",e.rutina_tipo," "),u(2),k(i.formatDuracion(e.rutina_duracion)),u(),g("ngIf",e.rutina_tags&&e.rutina_tags.length>0),u(),g("ngIf",e.fecha_inicio_real||e.fecha_fin_real),u(),g("ngIf",e.notas_individuales)}}function nP(n,t){if(n&1&&(s(0,"div",47),w(1,tP,58,45,"div",48),l()),n&2){let e=h(2);u(),g("ngForOf",e.filteredRutinas)("ngForTrackBy",e.trackByRutinaId)}}function iP(n,t){n&1&&(gt(0),d(1," No tienes rutinas asignadas en este momento. "),ht())}function rP(n,t){n&1&&d(0," No se encontraron rutinas con los filtros aplicados. ")}function oP(n,t){if(n&1){let e=P();s(0,"button",95),x("click",function(){C(e);let r=h(3);return S(r.clearFilters())}),d(1," Limpiar filtros "),l()}}function aP(n,t){if(n&1&&(s(0,"div",87),I(),s(1,"svg",88),b(2,"path",89),l(),T(),s(3,"h3",90),d(4,"No hay rutinas asignadas"),l(),s(5,"p",91),w(6,iP,2,0,"ng-container",92)(7,rP,1,0,"ng-template",null,0,Nn),l(),s(9,"div",93),w(10,oP,2,0,"button",94),l()()),n&2){let e=Rn(8),i=h(2);u(6),g("ngIf",i.misRutinas.length===0)("ngIfElse",e),u(4),g("ngIf",i.misRutinas.length>0)}}function sP(n,t){if(n&1){let e=P();s(0,"div")(1,"div",18)(2,"div",19)(3,"div",20)(4,"label",21),d(5,"Buscar"),l(),s(6,"input",22),F("ngModelChange",function(r){C(e);let o=h();return N(o.searchTerm,r)||(o.searchTerm=r),S(r)}),x("input",function(){C(e);let r=h();return S(r.onSearch())}),l()(),s(7,"div")(8,"label",21),d(9,"Per\xEDodo"),l(),s(10,"select",23),F("ngModelChange",function(r){C(e);let o=h();return N(o.estadoFilter,r)||(o.estadoFilter=r),S(r)}),x("change",function(){C(e);let r=h();return S(r.onFilterChange())}),s(11,"option",24),d(12,"Todos"),l(),s(13,"option",25),d(14,"Vigentes"),l(),s(15,"option",26),d(16,"Pendientes"),l(),s(17,"option",27),d(18,"Vencidas"),l()()(),s(19,"div")(20,"label",21),d(21,"Mi Estado"),l(),s(22,"select",23),F("ngModelChange",function(r){C(e);let o=h();return N(o.estadoIndividualFilter,r)||(o.estadoIndividualFilter=r),S(r)}),x("change",function(){C(e);let r=h();return S(r.onFilterChange())}),s(23,"option",24),d(24,"Todos"),l(),s(25,"option",26),d(26,"Pendiente"),l(),s(27,"option",28),d(28,"En Progreso"),l(),s(29,"option",29),d(30,"Completada"),l(),s(31,"option",30),d(32,"Abandonada"),l()()(),s(33,"div")(34,"label",21),d(35,"Progreso"),l(),s(36,"select",23),F("ngModelChange",function(r){C(e);let o=h();return N(o.progresoFilter,r)||(o.progresoFilter=r),S(r)}),x("change",function(){C(e);let r=h();return S(r.onFilterChange())}),s(37,"option",24),d(38,"Todos"),l(),s(39,"option",31),d(40,"Sin Iniciar (0%)"),l(),s(41,"option",28),d(42,"En Progreso (1-99%)"),l(),s(43,"option",32),d(44,"Completado (100%)"),l()()()(),s(45,"div",33)(46,"button",34),x("click",function(){C(e);let r=h();return S(r.clearFilters())}),d(47," Limpiar filtros "),l()()(),w(48,W5,7,1,"div",35)(49,Y5,2,0,"div",36)(50,nP,2,2,"div",37)(51,aP,11,3,"div",38),l()}if(n&2){let e=h();u(6),R("ngModel",e.searchTerm),u(4),R("ngModel",e.estadoFilter),u(12),R("ngModel",e.estadoIndividualFilter),u(14),R("ngModel",e.progresoFilter),u(12),g("ngIf",e.error&&!e.showViewModal),u(),g("ngIf",e.loading),u(),g("ngIf",!e.loading),u(),g("ngIf",!e.loading&&e.filteredRutinas.length===0)}}function lP(n,t){n&1&&(s(0,"div",133)(1,"div",40),I(),s(2,"svg",134),b(3,"path",135),l(),T(),s(4,"div",43)(5,"p",136),d(6,"\xA1Rutina copiada al portapapeles!"),l()()()())}function cP(n,t){if(n&1){let e=P();s(0,"button",137),x("click",function(){C(e);let r=h(2);return S(r.exportarRutina(r.selectedRutina,r.selectedSeguimiento||void 0))}),I(),s(1,"svg",128),b(2,"path",80),l(),d(3," Descargar "),l()}}function dP(n,t){if(n&1){let e=P();s(0,"div",96)(1,"div",97)(2,"div",98),x("click",function(){C(e);let r=h();return S(r.closeViewModal())}),l(),s(3,"span",99),d(4,"\u200B"),l(),s(5,"div",100)(6,"div",101)(7,"div",102)(8,"div",103),I(),s(9,"svg",104),b(10,"path",77)(11,"path",78),l()(),T(),s(12,"div",105)(13,"h3",106),d(14),l(),s(15,"div",107)(16,"p",66),d(17),l()()()()(),s(18,"div",108)(19,"div",109)(20,"div",110)(21,"div")(22,"span",111),d(23,"Mi Progreso:"),l(),s(24,"div",112)(25,"div",113),b(26,"div",114),l(),d(27),l()(),s(28,"div")(29,"span",111),d(30,"Estado:"),l(),s(31,"div",115),d(32),l()(),s(33,"div")(34,"span",111),d(35,"Per\xEDodo:"),l(),s(36,"div",115),d(37),l()(),s(38,"div")(39,"span",111),d(40,"D\xEDas restantes:"),l(),s(41,"div",115),d(42),l()()()(),s(43,"div",116)(44,"div",117),b(45,"img",118),l(),s(46,"div",119)(47,"div",6),b(48,"div",120)(49,"div",121)(50,"div",122),l(),s(51,"div",123),d(52),l()(),s(53,"pre",124),d(54),l()(),w(55,lP,7,0,"div",125),s(56,"div",126)(57,"button",127),x("click",function(){C(e);let r=h();return S(r.copyToClipboard(r.getFormattedRutina(r.selectedRutina,r.selectedSeguimiento||void 0)))}),I(),s(58,"svg",128),b(59,"path",129),l(),d(60," Copiar "),l(),w(61,cP,4,0,"button",130),l()(),T(),s(62,"div",131)(63,"button",132),x("click",function(){C(e);let r=h();return S(r.closeViewModal())}),d(64," Cerrar "),l()()()()()}if(n&2){let e=h();u(14),E(" ",e.selectedRutina==null?null:e.selectedRutina.nombre," "),u(3),E(" Mi rutina asignada - Progreso: ",e.selectedSeguimiento==null?null:e.selectedSeguimiento.progreso,"% "),u(9),At("width",e.selectedSeguimiento==null?null:e.selectedSeguimiento.progreso,"%"),u(),E(" ",e.selectedSeguimiento==null?null:e.selectedSeguimiento.progreso,"% "),u(5),k(e.selectedSeguimiento==null?null:e.selectedSeguimiento.estado_individual),u(5),be(" ",e.formatDate(e.selectedSeguimiento==null?null:e.selectedSeguimiento.fecha_inicio_programada)," - ",e.formatDate(e.selectedSeguimiento==null?null:e.selectedSeguimiento.fecha_fin_programada)," "),u(4),X("text-green-600",((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)>7)("text-yellow-600",((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)<=7&&((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)>0)("text-red-600",((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)<=0),u(),E(" ",((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)>0?e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes:"Vencida"," "),u(10),E(" ",e.getFileName(e.selectedRutina)," "),u(2),k(e.getFormattedRutina(e.selectedRutina,e.selectedSeguimiento||void 0)),u(),g("ngIf",e.copySuccess),u(6),g("ngIf",e.selectedRutina)}}var Kd=class n{constructor(t,e,i){this.supabaseService=t;this.authService=e;this.simpleRutinasService=i}vistaActual="tarjetas";misRutinas=[];filteredRutinas=[];estadisticasPersonales;loading=!1;error="";showViewModal=!1;selectedRutina=null;selectedSeguimiento=null;copySuccess=!1;searchTerm="";estadoFilter="all";estadoIndividualFilter="all";progresoFilter="all";seccionesDisponibles=[{key:"warm_up",nombre:"Warm Up",descripcion:"Calentamiento"},{key:"met_con",nombre:"Met-Con",descripcion:"Metabolic Conditioning"},{key:"strength",nombre:"Strength",descripcion:"Entrenamiento de Fuerza"},{key:"core",nombre:"Core",descripcion:"Trabajo de Core"},{key:"extra",nombre:"Extra",descripcion:"Trabajo Adicional"}];ngOnInit(){return v(this,null,function*(){yield Promise.all([this.loadMisRutinas(),this.loadEstadisticasPersonales()])})}cambiarVista(t){console.log("Cambiando vista a:",t),this.vistaActual=t}get mostrarVistaTarjetas(){return this.vistaActual==="tarjetas"}get mostrarVistaCalendario(){return this.vistaActual==="calendario"}onVolverDeCalendario(){this.cambiarVista("tarjetas")}onAbrirRutinaDesdeCalendario(t){this.openViewModal(t)}loadMisRutinas(){return v(this,null,function*(){this.loading=!0,this.error="";try{console.log("Cargando rutinas asignadas al usuario...");let t=yield this.simpleRutinasService.getRutinasUsuarioSimple();this.misRutinas=t.map(e=>{let i=e.rutina_asignaciones_masivas,r=e.rutinas,{estado:o,diasRestantes:a}=this.simpleRutinasService.calcularEstadoTemporal(i.fecha_inicio,i.fecha_fin);return{seguimiento_id:e.id,asignacion_id:e.id_asignacion_masiva,id_profile:e.id_profile,username:this.authService.getCurrentUser()?.username||"",full_name:this.authService.getCurrentUser()?.full_name||"",rutina_nombre:r.nombre,rutina_id:r.id,rutina_descripcion:r.descripcion,rutina_tipo:r.tipo,rutina_nivel:r.nivel,rutina_duracion:r.duracion_estimada,rutina_tags:r.tags,rutina_completa:r,progreso:e.progreso,estado_individual:e.estado_individual,fecha_inicio_real:e.fecha_inicio_real,fecha_fin_real:e.fecha_fin_real,fecha_inicio_programada:i.fecha_inicio,fecha_fin_programada:i.fecha_fin,notas_individuales:e.notas_individuales,estado_temporal:o,dias_restantes:a}}),this.filteredRutinas=[...this.misRutinas],this.applyFilters(),console.log("Mis rutinas cargadas:",this.misRutinas.length)}catch(t){console.error("Error cargando mis rutinas:",t),this.error="Error al cargar tus rutinas asignadas",this.misRutinas=[],this.filteredRutinas=[]}finally{this.loading=!1}})}loadEstadisticasPersonales(){return v(this,null,function*(){try{if(this.misRutinas.length===0)return;let t=this.misRutinas.length,e=this.misRutinas.filter(f=>f.estado_temporal==="vigente").length,i=this.misRutinas.filter(f=>f.estado_individual==="completada").length,r=this.misRutinas.filter(f=>f.estado_individual==="en_progreso").length,o=this.misRutinas.filter(f=>f.estado_individual==="pendiente").length,a=this.misRutinas.filter(f=>f.estado_temporal==="vencida").length,c=this.misRutinas.reduce((f,m)=>f+m.progreso,0),p=t>0?Math.round(c/t):0;this.estadisticasPersonales={total_rutinas_asignadas:t,rutinas_vigentes:e,rutinas_completadas:i,rutinas_en_progreso:r,rutinas_pendientes:o,rutinas_vencidas:a,progreso_promedio:p,racha_actual:0,mejor_racha:0}}catch(t){console.error("Error calculando estad\xEDsticas personales:",t)}})}applyFilters(){let t=[...this.misRutinas];if(this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.rutina_nombre.toLowerCase().includes(e)||i.rutina_descripcion?.toLowerCase().includes(e)||i.rutina_tags?.some(r=>r.toLowerCase().includes(e)))}if(this.estadoFilter!=="all"&&(t=t.filter(e=>e.estado_temporal===this.estadoFilter)),this.estadoIndividualFilter!=="all"&&(t=t.filter(e=>e.estado_individual===this.estadoIndividualFilter)),this.progresoFilter!=="all")switch(this.progresoFilter){case"sin_iniciar":t=t.filter(e=>e.progreso===0);break;case"en_progreso":t=t.filter(e=>e.progreso>0&&e.progreso<100);break;case"completado":t=t.filter(e=>e.progreso===100);break}this.filteredRutinas=t}openViewModal(t){return v(this,null,function*(){if(console.log("Abriendo modal para ver rutina:",t.rutina_nombre),this.selectedSeguimiento=t,t.rutina_completa)this.selectedRutina=t.rutina_completa;else try{let{data:e,error:i}=yield this.supabaseService.client.from("rutinas").select("*").eq("id",t.rutina_id).single();if(i)throw i;this.selectedRutina=e}catch(e){console.error("Error cargando rutina completa:",e),this.error="Error al cargar los detalles de la rutina";return}this.showViewModal=!0})}closeViewModal(){console.log("Cerrando modal de vista"),this.showViewModal=!1,this.selectedRutina=null,this.selectedSeguimiento=null,this.copySuccess=!1}actualizarMiProgreso(t,e){return v(this,null,function*(){try{(yield this.simpleRutinasService.actualizarProgresoSimple(t.seguimiento_id,e))&&(t.progreso=e,e===0?t.estado_individual="pendiente":e<100?(t.estado_individual="en_progreso",t.fecha_inicio_real||(t.fecha_inicio_real=new Date().toISOString().split("T")[0])):(t.estado_individual="completada",t.fecha_fin_real=new Date().toISOString().split("T")[0]),yield this.loadEstadisticasPersonales())}catch(i){console.error("Error actualizando progreso:",i),this.error="Error al actualizar el progreso",setTimeout(()=>this.error="",5e3)}})}getSeccionData(t,e){return t[e]}getSeccionesConEjercicios(t){let e=[];return this.seccionesDisponibles.forEach(i=>{let r=this.getSeccionData(t,i.key);r&&r.ejercicios&&r.ejercicios.length>0&&e.push({key:i.key,nombre:i.nombre,seccion:r})}),e}formatDuracion(t){if(!t)return"N/A";let e=Math.floor(t/60),i=t%60;return e>0?`${e}h ${i}m`:`${i}m`}getTotalEjercicios(t){let e=0;return this.seccionesDisponibles.forEach(i=>{let r=this.getSeccionData(t,i.key);r&&r.ejercicios&&(e+=r.ejercicios.length)}),e}getFormattedRutina(t,e){if(!t)return"";let i=`${t.nombre}
`;return i+=`${t.descripcion||"Rutina de entrenamiento"}
`,i+=`Nivel: ${t.nivel} | Duraci\xF3n: ${this.formatDuracion(t.duracion_estimada)}
`,e&&(i+=`Progreso: ${e.progreso}% | Estado: ${e.estado_individual}
`,i+=`Per\xEDodo: ${this.formatDate(e.fecha_inicio_programada)} - ${this.formatDate(e.fecha_fin_programada)}
`,e.estado_temporal==="vigente"&&(i+=`D\xEDas restantes: ${e.dias_restantes}
`)),i+=`
`,["warm_up","met_con","strength","core","extra"].forEach(o=>{let a=this.seccionesDisponibles.find(p=>p.key===o),c=this.getSeccionData(t,o);if(c&&c.ejercicios&&c.ejercicios.length>0&&a){i+=`${a.nombre.toUpperCase()}
`,c.descripcion&&(i+=`${c.descripcion}
`);let p=[];c.tiempo_total&&p.push(`Tiempo: ${c.tiempo_total}`),c.series&&p.push(`Series: ${c.series}`),c.time_cap&&p.push(`Time Cap: ${c.time_cap}`),p.length>0&&(i+=`${p.join(" | ")}
`),c.ejercicios.forEach(f=>{let m=f.nombre,_=[];f.repeticiones&&_.push(`${f.repeticiones} reps`),f.series&&_.push(`x ${f.series}`),f.duracion&&_.push(`${f.duracion}`),f.distancia&&_.push(`${f.distancia}`),f.peso&&_.push(`${f.peso}`),_.length>0&&(m+=` - ${_.join(" ")}`),f.rpe&&(m+=` (RPE ${f.rpe})`),f.observaciones&&(m+=` - ${f.observaciones}`),i+=`${m}
`}),i+=`
`}}),t.tags&&t.tags.length>0&&(i+=`Tags: ${t.tags.map(o=>`#${o}`).join(" ")}
`),i}copyToClipboard(t){return v(this,null,function*(){try{yield navigator.clipboard.writeText(t),this.copySuccess=!0,console.log("Texto copiado al portapapeles"),setTimeout(()=>{this.copySuccess=!1},2e3)}catch(e){console.error("Error al copiar al portapapeles:",e),this.fallbackCopyTextToClipboard(t)}})}fallbackCopyTextToClipboard(t){let e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")&&(this.copySuccess=!0,setTimeout(()=>{this.copySuccess=!1},2e3))}catch(i){console.error("Fallback: Error al copiar al portapapeles:",i)}document.body.removeChild(e)}safeExportRutina(t){let e=t.rutina_completa||this.selectedRutina;e?this.exportarRutina(e,t):console.warn("No hay rutina disponible para exportar")}safeCopyToClipboard(t){let e=t.rutina_completa||this.selectedRutina;if(e){let i=this.getFormattedRutina(e,t);this.copyToClipboard(i)}else console.warn("No hay rutina disponible para copiar")}exportarRutina(t,e){if(!t){console.warn("No hay rutina para exportar");return}let i=this.getFormattedRutina(t,e);if(!i){console.warn("No se pudo generar el contenido para exportar");return}let r=new Blob([i],{type:"text/plain;charset=utf-8"}),o=window.URL.createObjectURL(r),a=document.createElement("a");a.href=o,a.download=`${t.nombre.replace(/\s+/g,"_")}_mi_rutina.txt`,a.click(),window.URL.revokeObjectURL(o),console.log("Mi rutina exportada:",t.nombre)}onSearch(){this.applyFilters()}onFilterChange(){this.applyFilters()}clearFilters(){this.searchTerm="",this.estadoFilter="all",this.estadoIndividualFilter="all",this.progresoFilter="all",this.applyFilters()}refreshMisRutinas(){return v(this,null,function*(){yield Promise.all([this.loadMisRutinas(),this.loadEstadisticasPersonales()])})}getEstadoTemporalColor(t){switch(t){case"vigente":return"green";case"pendiente":return"blue";case"vencida":return"red";default:return"gray"}}getEstadoIndividualColor(t){switch(t){case"pendiente":return"gray";case"en_progreso":return"yellow";case"completada":return"green";case"abandonada":return"red";default:return"gray"}}getProgresoColor(t){return t===0?"gray":t<30?"red":t<70?"yellow":"green"}formatDate(t){if(!t)return"N/A";try{return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return"Fecha inv\xE1lida"}}getFileName(t){return!t||!t.nombre?"mi_rutina.txt":t.nombre.replace(/\s+/g,"_")+"_mi_rutina.txt"}trackByRutinaId(t,e){return e.seguimiento_id||t}static \u0275fac=function(e){return new(e||n)(O(me),O(re),O(Zd))};static \u0275cmp=ie({type:n,selectors:[["app-mis-rutinas"]],standalone:!1,decls:25,vars:20,consts:[["filtrosAplicados",""],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"flex","space-x-2"],[1,"flex","bg-gray-100","rounded-lg","p-1"],[1,"px-3","py-2","rounded-md","text-sm","font-medium","transition-colors","duration-150",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-1","inline"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3a2 2 0 012-2h8a2 2 0 012 2v4m-4 0V3m-4 4h8m-8 0H6a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V9a2 2 0 00-2-2h-2"],["title","Refrescar lista",1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[4,"ngIf"],["class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[3,"volverAVista","abrirRutina","rutinas"],[1,"bg-white","rounded-lg","shadow","mb-6","p-6"],[1,"grid","grid-cols-1","md:grid-cols-5","gap-4"],[1,"md:col-span-2"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","placeholder","Buscar rutinas...",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","input","ngModel"],[1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","change","ngModel"],["value","all"],["value","vigente"],["value","pendiente"],["value","vencida"],["value","en_progreso"],["value","completada"],["value","abandonada"],["value","sin_iniciar"],["value","completado"],[1,"mt-4","flex","justify-end"],[1,"text-sm","text-red-600","hover:text-red-800",3,"click"],["class","bg-red-50 border border-red-200 rounded-md p-4 mb-6",4,"ngIf"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],["class","text-center py-12",4,"ngIf"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-6"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-red-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 border-l-4",3,"border-green-500","border-blue-500","border-red-500",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","rounded-lg","shadow-lg","overflow-hidden","hover:shadow-xl","transition-shadow","duration-300","border-l-4"],[1,"flex","justify-between","items-start"],[1,"flex-1"],[1,"text-xl","font-bold","text-white"],[1,"text-white","text-opacity-90","text-sm"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-white","bg-opacity-20","text-white"],[1,"p-6"],[1,"mb-4"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-sm","font-bold","text-gray-900"],[1,"w-full","bg-gray-200","rounded-full","h-3"],[1,"h-3","rounded-full","transition-all","duration-300"],[1,"mt-3"],["type","range","min","0","max","100","step","5","title","Desliza para actualizar tu progreso",1,"w-full","h-2","bg-gray-200","rounded-lg","appearance-none","cursor-pointer","slider",3,"input","value"],[1,"flex","justify-between","items-center","mb-4"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-600","mb-4"],[1,"flex","justify-between"],[1,"flex","justify-between","font-medium"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-red-100","text-red-800"],["class","mb-4",4,"ngIf"],["class","text-xs text-gray-500 mb-4",4,"ngIf"],["class","mb-4 p-3 bg-gray-50 rounded-md",4,"ngIf"],[1,"flex","justify-end","space-x-2"],["title","Ver rutina completa",1,"text-blue-600","hover:text-blue-900","p-2","rounded-full","hover:bg-blue-50","transition-colors","duration-150",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["title","Descargar mi rutina",1,"text-green-600","hover:text-green-900","p-2","rounded-full","hover:bg-green-50","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"flex","flex-wrap","gap-1"],["class","inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","text-xs","font-medium","bg-blue-100","text-blue-800"],[1,"text-xs","text-gray-500","mb-4"],[1,"mb-4","p-3","bg-gray-50","rounded-md"],[1,"text-sm","text-gray-700"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[4,"ngIf","ngIfElse"],[1,"mt-6"],["class","inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","shadow-sm","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-center","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-5xl","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-blue-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-blue-600"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","w-full"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"mt-2"],[1,"bg-white","px-4","pb-4","sm:px-6"],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","text-sm"],[1,"font-medium","text-gray-700"],[1,"text-gray-900","flex","items-center"],[1,"w-16","bg-gray-200","rounded-full","h-2","mr-2"],[1,"bg-blue-600","h-2","rounded-full"],[1,"text-gray-900"],[1,"bg-gray-900","text-green-400","rounded-lg","p-6","font-mono","text-sm","overflow-auto","max-h-96","relative",2,"font-family","'Courier New', monospace","line-height","1.6"],[1,"absolute","inset-15","flex","items-center","justify-center","pointer-events-none","opacity-25"],["src","/rh.png","alt","RehabiMovement",1,"max-w-50","max-h-50","object-contain","transform","rotate-12","select-none"],[1,"flex","items-center","justify-between","mb-4","pb-2","border-b","border-gray-700","relative","z-10"],[1,"w-3","h-3","bg-red-500","rounded-full"],[1,"w-3","h-3","bg-yellow-500","rounded-full"],[1,"w-3","h-3","bg-green-500","rounded-full"],[1,"text-gray-400","text-xs"],[1,"whitespace-pre-wrap","text-white","relative","z-10"],["class","mt-4 bg-green-50 border border-green-200 rounded-md p-3",4,"ngIf"],[1,"mt-4","flex","justify-between"],[1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],["class","inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",3,"click",4,"ngIf"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","sm:w-auto","sm:text-sm",3,"click"],[1,"mt-4","bg-green-50","border","border-green-200","rounded-md","p-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-green-700"],[1,"inline-flex","items-center","px-3","py-2","border","border-transparent","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"]],template:function(e,i){e&1&&(s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h1",4),d(5,"Mis Rutinas Asignadas"),l(),s(6,"p",5),d(7),l()(),s(8,"div",6)(9,"div",7)(10,"button",8),x("click",function(){return i.cambiarVista("tarjetas")}),I(),s(11,"svg",9),b(12,"path",10),l(),d(13," Tarjetas "),l(),T(),s(14,"button",8),x("click",function(){return i.cambiarVista("calendario")}),I(),s(15,"svg",9),b(16,"path",11),l(),d(17," Calendario "),l()(),T(),s(18,"button",12),x("click",function(){return i.refreshMisRutinas()}),I(),s(19,"svg",13),b(20,"path",14),l(),d(21," Refrescar "),l()()()(),w(22,G5,2,1,"div",15)(23,sP,52,8,"div",15),l(),w(24,dP,65,19,"div",16)),e&2&&(u(7),E(" Rutinas que me han sido asignadas - Total: ",i.misRutinas.length," "),u(3),X("bg-white",i.mostrarVistaTarjetas)("text-gray-900",i.mostrarVistaTarjetas)("shadow-sm",i.mostrarVistaTarjetas)("text-gray-500",!i.mostrarVistaTarjetas),u(4),X("bg-white",i.mostrarVistaCalendario)("text-gray-900",i.mostrarVistaCalendario)("shadow-sm",i.mostrarVistaCalendario)("text-gray-500",!i.mostrarVistaCalendario),u(8),g("ngIf",i.mostrarVistaCalendario),u(),g("ngIf",i.mostrarVistaTarjetas),u(),g("ngIf",i.showViewModal))},dependencies:[He,ve,le,je,Le,we,Ae,Ie,Re,Qd],styles:[".slider[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:linear-gradient(to right,#ef4444,#f59e0b,#10b981);outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;background:#fff;border:2px solid #ef4444;cursor:pointer;box-shadow:0 2px 4px #0003}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:#fff;border:2px solid #ef4444;cursor:pointer;box-shadow:0 2px 4px #0003}.rutina-card[_ngcontent-%COMP%]{transition:all .3s ease}.rutina-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.rutina-card.vigente[_ngcontent-%COMP%]{border-left:4px solid #10b981}.rutina-card.pendiente[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.rutina-card.vencida[_ngcontent-%COMP%]{border-left:4px solid #ef4444}.progress-bar[_ngcontent-%COMP%]{transition:width .5s ease-in-out}.estado-vigente[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.estado-pendiente[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#2563eb)}.estado-vencida[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626)}@media (max-width: 768px){.grid-cols-3[_ngcontent-%COMP%], .md\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}}.terminal[_ngcontent-%COMP%]{font-family:Courier New,Monaco,Menlo,monospace;background-color:#1a1a1a;color:#0f0;border-radius:8px;padding:1rem;max-height:400px;overflow-y:auto}.terminal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid #333}.terminal-dots[_ngcontent-%COMP%]{display:flex;gap:.5rem}.terminal-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.terminal-dot.red[_ngcontent-%COMP%]{background-color:#ff5f56}.terminal-dot.yellow[_ngcontent-%COMP%]{background-color:#ffbd2e}.terminal-dot.green[_ngcontent-%COMP%]{background-color:#27ca3f}.terminal[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.terminal[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.terminal[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#555;border-radius:4px}.terminal[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#777}.action-button[_ngcontent-%COMP%]{transition:all .2s ease}.action-button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.badge-pendiente[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151}.badge-en-progreso[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.badge-completada[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.badge-abandonada[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}.progress-circle[_ngcontent-%COMP%]{transform:rotate(-90deg)}.progress-circle[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{fill:none;stroke-width:8;stroke-linecap:round}.progress-circle[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{stroke:#e5e7eb}.progress-circle[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{stroke:#10b981;stroke-dasharray:251.2;stroke-dashoffset:251.2;transition:stroke-dashoffset .5s ease}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.notas-box[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#e2e8f0);border-left:4px solid #3b82f6}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.dias-restantes-ok[_ngcontent-%COMP%]{color:#10b981;font-weight:600}.dias-restantes-warning[_ngcontent-%COMP%]{color:#f59e0b;font-weight:600}.dias-restantes-danger[_ngcontent-%COMP%]{color:#ef4444;font-weight:600}@media (min-width: 768px) and (max-width: 1024px){.grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}.modal-overlay[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-panel[_ngcontent-%COMP%]{max-height:90vh;overflow-y:auto}.tag[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .5rem;border-radius:.375rem;font-size:.75rem;font-weight:500;background-color:#dbeafe;color:#1e40af}.modal-panel[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.modal-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.modal-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.modal-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}"]})};var Ro=class n{constructor(t){this.supabaseService=t}getTerapias(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.from("terapias").select("*").eq("status",1).order("created_at",{ascending:!1});if(e)throw e;return t||[]}catch(t){throw console.error("Error al obtener terapias:",t),t}})}getTerapiaById(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("terapias").select("*").eq("id",t).eq("status",1).single();if(i)throw i;return e}catch(e){throw console.error("Error al obtener terapia:",e),e}})}createTerapia(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("terapias").insert([t]).select().single();if(i)throw i;return e}catch(e){throw console.error("Error al crear terapia:",e),e}})}updateTerapia(t,e){return v(this,null,function*(){try{let{data:i,error:r}=yield this.supabaseService.supabase.from("terapias").update(G(A({},e),{updated_at:new Date().toISOString()})).eq("id",t).select().single();if(r)throw r;return i}catch(i){throw console.error("Error al actualizar terapia:",i),i}})}deleteTerapia(t){return v(this,null,function*(){try{let{error:e}=yield this.supabaseService.supabase.from("terapias").update({status:0}).eq("id",t);if(e)throw e}catch(e){throw console.error("Error al eliminar terapia:",e),e}})}getTiposEjerciciosTerapeuticos(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.from("tipos_ejercicios_terapeuticos").select("*").eq("status",1).order("nombre");if(e)throw e;return t||[]}catch(t){throw console.error("Error al obtener tipos de ejercicios:",t),t}})}getInformacionMedicaUsuario(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("informacion_medica_usuarios").select("*").eq("usuario_id",t).single();if(i&&i.code!=="PGRST116")throw i;return e}catch(e){throw console.error("Error al obtener informaci\xF3n m\xE9dica:",e),e}})}createOrUpdateInformacionMedica(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("informacion_medica_usuarios").upsert(t,{onConflict:"usuario_id"}).select().single();if(i)throw i;return e}catch(e){throw console.error("Error al guardar informaci\xF3n m\xE9dica:",e),e}})}asignarTerapiaAUsuarios(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.rpc("asignar_terapia_a_usuarios",{p_id_terapia:t.id_terapia,p_usuarios_ids:t.usuarios_ids,p_asignado_por:yield this.getCurrentUserId(),p_fecha_inicio:t.fecha_inicio.toISOString().split("T")[0],p_fecha_fin:t.fecha_fin.toISOString().split("T")[0],p_terapeuta_responsable:t.terapeuta_responsable||null,p_sesiones_por_semana:t.sesiones_por_semana,p_duracion_sesion:t.duracion_sesion,p_tipo_asignacion:t.tipo_asignacion,p_notas:t.notas||null,p_objetivos_grupales:t.objetivos_grupales||null});if(i)throw i;return e}catch(e){throw console.error("Error al asignar terapia:",e),e}})}getTerapiasAsignadasUsuarios(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.from("v_terapias_asignadas_usuarios").select("*").order("fecha_asignacion",{ascending:!1});if(e)throw e;return t||[]}catch(t){throw console.error("Error al obtener terapias asignadas:",t),t}})}getTerapiasUsuario(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.rpc("get_terapias_usuario",{p_user_id:t});if(i)throw i;return e||[]}catch(e){throw console.error("Error al obtener terapias del usuario:",e),e}})}actualizarProgresoTerapia(t,e){return v(this,null,function*(){try{let{data:i,error:r}=yield this.supabaseService.supabase.rpc("actualizar_progreso_terapia",{p_seguimiento_id:t,p_progreso:e.progreso||null,p_estado_individual:e.estado_individual||null,p_sesiones_completadas:e.sesiones_completadas||null,p_adherencia_porcentaje:e.adherencia_porcentaje||null,p_nivel_dolor_actual:e.nivel_dolor_actual||null,p_nivel_funcionalidad_actual:e.nivel_funcionalidad_actual||null,p_notas_individuales:e.notas_individuales||null,p_objetivos_individuales:e.objetivos_individuales||null});if(r)throw r;return i}catch(i){throw console.error("Error al actualizar progreso:",i),i}})}registrarSesionTerapia(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.rpc("registrar_sesion_terapia",{p_seguimiento_id:t.seguimiento_id,p_numero_sesion:t.numero_sesion,p_fecha_sesion:t.fecha_sesion.toISOString().split("T")[0],p_estado_sesion:t.estado_sesion||"completada",p_hora_inicio:t.hora_inicio||null,p_hora_fin:t.hora_fin||null,p_terapeuta_id:t.terapeuta_id||null,p_ejercicios_realizados:t.ejercicios_realizados||null,p_dolor_inicio:t.dolor_inicio||null,p_dolor_fin:t.dolor_fin||null,p_nivel_fatiga:t.nivel_fatiga||null,p_nivel_esfuerzo:t.nivel_esfuerzo||null,p_adherencia_sesion:t.adherencia_sesion||null,p_observaciones_usuario:t.observaciones_usuario||null,p_observaciones_terapeuta:t.observaciones_terapeuta||null});if(i)throw i;return e}catch(e){throw console.error("Error al registrar sesi\xF3n:",e),e}})}getSesionesUsuario(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("terapia_registro_sesiones").select(`
          *,
          terapeuta:terapeuta_id(full_name)
        `).eq("id_seguimiento",t).order("numero_sesion");if(i)throw i;return e||[]}catch(e){throw console.error("Error al obtener sesiones:",e),e}})}getEstadisticasTerapias(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.rpc("get_estadisticas_terapias_asignadas");if(e)throw e;return t[0]||{total_asignaciones:0,asignaciones_activas:0,asignaciones_grupales:0,asignaciones_individuales:0,usuarios_con_terapias:0,terapias_mas_asignadas:0,promedio_progreso:0,promedio_adherencia:0,sesiones_totales_completadas:0,sesiones_totales_programadas:0}}catch(t){throw console.error("Error al obtener estad\xEDsticas:",t),t}})}getUsuarios(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.from("profiles").select("id, username, full_name, email, id_perfil").eq("status",1).order("full_name");if(e)throw e;return t||[]}catch(t){throw console.error("Error al obtener usuarios:",t),t}})}getTerapeutas(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.from("profiles").select("id, username, full_name, email").eq("id_perfil",3).eq("status",1).order("full_name");if(e)throw e;return t||[]}catch(t){throw console.error("Error al obtener terapeutas:",t),t}})}updatePerfilCompleto(t,e){return v(this,null,function*(){try{let i={full_name:e.full_name,username:e.username,email:e.email},{error:r}=yield this.supabaseService.supabase.from("profiles").update(i).eq("id",t);if(r)throw r;let o={usuario_id:t,fecha_nacimiento:e.fecha_nacimiento,genero:e.genero,telefono:e.telefono,direccion:e.direccion,diagnostico_principal:e.diagnostico_principal,diagnosticos_secundarios:e.diagnosticos_secundarios,historial_medico:e.historial_medico,medicamentos_actuales:e.medicamentos_actuales,alergias:e.alergias,limitaciones_fisicas:e.limitaciones_fisicas,observaciones_generales:e.observaciones_generales,contacto_emergencia_nombre:e.contacto_emergencia_nombre,contacto_emergencia_telefono:e.contacto_emergencia_telefono,contacto_emergencia_relacion:e.contacto_emergencia_relacion,peso:e.peso,altura:e.altura,imc:e.peso&&e.altura?e.peso/(e.altura/100)**2:void 0,nivel_dolor_inicial:e.nivel_dolor_inicial,nivel_funcionalidad_inicial:e.nivel_funcionalidad_inicial,objetivos_paciente:e.objetivos_paciente,updated_at:new Date().toISOString()};yield this.createOrUpdateInformacionMedica(o)}catch(i){throw console.error("Error al actualizar perfil completo:",i),i}})}getPerfilCompleto(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("profiles").select("username, full_name, email").eq("id",t).single();if(i)throw i;let r=yield this.getInformacionMedicaUsuario(t);return{username:e.username,full_name:e.full_name,email:e.email,fecha_nacimiento:r?.fecha_nacimiento,genero:r?.genero,telefono:r?.telefono,direccion:r?.direccion,diagnostico_principal:r?.diagnostico_principal,diagnosticos_secundarios:r?.diagnosticos_secundarios,historial_medico:r?.historial_medico,medicamentos_actuales:r?.medicamentos_actuales,alergias:r?.alergias,limitaciones_fisicas:r?.limitaciones_fisicas,observaciones_generales:r?.observaciones_generales,contacto_emergencia_nombre:r?.contacto_emergencia_nombre,contacto_emergencia_telefono:r?.contacto_emergencia_telefono,contacto_emergencia_relacion:r?.contacto_emergencia_relacion,peso:r?.peso,altura:r?.altura,nivel_dolor_inicial:r?.nivel_dolor_inicial,nivel_funcionalidad_inicial:r?.nivel_funcionalidad_inicial,objetivos_paciente:r?.objetivos_paciente}}catch(e){throw console.error("Error al obtener perfil completo:",e),e}})}getTerapiasByTipo(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("terapias").select("*").eq("tipo",t).eq("status",1).order("nombre");if(i)throw i;return e||[]}catch(e){throw console.error("Error al obtener terapias por tipo:",e),e}})}getTerapiasByArea(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("terapias").select("*").eq("area_especializacion",t).eq("status",1).order("nombre");if(i)throw i;return e||[]}catch(e){throw console.error("Error al obtener terapias por \xE1rea:",e),e}})}duplicarTerapia(t,e){return v(this,null,function*(){try{let i=yield this.getTerapiaById(t);if(!i)throw new Error("Terapia no encontrada");let r=G(A({},i),{id:void 0,nombre:e,created_at:void 0,updated_at:void 0});return yield this.createTerapia(r)}catch(i){throw console.error("Error al duplicar terapia:",i),i}})}buscarTerapias(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("terapias").select("*").or(`nombre.ilike.%${t}%,descripcion.ilike.%${t}%,area_especializacion.ilike.%${t}%`).eq("status",1).order("nombre");if(i)throw i;return e||[]}catch(e){throw console.error("Error al buscar terapias:",e),e}})}getSeguimientoDetalladoUsuario(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("terapia_seguimiento_individual").select(`
          *,
          terapia:id_terapia(*),
          asignacion:id_asignacion_masiva(*),
          profile:id_profile(*)
        `).eq("id_profile",t);if(i)throw i;return e||[]}catch(e){throw console.error("Error al obtener seguimiento detallado:",e),e}})}getAsignacionesPorTerapeuta(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("v_terapias_asignadas_usuarios").select("*").eq("terapeuta_responsable",t).order("fecha_asignacion",{ascending:!1});if(i)throw i;return e||[]}catch(e){throw console.error("Error al obtener asignaciones por terapeuta:",e),e}})}getProximasSesionesTeruapeuta(t,e=7){return v(this,null,function*(){try{let i=new Date().toISOString().split("T")[0],r=new Date(Date.now()+e*24*60*60*1e3).toISOString().split("T")[0],{data:o,error:a}=yield this.supabaseService.supabase.rpc("get_proximas_sesiones_terapeuta",{p_terapeuta_id:t,p_fecha_inicio:i,p_dias:e});if(a)throw a;return o||[]}catch(i){throw console.error("Error al obtener pr\xF3ximas sesiones:",i),i}})}calcularAdherenciaUsuario(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.rpc("calcular_adherencia_usuario",{p_usuario_id:t});if(i)throw i;return e[0]||null}catch(e){throw console.error("Error al calcular adherencia:",e),e}})}getReporteProgresoPorArea(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.from("v_progreso_por_area").select("*");if(e)throw e;return t||[]}catch(t){throw console.error("Error al obtener reporte por \xE1rea:",t),t}})}getDashboardTerapeuta(t){return v(this,null,function*(){try{let e=this.supabaseService.supabase.from("v_dashboard_terapeutas").select("*");t&&(e=e.eq("terapeuta_id",t));let{data:i,error:r}=yield e;if(r)throw r;return i||[]}catch(e){throw console.error("Error al obtener dashboard de terapeuta:",e),e}})}getUsuariosQueNecesitanSeguimiento(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.from("v_terapias_asignadas_usuarios").select("*").eq("estado_individual","en_progreso").or("adherencia_porcentaje.lt.70,progreso.lt.30").order("ultima_actualizacion",{ascending:!0}).limit(10);if(e)throw e;return t||[]}catch(t){throw console.error("Error al obtener usuarios que necesitan seguimiento:",t),t}})}validarAsignacionTerapia(t,e){return v(this,null,function*(){try{let{data:i,error:r}=yield this.supabaseService.supabase.from("v_terapias_asignadas_usuarios").select("*").eq("id_profile",t).eq("id_terapia",e).in("estado_individual",["pendiente","en_progreso"]);if(r)throw r;return i&&i.length>0?{valido:!1,mensaje:"El usuario ya tiene esta terapia asignada y activa"}:(yield this.getInformacionMedicaUsuario(t))?{valido:!0}:{valido:!1,mensaje:"El usuario no tiene informaci\xF3n m\xE9dica registrada"}}catch(i){return console.error("Error validando asignaci\xF3n:",i),{valido:!1,mensaje:"Error al validar la asignaci\xF3n"}}})}getHistorialCambiosEstado(t){return v(this,null,function*(){try{return[]}catch(e){throw console.error("Error al obtener historial de cambios:",e),e}})}exportarSeguimientoCSV(t){let e=["Usuario","Terapia","Estado","Progreso","Adherencia","Sesiones Completadas","Sesiones Programadas","Terapeuta","Fecha Inicio","Fecha Fin","\xDAltima Actualizaci\xF3n"],i=t.map(o=>[o.full_name,o.terapia_nombre,o.estado_individual,`${o.progreso}%`,`${o.adherencia_porcentaje}%`,o.sesiones_completadas,o.sesiones_programadas,o.terapeuta_nombre||"Sin asignar",this.formatearFecha(o.fecha_inicio_programada),this.formatearFecha(o.fecha_fin_programada),this.formatearFecha(o.ultima_actualizacion)]);return[e,...i].map(o=>o.map(a=>`"${a}"`).join(",")).join(`
`)}formatearFecha(t){return new Date(t).toLocaleDateString("es-ES")}generarReportePDF(t){return v(this,null,function*(){return new Blob(["Reporte PDF no implementado"],{type:"application/pdf"})})}getAlertasTerapeuta(t){return v(this,null,function*(){try{let e=[],{data:i}=yield this.supabaseService.supabase.from("v_terapias_asignadas_usuarios").select("*").eq("terapeuta_responsable",t).lt("adherencia_porcentaje",70).eq("estado_individual","en_progreso");i&&i.forEach(o=>{e.push({tipo:"baja_adherencia",mensaje:`${o.full_name} tiene baja adherencia (${o.adherencia_porcentaje}%) en ${o.terapia_nombre}`,prioridad:"alta",asignacion:o})});let{data:r}=yield this.supabaseService.supabase.from("v_terapias_asignadas_usuarios").select("*").eq("terapeuta_responsable",t).lte("dias_restantes",7).eq("estado_individual","en_progreso");return r&&r.forEach(o=>{e.push({tipo:"proxima_vencer",mensaje:`La terapia de ${o.full_name} vence en ${o.dias_restantes} d\xEDas`,prioridad:"media",asignacion:o})}),e}catch(e){return console.error("Error al obtener alertas:",e),[]}})}marcarAlertaLeida(t){return v(this,null,function*(){console.log(`Alerta ${t} marcada como le\xEDda`)})}getCurrentUserId(){return v(this,null,function*(){try{let{data:{user:t}}=yield this.supabaseService.supabase.auth.getUser();if(!t)throw new Error("Usuario no autenticado");let{data:e,error:i}=yield this.supabaseService.supabase.from("profiles").select("id").eq("user_id",t.id).single();if(i)throw i;return e.id}catch(t){throw console.error("Error al obtener ID del usuario actual:",t),t}})}calcularIMC(t,e){if(!t||!e)return 0;let i=e/100;return Math.round(t/i**2*100)/100}formatearDuracion(t){if(t<60)return`${t} min`;{let e=Math.floor(t/60),i=t%60;return i>0?`${e}h ${i}min`:`${e}h`}}getColorNivelDolor(t){return t<=2?"text-green-600":t<=4?"text-yellow-600":t<=6?"text-orange-600":"text-red-600"}getColorProgreso(t){return t>=80?"text-green-600":t>=60?"text-blue-600":t>=40?"text-yellow-600":"text-red-600"}getColorAdherencia(t){return t>=90?"text-green-600":t>=70?"text-blue-600":t>=50?"text-yellow-600":"text-red-600"}formatearFechaLegible(t){return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}formatearFechaCorta(t){return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})}calcularDiasEntre(t,e){let i=new Date(t),o=new Date(e).getTime()-i.getTime();return Math.ceil(o/(1e3*60*60*24))}calcularProgresoTemporal(t,e){let i=new Date(t),r=new Date(e),o=new Date;if(o<i)return 0;if(o>r)return 100;let a=this.calcularDiasEntre(i,r),c=this.calcularDiasEntre(i,o);return Math.round(c/a*100)}validarEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}validarTelefono(t){return/^[\+]?[0-9\s\-\(\)]{8,20}$/.test(t)}generarCodigoAleatorio(t=6){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i="";for(let r=0;r<t;r++)i+=e.charAt(Math.floor(Math.random()*e.length));return i}limpiarTexto(t){return t.trim().replace(/\s+/g," ")}toTitleCase(t){return t.toLowerCase().replace(/\b\w/g,e=>e.toUpperCase())}truncarTexto(t,e){return t.length<=e?t:t.substring(0,e)+"..."}obtenerIniciales(t){return t.split(" ").map(e=>e.charAt(0).toUpperCase()).join("").substring(0,2)}generarColorAvatar(t){let e=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-gray-500"],i=0;for(let r=0;r<t.length;r++)i=t.charCodeAt(r)+((i<<5)-i);return e[Math.abs(i)%e.length]}descargarCSV(t,e){let i=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(r.download!==void 0){let o=URL.createObjectURL(i);r.setAttribute("href",o),r.setAttribute("download",e),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}descargarJSON(t,e){let i=JSON.stringify(t,null,2),r=new Blob([i],{type:"application/json;charset=utf-8;"}),o=document.createElement("a");if(o.download!==void 0){let a=URL.createObjectURL(r);o.setAttribute("href",a),o.setAttribute("download",e),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}mostrarExito(t){console.log("\xC9xito:",t)}mostrarError(t){console.error("Error:",t)}mostrarInfo(t){console.info("Info:",t)}debug(){console.log("=== TerapiasService Debug ==="),console.log("Supabase conectado:",!!this.supabaseService.supabase),console.log("============================")}static \u0275fac=function(e){return new(e||n)(B(me))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var uP=(n,t,e,i,r)=>({"bg-blue-100 text-blue-800":n,"bg-green-100 text-green-800":t,"bg-purple-100 text-purple-800":e,"bg-yellow-100 text-yellow-800":i,"bg-red-100 text-red-800":r});function pP(n,t){if(n&1){let e=P();s(0,"button",30),x("click",function(){C(e);let r=h();return S(r.openCreateModal())}),I(),s(1,"svg",31),b(2,"path",32),l(),d(3," Nueva Terapia "),l()}}function fP(n,t){if(n&1&&(s(0,"div",33)(1,"div",34),I(),s(2,"svg",35),b(3,"path",36),l(),T(),s(4,"div",37)(5,"p",38),d(6),l()()()()),n&2){let e=h();u(6),k(e.error)}}function mP(n,t){if(n&1&&(s(0,"option",39),d(1),l()),n&2){let e=t.$implicit;g("value",e.value),u(),E(" ",e.label," ")}}function gP(n,t){if(n&1&&(s(0,"option",39),d(1),tt(2,"titlecase"),l()),n&2){let e=t.$implicit;g("value",e),u(),E(" ",Rt(2,2,e)," ")}}function hP(n,t){if(n&1&&(s(0,"option",39),d(1),l()),n&2){let e=t.$implicit;g("value",e.value),u(),E(" ",e.label," ")}}function vP(n,t){n&1&&(s(0,"div",40),I(),s(1,"svg",41),b(2,"path",42),l(),T(),s(3,"p",43),d(4,"Cargando terapias..."),l()())}function _P(n,t){if(n&1&&(s(0,"p",66),d(1),l()),n&2){let e=h().$implicit;u(),E(" ",e.descripcion," ")}}function bP(n,t){if(n&1&&(s(0,"span"),d(1),tt(2,"titlecase"),l()),n&2){let e=h().$implicit;u(),E(" ",Rt(2,1,e.area_especializacion)," ")}}function yP(n,t){if(n&1&&(s(0,"span"),d(1),l()),n&2){let e=h().$implicit,i=h(2);u(),E(" ",i.getTotalEjercicios(e)," ejercicios ")}}function xP(n,t){if(n&1&&(s(0,"span",69),d(1),l()),n&2){let e=t.$implicit;u(),E(" #",e," ")}}function wP(n,t){if(n&1&&(s(0,"div",67),w(1,xP,2,1,"span",68),l()),n&2){let e=h().$implicit;u(),g("ngForOf",e.tags)}}function CP(n,t){if(n&1){let e=P();s(0,"button",70),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.openEditModal(r))}),I(),s(1,"svg",61),b(2,"path",71),l()()}}function SP(n,t){if(n&1){let e=P();s(0,"button",72),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.deleteTerapia(r))}),I(),s(1,"svg",61),b(2,"path",73),l()()}}function EP(n,t){if(n&1){let e=P();s(0,"li",46)(1,"div",47)(2,"div",48)(3,"div",49)(4,"div",50)(5,"div",51)(6,"p",52),d(7),l(),w(8,_P,2,1,"p",53),s(9,"div",54)(10,"span",55),d(11),l(),w(12,bP,3,3,"span",56),s(13,"span",57),d(14),l(),s(15,"span"),d(16),l(),w(17,yP,2,1,"span",56),l(),w(18,wP,2,1,"div",58),l()()(),s(19,"div",59)(20,"button",60),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.openViewModal(r))}),I(),s(21,"svg",61),b(22,"path",62)(23,"path",63),l()(),w(24,CP,3,0,"button",64)(25,SP,3,0,"button",65),l()()()()}if(n&2){let e=t.$implicit,i=h(2);u(7),E(" ",e.nombre," "),u(),g("ngIf",e.descripcion),u(2),g("ngClass",oo(11,uP,e.tipo==="fisica",e.tipo==="ocupacional",e.tipo==="respiratoria",e.tipo==="neurologica",e.tipo==="cardiaca")),u(),E(" ",i.getTipoLabel(e.tipo)," "),u(),g("ngIf",e.area_especializacion),u(2),k(e.nivel),u(2),k(i.formatDuracion(e.duracion_estimada)),u(),g("ngIf",i.hasEjercicios(e)),u(),g("ngIf",e.tags&&e.tags.length>0),u(6),g("ngIf",i.canEditTerapia()),u(),g("ngIf",i.canEditTerapia())}}function MP(n,t){if(n&1&&(s(0,"ul",44),w(1,EP,26,17,"li",45),l()),n&2){let e=h();u(),g("ngForOf",e.filteredTerapias)}}function IP(n,t){if(n&1){let e=P();s(0,"button",82),x("click",function(){C(e);let r=h(2);return S(r.openCreateModal())}),d(1," Crear primera terapia "),l()}}function DP(n,t){if(n&1){let e=P();s(0,"button",83),x("click",function(){C(e);let r=h(2);return S(r.clearFilters())}),d(1," Limpiar filtros "),l()}}function TP(n,t){if(n&1&&(s(0,"div",74),I(),s(1,"svg",75),b(2,"path",76),l(),T(),s(3,"h3",77),d(4,"No hay terapias"),l(),s(5,"p",78),d(6),l(),s(7,"div",79),w(8,IP,2,0,"button",80)(9,DP,2,0,"button",81),l()()),n&2){let e=h();u(6),E(" ",e.terapias.length===0?"No se encontraron terapias en la base de datos.":"No se encontraron terapias con los filtros aplicados."," "),u(2),g("ngIf",e.terapias.length===0&&e.canEditTerapia()),u(),g("ngIf",e.terapias.length>0)}}function kP(n,t){if(n&1&&(s(0,"option",39),d(1),l()),n&2){let e=t.$implicit;g("value",e.value),u(),E(" ",e.label," ")}}function PP(n,t){if(n&1&&(s(0,"option",39),d(1),tt(2,"titlecase"),l()),n&2){let e=t.$implicit;g("value",e),u(),E(" ",Rt(2,2,e)," ")}}function OP(n,t){if(n&1&&(s(0,"option",39),d(1),l()),n&2){let e=t.$implicit;g("value",e.value),u(),E(" ",e.label," ")}}function AP(n,t){if(n&1){let e=P();s(0,"span",132),d(1),s(2,"button",133),x("click",function(){let r=C(e).index,o=h(3);return S(o.removeTag(r))}),I(),s(3,"svg",134),b(4,"path",135),l()()()}if(n&2){let e=t.$implicit;u(),E(" #",e," ")}}function RP(n,t){if(n&1&&(s(0,"div",130),w(1,AP,5,1,"span",131),l()),n&2){let e=h(2);u(),g("ngForOf",e.terapiaForm.tags)}}function FP(n,t){if(n&1){let e=P();s(0,"div",136)(1,"label",137)(2,"input",138),x("change",function(){let r=C(e).$implicit,o=h(2);return S(o.toggleSeccion(r.key))}),l(),s(3,"div",37)(4,"div",139),d(5),l(),s(6,"div",23),d(7),l()()()()}if(n&2){let e=t.$implicit,i=h(2);u(2),g("checked",i.seccionesActivas.has(e.key)),u(3),k(e.nombre),u(2),k(e.descripcion)}}function NP(n,t){if(n&1&&(s(0,"option",39),d(1),l()),n&2){let e=t.$implicit;g("value",e.nombre),u(),E(" ",e.nombre," ")}}function VP(n,t){if(n&1&&(s(0,"option",39),d(1),l()),n&2){let e=t.$implicit;g("value",e.value),u(),E(" ",e.label," ")}}function jP(n,t){if(n&1){let e=P();s(0,"div",153)(1,"div",154)(2,"span",155),d(3),l(),s(4,"div",156)(5,"button",157),x("click",function(){let r=C(e).index,o=h(3).$implicit,a=h(2);return S(a.moveEjercicio(o,r,r-1))}),I(),s(6,"svg",158),b(7,"path",159),l()(),T(),s(8,"button",160),x("click",function(){let r=C(e).index,o=h(3).$implicit,a=h(2);return S(a.moveEjercicio(o,r,r+1))}),I(),s(9,"svg",158),b(10,"path",161),l()(),T(),s(11,"button",162),x("click",function(){let r=C(e).index,o=h(3).$implicit,a=h(2);return S(a.removeEjercicio(o,r))}),I(),s(12,"svg",158),b(13,"path",73),l()()()(),T(),s(14,"div",163)(15,"div",98)(16,"label",164),d(17,"Nombre *"),l(),s(18,"input",165),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.nombre,r)||(o.nombre=r),S(r)}),l()(),s(19,"div")(20,"label",164),d(21,"Tipo"),l(),s(22,"select",166),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.tipo,r)||(o.tipo=r),S(r)}),w(23,NP,2,2,"option",16),l()(),s(24,"div")(25,"label",164),d(26,"Intensidad"),l(),s(27,"select",166),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.intensidad,r)||(o.intensidad=r),S(r)}),w(28,VP,2,2,"option",16),l()(),s(29,"div")(30,"label",164),d(31,"Repeticiones"),l(),s(32,"input",167),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.repeticiones,r)||(o.repeticiones=r),S(r)}),l()(),s(33,"div")(34,"label",164),d(35,"Series"),l(),s(36,"input",167),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.series,r)||(o.series=r),S(r)}),l()(),s(37,"div")(38,"label",164),d(39,"Duraci\xF3n"),l(),s(40,"input",168),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.duracion,r)||(o.duracion=r),S(r)}),l()(),s(41,"div",98)(42,"label",164),d(43,"Descripci\xF3n"),l(),s(44,"textarea",169),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.descripcion,r)||(o.descripcion=r),S(r)}),l()(),s(45,"div",98)(46,"label",164),d(47,"Precauciones"),l(),s(48,"textarea",170),F("ngModelChange",function(r){let o=C(e).$implicit;return N(o.precauciones,r)||(o.precauciones=r),S(r)}),l()()()()}if(n&2){let e=t.$implicit,i=t.index,r=h(2).ngIf,o=h().$implicit,a=h(2);u(3),E("Ejercicio ",i+1,""),u(2),g("disabled",i===0),u(3),g("disabled",i===r.ejercicios.length-1),u(10),R("ngModel",e.nombre),g("name","ejercicio_nombre_"+o+"_"+i),u(4),R("ngModel",e.tipo),g("name","ejercicio_tipo_"+o+"_"+i),u(),g("ngForOf",a.tiposEjercicios),u(4),R("ngModel",e.intensidad),g("name","ejercicio_intensidad_"+o+"_"+i),u(),g("ngForOf",a.intensidadesDisponibles),u(4),R("ngModel",e.repeticiones),g("name","ejercicio_repeticiones_"+o+"_"+i),u(4),R("ngModel",e.series),g("name","ejercicio_series_"+o+"_"+i),u(4),R("ngModel",e.duracion),g("name","ejercicio_duracion_"+o+"_"+i),u(4),R("ngModel",e.descripcion),g("name","ejercicio_descripcion_"+o+"_"+i),u(4),R("ngModel",e.precauciones),g("name","ejercicio_precauciones_"+o+"_"+i)}}function LP(n,t){if(n&1&&(s(0,"div",151),w(1,jP,49,21,"div",152),l()),n&2){let e=h().ngIf;u(),g("ngForOf",e.ejercicios)}}function UP(n,t){if(n&1){let e=P();s(0,"div",171)(1,"p",23),d(2,"No hay ejercicios en esta secci\xF3n"),l(),s(3,"button",172),x("click",function(){C(e);let r=h(2).$implicit,o=h(2);return S(o.addEjercicio(r))}),d(4," Agregar primer ejercicio "),l()()}}function BP(n,t){if(n&1){let e=P();gt(0),s(1,"h5",141),d(2),l(),s(3,"div",142)(4,"div")(5,"label",143),d(6,"Descripci\xF3n"),l(),s(7,"textarea",144),F("ngModelChange",function(r){let o=C(e).ngIf;return N(o.descripcion,r)||(o.descripcion=r),S(r)}),l()(),s(8,"div")(9,"label",143),d(10,"Tiempo Total"),l(),s(11,"input",145),F("ngModelChange",function(r){let o=C(e).ngIf;return N(o.tiempo_total,r)||(o.tiempo_total=r),S(r)}),l()(),s(12,"div")(13,"div",146)(14,"label",143),d(15,"Ejercicios"),l(),s(16,"button",147),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.addEjercicio(r))}),I(),s(17,"svg",148),b(18,"path",32),l(),d(19," Agregar Ejercicio "),l()(),w(20,LP,2,1,"div",149)(21,UP,5,0,"div",150),l()(),ht()}if(n&2){let e=t.ngIf,i=h().$implicit,r=h(2);u(2),E(" ",r.getSeccionNombre(i)," "),u(5),R("ngModel",e.descripcion),g("name","descripcion_"+i),u(4),R("ngModel",e.tiempo_total),g("name","tiempo_"+i),u(9),g("ngIf",e.ejercicios&&e.ejercicios.length>0),u(),g("ngIf",!e.ejercicios||e.ejercicios.length===0)}}function $P(n,t){if(n&1&&(s(0,"div",140),w(1,BP,22,7,"ng-container",56),l()),n&2){let e=t.$implicit,i=h(2);u(),g("ngIf",i.getSeccionData(e))}}function qP(n,t){n&1&&(I(),s(0,"svg",173),b(1,"path",42),l())}function HP(n,t){if(n&1){let e=P();s(0,"div",84)(1,"div",85)(2,"div",86),x("click",function(){C(e);let r=h();return S(r.closeModal())}),l(),s(3,"div",87)(4,"div",88)(5,"div",89)(6,"div",90),I(),s(7,"svg",91),b(8,"path",76),l()(),T(),s(9,"div",92)(10,"h3",93),d(11),l(),s(12,"div",67)(13,"p",23),d(14),l()()()()(),s(15,"div",94)(16,"form",95),x("ngSubmit",function(){C(e);let r=h();return S(r.saveTerapia())}),s(17,"div",96)(18,"div",97)(19,"div",98)(20,"label",99),d(21," Nombre de la Terapia * "),l(),s(22,"input",100),F("ngModelChange",function(r){C(e);let o=h();return N(o.terapiaForm.nombre,r)||(o.terapiaForm.nombre=r),S(r)}),l()(),s(23,"div",98)(24,"label",101),d(25," Descripci\xF3n "),l(),s(26,"textarea",102),F("ngModelChange",function(r){C(e);let o=h();return N(o.terapiaForm.descripcion,r)||(o.terapiaForm.descripcion=r),S(r)}),l()(),s(27,"div")(28,"label",103),d(29," Tipo de Terapia * "),l(),s(30,"select",104),F("ngModelChange",function(r){C(e);let o=h();return N(o.terapiaForm.tipo,r)||(o.terapiaForm.tipo=r),S(r)}),w(31,kP,2,2,"option",16),l()(),s(32,"div")(33,"label",105),d(34," \xC1rea de Especializaci\xF3n "),l(),s(35,"select",106),F("ngModelChange",function(r){C(e);let o=h();return N(o.terapiaForm.area_especializacion,r)||(o.terapiaForm.area_especializacion=r),S(r)}),s(36,"option",107),d(37,"Seleccionar \xE1rea"),l(),w(38,PP,3,4,"option",16),l()(),s(39,"div")(40,"label",108),d(41," Nivel * "),l(),s(42,"select",109),F("ngModelChange",function(r){C(e);let o=h();return N(o.terapiaForm.nivel,r)||(o.terapiaForm.nivel=r),S(r)}),w(43,OP,2,2,"option",16),l()(),s(44,"div")(45,"label",110),d(46," Duraci\xF3n Estimada (minutos) "),l(),s(47,"input",111),F("ngModelChange",function(r){C(e);let o=h();return N(o.terapiaForm.duracion_estimada,r)||(o.terapiaForm.duracion_estimada=r),S(r)}),l()()(),s(48,"div")(49,"label",112),d(50," Objetivo Principal "),l(),s(51,"textarea",113),F("ngModelChange",function(r){C(e);let o=h();return N(o.terapiaForm.objetivo_principal,r)||(o.terapiaForm.objetivo_principal=r),S(r)}),l()(),s(52,"div")(53,"label",114),d(54," Contraindicaciones "),l(),s(55,"textarea",115),F("ngModelChange",function(r){C(e);let o=h();return N(o.terapiaForm.contraindicaciones,r)||(o.terapiaForm.contraindicaciones=r),S(r)}),l()(),s(56,"div")(57,"label",116),d(58," Criterios de Progresi\xF3n "),l(),s(59,"textarea",117),F("ngModelChange",function(r){C(e);let o=h();return N(o.terapiaForm.criterios_progresion,r)||(o.terapiaForm.criterios_progresion=r),S(r)}),l()(),s(60,"div")(61,"label",118),d(62," Tags "),l(),s(63,"div",119)(64,"input",120),x("keydown.enter",function(r){return C(e),h().addTag(r),S(r.preventDefault())}),l(),w(65,RP,2,1,"div",121),l()(),s(66,"div")(67,"h4",122),d(68,"Secciones de Ejercicios"),l(),s(69,"div",123),w(70,FP,8,3,"div",124),l(),w(71,$P,2,1,"div",125),l()()()(),s(72,"div",126)(73,"button",127),x("click",function(){C(e);let r=h();return S(r.saveTerapia())}),w(74,qP,2,0,"svg",128),d(75),l(),s(76,"button",129),x("click",function(){C(e);let r=h();return S(r.closeModal())}),d(77," Cancelar "),l()()()()()}if(n&2){let e=h();u(11),E(" ",e.modalMode==="create"?"Crear Terapia":"Editar Terapia"," "),u(3),E(" ",e.modalMode==="create"?"Complete la informaci\xF3n para crear una nueva terapia de rehabilitaci\xF3n.":"Modifique la informaci\xF3n de la terapia seleccionada."," "),u(8),R("ngModel",e.terapiaForm.nombre),u(4),R("ngModel",e.terapiaForm.descripcion),u(4),R("ngModel",e.terapiaForm.tipo),u(),g("ngForOf",e.tiposDisponibles),u(4),R("ngModel",e.terapiaForm.area_especializacion),u(3),g("ngForOf",e.areasEspecializacion),u(4),R("ngModel",e.terapiaForm.nivel),u(),g("ngForOf",e.nivelesDisponibles),u(4),R("ngModel",e.terapiaForm.duracion_estimada),u(4),R("ngModel",e.terapiaForm.objetivo_principal),u(4),R("ngModel",e.terapiaForm.contraindicaciones),u(4),R("ngModel",e.terapiaForm.criterios_progresion),u(6),g("ngIf",e.terapiaForm.tags&&e.terapiaForm.tags.length>0),u(5),g("ngForOf",e.seccionesDisponibles),u(),g("ngForOf",e.Array.from(e.seccionesActivas)),u(2),g("disabled",e.loading),u(),g("ngIf",e.loading),u(),E(" ",e.modalMode==="create"?"Crear Terapia":"Guardar Cambios"," "),u(),g("disabled",e.loading)}}function zP(n,t){if(n&1){let e=P();s(0,"button",174),x("click",function(){C(e);let r=h();return S(r.openCreateModal())}),I(),s(1,"svg",175),b(2,"path",32),l()()}}function GP(n,t){n&1&&(s(0,"button",189),I(),s(1,"svg",185),b(2,"path",190),l()())}function WP(n,t){n&1&&(s(0,"div",199)(1,"div",34),I(),s(2,"svg",200),b(3,"path",201),l(),T(),s(4,"div",37)(5,"p",202),d(6,"\xA1Terapia copiada al portapapeles!"),l()()()())}function YP(n,t){if(n&1){let e=P();s(0,"div")(1,"div",191)(2,"div",192),d(3),l(),s(4,"pre",193),d(5),l()(),w(6,WP,7,0,"div",194),s(7,"div",195)(8,"button",196),x("click",function(){C(e);let r=h(2);return S(r.copyToClipboard())}),I(),s(9,"svg",31),b(10,"path",186),l(),d(11," Copiar "),l(),T(),s(12,"button",197),x("click",function(){C(e);let r=h(2);return S(r.exportarTerapia(r.selectedViewTerapia))}),I(),s(13,"svg",31),b(14,"path",198),l(),d(15," Descargar "),l()()()}if(n&2){let e=h(2);u(3),E(" ",e.getFileNameSafe(e.selectedViewTerapia.nombre),".txt "),u(2),k(e.getFormattedTerapia(e.selectedViewTerapia)),u(),g("ngIf",e.copySuccess)}}function ZP(n,t){if(n&1){let e=P();s(0,"div",84)(1,"div",85)(2,"div",86),x("click",function(){C(e);let r=h();return S(r.closeViewModal())}),l(),s(3,"div",176)(4,"div",88)(5,"div",89)(6,"div",177),I(),s(7,"svg",178),b(8,"path",179),l()(),T(),s(9,"div",180)(10,"h3",93),d(11),l(),s(12,"div",181)(13,"p",23),d(14," Vista previa de la terapia "),l(),s(15,"div",182),w(16,GP,3,0,"button",183),s(17,"button",184),x("click",function(){C(e);let r=h();return S(r.copyToClipboard())}),I(),s(18,"svg",185),b(19,"path",186),l()()()()()()(),T(),s(20,"div",187),w(21,YP,16,3,"div",56),l(),s(22,"div",126)(23,"button",188),x("click",function(){C(e);let r=h();return S(r.closeViewModal())}),d(24," Cerrar "),l()()()()()}if(n&2){let e=h();u(11),E(" ",e.selectedViewTerapia==null?null:e.selectedViewTerapia.nombre," "),u(5),g("ngIf",e.copySuccess),u(5),g("ngIf",e.selectedViewTerapia)}}var Jd=class n{constructor(t,e){this.terapiasService=t;this.authService=e}terapias=[];filteredTerapias=[];tiposEjercicios=[];loading=!1;error="";showModal=!1;showViewModal=!1;modalMode="create";selectedTerapia=null;selectedViewTerapia=null;copySuccess=!1;Array=Array;terapiaForm={nombre:"",descripcion:"",tipo:"fisica",area_especializacion:"",nivel:"principiante",duracion_estimada:60,objetivo_principal:"",contraindicaciones:"",criterios_progresion:"",tags:[],status:1,ejercicios:{}};seccionesDisponibles=[{key:"calentamiento",nombre:"Calentamiento",descripcion:"Ejercicios de preparaci\xF3n y movilizaci\xF3n"},{key:"fortalecimiento",nombre:"Fortalecimiento",descripcion:"Ejercicios de fortalecimiento muscular"},{key:"equilibrio",nombre:"Equilibrio",descripcion:"Ejercicios de equilibrio y propiocepci\xF3n"},{key:"coordinacion",nombre:"Coordinaci\xF3n",descripcion:"Ejercicios de coordinaci\xF3n motora"},{key:"estiramiento",nombre:"Estiramiento",descripcion:"Ejercicios de flexibilidad y relajaci\xF3n"},{key:"respiracion",nombre:"Respiraci\xF3n",descripcion:"Ejercicios respiratorios y relajaci\xF3n"}];searchTerm="";tipoFilter="all";areaFilter="all";nivelFilter="all";statusFilter="active";seccionesActivas=new Set;tiposDisponibles=[{value:"fisica",label:"Fisioterapia"},{value:"ocupacional",label:"Terapia Ocupacional"},{value:"respiratoria",label:"Respiratoria"},{value:"neurologica",label:"Neurol\xF3gica"},{value:"cardiaca",label:"Card\xEDaca"}];nivelesDisponibles=[{value:"principiante",label:"Principiante"},{value:"intermedio",label:"Intermedio"},{value:"avanzado",label:"Avanzado"}];areasEspecializacion=["hombro","codo","mu\xF1eca","cadera","rodilla","tobillo","columna_cervical","columna_lumbar","core","respiratoria","neurologica","cardiaca","pediatrica","geriatrica"];intensidadesDisponibles=[{value:"muy_baja",label:"Muy Baja"},{value:"baja",label:"Baja"},{value:"moderada",label:"Moderada"},{value:"alta",label:"Alta"},{value:"muy_alta",label:"Muy Alta"}];ngOnInit(){return v(this,null,function*(){yield this.loadTiposEjercicios(),yield this.loadTerapias()})}loadTiposEjercicios(){return v(this,null,function*(){try{this.tiposEjercicios=yield this.terapiasService.getTiposEjerciciosTerapeuticos()}catch(t){console.error("Error cargando tipos de ejercicios:",t),this.tiposEjercicios=[]}})}loadTerapias(){return v(this,null,function*(){try{this.loading=!0,this.terapias=yield this.terapiasService.getTerapias(),this.applyFilters()}catch(t){console.error("Error cargando terapias:",t),this.error="Error al cargar las terapias",this.terapias=[]}finally{this.loading=!1}})}applyFilters(){this.filteredTerapias=this.terapias.filter(t=>{let e=!this.searchTerm||t.nombre.toLowerCase().includes(this.searchTerm.toLowerCase())||t.descripcion?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.area_especializacion?.toLowerCase().includes(this.searchTerm.toLowerCase()),i=this.tipoFilter==="all"||t.tipo===this.tipoFilter,r=this.areaFilter==="all"||t.area_especializacion===this.areaFilter,o=this.nivelFilter==="all"||t.nivel===this.nivelFilter,a=this.statusFilter==="all"||this.statusFilter==="active"&&t.status===1||this.statusFilter==="inactive"&&t.status===0;return e&&i&&r&&o&&a})}clearFilters(){this.searchTerm="",this.tipoFilter="all",this.areaFilter="all",this.nivelFilter="all",this.statusFilter="active",this.applyFilters()}getTipoLabel(t){let e=this.tiposDisponibles.find(i=>i.value===t);return e?e.label:t}getSeccionNombre(t){let e=this.seccionesDisponibles.find(i=>i.key===t);return e?e.nombre:t}getTipoEjercicioNombre(t){let e=this.tiposEjercicios.find(i=>i.nombre===t);return e?e.nombre:t}getIntensidadLabel(t){let e=this.intensidadesDisponibles.find(i=>i.value===t);return e?e.label:t}exportarTerapia(t){let e=this.getFormattedTerapia(t),i=new Blob([e],{type:"text/plain;charset=utf-8"}),r=window.URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download=`${this.getFileNameSafe(t.nombre)}.txt`,o.click(),window.URL.revokeObjectURL(r),console.log("Terapia exportada:",t.nombre)}openCreateModal(){this.modalMode="create",this.selectedTerapia=null,this.resetForm(),this.showModal=!0}openEditModal(t){this.modalMode="edit",this.selectedTerapia=t,this.terapiaForm=JSON.parse(JSON.stringify(t)),this.seccionesActivas.clear(),this.terapiaForm.ejercicios&&this.seccionesDisponibles.forEach(e=>{this.terapiaForm.ejercicios[e.key]&&this.seccionesActivas.add(e.key)}),this.error="",this.showModal=!0}openViewModal(t){console.log("Abriendo modal de vista para terapia:",t.nombre),this.selectedViewTerapia=t,this.showViewModal=!0}closeModal(){this.showModal=!1,this.selectedTerapia=null,this.error="",this.resetForm()}closeViewModal(){console.log("Cerrando modal de vista"),this.showViewModal=!1,this.selectedViewTerapia=null,this.copySuccess=!1}resetForm(){this.terapiaForm={nombre:"",descripcion:"",tipo:"fisica",area_especializacion:"",nivel:"principiante",duracion_estimada:60,objetivo_principal:"",contraindicaciones:"",criterios_progresion:"",tags:[],status:1,ejercicios:{}},this.seccionesActivas.clear()}toggleSeccion(t){this.seccionesActivas.has(t)?(this.seccionesActivas.delete(t),this.terapiaForm.ejercicios&&delete this.terapiaForm.ejercicios[t]):(this.seccionesActivas.add(t),this.terapiaForm.ejercicios||(this.terapiaForm.ejercicios={}),this.terapiaForm.ejercicios[t]||(this.terapiaForm.ejercicios[t]={descripcion:"",tiempo_total:"",objetivos:[],ejercicios:[]}))}getSeccionData(t){return!this.terapiaForm.ejercicios||!this.terapiaForm.ejercicios[t]?this.seccionesActivas.has(t)?(this.terapiaForm.ejercicios||(this.terapiaForm.ejercicios={}),this.terapiaForm.ejercicios[t]={descripcion:"",tiempo_total:"",objetivos:[],ejercicios:[]},this.terapiaForm.ejercicios[t]):null:this.terapiaForm.ejercicios[t]}updateSeccionData(t,e){this.terapiaForm.ejercicios||(this.terapiaForm.ejercicios={}),this.terapiaForm.ejercicios[t]=e}addEjercicio(t){let e=this.getSeccionData(t);if(!e)return;let i={orden:e.ejercicios.length+1,nombre:"",tipo:"movilidad",repeticiones:10,series:2,duracion:"2:00",descripcion:"",intensidad:"moderada",precauciones:""};e.ejercicios.push(i),this.updateSeccionData(t,e)}removeEjercicio(t,e){let i=this.getSeccionData(t);i&&(i.ejercicios.splice(e,1),i.ejercicios.forEach((r,o)=>{r.orden=o+1}),this.updateSeccionData(t,i))}moveEjercicio(t,e,i){let r=this.getSeccionData(t);if(!r||i<0||i>=r.ejercicios.length)return;let o=r.ejercicios.splice(e,1)[0];r.ejercicios.splice(i,0,o),r.ejercicios.forEach((a,c)=>{a.orden=c+1}),this.updateSeccionData(t,r)}saveTerapia(){return v(this,null,function*(){try{if(this.error="",this.loading=!0,!this.terapiaForm.nombre.trim()){this.error="El nombre es requerido";return}if(this.seccionesActivas.size===0){this.error="Debe activar al menos una secci\xF3n con ejercicios";return}let t=!1;for(let r of this.seccionesActivas){let o=this.getSeccionData(r);if(o&&o.ejercicios.length>0){t=!0;break}}if(!t){this.error="Debe agregar al menos un ejercicio en alguna secci\xF3n";return}let e=A({},this.terapiaForm),i={};this.seccionesActivas.forEach(r=>{let o=this.getSeccionData(r);o&&o.ejercicios.length>0&&(i[r]=o)}),e.ejercicios=i,this.modalMode==="create"?yield this.terapiasService.createTerapia(e):yield this.terapiasService.updateTerapia(this.selectedTerapia.id,e),yield this.loadTerapias(),this.closeModal()}catch(t){console.error("Error guardando terapia:",t),this.error="Error al guardar la terapia. Intente nuevamente."}finally{this.loading=!1}})}deleteTerapia(t){return v(this,null,function*(){if(confirm(`\xBFEst\xE1 seguro de eliminar la terapia "${t.nombre}"?`))try{this.loading=!0,yield this.terapiasService.deleteTerapia(t.id),yield this.loadTerapias()}catch(e){console.error("Error eliminando terapia:",e),this.error="Error al eliminar la terapia"}finally{this.loading=!1}})}canEditTerapia(){return this.authService.isAdmin()||this.authService.hasProfile(3)}formatDuracion(t){if(!t)return"Sin especificar";let e=Math.floor(t/60),i=t%60;return e>0?`${e}h ${i}m`:`${i}m`}getAreasUnicas(){let t=new Set;return this.terapias.forEach(e=>{e.area_especializacion&&t.add(e.area_especializacion)}),Array.from(t).sort()}getFileNameSafe(t){return t?t.replace(/\s+/g,"_"):"terapia"}copyToClipboard(){return v(this,null,function*(){if(this.selectedViewTerapia)try{let t=this.getFormattedTerapia(this.selectedViewTerapia);yield navigator.clipboard.writeText(t),this.copySuccess=!0,setTimeout(()=>{this.copySuccess=!1},2e3)}catch(t){console.error("Error al copiar:",t);let e=document.createElement("textarea");e.value=this.getFormattedTerapia(this.selectedViewTerapia),document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy"),this.copySuccess=!0,setTimeout(()=>{this.copySuccess=!1},2e3)}catch(i){console.error("Error en fallback de copia:",i)}document.body.removeChild(e)}})}getFormattedTerapia(t){if(!t)return"";let e=`${t.nombre}
`;return e+=`${t.descripcion||"Terapia de rehabilitaci\xF3n"}
`,e+=`Nivel: ${t.nivel||"No especificado"} | Duraci\xF3n: ${this.formatDuracion(t.duracion_estimada)}

`,t.objetivo_principal&&(e+=`Objetivo: ${t.objetivo_principal}
`),t.area_especializacion&&(e+=`\xC1rea: ${t.area_especializacion}
`),e+=`
`,this.hasEjercicios(t)?this.getSeccionesConEjercicios(t).forEach(r=>{let o=t.ejercicios[r];if(o&&o.ejercicios&&o.ejercicios.length>0){let a=this.getNombreSeccion(r);e+=`${a.toUpperCase()}
`,o.descripcion&&(e+=`${o.descripcion}
`),o.ejercicios.forEach((c,p)=>{e+=`${p+1}. ${c?.nombre||"Ejercicio sin nombre"}
`,c?.descripcion&&(e+=`   ${c.descripcion}
`),c?.repeticiones&&c?.series&&(e+=`   ${c.series} series x ${c.repeticiones} repeticiones
`),c?.duracion&&(e+=`   Duraci\xF3n: ${c.duracion}
`),c?.precauciones&&(e+=`   \u26A0\uFE0F ${c.precauciones}
`),e+=`
`})}}):e+=`No se han definido ejercicios para esta terapia

`,t.contraindicaciones&&(e+=`CONTRAINDICACIONES
${t.contraindicaciones}

`),t.criterios_progresion&&(e+=`CRITERIOS DE PROGRESI\xD3N
${t.criterios_progresion}
`),e}getNombreSeccion(t){return{calentamiento:"Calentamiento",fortalecimiento:"Fortalecimiento",equilibrio:"Equilibrio",coordinacion:"Coordinaci\xF3n",estiramiento:"Estiramiento",respiracion:"Respiraci\xF3n"}[t]||t.charAt(0).toUpperCase()+t.slice(1)}hasEjercicios(t){return!t||!t.ejercicios?!1:Object.keys(t.ejercicios).some(e=>{let i=t.ejercicios[e];return i&&i.ejercicios&&Array.isArray(i.ejercicios)&&i.ejercicios.length>0})}getTotalEjercicios(t){if(!t||!t.ejercicios)return 0;let e=0;return Object.keys(t.ejercicios).forEach(i=>{let r=t.ejercicios[i];r&&r.ejercicios&&Array.isArray(r.ejercicios)&&(e+=r.ejercicios.length)}),e}getSeccionesConEjercicios(t){return!t||!t.ejercicios?[]:Object.keys(t.ejercicios).filter(e=>{let i=t.ejercicios[e];return i&&i.ejercicios&&Array.isArray(i.ejercicios)&&i.ejercicios.length>0})}addTag(t){let e=t.target.value.trim();e&&!this.terapiaForm.tags?.includes(e)&&(this.terapiaForm.tags||(this.terapiaForm.tags=[]),this.terapiaForm.tags.push(e),t.target.value="")}removeTag(t){this.terapiaForm.tags&&this.terapiaForm.tags.splice(t,1)}static \u0275fac=function(e){return new(e||n)(O(Ro),O(re))};static \u0275cmp=ie({type:n,selectors:[["app-terapias"]],standalone:!1,decls:50,vars:17,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"mb-6"],[1,"sm:flex","sm:items-center","sm:justify-between"],[1,"text-2xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-700"],[1,"mt-4","sm:mt-0"],["class","hidden md:inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",3,"click",4,"ngIf"],["class","mb-6 bg-red-50 border border-red-200 rounded-md p-4",4,"ngIf"],[1,"mb-6","bg-white","shadow","rounded-lg","p-4"],[1,"grid","grid-cols-1","gap-4","md:grid-cols-2","lg:grid-cols-5"],[1,"lg:col-span-2"],["for","search",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","search","placeholder","Nombre, descripci\xF3n o \xE1rea...",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","input","ngModel"],["for","tipo-filter",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","tipo-filter",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],["for","area-filter",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","area-filter",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","change","ngModel"],["for","nivel-filter",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","nivel-filter",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","change","ngModel"],[1,"mt-4","flex","justify-between","items-center"],[1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],[1,"text-sm","text-gray-500"],[1,"bg-white","shadow","overflow-hidden","sm:rounded-md"],["class","p-8 text-center",4,"ngIf"],["class","divide-y divide-gray-200",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],["class","md:hidden fixed bottom-6 right-6 w-14 h-14 bg-red-600 text-white rounded-full shadow-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all duration-200 z-40","title","Crear nueva terapia",3,"click",4,"ngIf"],[1,"hidden","md:inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-red-600","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"mb-6","bg-red-50","border","border-red-200","rounded-md","p-4"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[3,"value"],[1,"p-8","text-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"animate-spin","h-8","w-8","text-red-600","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"mt-2","text-sm","text-gray-500"],[1,"divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"hover:bg-gray-50"],[1,"px-4","py-4","sm:px-6"],[1,"flex","items-center","justify-between"],[1,"flex-1","min-w-0"],[1,"flex","items-center","space-x-3"],[1,"flex-1"],[1,"text-lg","font-medium","text-gray-900","truncate"],["class","text-sm text-gray-500 mt-1",4,"ngIf"],[1,"mt-2","flex","items-center","space-x-4","text-sm","text-gray-500"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[4,"ngIf"],[1,"capitalize"],["class","mt-2",4,"ngIf"],[1,"ml-4","flex-shrink-0","flex","items-center","space-x-2"],["title","Ver terapia",1,"text-blue-600","hover:text-blue-900","p-2","rounded-full","hover:bg-blue-50",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["class","text-indigo-600 hover:text-indigo-900 p-2 rounded-full hover:bg-indigo-50","title","Editar terapia",3,"click",4,"ngIf"],["class","text-red-600 hover:text-red-900 p-2 rounded-full hover:bg-red-50","title","Eliminar terapia",3,"click",4,"ngIf"],[1,"text-sm","text-gray-500","mt-1"],[1,"mt-2"],["class","inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded mr-1",4,"ngFor","ngForOf"],[1,"inline-block","bg-gray-100","text-gray-800","text-xs","px-2","py-1","rounded","mr-1"],["title","Editar terapia",1,"text-indigo-600","hover:text-indigo-900","p-2","rounded-full","hover:bg-indigo-50",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Eliminar terapia",1,"text-red-600","hover:text-red-900","p-2","rounded-full","hover:bg-red-50",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"mt-6"],["class","inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",3,"click",4,"ngIf"],["class","inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-red-600","hover:bg-red-700",3,"click"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","shadow-sm","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-center","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-6xl","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-red-600"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","w-full"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"bg-white","px-4","pb-4","sm:px-6","sm:pb-6","max-h-96","overflow-y-auto"],[3,"ngSubmit"],[1,"space-y-6"],[1,"grid","grid-cols-1","gap-6","sm:grid-cols-2"],[1,"sm:col-span-2"],["for","nombre",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","nombre","name","nombre","required","","placeholder","Ej: Rehabilitaci\xF3n de hombro post-cirug\xEDa",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","ngModel"],["for","descripcion",1,"block","text-sm","font-medium","text-gray-700"],["id","descripcion","name","descripcion","rows","3","placeholder","Descripci\xF3n detallada de la terapia...",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","ngModel"],["for","tipo",1,"block","text-sm","font-medium","text-gray-700"],["id","tipo","name","tipo","required","",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","ngModel"],["for","area_especializacion",1,"block","text-sm","font-medium","text-gray-700"],["id","area_especializacion","name","area_especializacion",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","ngModel"],["value",""],["for","nivel",1,"block","text-sm","font-medium","text-gray-700"],["id","nivel","name","nivel","required","",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","ngModel"],["for","duracion_estimada",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","duracion_estimada","name","duracion_estimada","min","1","max","300",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","ngModel"],["for","objetivo_principal",1,"block","text-sm","font-medium","text-gray-700"],["id","objetivo_principal","name","objetivo_principal","rows","2","placeholder","Objetivo principal de la terapia...",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","ngModel"],["for","contraindicaciones",1,"block","text-sm","font-medium","text-gray-700"],["id","contraindicaciones","name","contraindicaciones","rows","2","placeholder","Contraindicaciones y precauciones...",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","ngModel"],["for","criterios_progresion",1,"block","text-sm","font-medium","text-gray-700"],["id","criterios_progresion","name","criterios_progresion","rows","2","placeholder","Criterios para avanzar en la terapia...",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","ngModel"],["for","tags",1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1"],["type","text","id","tags","placeholder","Presione Enter para agregar tags...",1,"block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"keydown.enter"],["class","mt-2 flex flex-wrap gap-2",4,"ngIf"],[1,"text-lg","font-medium","text-gray-900","mb-4"],[1,"grid","grid-cols-1","gap-4","sm:grid-cols-2","lg:grid-cols-3","mb-6"],["class","relative",4,"ngFor","ngForOf"],["class","bg-gray-50 rounded-lg p-4 mb-4",4,"ngFor","ngForOf"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-red-600","text-base","font-medium","text-white","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","sm:ml-3","sm:w-auto","sm:text-sm","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm","disabled:opacity-50",3,"click","disabled"],[1,"mt-2","flex","flex-wrap","gap-2"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",4,"ngFor","ngForOf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-gray-100","text-gray-800"],["type","button",1,"flex-shrink-0","ml-1","h-4","w-4","rounded-full","inline-flex","items-center","justify-center","text-gray-400","hover:bg-gray-200","hover:text-gray-500",3,"click"],["stroke","currentColor","fill","none","viewBox","0 0 8 8",1,"h-2","w-2"],["stroke-linecap","round","d","m1 1 6 6m0-6-6 6"],[1,"relative"],[1,"flex","items-start"],["type","checkbox",1,"mt-1","h-4","w-4","text-red-600","focus:ring-red-500","border-gray-300","rounded",3,"change","checked"],[1,"text-sm","font-medium","text-gray-900"],[1,"bg-gray-50","rounded-lg","p-4","mb-4"],[1,"text-md","font-medium","text-gray-900","mb-3"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700"],["rows","2","placeholder","Descripci\xF3n de esta secci\xF3n...",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","ngModel","name"],["type","text","placeholder","Ej: 15:00, 10-15 min",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","sm:text-sm",3,"ngModelChange","ngModel","name"],[1,"flex","justify-between","items-center","mb-3"],["type","button",1,"inline-flex","items-center","px-2","py-1","border","border-transparent","text-xs","font-medium","rounded","text-red-700","bg-red-100","hover:bg-red-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-3","w-3","mr-1"],["class","space-y-3",4,"ngIf"],["class","text-center py-4 bg-gray-100 rounded-lg",4,"ngIf"],[1,"space-y-3"],["class","bg-white border border-gray-200 rounded-lg p-3",4,"ngFor","ngForOf"],[1,"bg-white","border","border-gray-200","rounded-lg","p-3"],[1,"flex","justify-between","items-start","mb-3"],[1,"text-sm","font-medium","text-gray-500"],[1,"flex","space-x-1"],["type","button","title","Mover arriba",1,"text-gray-400","hover:text-gray-600","disabled:opacity-30",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],["type","button","title","Mover abajo",1,"text-gray-400","hover:text-gray-600","disabled:opacity-30",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["type","button","title","Eliminar ejercicio",1,"text-red-400","hover:text-red-600",3,"click"],[1,"grid","grid-cols-1","gap-3","sm:grid-cols-2"],[1,"block","text-xs","font-medium","text-gray-700"],["type","text","required","","placeholder","Nombre del ejercicio",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","text-sm",3,"ngModelChange","ngModel","name"],[1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","text-sm",3,"ngModelChange","ngModel","name"],["type","number","min","1",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","text-sm",3,"ngModelChange","ngModel","name"],["type","text","placeholder","Ej: 2:00, 30 seg",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","text-sm",3,"ngModelChange","ngModel","name"],["rows","2","placeholder","Descripci\xF3n del ejercicio...",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","text-sm",3,"ngModelChange","ngModel","name"],["rows","2","placeholder","Precauciones espec\xEDficas...",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-red-500","focus:ring-red-500","text-sm",3,"ngModelChange","ngModel","name"],[1,"text-center","py-4","bg-gray-100","rounded-lg"],["type","button",1,"mt-2","text-red-600","hover:text-red-800","text-sm","font-medium",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["title","Crear nueva terapia",1,"md:hidden","fixed","bottom-6","right-6","w-14","h-14","bg-red-600","text-white","rounded-full","shadow-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-all","duration-200","z-40",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","mx-auto"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-5xl","sm:w-full"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-blue-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","flex-1"],[1,"mt-1","flex","items-center","justify-between"],[1,"flex","items-center","space-x-2"],["class","text-green-500","title","\xA1Copiado!",4,"ngIf"],["title","Copiar terapia",1,"text-gray-400","hover:text-gray-600",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"bg-white","px-4","pb-4","sm:px-6","sm:pb-6","max-h-[70vh]","overflow-y-auto"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","sm:w-auto","sm:text-sm",3,"click"],["title","\xA1Copiado!",1,"text-green-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"bg-black","rounded-lg","p-4","font-mono","text-sm"],[1,"text-gray-400","text-xs","mb-2"],[1,"whitespace-pre-wrap","text-green-400"],["class","mt-4 bg-green-50 border border-green-200 rounded-md p-3",4,"ngIf"],[1,"mt-4","flex","justify-between"],[1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],[1,"inline-flex","items-center","px-3","py-2","border","border-transparent","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"mt-4","bg-green-50","border","border-green-200","rounded-md","p-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-green-700"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),d(5,"Gesti\xF3n de Terapias"),l(),s(6,"p",4),d(7," Administra las terapias de rehabilitaci\xF3n disponibles en el sistema. "),l()(),s(8,"div",5),w(9,pP,4,0,"button",6),l()()(),w(10,fP,7,1,"div",7),s(11,"div",8)(12,"div",9)(13,"div",10)(14,"label",11),d(15,"Buscar"),l(),s(16,"input",12),F("ngModelChange",function(o){return N(i.searchTerm,o)||(i.searchTerm=o),o}),x("input",function(){return i.applyFilters()}),l()(),s(17,"div")(18,"label",13),d(19,"Tipo"),l(),s(20,"select",14),F("ngModelChange",function(o){return N(i.tipoFilter,o)||(i.tipoFilter=o),o}),x("change",function(){return i.applyFilters()}),s(21,"option",15),d(22,"Todos los tipos"),l(),w(23,mP,2,2,"option",16),l()(),s(24,"div")(25,"label",17),d(26,"\xC1rea"),l(),s(27,"select",18),F("ngModelChange",function(o){return N(i.areaFilter,o)||(i.areaFilter=o),o}),x("change",function(){return i.applyFilters()}),s(28,"option",15),d(29,"Todas las \xE1reas"),l(),w(30,gP,3,4,"option",16),l()(),s(31,"div")(32,"label",19),d(33,"Nivel"),l(),s(34,"select",20),F("ngModelChange",function(o){return N(i.nivelFilter,o)||(i.nivelFilter=o),o}),x("change",function(){return i.applyFilters()}),s(35,"option",15),d(36,"Todos los niveles"),l(),w(37,hP,2,2,"option",16),l()()(),s(38,"div",21)(39,"button",22),x("click",function(){return i.clearFilters()}),d(40," Limpiar filtros "),l(),s(41,"span",23),d(42),l()()(),s(43,"div",24),w(44,vP,5,0,"div",25)(45,MP,2,1,"ul",26)(46,TP,10,3,"div",27),l()(),w(47,HP,78,21,"div",28)(48,zP,3,0,"button",29)(49,ZP,25,3,"div",28)),e&2&&(u(9),g("ngIf",i.canEditTerapia()),u(),g("ngIf",i.error),u(6),R("ngModel",i.searchTerm),u(4),R("ngModel",i.tipoFilter),u(3),g("ngForOf",i.tiposDisponibles),u(4),R("ngModel",i.areaFilter),u(3),g("ngForOf",i.getAreasUnicas()),u(4),R("ngModel",i.nivelFilter),u(3),g("ngForOf",i.nivelesDisponibles),u(5),be(" ",i.filteredTerapias.length," de ",i.terapias.length," terapias "),u(2),g("ngIf",i.loading),u(),g("ngIf",!i.loading&&i.filteredTerapias.length>0),u(),g("ngIf",!i.loading&&i.filteredTerapias.length===0),u(),g("ngIf",i.showModal),u(),g("ngIf",!i.showModal&&!i.showViewModal&&i.canEditTerapia()),u(),g("ngIf",i.showViewModal))},dependencies:[He,ve,le,Je,je,Le,we,xn,Ae,Ie,Ke,Sn,Cn,wn,Re,ut,_n],encapsulation:2})};var QP=(n,t,e,i)=>({"bg-green-100 text-green-800":n,"bg-blue-100 text-blue-800":t,"bg-yellow-100 text-yellow-800":e,"bg-red-100 text-red-800":i}),KP=(n,t,e,i,r)=>({"bg-gray-100 text-gray-800":n,"bg-yellow-100 text-yellow-800":t,"bg-green-100 text-green-800":e,"bg-red-100 text-red-800":i,"bg-purple-100 text-purple-800":r});function JP(n,t){if(n&1){let e=P();s(0,"button",32),x("click",function(){C(e);let r=h();return S(r.openAsignarModal())}),I(),s(1,"svg",33),b(2,"path",34),l(),d(3," Asignar Terapia "),l()}}function XP(n,t){if(n&1&&(s(0,"div",35)(1,"div",36),I(),s(2,"svg",37),b(3,"path",38),l(),T(),s(4,"div",39)(5,"p",40),d(6),l()()()()),n&2){let e=h();u(6),k(e.error)}}function eO(n,t){n&1&&(s(0,"div",41),b(1,"div",42),l())}function tO(n,t){if(n&1&&(s(0,"div",75),d(1),l()),n&2){let e=h().$implicit;u(),E(" ",e.area_especializacion," ")}}function nO(n,t){if(n&1&&(s(0,"div",62),d(1),l()),n&2){let e=h().$implicit;u(),E(" ",e.terapeuta_nombre," ")}}function iO(n,t){if(n&1){let e=P();s(0,"button",76),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.cancelarAsignacion(r.asignacion_id))}),I(),s(1,"svg",71),b(2,"path",77),l()()}}function rO(n,t){if(n&1){let e=P();s(0,"tr",53)(1,"td",54)(2,"div")(3,"div",55),d(4),l(),s(5,"div",56),d(6),tt(7,"titlecase"),l(),w(8,tO,2,1,"div",57),l()(),s(9,"td",54)(10,"div",58),I(),s(11,"svg",59),b(12,"path",60),l(),T(),s(13,"span",55),d(14),l(),s(15,"span",61),d(16,"usuarios"),l()(),s(17,"div",62),d(18),tt(19,"titlecase"),l()(),s(20,"td",63)(21,"div"),d(22),l(),s(23,"div",64),d(24),l()(),s(25,"td",63)(26,"div"),d(27),l(),s(28,"div",64),d(29),l(),w(30,nO,2,1,"div",65),l(),s(31,"td",54)(32,"span",66),b(33,"i"),d(34),l()(),s(35,"td",54)(36,"div",67),d(37),l(),s(38,"div",56),d(39),l()(),s(40,"td",68)(41,"div",69)(42,"button",70),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.openVerModal(r))}),I(),s(43,"svg",71),b(44,"path",72)(45,"path",73),l()(),w(46,iO,3,0,"button",74),l()()()}if(n&2){let e=t.$implicit,i=h(2);u(4),k(e.terapia_nombre),u(2),k(Rt(7,17,e.terapia_tipo)),u(2),g("ngIf",e.area_especializacion),u(6),k(e.usuarios_count),u(4),E(" ",Rt(19,19,e.tipo_asignacion)," "),u(4),k(i.formatDate(e.fecha_inicio_programada)),u(2),k(i.formatDate(e.fecha_fin_programada)),u(3),E("",e.sesiones_por_semana,"/semana"),u(2),E("",i.formatDuracion(e.duracion_sesion),"/sesi\xF3n"),u(),g("ngIf",e.terapeuta_nombre),u(2),g("ngClass",Fn(21,QP,e.estado_asignacion==="activa",e.estado_asignacion==="completada",e.estado_asignacion==="pausada",e.estado_asignacion==="cancelada")),u(),W(i.getEstadoIcon(e.estado_asignacion)+" mr-1"),u(),E(" ",e.estado_asignacion," "),u(3),k(e.asignado_por_nombre),u(2),k(i.formatDate(e.fecha_asignacion)),u(7),g("ngIf",e.estado_asignacion==="activa"&&i.canAssignTerapias())}}function oO(n,t){n&1&&(gt(0),d(1," No se han creado asignaciones a\xFAn. "),ht())}function aO(n,t){n&1&&d(0," No se encontraron asignaciones con los filtros aplicados. ")}function sO(n,t){if(n&1){let e=P();s(0,"button",87),x("click",function(){C(e);let r=h(3);return S(r.openAsignarModal())}),d(1," Crear primera asignaci\xF3n "),l()}}function lO(n,t){if(n&1){let e=P();s(0,"button",88),x("click",function(){C(e);let r=h(3);return S(r.clearFilters())}),d(1," Limpiar filtros "),l()}}function cO(n,t){if(n&1&&(s(0,"div",78),I(),s(1,"svg",79),b(2,"path",80),l(),T(),s(3,"h3",81),d(4,"No hay asignaciones"),l(),s(5,"p",82),w(6,oO,2,0,"ng-container",83)(7,aO,1,0,"ng-template",null,0,Nn),l(),s(9,"div",84),w(10,sO,2,0,"button",85)(11,lO,2,0,"button",86),l()()),n&2){let e=Rn(8),i=h(2);u(6),g("ngIf",i.asignaciones.length===0)("ngIfElse",e),u(4),g("ngIf",i.asignaciones.length===0&&i.canAssignTerapias()),u(),g("ngIf",i.asignaciones.length>0)}}function dO(n,t){if(n&1&&(s(0,"div",43)(1,"div",44)(2,"h3",45),d(3),l()(),s(4,"div",46)(5,"table",47)(6,"thead",48)(7,"tr")(8,"th",49),d(9," Terapia "),l(),s(10,"th",49),d(11," Usuarios "),l(),s(12,"th",49),d(13," Fechas "),l(),s(14,"th",49),d(15," Configuraci\xF3n "),l(),s(16,"th",49),d(17," Estado "),l(),s(18,"th",49),d(19," Asignado por "),l(),s(20,"th",49),d(21," Acciones "),l()()(),s(22,"tbody",50),w(23,rO,47,26,"tr",51),l()(),w(24,cO,12,4,"div",52),l()()),n&2){let e=h();u(3),E(" Asignaciones Realizadas (",e.filteredAsignaciones.length,") "),u(20),g("ngForOf",e.filteredAsignaciones)("ngForTrackBy",e.trackByAsignacionId),u(),g("ngIf",e.filteredAsignaciones.length===0)}}function uO(n,t){if(n&1&&(s(0,"option",109),d(1),tt(2,"titlecase"),l()),n&2){let e=t.$implicit;g("value",e.id),u(),Wf(" ",e.nombre," - ",Rt(2,4,e.tipo)," (",e.nivel,") ")}}function pO(n,t){if(n&1&&(s(0,"option",109),d(1),l()),n&2){let e=t.$implicit;g("value",e.id),u(),E(" ",e.full_name," ")}}function fO(n,t){if(n&1){let e=P();s(0,"div")(1,"label",15),d(2," Objetivos Grupales "),l(),s(3,"textarea",129),F("ngModelChange",function(r){C(e);let o=h(2);return N(o.asignacionForm.objetivos_grupales,r)||(o.asignacionForm.objetivos_grupales=r),S(r)}),l()()}if(n&2){let e=h(2);u(3),R("ngModel",e.asignacionForm.objetivos_grupales)}}function mO(n,t){if(n&1){let e=P();s(0,"label",130)(1,"input",131),x("change",function(){let r=C(e).$implicit,o=h(2);return S(o.toggleUsuario(r.id))}),l(),s(2,"div",132)(3,"div",55),d(4),l(),s(5,"div",133),d(6),l()()()}if(n&2){let e=t.$implicit,i=h(2);X("bg-red-50",i.isUsuarioSelected(e.id)),u(),g("checked",i.isUsuarioSelected(e.id)),u(3),k(e.full_name),u(2),E("@",e.username,"")}}function gO(n,t){n&1&&(s(0,"span"),d(1," usuario seleccionado"),l())}function hO(n,t){n&1&&d(0," usuarios seleccionados")}function vO(n,t){if(n&1&&(s(0,"div",134)(1,"div",36),I(),s(2,"svg",37),b(3,"path",38),l(),T(),s(4,"div",39)(5,"p",40),d(6),l()()()()),n&2){let e=h(2);u(6),k(e.error)}}function _O(n,t){n&1&&(I(),s(0,"svg",135),b(1,"path",10),l())}function bO(n,t){if(n&1){let e=P();s(0,"div",89)(1,"div",90)(2,"div",91),x("click",function(){C(e);let r=h();return S(r.closeAsignarModal())}),l(),s(3,"span",92),d(4,"\u200B"),l(),s(5,"div",93)(6,"div",94)(7,"div",95)(8,"div",96),I(),s(9,"svg",97),b(10,"path",80),l()(),T(),s(11,"div",98)(12,"h3",45),d(13," Asignar Terapia a Usuarios "),l(),s(14,"div",99)(15,"p",56),d(16," Selecciona una terapia y los usuarios a los que deseas asignarla. "),l()()()()(),s(17,"div",100)(18,"form",101)(19,"div")(20,"label",15),d(21," Terapia "),s(22,"span",102),d(23,"*"),l()(),s(24,"select",103),F("ngModelChange",function(r){C(e);let o=h();return N(o.asignacionForm.id_terapia,r)||(o.asignacionForm.id_terapia=r),S(r)}),s(25,"option",104),d(26,"Selecciona una terapia"),l(),w(27,uO,3,6,"option",105),l()(),s(28,"div",106)(29,"div")(30,"label",15),d(31," Tipo de Asignaci\xF3n "),l(),s(32,"select",107),F("ngModelChange",function(r){C(e);let o=h();return N(o.asignacionForm.tipo_asignacion,r)||(o.asignacionForm.tipo_asignacion=r),S(r)}),s(33,"option",23),d(34,"Individual"),l(),s(35,"option",24),d(36,"Grupal"),l()()(),s(37,"div")(38,"label",15),d(39," Terapeuta Responsable "),l(),s(40,"select",108),F("ngModelChange",function(r){C(e);let o=h();return N(o.asignacionForm.terapeuta_responsable,r)||(o.asignacionForm.terapeuta_responsable=r),S(r)}),s(41,"option",109),d(42,"Sin asignar"),l(),w(43,pO,2,2,"option",110),l()()(),s(44,"div",106)(45,"div")(46,"label",15),d(47," Fecha de Inicio "),s(48,"span",102),d(49,"*"),l()(),s(50,"input",111),F("ngModelChange",function(r){C(e);let o=h();return N(o.asignacionForm.fecha_inicio,r)||(o.asignacionForm.fecha_inicio=r),S(r)}),l()(),s(51,"div")(52,"label",15),d(53," Fecha de Fin "),s(54,"span",102),d(55,"*"),l()(),s(56,"input",112),F("ngModelChange",function(r){C(e);let o=h();return N(o.asignacionForm.fecha_fin,r)||(o.asignacionForm.fecha_fin=r),S(r)}),l()()(),s(57,"div",106)(58,"div")(59,"label",15),d(60," Sesiones por Semana "),l(),s(61,"input",113),F("ngModelChange",function(r){C(e);let o=h();return N(o.asignacionForm.sesiones_por_semana,r)||(o.asignacionForm.sesiones_por_semana=r),S(r)}),l()(),s(62,"div")(63,"label",15),d(64," Duraci\xF3n por Sesi\xF3n (minutos) "),l(),s(65,"input",114),F("ngModelChange",function(r){C(e);let o=h();return N(o.asignacionForm.duracion_sesion,r)||(o.asignacionForm.duracion_sesion=r),S(r)}),l()()(),s(66,"div")(67,"label",15),d(68," Notas (Opcional) "),l(),s(69,"textarea",115),F("ngModelChange",function(r){C(e);let o=h();return N(o.asignacionForm.notas,r)||(o.asignacionForm.notas=r),S(r)}),l()(),w(70,fO,4,1,"div",116),s(71,"div")(72,"div",117)(73,"label",118),d(74," Usuarios "),s(75,"span",102),d(76,"*"),l()(),s(77,"div",7)(78,"button",119),x("click",function(){C(e);let r=h();return S(r.selectAllUsuarios())}),d(79," Seleccionar todos "),l(),s(80,"button",120),x("click",function(){C(e);let r=h();return S(r.clearAllUsuarios())}),d(81," Limpiar selecci\xF3n "),l()()(),s(82,"div",121)(83,"div",122),w(84,mO,7,5,"label",123),l()(),s(85,"div",6)(86,"span"),d(87),l(),w(88,gO,2,0,"span",83)(89,hO,1,0,"ng-template",null,1,Nn),l()()(),w(91,vO,7,1,"div",124),l(),s(92,"div",125)(93,"button",126),x("click",function(){C(e);let r=h();return S(r.asignarTerapia())}),w(94,_O,2,0,"svg",127),d(95," Asignar Terapia "),l(),s(96,"button",128),x("click",function(){C(e);let r=h();return S(r.closeAsignarModal())}),d(97," Cancelar "),l()()()()()}if(n&2){let e=Rn(90),i=h();u(24),R("ngModel",i.asignacionForm.id_terapia),u(3),g("ngForOf",i.terapias)("ngForTrackBy",i.trackByTerapiaId),u(5),R("ngModel",i.asignacionForm.tipo_asignacion),u(8),R("ngModel",i.asignacionForm.terapeuta_responsable),u(),g("value",void 0),u(2),g("ngForOf",i.terapeutas),u(7),R("ngModel",i.asignacionForm.fecha_inicio),u(6),R("ngModel",i.asignacionForm.fecha_fin),u(5),R("ngModel",i.asignacionForm.sesiones_por_semana),u(4),R("ngModel",i.asignacionForm.duracion_sesion),u(4),R("ngModel",i.asignacionForm.notas),u(),g("ngIf",i.asignacionForm.tipo_asignacion==="grupal"),u(14),g("ngForOf",i.usuarios)("ngForTrackBy",i.trackByUserId),u(3),k(i.asignacionForm.usuarios_seleccionados.length),u(),g("ngIf",i.asignacionForm.usuarios_seleccionados.length===1)("ngIfElse",e),u(3),g("ngIf",i.error),u(2),g("disabled",i.loading||!i.asignacionForm.id_terapia||i.asignacionForm.usuarios_seleccionados.length===0),u(),g("ngIf",i.loading),u(2),g("disabled",i.loading)}}function yO(n,t){if(n&1&&(s(0,"div",133),d(1),l()),n&2){let e=h(2);u(),E(" Terapeuta: ",e.selectedAsignacion==null?null:e.selectedAsignacion.terapeuta_nombre," ")}}function xO(n,t){if(n&1){let e=P();s(0,"div",99)(1,"input",160),x("input",function(r){C(e);let o=h().$implicit,a=h(2);return S(a.actualizarProgreso(o.seguimiento_id,r))}),l()()}if(n&2){let e=h().$implicit;u(),g("value",e.progreso)}}function wO(n,t){if(n&1&&(s(0,"div")(1,"strong"),d(2,"Inicio:"),l(),d(3),l()),n&2){let e=h().$implicit,i=h(2);u(3),E(" ",i.formatDate(e.fecha_inicio_real)," ")}}function CO(n,t){if(n&1&&(s(0,"div")(1,"strong"),d(2,"Fin:"),l(),d(3),l()),n&2){let e=h().$implicit,i=h(2);u(3),E(" ",i.formatDate(e.fecha_fin_real)," ")}}function SO(n,t){n&1&&(s(0,"div",64),d(1," Sin fechas registradas "),l())}function EO(n,t){if(n&1){let e=P();s(0,"button",161),x("click",function(){C(e);let r=h().$implicit,o=h(2);return S(o.editarNotasIndividuales(r))}),I(),s(1,"svg",71),b(2,"path",162),l()()}}function MO(n,t){if(n&1&&(s(0,"tr",53)(1,"td",54)(2,"div",58)(3,"div",149)(4,"span",150),d(5),l()(),s(6,"div")(7,"div",55),d(8),l(),s(9,"div",56),d(10),l()()()(),s(11,"td",54)(12,"div",58)(13,"div",151),b(14,"div",152),l(),s(15,"span",55),d(16),l()(),w(17,xO,2,1,"div",153),l(),s(18,"td",54)(19,"span",66),d(20),l()(),s(21,"td",63)(22,"div"),d(23),l(),s(24,"div",133),d(25),l()(),s(26,"td",54)(27,"div",58)(28,"div",154),b(29,"div",155),l(),s(30,"span",55),d(31),l()()(),s(32,"td",63),w(33,wO,4,1,"div",116)(34,CO,4,1,"div",116)(35,SO,2,0,"div",156),l(),s(36,"td",157)(37,"div",158),d(38),l()(),s(39,"td",68)(40,"div",69),w(41,EO,3,0,"button",159),l()()()),n&2){let e=t.$implicit,i=h(2);u(5),E(" ",(e.full_name||"U").charAt(0).toUpperCase()," "),u(3),k(e.full_name),u(2),E("@",e.username,""),u(4),At("width",e.progreso,"%"),u(2),E("",e.progreso,"%"),u(),g("ngIf",i.canAssignTerapias()),u(2),g("ngClass",oo(20,KP,e.estado_individual==="pendiente",e.estado_individual==="en_progreso",e.estado_individual==="completada",e.estado_individual==="cancelada"||e.estado_individual==="abandonada",e.estado_individual==="pausada")),u(),E(" ",e.estado_individual," "),u(3),be("",e.sesiones_completadas||0," / ",e.sesiones_programadas||0,""),u(2),E(" ",e.sesiones_programadas>0?i.Math.round((e.sesiones_completadas||0)/e.sesiones_programadas*100):0,"% completado "),u(4),At("width",e.adherencia_porcentaje||0,"%"),u(2),E("",e.adherencia_porcentaje||0,"%"),u(2),g("ngIf",e.fecha_inicio_real),u(),g("ngIf",e.fecha_fin_real),u(),g("ngIf",!e.fecha_inicio_real&&!e.fecha_fin_real),u(3),E(" ",e.notas_individuales||"-"," "),u(3),g("ngIf",i.canAssignTerapias())}}function IO(n,t){n&1&&(s(0,"div",163),I(),s(1,"svg",164),b(2,"path",165),l(),T(),s(3,"h3",81),d(4,"Sin seguimiento disponible"),l(),s(5,"p",82),d(6," No se encontraron datos de seguimiento para esta asignaci\xF3n. "),l()())}function DO(n,t){if(n&1&&(s(0,"div",166)(1,"h4",167),d(2,"Resumen del Progreso"),l(),s(3,"div",168)(4,"div")(5,"div",169),d(6),l(),s(7,"div",133),d(8,"Pendientes"),l()(),s(9,"div")(10,"div",170),d(11),l(),s(12,"div",133),d(13,"En Progreso"),l()(),s(14,"div")(15,"div",171),d(16),l(),s(17,"div",133),d(18,"Completadas"),l()(),s(19,"div")(20,"div",172),d(21),l(),s(22,"div",133),d(23,"Progreso Promedio"),l()(),s(24,"div")(25,"div",173),d(26),l(),s(27,"div",133),d(28,"Adherencia Promedio"),l()()()()),n&2){let e=h(2);u(6),E(" ",e.getEstadisticasProgreso().pendientes," "),u(5),E(" ",e.getEstadisticasProgreso().enProgreso," "),u(5),E(" ",e.getEstadisticasProgreso().completadas," "),u(5),E(" ",e.getEstadisticasProgreso().promedioProgreso,"% "),u(5),E(" ",e.getEstadisticasProgreso().promedioAdherencia,"% ")}}function TO(n,t){if(n&1){let e=P();s(0,"div",89)(1,"div",90)(2,"div",91),x("click",function(){C(e);let r=h();return S(r.closeVerModal())}),l(),s(3,"span",92),d(4,"\u200B"),l(),s(5,"div",136)(6,"div",94)(7,"div",95)(8,"div",137),I(),s(9,"svg",138),b(10,"path",139),l()(),T(),s(11,"div",98)(12,"h3",45),d(13),l(),s(14,"div",99)(15,"p",56),d(16," Progreso individual de cada usuario asignado "),l()()()()(),s(17,"div",140)(18,"div",141)(19,"div",142)(20,"div")(21,"span",143),d(22,"Per\xEDodo:"),l(),s(23,"div",144),d(24),l()(),s(25,"div")(26,"span",143),d(27,"Total usuarios:"),l(),s(28,"div",144),d(29),l()(),s(30,"div")(31,"span",143),d(32,"Configuraci\xF3n:"),l(),s(33,"div",144),d(34),l()(),s(35,"div")(36,"span",143),d(37,"Asignado por:"),l(),s(38,"div",144),d(39),l(),w(40,yO,2,1,"div",145),l()()(),s(41,"div",46)(42,"table",47)(43,"thead",48)(44,"tr")(45,"th",49),d(46," Usuario "),l(),s(47,"th",49),d(48," Progreso "),l(),s(49,"th",49),d(50," Estado "),l(),s(51,"th",49),d(52," Sesiones "),l(),s(53,"th",49),d(54," Adherencia "),l(),s(55,"th",49),d(56," Fechas Reales "),l(),s(57,"th",49),d(58," Notas "),l(),s(59,"th",49),d(60," Acciones "),l()()(),s(61,"tbody",50),w(62,MO,42,26,"tr",51),l()(),w(63,IO,7,0,"div",146),l(),w(64,DO,29,5,"div",147),l(),s(65,"div",125)(66,"button",148),x("click",function(){C(e);let r=h();return S(r.closeVerModal())}),d(67," Cerrar "),l()()()()()}if(n&2){let e=h();u(13),E(" Seguimiento: ",e.selectedAsignacion==null?null:e.selectedAsignacion.terapia_nombre," "),u(11),be(" ",e.formatDate((e.selectedAsignacion==null?null:e.selectedAsignacion.fecha_inicio_programada)||"")," - ",e.formatDate((e.selectedAsignacion==null?null:e.selectedAsignacion.fecha_fin_programada)||"")," "),u(5),k(e.selectedAsignacion==null?null:e.selectedAsignacion.usuarios_count),u(5),be(" ",e.selectedAsignacion==null?null:e.selectedAsignacion.sesiones_por_semana,"/sem - ",e.formatDuracion(e.selectedAsignacion==null?null:e.selectedAsignacion.duracion_sesion)," "),u(5),k(e.selectedAsignacion==null?null:e.selectedAsignacion.asignado_por_nombre),u(),g("ngIf",e.selectedAsignacion==null?null:e.selectedAsignacion.terapeuta_nombre),u(22),g("ngForOf",e.seguimientoDetalle)("ngForTrackBy",e.trackByUserId),u(),g("ngIf",e.seguimientoDetalle.length===0),u(),g("ngIf",e.seguimientoDetalle.length>0)}}function kO(n,t){if(n&1){let e=P();s(0,"button",174),x("click",function(){C(e);let r=h();return S(r.openAsignarModal())}),I(),s(1,"svg",175),b(2,"path",34),l()()}}var Xd=class n{constructor(t,e){this.supabaseService=t;this.authService=e}terapias=[];usuarios=[];terapeutas=[];asignaciones=[];loading=!1;error="";showAsignarModal=!1;showVerModal=!1;selectedAsignacion=null;seguimientoDetalle=[];asignacionForm={id_terapia:0,usuarios_seleccionados:[],terapeuta_responsable:void 0,fecha_inicio:"",fecha_fin:"",sesiones_por_semana:3,duracion_sesion:60,tipo_asignacion:"individual",notas:"",objetivos_grupales:""};searchTerm="";estadoFilter="all";terapiaFilter="all";tipoFilter="all";Math;ngOnInit(){return v(this,null,function*(){yield this.loadInitialData()})}loadInitialData(){return v(this,null,function*(){this.loading=!0;try{yield Promise.all([this.loadTerapias(),this.loadUsuarios(),this.loadTerapeutas(),this.loadAsignaciones()])}catch(t){console.error("Error cargando datos iniciales:",t),this.error="Error al cargar los datos"}finally{this.loading=!1}})}loadTerapias(){return v(this,null,function*(){try{let t=yield this.supabaseService.getData("terapias");this.terapias=t?.filter(e=>e.status===1)||[]}catch(t){console.error("Error cargando terapias:",t)}})}loadUsuarios(){return v(this,null,function*(){try{let t=yield this.supabaseService.getData("profiles");this.usuarios=t?.filter(e=>e.status===1&&(e.id_perfil===1||e.id_perfil===2))||[]}catch(t){console.error("Error cargando usuarios:",t)}})}loadTerapeutas(){return v(this,null,function*(){try{let t=yield this.supabaseService.getData("profiles");this.terapeutas=t?.filter(e=>e.status===1&&(e.id_perfil===2||e.id_perfil===3))||[]}catch(t){console.error("Error cargando terapeutas:",t)}})}loadAsignaciones(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.client.from("terapia_asignaciones_masivas").select(`
          id,
          id_terapia,
          usuarios_asignados,
          fecha_inicio,
          fecha_fin,
          sesiones_por_semana,
          duracion_sesion,
          tipo_asignacion,
          estado,
          notas,
          objetivos_grupales,
          terapeuta_responsable,
          created_at,
          terapias(nombre, descripcion, tipo, area_especializacion),
          profiles!terapia_asignaciones_masivas_asignado_por_fkey(full_name),
          terapeuta:profiles!terapia_asignaciones_masivas_terapeuta_responsable_fkey(full_name)
        `).eq("status",1).order("created_at",{ascending:!1});if(e)throw e;this.asignaciones=(t||[]).map(i=>({asignacion_id:i.id,terapia_nombre:i.terapias?.nombre||"Terapia no encontrada",terapia_descripcion:i.terapias?.descripcion||"",terapia_tipo:i.terapias?.tipo||"",area_especializacion:i.terapias?.area_especializacion||"",fecha_inicio_programada:i.fecha_inicio,fecha_fin_programada:i.fecha_fin,usuarios_count:i.usuarios_asignados?.length||0,estado_asignacion:i.estado,asignado_por_nombre:i.profiles?.full_name||"Usuario no encontrado",terapeuta_nombre:i.terapeuta?.full_name||null,fecha_asignacion:i.created_at,notas_asignacion:i.notas,sesiones_por_semana:i.sesiones_por_semana,duracion_sesion:i.duracion_sesion,tipo_asignacion:i.tipo_asignacion}))}catch(t){console.error("Error cargando asignaciones:",t),yield this.loadAsignacionesAlternativo()}})}loadAsignacionesAlternativo(){return v(this,null,function*(){try{let[t,e,i]=yield Promise.all([this.supabaseService.getData("terapia_asignaciones_masivas"),this.supabaseService.getData("terapias"),this.supabaseService.getData("profiles")]),r=t?.filter(o=>o.status===1)||[];this.asignaciones=r.map(o=>{let a=e?.find(f=>f.id===o.id_terapia),c=i?.find(f=>f.id===o.asignado_por),p=i?.find(f=>f.id===o.terapeuta_responsable);return{asignacion_id:o.id,terapia_nombre:a?.nombre||"Terapia no encontrada",terapia_descripcion:a?.descripcion||"",terapia_tipo:a?.tipo||"",area_especializacion:a?.area_especializacion||"",fecha_inicio_programada:o.fecha_inicio,fecha_fin_programada:o.fecha_fin,usuarios_count:o.usuarios_asignados?.length||0,estado_asignacion:o.estado,asignado_por_nombre:c?.full_name||"Usuario no encontrado",terapeuta_nombre:p?.full_name||null,fecha_asignacion:o.created_at,notas_asignacion:o.notas,sesiones_por_semana:o.sesiones_por_semana,duracion_sesion:o.duracion_sesion,tipo_asignacion:o.tipo_asignacion}})}catch(t){console.error("Error en m\xE9todo alternativo:",t),this.asignaciones=[]}})}openAsignarModal(){this.asignacionForm={id_terapia:0,usuarios_seleccionados:[],terapeuta_responsable:void 0,fecha_inicio:this.getTomorrowDate(),fecha_fin:this.getNextWeekDate(),sesiones_por_semana:3,duracion_sesion:60,tipo_asignacion:"individual",notas:"",objetivos_grupales:""},this.error="",this.showAsignarModal=!0}closeAsignarModal(){this.showAsignarModal=!1,this.error=""}openVerModal(t){return v(this,null,function*(){this.selectedAsignacion=t,yield this.loadSeguimientoDetalle(t.asignacion_id),this.showVerModal=!0})}closeVerModal(){this.showVerModal=!1,this.selectedAsignacion=null,this.seguimientoDetalle=[]}loadSeguimientoDetalle(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.client.from("v_terapias_asignadas_usuarios").select("*").eq("asignacion_id",t).order("full_name");if(!i&&e){this.seguimientoDetalle=e;return}let{data:r,error:o}=yield this.supabaseService.client.from("terapia_seguimiento_individual").select(`
          id,
          id_asignacion_masiva,
          id_profile,
          progreso,
          estado_individual,
          fecha_inicio_real,
          fecha_fin_real,
          sesiones_completadas,
          sesiones_programadas,
          notas_individuales,
          adherencia_porcentaje,
          profiles(username, full_name)
        `).eq("id_asignacion_masiva",t);if(o)throw o;this.seguimientoDetalle=(r||[]).map(a=>({seguimiento_id:a.id,asignacion_id:a.id_asignacion_masiva,id_profile:a.id_profile,username:a.profiles?.username||"N/A",full_name:a.profiles?.full_name||"Usuario no encontrado",progreso:a.progreso,estado_individual:a.estado_individual,fecha_inicio_real:a.fecha_inicio_real,fecha_fin_real:a.fecha_fin_real,sesiones_completadas:a.sesiones_completadas||0,sesiones_programadas:a.sesiones_programadas||0,notas_individuales:a.notas_individuales,adherencia_porcentaje:a.adherencia_porcentaje||0}))}catch(e){console.error("Error cargando seguimiento detalle:",e),this.seguimientoDetalle=[]}})}toggleUsuario(t){let e=this.asignacionForm.usuarios_seleccionados.indexOf(t);e>-1?this.asignacionForm.usuarios_seleccionados.splice(e,1):this.asignacionForm.usuarios_seleccionados.push(t)}isUsuarioSelected(t){return this.asignacionForm.usuarios_seleccionados.includes(t)}selectAllUsuarios(){this.asignacionForm.usuarios_seleccionados=this.usuarios.map(t=>t.id)}clearAllUsuarios(){this.asignacionForm.usuarios_seleccionados=[]}asignarTerapia(){return v(this,null,function*(){try{if(this.error="",!this.asignacionForm.id_terapia){this.error="Debe seleccionar una terapia";return}if(this.asignacionForm.usuarios_seleccionados.length===0){this.error="Debe seleccionar al menos un usuario";return}if(!this.asignacionForm.fecha_inicio||!this.asignacionForm.fecha_fin){this.error="Debe especificar fechas de inicio y fin";return}if(new Date(this.asignacionForm.fecha_fin)<=new Date(this.asignacionForm.fecha_inicio)){this.error="La fecha de fin debe ser posterior a la fecha de inicio";return}this.loading=!0;let t=this.authService.getCurrentUser();if(!t?.id)throw new Error("Usuario no autenticado");let e;try{let{data:i,error:r}=yield this.supabaseService.client.rpc("asignar_terapia_a_usuarios",{p_id_terapia:this.asignacionForm.id_terapia,p_usuarios_ids:this.asignacionForm.usuarios_seleccionados,p_asignado_por:t.id,p_fecha_inicio:this.asignacionForm.fecha_inicio,p_fecha_fin:this.asignacionForm.fecha_fin,p_terapeuta_responsable:this.asignacionForm.terapeuta_responsable||null,p_sesiones_por_semana:this.asignacionForm.sesiones_por_semana,p_duracion_sesion:this.asignacionForm.duracion_sesion,p_tipo_asignacion:this.asignacionForm.tipo_asignacion,p_notas:this.asignacionForm.notas||null,p_objetivos_grupales:this.asignacionForm.objetivos_grupales||null});if(r)throw r;e=i}catch{console.log("Funci\xF3n RPC no disponible, usando m\xE9todo manual");let r={id_terapia:this.asignacionForm.id_terapia,usuarios_asignados:this.asignacionForm.usuarios_seleccionados,asignado_por:t.id,terapeuta_responsable:this.asignacionForm.terapeuta_responsable||null,fecha_inicio:this.asignacionForm.fecha_inicio,fecha_fin:this.asignacionForm.fecha_fin,sesiones_por_semana:this.asignacionForm.sesiones_por_semana,duracion_sesion:this.asignacionForm.duracion_sesion,tipo_asignacion:this.asignacionForm.tipo_asignacion,notas:this.asignacionForm.notas||null,objetivos_grupales:this.asignacionForm.objetivos_grupales||null,estado:"activa"},{data:o,error:a}=yield this.supabaseService.client.from("terapia_asignaciones_masivas").insert(r).select().single();if(a)throw a;e=o.id;let c=this.asignacionForm.usuarios_seleccionados.map(f=>({id_asignacion_masiva:e,id_profile:f,id_terapia:this.asignacionForm.id_terapia,progreso:0,estado_individual:"pendiente",sesiones_completadas:0,sesiones_programadas:this.calcularSesionesProgramadas(),adherencia_porcentaje:0})),{error:p}=yield this.supabaseService.client.from("terapia_seguimiento_individual").insert(c);if(p)throw p}console.log("Terapia asignada exitosamente, ID:",e),yield this.loadAsignaciones(),this.closeAsignarModal(),alert(`Terapia asignada exitosamente a ${this.asignacionForm.usuarios_seleccionados.length} usuarios`)}catch(t){console.error("Error asignando terapia:",t),this.error=t instanceof Error?t.message:"Error al asignar la terapia"}finally{this.loading=!1}})}calcularSesionesProgramadas(){let t=new Date(this.asignacionForm.fecha_inicio),e=new Date(this.asignacionForm.fecha_fin),i=Math.abs(e.getTime()-t.getTime()),r=Math.ceil(i/(1e3*60*60*24));return Math.ceil(r/7)*this.asignacionForm.sesiones_por_semana}cancelarAsignacion(t){return v(this,null,function*(){if(confirm("\xBFEst\xE1 seguro de cancelar esta asignaci\xF3n? Esta acci\xF3n afectar\xE1 a todos los usuarios asignados."))try{let{error:i}=yield this.supabaseService.client.from("terapia_asignaciones_masivas").update({estado:"cancelada",updated_at:new Date().toISOString()}).eq("id",t);if(i)throw i;yield this.loadAsignaciones(),alert("Asignaci\xF3n cancelada exitosamente")}catch(i){console.error("Error cancelando asignaci\xF3n:",i),alert("Error al cancelar la asignaci\xF3n")}})}actualizarProgreso(t,e){return v(this,null,function*(){try{let i=parseInt(e.target?.value||e)||0;if(i<0||i>100){alert("El progreso debe estar entre 0 y 100");return}let r={progreso:i,updated_at:new Date().toISOString()};if(i===0)r.estado_individual="pendiente";else if(i<100){r.estado_individual="en_progreso";let a=this.seguimientoDetalle.find(c=>c.seguimiento_id===t);a&&!a.fecha_inicio_real&&(r.fecha_inicio_real=new Date().toISOString().split("T")[0])}else r.estado_individual="completada",r.fecha_fin_real=new Date().toISOString().split("T")[0];let{error:o}=yield this.supabaseService.client.from("terapia_seguimiento_individual").update(r).eq("id",t);if(o)throw o;this.selectedAsignacion&&(yield this.loadSeguimientoDetalle(this.selectedAsignacion.asignacion_id))}catch(i){console.error("Error actualizando progreso:",i),alert("Error al actualizar el progreso")}})}editarNotasIndividuales(t){return v(this,null,function*(){let e=prompt("Ingrese las notas para este usuario:",t.notas_individuales||"");if(e!==null)try{let{error:i}=yield this.supabaseService.client.from("terapia_seguimiento_individual").update({notas_individuales:e,updated_at:new Date().toISOString()}).eq("id",t.seguimiento_id);if(i)throw i;this.selectedAsignacion&&(yield this.loadSeguimientoDetalle(this.selectedAsignacion.asignacion_id))}catch(i){console.error("Error actualizando notas:",i),alert("Error al actualizar las notas")}})}getEstadisticasProgreso(){if(!this.seguimientoDetalle||this.seguimientoDetalle.length===0)return{pendientes:0,enProgreso:0,completadas:0,promedioProgreso:0,promedioAdherencia:0};let t=this.seguimientoDetalle.filter(p=>p.estado_individual==="pendiente").length,e=this.seguimientoDetalle.filter(p=>p.estado_individual==="en_progreso").length,i=this.seguimientoDetalle.filter(p=>p.estado_individual==="completada").length,r=this.seguimientoDetalle.reduce((p,f)=>p+(f.progreso||0),0),o=Math.round(r/this.seguimientoDetalle.length),a=this.seguimientoDetalle.reduce((p,f)=>p+(f.adherencia_porcentaje||0),0),c=Math.round(a/this.seguimientoDetalle.length);return{pendientes:t,enProgreso:e,completadas:i,promedioProgreso:o,promedioAdherencia:c}}getTerapiaNombre(t){return this.terapias.find(i=>i.id===t)?.nombre||"Terapia no encontrada"}getUserName(t){let e=this.usuarios.find(i=>i.id===t);return e?.full_name||e?.username||"Usuario no encontrado"}getTerapeutaNombre(t){return t?this.terapeutas.find(i=>i.id===t)?.full_name||"Terapeuta no encontrado":"Sin asignar"}getEstadoColor(t){switch(t){case"activa":return"green";case"completada":return"blue";case"pausada":return"yellow";case"cancelada":return"red";default:return"gray"}}getEstadoIcon(t){switch(t){case"activa":return"fas fa-play-circle";case"completada":return"fas fa-check-circle";case"pausada":return"fas fa-pause-circle";case"cancelada":return"fas fa-times-circle";default:return"fas fa-circle"}}formatDate(t){return new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})}formatDuracion(t){if(!t)return"Sin especificar";let e=Math.floor(t/60),i=t%60;return e>0?`${e}h ${i}m`:`${i}m`}getTomorrowDate(){let t=new Date;return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]}getNextWeekDate(){let t=new Date;return t.setDate(t.getDate()+7),t.toISOString().split("T")[0]}get filteredAsignaciones(){let t=[...this.asignaciones];if(this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.terapia_nombre.toLowerCase().includes(e)||i.asignado_por_nombre.toLowerCase().includes(e)||i.terapeuta_nombre?.toLowerCase().includes(e)||i.area_especializacion?.toLowerCase().includes(e))}return this.estadoFilter!=="all"&&(t=t.filter(e=>e.estado_asignacion===this.estadoFilter)),this.terapiaFilter!=="all"&&(t=t.filter(e=>e.terapia_nombre===this.terapiaFilter)),this.tipoFilter!=="all"&&(t=t.filter(e=>e.tipo_asignacion===this.tipoFilter)),t}clearFilters(){this.searchTerm="",this.estadoFilter="all",this.terapiaFilter="all",this.tipoFilter="all"}refreshData(){return v(this,null,function*(){yield this.loadAsignaciones()})}canAssignTerapias(){return this.authService.isAdmin()||this.authService.hasProfile(3)}trackByAsignacionId(t,e){return e.asignacion_id}trackByUserId(t,e){return e.id}trackByTerapiaId(t,e){return e.id}static \u0275fac=function(e){return new(e||n)(O(me),O(re))};static \u0275cmp=ie({type:n,selectors:[["app-terapias-usuario"]],standalone:!1,decls:53,vars:11,consts:[["filtrosAplicados",""],["pluralUsuarios",""],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"flex","space-x-2"],[1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["class","inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",3,"click",4,"ngIf"],[1,"bg-white","rounded-lg","shadow","mb-6","p-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"md:col-span-2"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","placeholder","Buscar por terapia, asignador o terapeuta...",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["value","all"],["value","activa"],["value","completada"],["value","pausada"],["value","cancelada"],["value","individual"],["value","grupal"],[1,"mt-4","flex","justify-end"],[1,"text-sm","text-red-600","hover:text-red-800",3,"click"],["class","bg-red-50 border border-red-200 rounded-md p-4 mb-6",4,"ngIf"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","bg-white shadow overflow-hidden sm:rounded-md",4,"ngIf"],["class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],["class","md:hidden fixed bottom-6 right-6 w-14 h-14 bg-red-600 text-white rounded-full shadow-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all duration-200 z-40","title","Asignar terapia",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-red-600","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"-ml-1","mr-2","h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-6"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-red-600"],[1,"bg-white","shadow","overflow-hidden","sm:rounded-md"],[1,"px-4","py-5","sm:px-6","border-b","border-gray-200"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-12",4,"ngIf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],["class","text-xs text-gray-400",4,"ngIf"],[1,"flex","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","text-gray-400","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"text-sm","text-gray-500","ml-1"],[1,"text-xs","text-gray-400","mt-1"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"text-gray-500"],["class","text-xs text-gray-400 mt-1",4,"ngIf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-sm","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"flex","justify-end","space-x-2"],["title","Ver seguimiento",1,"text-blue-600","hover:text-blue-900","p-2","rounded-full","hover:bg-blue-50",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["class","text-red-600 hover:text-red-900 p-2 rounded-full hover:bg-red-50","title","Cancelar asignaci\xF3n",3,"click",4,"ngIf"],[1,"text-xs","text-gray-400"],["title","Cancelar asignaci\xF3n",1,"text-red-600","hover:text-red-900","p-2","rounded-full","hover:bg-red-50",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[4,"ngIf","ngIfElse"],[1,"mt-6"],["class","inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",3,"click",4,"ngIf"],["class","inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-red-600","hover:bg-red-700",3,"click"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","shadow-sm","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-center","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-4xl","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-red-600"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","w-full"],[1,"mt-2"],[1,"bg-white","px-4","pb-4","sm:px-6","max-h-96","overflow-y-auto"],[1,"space-y-6"],[1,"text-red-500"],["name","terapia",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["value","0"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["name","tipoAsignacion",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["name","terapeuta",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","date","name","fechaInicio",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["type","date","name","fechaFin",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["type","number","name","sesionesSemana","min","1","max","7",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["type","number","name","duracionSesion","min","15","max","180","step","15",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],["name","notas","rows","3","placeholder","Notas adicionales sobre la asignaci\xF3n...",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[4,"ngIf"],[1,"flex","justify-between","items-center","mb-3"],[1,"block","text-sm","font-medium","text-gray-700"],["type","button",1,"text-xs","text-red-600","hover:text-red-800",3,"click"],["type","button",1,"text-xs","text-gray-600","hover:text-gray-800",3,"click"],[1,"border","border-gray-300","rounded-md","p-3","max-h-48","overflow-y-auto"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2"],["class","flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",3,"bg-red-50",4,"ngFor","ngForOf","ngForTrackBy"],["class","mt-4 bg-red-50 border border-red-200 rounded-md p-3",4,"ngIf"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-red-600","text-base","font-medium","text-white","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","sm:ml-3","sm:w-auto","sm:text-sm","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","sm:mt-0","sm:ml-3","sm:w-auto","sm:text-sm","disabled:opacity-50",3,"click","disabled"],["name","objetivosGrupales","rows","3","placeholder","Objetivos espec\xEDficos para la terapia grupal...",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-red-500","focus:border-red-500",3,"ngModelChange","ngModel"],[1,"flex","items-center","p-2","hover:bg-gray-50","rounded","cursor-pointer"],["type","checkbox",1,"h-4","w-4","text-red-600","focus:ring-red-500","border-gray-300","rounded",3,"change","checked"],[1,"ml-3","flex-1"],[1,"text-xs","text-gray-500"],[1,"mt-4","bg-red-50","border","border-red-200","rounded-md","p-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-6xl","sm:w-full"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-blue-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"bg-white","px-4","pb-4","sm:px-6"],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","text-sm"],[1,"font-medium","text-gray-700"],[1,"text-gray-900"],["class","text-xs text-gray-500",4,"ngIf"],["class","text-center py-8",4,"ngIf"],["class","mt-6 bg-gray-50 rounded-lg p-4",4,"ngIf"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","sm:w-auto","sm:text-sm",3,"click"],[1,"h-8","w-8","bg-gray-300","rounded-full","flex","items-center","justify-center","mr-3"],[1,"text-xs","font-medium","text-gray-700"],[1,"w-16","bg-gray-200","rounded-full","h-2","mr-3"],[1,"bg-blue-600","h-2","rounded-full"],["class","mt-2",4,"ngIf"],[1,"w-12","bg-gray-200","rounded-full","h-2","mr-2"],[1,"bg-purple-600","h-2","rounded-full"],["class","text-gray-500",4,"ngIf"],[1,"px-6","py-4"],[1,"text-sm","text-gray-900","max-w-xs"],["class","text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50","title","Editar notas",3,"click",4,"ngIf"],["type","range","min","0","max","100",1,"w-full","h-2","bg-gray-200","rounded-lg","appearance-none","cursor-pointer","slider",3,"input","value"],["title","Editar notas",1,"text-indigo-600","hover:text-indigo-900","p-1","rounded","hover:bg-indigo-50",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-center","py-8"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-8","w-8","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"],[1,"mt-6","bg-gray-50","rounded-lg","p-4"],[1,"text-sm","font-medium","text-gray-900","mb-3"],[1,"grid","grid-cols-2","md:grid-cols-5","gap-4","text-center"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-2xl","font-bold","text-yellow-600"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-2xl","font-bold","text-purple-600"],["title","Asignar terapia",1,"md:hidden","fixed","bottom-6","right-6","w-14","h-14","bg-red-600","text-white","rounded-full","shadow-lg","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-500","focus:ring-offset-2","transition-all","duration-200","z-40",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","mx-auto"]],template:function(e,i){e&1&&(s(0,"div",2)(1,"div",3)(2,"div",4)(3,"div")(4,"h1",5),d(5,"Asignaci\xF3n de Terapias a Usuarios"),l(),s(6,"p",6),d(7),l()(),s(8,"div",7)(9,"button",8),x("click",function(){return i.refreshData()}),I(),s(10,"svg",9),b(11,"path",10),l(),d(12," Refrescar "),l(),w(13,JP,4,0,"button",11),l()()(),T(),s(14,"div",12)(15,"div",13)(16,"div",14)(17,"label",15),d(18,"Buscar"),l(),s(19,"input",16),F("ngModelChange",function(o){return N(i.searchTerm,o)||(i.searchTerm=o),o}),l()(),s(20,"div")(21,"label",15),d(22,"Estado"),l(),s(23,"select",17),F("ngModelChange",function(o){return N(i.estadoFilter,o)||(i.estadoFilter=o),o}),s(24,"option",18),d(25,"Todos los estados"),l(),s(26,"option",19),d(27,"Activa"),l(),s(28,"option",20),d(29,"Completada"),l(),s(30,"option",21),d(31,"Pausada"),l(),s(32,"option",22),d(33,"Cancelada"),l()()(),s(34,"div")(35,"label",15),d(36,"Tipo"),l(),s(37,"select",17),F("ngModelChange",function(o){return N(i.tipoFilter,o)||(i.tipoFilter=o),o}),s(38,"option",18),d(39,"Todos los tipos"),l(),s(40,"option",23),d(41,"Individual"),l(),s(42,"option",24),d(43,"Grupal"),l()()()(),s(44,"div",25)(45,"button",26),x("click",function(){return i.clearFilters()}),d(46," Limpiar filtros "),l()()(),w(47,XP,7,1,"div",27)(48,eO,2,0,"div",28)(49,dO,25,4,"div",29),l(),w(50,bO,98,22,"div",30)(51,TO,68,12,"div",30)(52,kO,3,0,"button",31)),e&2&&(u(7),E(" Gestiona las asignaciones masivas de terapias - Total: ",i.asignaciones.length," "),u(6),g("ngIf",i.canAssignTerapias()),u(6),R("ngModel",i.searchTerm),u(4),R("ngModel",i.estadoFilter),u(14),R("ngModel",i.tipoFilter),u(10),g("ngIf",i.error&&!i.showAsignarModal&&!i.showVerModal),u(),g("ngIf",i.loading&&!i.showAsignarModal&&!i.showVerModal),u(),g("ngIf",!i.loading),u(),g("ngIf",i.showAsignarModal),u(),g("ngIf",i.showVerModal),u(),g("ngIf",!i.showAsignarModal&&!i.showVerModal&&i.canAssignTerapias()))},dependencies:[He,ve,le,Je,je,Le,we,xn,Ae,Ie,Ke,Cn,wn,Re,ut,_n],styles:[".container[_ngcontent-%COMP%]{max-width:100%;margin:0 auto;padding:0 1rem}.modal-enter[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalEnter .3s ease-out}@keyframes _ngcontent-%COMP%_modalEnter{0%{opacity:0;transform:scale(.95) translateY(-10px)}to{opacity:1;transform:scale(1) translateY(0)}}.modal-backdrop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_backdropEnter .3s ease-out}@keyframes _ngcontent-%COMP%_backdropEnter{0%{opacity:0}to{opacity:.75}}.terminal-container[_ngcontent-%COMP%]{background-color:#000;color:#0f0;font-family:Courier New,Monaco,Menlo,monospace;position:relative;border-radius:8px;overflow:hidden}.terminal-header[_ngcontent-%COMP%]{background-color:#1a1a1a;padding:.75rem 1rem;border-bottom:1px solid #333;display:flex;align-items:center;justify-content:space-between}.terminal-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.terminal-control[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.terminal-control.close[_ngcontent-%COMP%]{background-color:#ff5f56}.terminal-control.minimize[_ngcontent-%COMP%]{background-color:#ffbd2e}.terminal-control.maximize[_ngcontent-%COMP%]{background-color:#27ca3f}.terminal-content[_ngcontent-%COMP%]{padding:1.5rem;font-size:.875rem;line-height:1.5;min-height:400px}.watermark[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) rotate(15deg);font-size:8rem;font-weight:700;color:#ffffff0d;pointer-events:none;-webkit-user-select:none;user-select:none;z-index:1}.terminal-text[_ngcontent-%COMP%]{position:relative;z-index:10}.therapy-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 1px 3px #0000001a;transition:all .2s ease-in-out;border:1px solid #e5e7eb}.therapy-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #0000001a;transform:translateY(-1px)}.therapy-card-header[_ngcontent-%COMP%]{padding:1.25rem;border-bottom:1px solid #f3f4f6}.therapy-card-body[_ngcontent-%COMP%]{padding:1.25rem}.therapy-card-footer[_ngcontent-%COMP%]{padding:1rem 1.25rem;background-color:#f9fafb;border-top:1px solid #f3f4f6;border-radius:0 0 12px 12px}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .625rem;border-radius:9999px;font-size:.75rem;font-weight:500;text-transform:capitalize}.badge-fisica[_ngcontent-%COMP%]{background-color:#dbeafe;color:#1e40af}.badge-respiratoria[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.badge-neurologica[_ngcontent-%COMP%]{background-color:#f3e8ff;color:#7c3aed}.badge-ocupacional[_ngcontent-%COMP%]{background-color:#fed7aa;color:#ea580c}.badge-cardiaca[_ngcontent-%COMP%]{background-color:#fecaca;color:#dc2626}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .5rem;border-radius:.375rem;font-size:.75rem;font-weight:500}.status-activa[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.status-completada[_ngcontent-%COMP%]{background-color:#dbeafe;color:#1e40af}.status-pausada[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.status-cancelada[_ngcontent-%COMP%]{background-color:#fecaca;color:#991b1b}.status-pendiente[_ngcontent-%COMP%]{background-color:#f3f4f6;color:#374151}.status-en-progreso[_ngcontent-%COMP%]{background-color:#dbeafe;color:#1d4ed8}.status-abandonada[_ngcontent-%COMP%]{background-color:#fee2e2;color:#dc2626}.progress-bar[_ngcontent-%COMP%]{width:100%;height:.5rem;background-color:#e5e7eb;border-radius:.25rem;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease-in-out;border-radius:.25rem}.progress-green[_ngcontent-%COMP%]{background-color:#10b981}.progress-blue[_ngcontent-%COMP%]{background-color:#3b82f6}.progress-yellow[_ngcontent-%COMP%]{background-color:#f59e0b}.progress-red[_ngcontent-%COMP%]{background-color:#ef4444}.form-section[_ngcontent-%COMP%]{background-color:#f9fafb;border:1px solid #e5e7eb;border-radius:.5rem;padding:1rem;margin-bottom:1rem}.form-section.active[_ngcontent-%COMP%]{border-color:#dc2626;background-color:#fef2f2}.section-selector[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:1.5rem}.section-card[_ngcontent-%COMP%]{padding:1rem;border:2px solid #e5e7eb;border-radius:.5rem;cursor:pointer;transition:all .2s ease-in-out;text-align:center}.section-card[_ngcontent-%COMP%]:hover, .section-card.selected[_ngcontent-%COMP%]{border-color:#dc2626;background-color:#fef2f2}.section-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;color:#374151;margin-bottom:.25rem}.section-card.selected[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#dc2626}.section-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280}.exercise-card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e5e7eb;border-radius:.5rem;padding:1rem;margin-bottom:.75rem}.exercise-header[_ngcontent-%COMP%]{display:flex;justify-content:between;align-items:center;margin-bottom:.75rem;padding-bottom:.5rem;border-bottom:1px solid #f3f4f6}.exercise-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.exercise-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.25rem;border:none;background:none;cursor:pointer;border-radius:.25rem;transition:background-color .2s ease-in-out}.exercise-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.exercise-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:.75rem}.fab[_ngcontent-%COMP%]{position:fixed;bottom:1.5rem;right:1.5rem;width:3.5rem;height:3.5rem;background-color:#dc2626;color:#fff;border:none;border-radius:50%;box-shadow:0 4px 6px #0000001a;cursor:pointer;transition:all .2s ease-in-out;z-index:1000}.fab[_ngcontent-%COMP%]:hover{background-color:#b91c1c;transform:scale(1.05);box-shadow:0 6px 8px #00000026}.fab[_ngcontent-%COMP%]:active{transform:scale(.95)}@media (min-width: 768px){.fab[_ngcontent-%COMP%]{display:none}}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;width:2rem;height:2rem;border:3px solid #f3f4f6;border-radius:50%;border-top-color:#dc2626;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltip-text[_ngcontent-%COMP%]{visibility:hidden;width:120px;background-color:#374151;color:#fff;text-align:center;border-radius:6px;padding:5px;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-60px;opacity:0;transition:opacity .3s;font-size:.75rem}.tooltip[_ngcontent-%COMP%]:hover   .tooltip-text[_ngcontent-%COMP%]{visibility:visible;opacity:1}@media (max-width: 640px){.container[_ngcontent-%COMP%]{padding:0 .5rem}.therapy-card[_ngcontent-%COMP%]{margin-bottom:1rem}.section-selector[_ngcontent-%COMP%], .exercise-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.terminal-content[_ngcontent-%COMP%]{padding:1rem;font-size:.75rem}.watermark[_ngcontent-%COMP%]{font-size:4rem}}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.focus-visible[_ngcontent-%COMP%]:focus{outline:2px solid #dc2626;outline-offset:2px}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;text-align:left;border-bottom:1px solid #e5e7eb}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f9fafb;font-weight:600;color:#374151}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.text-truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.slide-in-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .3s ease-out}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.bounce[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce .5s ease-in-out}@keyframes _ngcontent-%COMP%_bounce{0%,20%,53%,80%,to{transform:translateZ(0)}40%,43%{transform:translate3d(0,-5px,0)}70%{transform:translate3d(0,-2px,0)}90%{transform:translate3d(0,-1px,0)}}"]})};var PO=(n,t,e,i)=>({"bg-gray-100 text-gray-800":n,"bg-yellow-100 text-yellow-800":t,"bg-green-100 text-green-800":e,"bg-red-100 text-red-800":i});function OO(n,t){if(n&1&&(s(0,"div",33)(1,"div",34),I(),s(2,"svg",35),b(3,"path",36),l(),T(),s(4,"div",37)(5,"p",38),d(6),l()()()()),n&2){let e=h();u(6),k(e.error)}}function AO(n,t){n&1&&(s(0,"div",39),b(1,"div",40),l())}function RO(n,t){if(n&1&&(s(0,"div",62)(1,"span"),d(2,"Adherencia:"),l(),s(3,"span"),d(4),l()()),n&2){let e=h(2).$implicit;u(4),E("",e.adherencia_porcentaje,"%")}}function FO(n,t){if(n&1&&(s(0,"div",61)(1,"div",62)(2,"span"),d(3,"Sesiones:"),l(),s(4,"span"),d(5),l()(),w(6,RO,5,1,"div",75),l()),n&2){let e=h().$implicit;u(5),be("",e.sesiones_completadas," / ",e.sesiones_programadas,""),u(),g("ngIf",e.adherencia_porcentaje!==void 0)}}function NO(n,t){if(n&1&&(s(0,"div"),d(1),l()),n&2){let e=h(2).$implicit,i=h(2);u(),E(" Iniciado: ",i.formatDate(e.fecha_inicio_real)," ")}}function VO(n,t){if(n&1&&(s(0,"div"),d(1),l()),n&2){let e=h(2).$implicit,i=h(2);u(),E(" Completado: ",i.formatDate(e.fecha_fin_real)," ")}}function jO(n,t){if(n&1&&(s(0,"div",76),w(1,NO,2,1,"div",77)(2,VO,2,1,"div",77),l()),n&2){let e=h().$implicit;u(),g("ngIf",e.fecha_inicio_real),u(),g("ngIf",e.fecha_fin_real)}}function LO(n,t){if(n&1&&(s(0,"div",78)(1,"p",79)(2,"strong"),d(3,"Mis notas:"),l(),d(4),l()()),n&2){let e=h().$implicit;u(4),E(" ",e.notas_individuales," ")}}function UO(n,t){if(n&1){let e=P();s(0,"div",43)(1,"div")(2,"div",44)(3,"div",45)(4,"h3",46),d(5),l(),s(6,"p",47),d(7),l()(),s(8,"span",48),d(9),l()()(),s(10,"div",49)(11,"div",50)(12,"div",51)(13,"span",52),d(14,"Mi Progreso"),l(),s(15,"span",53),d(16),l()(),s(17,"div",54),b(18,"div",55),l(),s(19,"div",56)(20,"input",57),x("input",function(r){let o=C(e).$implicit,a=h(2);return S(a.actualizarMiProgreso(o,+r.target.value))}),l()()(),s(21,"div",58)(22,"span",59),d(23),l(),s(24,"span",60),d(25),l()(),s(26,"div",61)(27,"div",62)(28,"span"),d(29,"Inicio:"),l(),s(30,"span"),d(31),l()(),s(32,"div",62)(33,"span"),d(34,"Fin:"),l(),s(35,"span"),d(36),l()(),s(37,"div",63)(38,"span"),d(39,"D\xEDas restantes:"),l(),s(40,"span"),d(41),l()()(),s(42,"div",58)(43,"span",64),d(44),l(),s(45,"span",60),d(46),l()(),w(47,FO,7,3,"div",65)(48,jO,3,2,"div",66)(49,LO,5,1,"div",67),s(50,"div",68)(51,"button",69),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.openViewModal(r))}),I(),s(52,"svg",70),b(53,"path",71)(54,"path",72),l()(),T(),s(55,"button",73),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.safeExportTerapia(r))}),I(),s(56,"svg",70),b(57,"path",74),l()()()()()}if(n&2){let e=t.$implicit,i=h(2);X("border-green-500",e.estado_temporal==="vigente")("border-blue-500",e.estado_temporal==="pendiente")("border-red-500",e.estado_temporal==="vencida"),u(),W("px-6 py-4 "+(e.estado_temporal==="vigente"?"bg-gradient-to-r from-green-500 to-green-600":e.estado_temporal==="pendiente"?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-red-500 to-red-600")),u(4),k(e.terapia_nombre),u(2),k(e.terapia_descripcion),u(2),E(" ",i.getEstadoTemporalText(e.estado_temporal)," "),u(7),E("",e.progreso,"%"),u(2),At("width",e.progreso,"%"),X("bg-gray-400",e.progreso===0)("bg-red-400",e.progreso>0&&e.progreso<30)("bg-yellow-400",e.progreso>=30&&e.progreso<70)("bg-green-400",e.progreso>=70),u(2),g("value",e.progreso),u(2),g("ngClass",Fn(40,PO,e.estado_individual==="pendiente",e.estado_individual==="en_progreso",e.estado_individual==="completada",e.estado_individual==="abandonada")),u(),E(" ",i.getEstadoIndividualText(e.estado_individual)," "),u(2),k(e.terapia_nivel),u(6),k(i.formatDate(e.fecha_inicio_programada)),u(5),k(i.formatDate(e.fecha_fin_programada)),u(),X("text-green-600",e.dias_restantes>7)("text-yellow-600",e.dias_restantes<=7&&e.dias_restantes>0)("text-red-600",e.dias_restantes<=0),u(4),k(i.formatDiasRestantes(e.dias_restantes)),u(3),E(" ",e.terapia_tipo," "),u(2),k(i.formatDuracion(e.duracion_estimada)),u(),g("ngIf",e.sesiones_completadas!==void 0&&e.sesiones_programadas!==void 0),u(),g("ngIf",e.fecha_inicio_real||e.fecha_fin_real),u(),g("ngIf",e.notas_individuales)}}function BO(n,t){if(n&1&&(s(0,"div",41),w(1,UO,58,45,"div",42),l()),n&2){let e=h();u(),g("ngForOf",e.filteredTerapias)("ngForTrackBy",e.trackByTerapiaId)}}function $O(n,t){n&1&&(gt(0),d(1," No tienes terapias asignadas en este momento. "),ht())}function qO(n,t){n&1&&d(0," No se encontraron terapias con los filtros aplicados. ")}function HO(n,t){if(n&1){let e=P();s(0,"button",88),x("click",function(){C(e);let r=h(2);return S(r.clearFilters())}),d(1," Limpiar filtros "),l()}}function zO(n,t){if(n&1&&(s(0,"div",80),I(),s(1,"svg",81),b(2,"path",82),l(),T(),s(3,"h3",83),d(4,"No hay terapias asignadas"),l(),s(5,"p",84),w(6,$O,2,0,"ng-container",85)(7,qO,1,0,"ng-template",null,0,Nn),l(),s(9,"div",86),w(10,HO,2,0,"button",87),l()()),n&2){let e=Rn(8),i=h();u(6),g("ngIf",i.misTerapias.length===0)("ngIfElse",e),u(4),g("ngIf",i.misTerapias.length>0)}}function GO(n,t){n&1&&(s(0,"div",126)(1,"div",34),I(),s(2,"svg",127),b(3,"path",128),l(),T(),s(4,"div",37)(5,"p",129),d(6,"\xA1Terapia copiada al portapapeles!"),l()()()())}function WO(n,t){if(n&1){let e=P();s(0,"button",130),x("click",function(){C(e);let r=h(2);return S(r.exportarTerapia(r.selectedTerapia,r.selectedSeguimiento||void 0))}),I(),s(1,"svg",121),b(2,"path",74),l(),d(3," Descargar "),l()}}function YO(n,t){if(n&1){let e=P();s(0,"div",89)(1,"div",90)(2,"div",91),x("click",function(){C(e);let r=h();return S(r.closeViewModal())}),l(),s(3,"span",92),d(4,"\u200B"),l(),s(5,"div",93)(6,"div",94)(7,"div",95)(8,"div",96),I(),s(9,"svg",97),b(10,"path",82),l()(),T(),s(11,"div",98)(12,"h3",99),d(13),l(),s(14,"div",100)(15,"p",60),d(16),l()()()()(),s(17,"div",101)(18,"div",102)(19,"div",103)(20,"div")(21,"span",104),d(22,"Mi Progreso:"),l(),s(23,"div",105)(24,"div",106),b(25,"div",107),l(),d(26),l()(),s(27,"div")(28,"span",104),d(29,"Estado:"),l(),s(30,"div",108),d(31),l()(),s(32,"div")(33,"span",104),d(34,"Per\xEDodo:"),l(),s(35,"div",108),d(36),l()(),s(37,"div")(38,"span",104),d(39,"D\xEDas restantes:"),l(),s(40,"div",108),d(41),l()()()(),s(42,"div",109)(43,"div",110),b(44,"img",111),l(),s(45,"div",112)(46,"div",6),b(47,"div",113)(48,"div",114)(49,"div",115),l(),s(50,"div",116),d(51),l()(),s(52,"pre",117),d(53),l()(),w(54,GO,7,0,"div",118),s(55,"div",119)(56,"button",120),x("click",function(){let r;C(e);let o=h();return S(o.copyToClipboard(o.getFormattedTerapia(o.selectedTerapia,(r=o.selectedSeguimiento)!==null&&r!==void 0?r:void 0)))}),I(),s(57,"svg",121),b(58,"path",122),l(),d(59," Copiar "),l(),w(60,WO,4,0,"button",123),l()(),T(),s(61,"div",124)(62,"button",125),x("click",function(){C(e);let r=h();return S(r.closeViewModal())}),d(63," Cerrar "),l()()()()()}if(n&2){let e=h();u(13),E(" ",e.selectedTerapia==null?null:e.selectedTerapia.nombre," "),u(3),E(" Mi terapia asignada - Progreso: ",e.selectedSeguimiento==null?null:e.selectedSeguimiento.progreso,"% "),u(9),At("width",e.selectedSeguimiento==null?null:e.selectedSeguimiento.progreso,"%"),u(),E(" ",e.selectedSeguimiento==null?null:e.selectedSeguimiento.progreso,"% "),u(5),k(e.getEstadoIndividualText((e.selectedSeguimiento==null?null:e.selectedSeguimiento.estado_individual)||"")),u(5),be(" ",e.formatDate(e.selectedSeguimiento==null?null:e.selectedSeguimiento.fecha_inicio_programada)," - ",e.formatDate(e.selectedSeguimiento==null?null:e.selectedSeguimiento.fecha_fin_programada)," "),u(4),X("text-green-600",((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)>7)("text-yellow-600",((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)<=7&&((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)>0)("text-red-600",((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)<=0),u(),E(" ",e.formatDiasRestantes((e.selectedSeguimiento==null?null:e.selectedSeguimiento.dias_restantes)||0)," "),u(10),E(" ",e.getFileName(e.selectedTerapia)," "),u(2),k(e.getFormattedTerapia(e.selectedTerapia,e.selectedSeguimiento||void 0)),u(),g("ngIf",e.copySuccess),u(6),g("ngIf",e.selectedTerapia)}}function ZO(n,t){n&1&&(I(),s(0,"svg",142),b(1,"path",128),l())}function QO(n,t){n&1&&(I(),s(0,"svg",142),b(1,"path",141),l())}function KO(n,t){n&1&&(I(),s(0,"svg",142),b(1,"path",143),l())}function JO(n,t){n&1&&(I(),s(0,"svg",142),b(1,"path",144),l())}function XO(n,t){if(n&1){let e=P();s(0,"div")(1,"div",131)(2,"div",132)(3,"div",133)(4,"div",134),w(5,ZO,2,0,"svg",135)(6,QO,2,0,"svg",135)(7,KO,2,0,"svg",135)(8,JO,2,0,"svg",135),l(),s(9,"div",136)(10,"p",137),d(11),l()(),s(12,"div",138)(13,"button",139),x("click",function(){C(e);let r=h();return S(r.cerrarNotificacion())}),I(),s(14,"svg",140),b(15,"path",141),l()()()()()()()}if(n&2){let e=h();W("fixed top-4 right-4 z-50 max-w-sm w-full shadow-lg rounded-lg pointer-events-auto "+(e.tipoMensaje==="success"?"bg-green-500":e.tipoMensaje==="error"?"bg-red-500":e.tipoMensaje==="warning"?"bg-yellow-500":"bg-blue-500")),u(5),g("ngIf",e.tipoMensaje==="success"),u(),g("ngIf",e.tipoMensaje==="error"),u(),g("ngIf",e.tipoMensaje==="info"),u(),g("ngIf",e.tipoMensaje==="warning"),u(3),k(e.mensaje)}}var eu=class n{constructor(t,e){this.terapiasService=t;this.authService=e}misTerapias=[];filteredTerapias=[];estadisticasPersonales;loading=!1;error="";showViewModal=!1;selectedTerapia=null;selectedSeguimiento=null;copySuccess=!1;mensaje="";tipoMensaje="info";mostrarMensaje=!1;searchTerm="";estadoFilter="all";estadoIndividualFilter="all";progresoFilter="all";ngOnInit(){return v(this,null,function*(){yield Promise.all([this.loadMisTerapias(),this.loadEstadisticasPersonales()])})}loadMisTerapias(){return v(this,null,function*(){this.loading=!0,this.error="";try{console.log("Cargando terapias asignadas al usuario...");let t=this.authService.getCurrentUser();if(!t?.id)throw new Error("No se pudo obtener el usuario actual");console.log("Usuario actual:",t.id);let e=[];try{e=(yield this.terapiasService.getTerapiasAsignadasUsuarios()).filter(r=>r.id_profile===t.id),console.log("Terapias filtradas para el usuario:",e.length)}catch(i){console.warn("Error con el servicio principal, intentando m\xE9todo alternativo:",i),e=yield this.loadTerapiasAlternativo(t.id)}this.misTerapias=e.map(i=>{let r=this.convertirFechaAString(i.fecha_inicio_programada),o=this.convertirFechaAString(i.fecha_fin_programada),{estado:a,diasRestantes:c}=this.calcularEstadoTemporal(r,o);return{seguimiento_id:i.seguimiento_id,asignacion_id:i.asignacion_id,id_profile:i.id_profile,username:i.username||t.username||"",full_name:i.full_name||t.full_name||"",terapia_nombre:i.terapia_nombre,terapia_id:i.id_terapia||0,terapia_descripcion:i.terapia_descripcion,terapia_tipo:i.terapia_tipo,terapia_nivel:i.terapia_nivel,duracion_estimada:i.duracion_estimada,progreso:i.progreso||0,estado_individual:i.estado_individual||"pendiente",fecha_inicio_real:this.convertirFechaAString(i.fecha_inicio_real),fecha_fin_real:this.convertirFechaAString(i.fecha_fin_real),fecha_inicio_programada:r,fecha_fin_programada:o,notas_individuales:i.notas_individuales,estado_temporal:a,dias_restantes:c,sesiones_completadas:i.sesiones_completadas||0,sesiones_programadas:i.sesiones_programadas||0,adherencia_porcentaje:i.adherencia_porcentaje||0,nivel_dolor_actual:i.nivel_dolor_actual||0,nivel_funcionalidad_actual:i.nivel_funcionalidad_actual||0}}),this.filteredTerapias=[...this.misTerapias],this.applyFilters(),console.log("Mis terapias cargadas:",this.misTerapias.length)}catch(t){console.error("Error cargando mis terapias:",t),this.error="Error al cargar tus terapias asignadas",this.misTerapias=[],this.filteredTerapias=[]}finally{this.loading=!1}})}loadTerapiasAlternativo(t){return v(this,null,function*(){try{return console.log("Usando m\xE9todo alternativo para cargar terapias..."),[]}catch(e){return console.error("Error en m\xE9todo alternativo:",e),[]}})}loadEstadisticasPersonales(){return v(this,null,function*(){try{if(this.misTerapias.length===0)return;let t=this.misTerapias.length,e=this.misTerapias.filter(M=>M.estado_temporal==="vigente").length,i=this.misTerapias.filter(M=>M.estado_individual==="completada").length,r=this.misTerapias.filter(M=>M.estado_individual==="en_progreso").length,o=this.misTerapias.filter(M=>M.estado_individual==="pendiente").length,a=this.misTerapias.filter(M=>M.estado_temporal==="vencida").length,c=this.misTerapias.reduce((M,y)=>M+y.progreso,0),p=t>0?Math.round(c/t):0,f=this.misTerapias.reduce((M,y)=>M+(y.adherencia_porcentaje||0),0),m=t>0?Math.round(f/t):0,_=this.misTerapias.reduce((M,y)=>M+(y.sesiones_completadas||0),0);this.estadisticasPersonales={total_terapias_asignadas:t,terapias_vigentes:e,terapias_completadas:i,terapias_en_progreso:r,terapias_pendientes:o,terapias_vencidas:a,progreso_promedio:p,adherencia_promedio:m,sesiones_completadas_total:_}}catch(t){console.error("Error calculando estad\xEDsticas personales:",t)}})}applyFilters(){let t=[...this.misTerapias];if(this.searchTerm){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.terapia_nombre.toLowerCase().includes(e)||i.terapia_descripcion?.toLowerCase().includes(e)||i.terapia_tipo.toLowerCase().includes(e))}if(this.estadoFilter!=="all"&&(t=t.filter(e=>e.estado_temporal===this.estadoFilter)),this.estadoIndividualFilter!=="all"&&(t=t.filter(e=>e.estado_individual===this.estadoIndividualFilter)),this.progresoFilter!=="all")switch(this.progresoFilter){case"sin_iniciar":t=t.filter(e=>e.progreso===0);break;case"en_progreso":t=t.filter(e=>e.progreso>0&&e.progreso<100);break;case"completado":t=t.filter(e=>e.progreso===100);break}this.filteredTerapias=t}openViewModal(t){return v(this,null,function*(){console.log("Abriendo modal para ver terapia:",t.terapia_nombre),this.selectedSeguimiento=t;try{let e=yield this.cargarTerapiaCompleta(t.terapia_id);e?this.selectedTerapia=e:this.selectedTerapia=this.crearTerapiaBasica(t)}catch(e){console.error("Error cargando terapia completa:",e),this.selectedTerapia=this.crearTerapiaBasica(t)}this.showViewModal=!0})}cargarTerapiaCompleta(t){return v(this,null,function*(){try{console.log("Cargando terapia completa para ID:",t);let e=yield this.terapiasService.getTerapiaById(t);return e?(console.log("Terapia cargada desde BD:",e),e):null}catch(e){return console.error("Error al cargar terapia completa:",e),null}})}crearTerapiaBasica(t){return{id:t.terapia_id,nombre:t.terapia_nombre,descripcion:t.terapia_descripcion||"Terapia de rehabilitaci\xF3n personalizada",tipo:t.terapia_tipo,nivel:t.terapia_nivel,duracion_estimada:t.duracion_estimada,objetivos:this.generarObjetivosTerapia(t.terapia_tipo),ejercicios:this.generarEjerciciosBasicos(t.terapia_tipo),observaciones:t.notas_individuales||"Sin observaciones adicionales",area_especializacion:this.obtenerAreaEspecializacion(t.terapia_tipo)}}generarObjetivosTerapia(t){switch(t.toLowerCase()){case"fisica":return`\u2022 Mejorar la movilidad y flexibilidad
\u2022 Fortalecer grupos musculares espec\xEDficos
\u2022 Reducir el dolor y la inflamaci\xF3n
\u2022 Recuperar la funci\xF3n normal`;case"ocupacional":return`\u2022 Mejorar las actividades de la vida diaria
\u2022 Desarrollar habilidades motoras finas
\u2022 Adaptar el entorno a las necesidades
\u2022 Incrementar la independencia funcional`;case"respiratoria":return`\u2022 Mejorar la capacidad pulmonar
\u2022 Fortalecer m\xFAsculos respiratorios
\u2022 Optimizar t\xE9cnicas de respiraci\xF3n
\u2022 Reducir la disnea`;case"neurologica":return`\u2022 Mejorar el control motor
\u2022 Estimular la neuroplasticidad
\u2022 Desarrollar patrones de movimiento
\u2022 Mejorar el equilibrio y coordinaci\xF3n`;default:return`\u2022 Objetivos espec\xEDficos seg\xFAn evaluaci\xF3n inicial
\u2022 Mejora progresiva de la condici\xF3n
\u2022 Mantenimiento de logros alcanzados
\u2022 Prevenci\xF3n de reca\xEDdas`}}generarEjerciciosBasicos(t){switch(t.toLowerCase()){case"fisica":return[{nombre:"Pendular suave",descripcion:"Movimientos pendulares del brazo",series:"2 series x 10 repeticiones",duracion:"2:00"},{nombre:"Rotaci\xF3n externa con banda",descripcion:"Ejercicio con banda el\xE1stica para fortalecimiento",series:"3 series x 15 repeticiones",observaciones:"No forzar el movimiento"},{nombre:"Flexi\xF3n anterior asistida",descripcion:"Elevaci\xF3n del brazo hacia adelante con ayuda",series:"2 series x 12 repeticiones",duracion:"1:30"}];case"ocupacional":return[{nombre:"Coordinaci\xF3n fina",descripcion:"Ejercicios de precisi\xF3n con objetos peque\xF1os",duracion:"15:00",observaciones:"Aumentar dificultad gradualmente"},{nombre:"Actividades funcionales",descripcion:"Simulaci\xF3n de tareas cotidianas",duracion:"20:00",series:"3 repeticiones de cada actividad"},{nombre:"Adaptaci\xF3n del entorno",descripcion:"Pr\xE1ctica con ayudas t\xE9cnicas",duracion:"10:00"}];case"respiratoria":return[{nombre:"Respiraci\xF3n diafragm\xE1tica",descripcion:"Inspiraciones profundas usando el diafragma",series:"4 series x 10 respiraciones",duracion:"5:00",observaciones:"Mantener ritmo lento y controlado"},{nombre:"Expansi\xF3n costal",descripcion:"Ejercicios para expandir la caja tor\xE1cica",series:"3 series x 8 repeticiones",duracion:"3:00"},{nombre:"Aclaramiento de secreciones",descripcion:"T\xE9cnicas para movilizar mucosidad",duracion:"10:00",observaciones:"Realizar despu\xE9s de nebulizaci\xF3n si es necesario"}];case"neurologica":return[{nombre:"Control postural",descripcion:"Ejercicios de estabilizaci\xF3n y equilibrio",duracion:"15:00",series:"3 series x 5 repeticiones"},{nombre:"Coordinaci\xF3n bilateral",descripcion:"Movimientos coordinados de ambos lados del cuerpo",series:"4 series x 10 repeticiones",duracion:"8:00"},{nombre:"Marcha funcional",descripcion:"Pr\xE1ctica de patrones de caminata",duracion:"20:00",observaciones:"Con asistencia seg\xFAn necesidad"}];default:return[{nombre:"Ejercicio terap\xE9utico personalizado",descripcion:"Ejercicio adaptado seg\xFAn evaluaci\xF3n individual",duracion:"15:00",observaciones:"Ajustar seg\xFAn tolerancia"},{nombre:"T\xE9cnicas de rehabilitaci\xF3n",descripcion:"Aplicaci\xF3n de m\xE9todos especializados",duracion:"20:00",series:"2-3 repeticiones seg\xFAn protocolo"}]}}obtenerAreaEspecializacion(t){switch(t.toLowerCase()){case"fisica":return"Fisioterapia";case"ocupacional":return"Terapia Ocupacional";case"respiratoria":return"Fisioterapia Respiratoria";case"neurologica":return"Neurorehabilitaci\xF3n";default:return"Rehabilitaci\xF3n General"}}closeViewModal(){console.log("Cerrando modal de vista"),this.showViewModal=!1,this.selectedTerapia=null,this.selectedSeguimiento=null,this.copySuccess=!1}actualizarMiProgreso(t,e){return v(this,null,function*(){try{(yield this.terapiasService.actualizarProgresoTerapia(t.seguimiento_id,{progreso:e,estado_individual:this.determinarEstadoPorProgreso(e),sesiones_completadas:t.sesiones_completadas||0,adherencia_porcentaje:t.adherencia_porcentaje||0,nivel_dolor_actual:t.nivel_dolor_actual||0,nivel_funcionalidad_actual:t.nivel_funcionalidad_actual||0,notas_individuales:t.notas_individuales||""}))&&(t.progreso=e,t.estado_individual=this.determinarEstadoPorProgreso(e),e>0&&!t.fecha_inicio_real&&(t.fecha_inicio_real=new Date().toISOString().split("T")[0]),e===100&&(t.fecha_fin_real=new Date().toISOString().split("T")[0]),yield this.loadEstadisticasPersonales(),this.mostrarNotificacion("Progreso actualizado correctamente","success"))}catch(i){console.error("Error actualizando progreso:",i),this.error="Error al actualizar el progreso",this.mostrarNotificacion("Error al actualizar el progreso","error"),setTimeout(()=>this.error="",5e3)}})}convertirFechaAString(t){return t?t instanceof Date?t.toISOString().split("T")[0]:t:""}calcularEstadoTemporal(t,e){let i=new Date,r=new Date(t),o=new Date(e);i.setHours(0,0,0,0),r.setHours(0,0,0,0),o.setHours(0,0,0,0);let a=Math.ceil((o.getTime()-i.getTime())/(1e3*60*60*24)),c;return i<r?c="pendiente":i<=o?c="vigente":c="vencida",{estado:c,diasRestantes:a}}determinarEstadoPorProgreso(t){return t===0?"pendiente":t===100?"completada":"en_progreso"}getFormattedTerapia(t,e){if(!t)return"";let i=`${t.nombre}
`;return i+=`${t.descripcion||"Programa de rehabilitaci\xF3n personalizada"}
`,i+=`Tipo: ${t.tipo} | Nivel: ${t.nivel}
`,t.area_especializacion&&(i+=`\xC1rea: ${t.area_especializacion}
`),i+=`Duraci\xF3n estimada: ${this.formatDuracion(t.duracion_estimada)}

`,e&&(i+=`MI PROGRESO:
`,i+=`Estado: ${this.getEstadoIndividualText(e.estado_individual)} (${e.progreso}%)
`,i+=`Per\xEDodo: ${this.formatDate(e.fecha_inicio_programada)} - ${this.formatDate(e.fecha_fin_programada)}
`,e.estado_temporal==="vigente"&&e.dias_restantes!==void 0&&(i+=`D\xEDas restantes: ${this.formatDiasRestantes(e.dias_restantes)}
`),e.fecha_inicio_real&&(i+=`Iniciado: ${this.formatDate(e.fecha_inicio_real)}
`),e.sesiones_completadas!==void 0&&e.sesiones_programadas!==void 0&&(i+=`Sesiones completadas: ${e.sesiones_completadas} / ${e.sesiones_programadas}
`),e.adherencia_porcentaje!==void 0&&(i+=`Adherencia: ${e.adherencia_porcentaje}%
`),i+=`
`),t.objetivo_principal&&(i+=`OBJETIVO PRINCIPAL:
`,i+=`${t.objetivo_principal}

`),t.ejercicios&&typeof t.ejercicios=="object"?(i+=`PLAN DE EJERCICIOS:

`,["calentamiento","fortalecimiento","equilibrio","coordinacion","estiramiento","respiracion"].forEach(o=>{let a=t.ejercicios[o];if(a&&a.ejercicios&&a.ejercicios.length>0){i+=`${o.toUpperCase()}
`,a.descripcion&&(i+=`${a.descripcion}
`);let c=[];a.tiempo_total&&c.push(`Tiempo: ${a.tiempo_total}`),a.objetivos&&a.objetivos.length>0&&c.push(`Objetivos: ${a.objetivos.join(", ")}`),c.length>0&&(i+=`${c.join(" | ")}
`),i+=`
`,a.ejercicios.forEach((p,f)=>{i+=`${f+1}. ${p.nombre}
`,p.descripcion&&(i+=`   ${p.descripcion}
`);let m=[];p.series&&m.push(`${p.series} series`),p.repeticiones&&m.push(`${p.repeticiones} reps`),p.duracion&&m.push(`${p.duracion}`),p.resistencia&&m.push(`Resistencia: ${p.resistencia}`),p.equipamiento&&p.equipamiento.length>0&&m.push(`Equipo: ${p.equipamiento.join(", ")}`),m.length>0&&(i+=`   ${m.join(" | ")}
`),p.ejecucion&&(i+=`   Ejecuci\xF3n: ${p.ejecucion}
`),p.precauciones&&(i+=`   \u26A0\uFE0F  ${p.precauciones}
`),p.modificaciones&&(p.modificaciones.principiante&&(i+=`   \u{1F4A1} Principiante: ${p.modificaciones.principiante}
`),p.modificaciones.limitaciones&&(i+=`   \u{1F527} Limitaciones: ${p.modificaciones.limitaciones}
`)),i+=`
`}),i+=`
`}})):(i+=`PLAN DE TRATAMIENTO:

`,i+=`1. Evaluaci\xF3n inicial y establecimiento de objetivos
`,i+=`2. Programa de ejercicios adaptado al nivel del paciente
`,i+=`3. Progresi\xF3n gradual seg\xFAn tolerancia y evoluci\xF3n
`,i+=`4. Reevaluaci\xF3n peri\xF3dica y ajustes del programa
`,i+=`5. Educaci\xF3n del paciente y recomendaciones para el hogar

`),t.contraindicaciones&&(i+=`CONTRAINDICACIONES:
`,i+=`${t.contraindicaciones}

`),t.criterios_progresion&&(i+=`CRITERIOS DE PROGRESI\xD3N:
`,i+=`${t.criterios_progresion}

`),e?.notas_individuales&&(i+=`MIS NOTAS PERSONALES:
`,i+=`${e.notas_individuales}

`),e&&(e.nivel_dolor_actual!==void 0||e.nivel_funcionalidad_actual!==void 0)&&(i+=`EVALUACI\xD3N ACTUAL:
`,e.nivel_dolor_actual!==void 0&&(i+=`Nivel de dolor: ${e.nivel_dolor_actual}/10
`),e.nivel_funcionalidad_actual!==void 0&&(i+=`Funcionalidad: ${e.nivel_funcionalidad_actual}%
`),i+=`
`),t.tags&&t.tags.length>0&&(i+=`Tags: ${t.tags.map(r=>`#${r}`).join(" ")}

`),i+=`\xDAltima actualizaci\xF3n: ${this.formatDate(new Date().toISOString())}
`,i+=`Generado por: rehabiMovement - Sistema de Rehabilitaci\xF3n
`,i}copyToClipboard(t){return v(this,null,function*(){try{yield navigator.clipboard.writeText(t),this.copySuccess=!0,console.log("Texto copiado al portapapeles"),setTimeout(()=>{this.copySuccess=!1},2e3)}catch(e){console.error("Error al copiar al portapapeles:",e),this.fallbackCopyTextToClipboard(t)}})}fallbackCopyTextToClipboard(t){let e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")&&(this.copySuccess=!0,setTimeout(()=>{this.copySuccess=!1},2e3))}catch(i){console.error("Fallback: Error al copiar al portapapeles:",i)}document.body.removeChild(e)}safeExportTerapia(t){let e=t.terapia_completa||this.selectedTerapia||{nombre:t.terapia_nombre,descripcion:t.terapia_descripcion,tipo:t.terapia_tipo,nivel:t.terapia_nivel,duracion_estimada:t.duracion_estimada};e?this.exportarTerapia(e,t):console.warn("No hay terapia disponible para exportar")}exportarTerapia(t,e){if(!t){console.warn("No hay terapia para exportar");return}let i=this.getFormattedTerapia(t,e);if(!i){console.warn("No se pudo generar el contenido para exportar");return}let r=new Blob([i],{type:"text/plain;charset=utf-8"}),o=window.URL.createObjectURL(r),a=document.createElement("a");a.href=o,a.download=`${t.nombre.replace(/\s+/g,"_")}_mi_terapia.txt`,a.click(),window.URL.revokeObjectURL(o),console.log("Mi terapia exportada:",t.nombre),this.mostrarNotificacion("Terapia exportada correctamente","success")}onSearch(){this.applyFilters()}onFilterChange(){this.applyFilters()}clearFilters(){this.searchTerm="",this.estadoFilter="all",this.estadoIndividualFilter="all",this.progresoFilter="all",this.applyFilters()}refreshMisTerapias(){return v(this,null,function*(){yield Promise.all([this.loadMisTerapias(),this.loadEstadisticasPersonales()]),this.mostrarNotificacion("Terapias actualizadas","success")})}mostrarNotificacion(t,e="info"){this.mensaje=t,this.tipoMensaje=e,this.mostrarMensaje=!0,setTimeout(()=>{this.mostrarMensaje=!1},3e3)}cerrarNotificacion(){this.mostrarMensaje=!1}formatDuracion(t){if(!t)return"N/A";let e=Math.floor(t/60),i=t%60;return e>0?`${e}h ${i}m`:`${i}m`}formatDate(t){if(!t)return"N/A";try{let e;return t instanceof Date?e=t:e=new Date(t),isNaN(e.getTime())?"Fecha inv\xE1lida":e.toLocaleDateString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return"Fecha inv\xE1lida"}}formatDiasRestantes(t){return t==null?"No disponible":t<0?`Vencida hace ${Math.abs(t)} d\xEDa${Math.abs(t)!==1?"s":""}`:t===0?"Vence hoy":t===1?"Vence ma\xF1ana":`${t} d\xEDas restantes`}getFileName(t){return!t||!t.nombre?"mi_terapia.txt":t.nombre.replace(/\s+/g,"_")+"_mi_terapia.txt"}getEstadoTemporalText(t){switch(t){case"vigente":return"Vigente";case"pendiente":return"Pendiente";case"vencida":return"Vencida";default:return"Desconocido"}}getEstadoIndividualText(t){if(!t)return"Desconocido";switch(t){case"completada":return"Completada";case"en_progreso":return"En Progreso";case"pendiente":return"Sin Iniciar";case"abandonada":return"Abandonada";default:return"Desconocido"}}getEstadoTemporalColor(t){switch(t){case"vigente":return"green";case"pendiente":return"blue";case"vencida":return"red";default:return"gray"}}getEstadoIndividualColor(t){switch(t){case"pendiente":return"gray";case"en_progreso":return"yellow";case"completada":return"green";case"abandonada":return"red";default:return"gray"}}getProgresoColor(t){return t===0?"gray":t<30?"red":t<70?"yellow":"green"}trackByTerapiaId(t,e){return e.seguimiento_id||t}static \u0275fac=function(e){return new(e||n)(O(Ro),O(re))};static \u0275cmp=ie({type:n,selectors:[["app-mis-terapias"]],standalone:!1,decls:66,vars:11,consts:[["filtrosAplicados",""],[1,"max-w-7xl","mx-auto","py-6","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[1,"flex","space-x-2"],["title","Refrescar lista",1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"bg-white","rounded-lg","shadow","mb-6","p-6"],[1,"grid","grid-cols-1","md:grid-cols-5","gap-4"],[1,"md:col-span-2"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","placeholder","Buscar terapias...",1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],[1,"block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","change","ngModel"],["value","all"],["value","vigente"],["value","pendiente"],["value","vencida"],["value","en_progreso"],["value","completada"],["value","abandonada"],["value","sin_iniciar"],["value","completado"],[1,"mt-4","flex","justify-end"],[1,"text-sm","text-blue-600","hover:text-blue-800",3,"click"],["class","bg-red-50 border border-red-200 rounded-md p-4 mb-6",4,"ngIf"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","fixed inset-0 z-50 overflow-y-auto",4,"ngIf"],[3,"class",4,"ngIf"],[1,"bg-red-50","border","border-red-200","rounded-md","p-4","mb-6"],[1,"flex"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300 border-l-4",3,"border-green-500","border-blue-500","border-red-500",4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","rounded-lg","shadow-lg","overflow-hidden","hover:shadow-xl","transition-shadow","duration-300","border-l-4"],[1,"flex","justify-between","items-start"],[1,"flex-1"],[1,"text-xl","font-bold","text-white"],[1,"text-white","text-opacity-90","text-sm"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-white","bg-opacity-20","text-white"],[1,"p-6"],[1,"mb-4"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-sm","font-bold","text-gray-900"],[1,"w-full","bg-gray-200","rounded-full","h-3"],[1,"h-3","rounded-full","transition-all","duration-300"],[1,"mt-3"],["type","range","min","0","max","100","step","5","title","Desliza para actualizar tu progreso",1,"w-full","h-2","bg-gray-200","rounded-lg","appearance-none","cursor-pointer","slider",3,"input","value"],[1,"flex","justify-between","items-center","mb-4"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-600","mb-4"],[1,"flex","justify-between"],[1,"flex","justify-between","font-medium"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],["class","text-sm text-gray-600 mb-4",4,"ngIf"],["class","text-xs text-gray-500 mb-4",4,"ngIf"],["class","mb-4 p-3 bg-gray-50 rounded-md",4,"ngIf"],[1,"flex","justify-end","space-x-2"],["title","Ver terapia completa",1,"text-blue-600","hover:text-blue-900","p-2","rounded-full","hover:bg-blue-50","transition-colors","duration-150",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["title","Descargar mi terapia",1,"text-purple-600","hover:text-purple-900","p-2","rounded-full","hover:bg-purple-50","transition-colors","duration-150",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["class","flex justify-between",4,"ngIf"],[1,"text-xs","text-gray-500","mb-4"],[4,"ngIf"],[1,"mb-4","p-3","bg-gray-50","rounded-md"],[1,"text-sm","text-gray-700"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[4,"ngIf","ngIfElse"],[1,"mt-6"],["class","inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",3,"click",4,"ngIf"],[1,"inline-flex","items-center","px-4","py-2","border","border-gray-300","shadow-sm","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50",3,"click"],[1,"fixed","inset-0","z-50","overflow-y-auto"],[1,"flex","items-center","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-5xl","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"sm:flex","sm:items-start"],[1,"mx-auto","flex-shrink-0","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-blue-100","sm:mx-0","sm:h-10","sm:w-10"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-blue-600"],[1,"mt-3","text-center","sm:mt-0","sm:ml-4","sm:text-left","w-full"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"mt-2"],[1,"bg-white","px-4","pb-4","sm:px-6"],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4","text-sm"],[1,"font-medium","text-gray-700"],[1,"text-gray-900","flex","items-center"],[1,"w-16","bg-gray-200","rounded-full","h-2","mr-2"],[1,"bg-blue-600","h-2","rounded-full"],[1,"text-gray-900"],[1,"bg-gray-900","text-green-400","rounded-lg","p-6","font-mono","text-sm","overflow-auto","max-h-96","relative",2,"font-family","'Courier New', monospace","line-height","1.6"],[1,"absolute","inset-15","flex","items-center","justify-center","pointer-events-none","opacity-25"],["src","/rh.png","alt","RehabiMovement",1,"max-w-50","max-h-50","object-contain","transform","rotate-12","select-none"],[1,"flex","items-center","justify-between","mb-4","pb-2","border-b","border-gray-700","relative","z-10"],[1,"w-3","h-3","bg-red-500","rounded-full"],[1,"w-3","h-3","bg-yellow-500","rounded-full"],[1,"w-3","h-3","bg-green-500","rounded-full"],[1,"text-gray-400","text-xs"],[1,"whitespace-pre-wrap","text-white","relative","z-10"],["class","mt-4 bg-green-50 border border-green-200 rounded-md p-3",4,"ngIf"],[1,"mt-4","flex","justify-between"],[1,"inline-flex","items-center","px-3","py-2","border","border-gray-300","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-4","w-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],["class","inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",3,"click",4,"ngIf"],[1,"bg-gray-50","px-4","py-3","sm:px-6","sm:flex","sm:flex-row-reverse"],["type","button",1,"w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","sm:w-auto","sm:text-sm",3,"click"],[1,"mt-4","bg-green-50","border","border-green-200","rounded-md","p-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5","text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-green-700"],[1,"inline-flex","items-center","px-3","py-2","border","border-transparent","shadow-sm","text-sm","leading-4","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],[1,"rounded-lg","shadow-xs","overflow-hidden"],[1,"p-4"],[1,"flex","items-start"],[1,"flex-shrink-0"],["class","h-6 w-6 text-white","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"ml-3","w-0","flex-1","pt-0.5"],[1,"text-sm","leading-5","font-medium","text-white"],[1,"ml-4","flex-shrink-0","flex"],[1,"inline-flex","text-white","hover:text-gray-200","focus:outline-none","focus:text-gray-200","transition","ease-in-out","duration-150",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"]],template:function(e,i){e&1&&(s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h1",4),d(5,"Mis Terapias Asignadas"),l(),s(6,"p",5),d(7),l()(),s(8,"div",6)(9,"button",7),x("click",function(){return i.refreshMisTerapias()}),I(),s(10,"svg",8),b(11,"path",9),l(),d(12," Refrescar "),l()()()(),T(),s(13,"div",10)(14,"div",11)(15,"div",12)(16,"label",13),d(17,"Buscar"),l(),s(18,"input",14),F("ngModelChange",function(o){return N(i.searchTerm,o)||(i.searchTerm=o),o}),x("input",function(){return i.onSearch()}),l()(),s(19,"div")(20,"label",13),d(21,"Per\xEDodo"),l(),s(22,"select",15),F("ngModelChange",function(o){return N(i.estadoFilter,o)||(i.estadoFilter=o),o}),x("change",function(){return i.onFilterChange()}),s(23,"option",16),d(24,"Todos"),l(),s(25,"option",17),d(26,"Vigentes"),l(),s(27,"option",18),d(28,"Pendientes"),l(),s(29,"option",19),d(30,"Vencidas"),l()()(),s(31,"div")(32,"label",13),d(33,"Mi Estado"),l(),s(34,"select",15),F("ngModelChange",function(o){return N(i.estadoIndividualFilter,o)||(i.estadoIndividualFilter=o),o}),x("change",function(){return i.onFilterChange()}),s(35,"option",16),d(36,"Todos"),l(),s(37,"option",18),d(38,"Pendiente"),l(),s(39,"option",20),d(40,"En Progreso"),l(),s(41,"option",21),d(42,"Completada"),l(),s(43,"option",22),d(44,"Abandonada"),l()()(),s(45,"div")(46,"label",13),d(47,"Progreso"),l(),s(48,"select",15),F("ngModelChange",function(o){return N(i.progresoFilter,o)||(i.progresoFilter=o),o}),x("change",function(){return i.onFilterChange()}),s(49,"option",16),d(50,"Todos"),l(),s(51,"option",23),d(52,"Sin Iniciar (0%)"),l(),s(53,"option",20),d(54,"En Progreso (1-99%)"),l(),s(55,"option",24),d(56,"Completado (100%)"),l()()()(),s(57,"div",25)(58,"button",26),x("click",function(){return i.clearFilters()}),d(59," Limpiar filtros "),l()()(),w(60,OO,7,1,"div",27)(61,AO,2,0,"div",28)(62,BO,2,2,"div",29)(63,zO,11,3,"div",30),l(),w(64,YO,64,19,"div",31)(65,XO,16,7,"div",32)),e&2&&(u(7),E(" Terapias que me han sido asignadas - Total: ",i.misTerapias.length," "),u(11),R("ngModel",i.searchTerm),u(4),R("ngModel",i.estadoFilter),u(12),R("ngModel",i.estadoIndividualFilter),u(14),R("ngModel",i.progresoFilter),u(12),g("ngIf",i.error&&!i.showViewModal),u(),g("ngIf",i.loading),u(),g("ngIf",!i.loading),u(),g("ngIf",!i.loading&&i.filteredTerapias.length===0),u(),g("ngIf",i.showViewModal),u(),g("ngIf",i.mostrarMensaje))},dependencies:[He,ve,le,je,Le,we,Ae,Ie,Re],styles:['.mis-terapias-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f9fafb}.terapia-card[_ngcontent-%COMP%]{transition:all .3s ease;border:1px solid #e5e7eb}.terapia-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px #0000001a}.terapia-header-vigente[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.terapia-header-vencida[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626)}.terapia-header-pendiente[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#4b5563)}.progress-bar-container[_ngcontent-%COMP%]{position:relative;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{transition:width .6s ease-in-out;position:relative}.progress-bar[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);animation:_ngcontent-%COMP%_shimmer 2s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.badge-terapia-tipo[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1e40af);color:#fff;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,.1)}.badge-nivel[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,.1)}.badge-tag[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;font-weight:500;transition:all .2s ease}.badge-tag[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.estado-punto[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;display:inline-block;box-shadow:0 0 0 2px #ffffff4d;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.terminal-display[_ngcontent-%COMP%]{font-family:Monaco,Menlo,Ubuntu Mono,monospace;background:#1a1a1a;color:#0f0;border-radius:8px;padding:20px;position:relative;overflow:auto;max-height:400px}.terminal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid #333}.terminal-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.terminal-button[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%}.terminal-button.red[_ngcontent-%COMP%]{background:#ff5f56}.terminal-button.yellow[_ngcontent-%COMP%]{background:#ffbd2e}.terminal-button.green[_ngcontent-%COMP%]{background:#27ca3f}.terminal-title[_ngcontent-%COMP%]{color:#666;font-size:12px}.terminal-content[_ngcontent-%COMP%]{line-height:1.6}.terminal-prompt[_ngcontent-%COMP%]{color:#ff0}.terminal-command[_ngcontent-%COMP%]{color:#0ff}.terminal-output[_ngcontent-%COMP%]{color:#fff;margin-left:16px}.terminal-separator[_ngcontent-%COMP%]{color:#09f;margin:8px 0}.progress-slider[_ngcontent-%COMP%]{width:100%;height:8px;border-radius:4px;background:#e5e7eb;outline:none;-webkit-appearance:none;appearance:none}.progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;background:#3b82f6;cursor:pointer;box-shadow:0 2px 4px #0003;transition:all .2s ease}.progress-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{background:#1d4ed8;transform:scale(1.1)}.progress-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:#3b82f6;cursor:pointer;border:none;box-shadow:0 2px 4px #0003}.stats-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:16px;box-shadow:0 2px 4px #0000001a;border:1px solid #e5e7eb;transition:all .3s ease}.stats-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.stats-number[_ngcontent-%COMP%]{font-size:24px;font-weight:700;line-height:1}.stats-label[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-weight:500;text-transform:uppercase;letter-spacing:.05em}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.slide-in-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInLeft .5s ease-out}@keyframes _ngcontent-%COMP%_slideInLeft{0%{opacity:0;transform:translate(-30px)}to{opacity:1;transform:translate(0)}}@media (max-width: 768px){.stats-card[_ngcontent-%COMP%]{padding:12px}.stats-number[_ngcontent-%COMP%]{font-size:20px}.terapia-card[_ngcontent-%COMP%]{margin-bottom:16px}.terminal-display[_ngcontent-%COMP%]{font-size:12px;padding:16px}}@media (max-width: 640px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:8px}.filters-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.terapia-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.nota-paciente[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7,#fde68a);border-left:4px solid #f59e0b;padding:12px;border-radius:6px;margin:12px 0}.nota-paciente[_ngcontent-%COMP%]   .nota-titulo[_ngcontent-%COMP%]{color:#92400e;font-weight:600;font-size:14px}.nota-paciente[_ngcontent-%COMP%]   .nota-contenido[_ngcontent-%COMP%]{color:#78350f;font-size:13px;line-height:1.5;margin-top:4px}.btn-terapia[_ngcontent-%COMP%]{transition:all .2s ease;font-weight:500;position:relative;overflow:hidden}.btn-terapia[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.btn-terapia[_ngcontent-%COMP%]:hover:before{left:100%}.btn-primary-terapia[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1e40af);color:#fff}.btn-primary-terapia[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1e40af,#1e3a8a);transform:translateY(-1px)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#6b7280}.empty-state-icon[_ngcontent-%COMP%]{width:64px;height:64px;margin:0 auto 16px;opacity:.5}.empty-state-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#374151;margin-bottom:8px}.empty-state-description[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;line-height:1.5}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.focus\\:ring-terapia[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;box-shadow:0 0 0 3px #3b82f680}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:200px;background-color:#1f2937;color:#fff;text-align:center;border-radius:6px;padding:8px;font-size:12px;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-100px;opacity:0;transition:opacity .3s}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible;opacity:1}']})};var tu=class n{constructor(t,e){this.supabaseService=t;this.authService=e}getInformacionMedicaConPermisos(t){return v(this,null,function*(){try{let e=this.authService.getCurrentUser();if(!e||!e.id)throw new Error("Usuario no autenticado");if(e.id_perfil===1)return yield this.getAllUsuariosConInformacionMedica();{if(t&&t!==e.id)throw new Error("No tienes permisos para ver la informaci\xF3n de este usuario");let r=yield this.getUsuarioConInformacionMedica(e.id);return r?[r]:[]}}catch(e){throw console.error("Error al obtener informaci\xF3n m\xE9dica con permisos:",e),e}})}getAllUsuariosConInformacionMedica(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.from("profiles").select("id, username, full_name, id_perfil").eq("status",1).order("full_name",{ascending:!0});if(e)throw e;if(!t||t.length===0)return[];let{data:i,error:r}=yield this.supabaseService.supabase.from("informacion_medica_usuarios").select("*");r&&console.warn("Error al obtener informaci\xF3n m\xE9dica:",r);let o=t.map(a=>{let c=i?.find(p=>p.usuario_id===a.id)||null;return{id:a.id,username:a.username||"",full_name:a.full_name||"",id_perfil:a.id_perfil||2,informacion_medica:c}});return console.log("Usuarios cargados:",o),o}catch(t){throw console.error("Error al obtener todos los usuarios:",t),t}})}getUsuarioConInformacionMedica(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.supabase.from("profiles").select("id, username, full_name, id_perfil").eq("id",t).eq("status",1).single();if(i)return console.error("Error al obtener usuario:",i),null;if(!e)return null;let{data:r,error:o}=yield this.supabaseService.supabase.from("informacion_medica_usuarios").select("*").eq("usuario_id",t).single();return o&&o.code!=="PGRST116"&&console.warn("Error al obtener informaci\xF3n m\xE9dica:",o),{id:e.id,username:e.username||"",full_name:e.full_name||"",id_perfil:e.id_perfil||2,informacion_medica:r||null}}catch(e){return console.error("Error al obtener usuario con informaci\xF3n m\xE9dica:",e),null}})}saveInformacionMedica(t){return v(this,null,function*(){try{let e=this.authService.getCurrentUser();if(!e||!e.id)throw new Error("Usuario no autenticado");let i=e.id_perfil===1,r=t.usuario_id===e.id;if(!i&&!r)throw new Error("No tienes permisos para editar la informaci\xF3n de este usuario");let o=null;t.peso&&t.altura&&(o=t.peso/Math.pow(t.altura/100,2));let a={usuario_id:t.usuario_id,fecha_nacimiento:t.fecha_nacimiento||null,genero:t.genero||null,telefono:t.telefono||null,direccion:t.direccion||null,diagnostico_principal:t.diagnostico_principal||null,diagnosticos_secundarios:t.diagnosticos_secundarios||null,historial_medico:t.historial_medico||null,medicamentos_actuales:t.medicamentos_actuales||null,alergias:t.alergias||null,limitaciones_fisicas:t.limitaciones_fisicas||null,observaciones_generales:t.observaciones_generales||null,contacto_emergencia_nombre:t.contacto_emergencia_nombre||null,contacto_emergencia_telefono:t.contacto_emergencia_telefono||null,contacto_emergencia_relacion:t.contacto_emergencia_relacion||null,peso:t.peso||null,altura:t.altura||null,imc:o,updated_at:new Date().toISOString()};console.log("Datos a guardar:",a);let{data:c,error:p}=yield this.supabaseService.supabase.from("informacion_medica_usuarios").upsert(a,{onConflict:"usuario_id",ignoreDuplicates:!1}).select().single();if(p)throw console.error("Error en upsert:",p),p;return console.log("Datos guardados exitosamente:",c),c}catch(e){throw console.error("Error al guardar informaci\xF3n m\xE9dica:",e),e}})}canEditUser(t){let e=this.authService.getCurrentUser();if(!e||!e.id)return!1;let i=e.id_perfil===1,r=t===e.id;return i||r}canViewUser(t){let e=this.authService.getCurrentUser();if(!e||!e.id)return!1;let i=e.id_perfil===1,r=t===e.id;return i||r}getInformacionMedicaUsuario(t){return v(this,null,function*(){try{if(!this.canViewUser(t))throw new Error("No tienes permisos para ver la informaci\xF3n de este usuario");let{data:e,error:i}=yield this.supabaseService.supabase.from("informacion_medica_usuarios").select("*").eq("usuario_id",t).single();if(i&&i.code!=="PGRST116")throw i;return e}catch(e){throw console.error("Error al obtener informaci\xF3n m\xE9dica:",e),e}})}getEstadisticasInformacionMedica(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.rpc("get_estadisticas_informacion_medica");if(e)throw e;return t}catch(t){return console.error("Error al obtener estad\xEDsticas:",t),null}})}static \u0275fac=function(e){return new(e||n)(B(me),B(re))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var tA=(n,t)=>({"lg:col-span-3":n,"lg:col-span-2":t}),nA=(n,t)=>({"border-blue-500 bg-blue-50":n,"border-gray-200 hover:bg-gray-50":t}),yx=(n,t)=>({"bg-green-100 text-green-800":n,"bg-yellow-100 text-yellow-800":t});function iA(n,t){n&1&&(s(0,"span"),d(1,"Gestiona la informaci\xF3n m\xE9dica de todos los usuarios del sistema."),l())}function rA(n,t){n&1&&(s(0,"span"),d(1,"Visualiza y edita tu informaci\xF3n m\xE9dica personal."),l())}function oA(n,t){n&1&&(s(0,"div",18),b(1,"div",19),s(2,"p",20),d(3,"Cargando usuarios..."),l()())}function aA(n,t){n&1&&(s(0,"div",21)(1,"div",22),I(),s(2,"svg",23),b(3,"path",24),l()(),T(),s(4,"h3",25),d(5,"No hay usuarios disponibles"),l(),s(6,"p",26),d(7,"No se encontraron usuarios en el sistema"),l()())}function sA(n,t){if(n&1){let e=P();s(0,"div",21)(1,"div",27),I(),s(2,"svg",23),b(3,"path",28),l()(),T(),s(4,"h3",25),d(5,"Error al cargar"),l(),s(6,"p",29),d(7),l(),s(8,"button",30),x("click",function(){C(e);let r=h(2);return S(r.reloadData())}),I(),s(9,"svg",31),b(10,"path",32),l(),d(11," Reintentar "),l()()}if(n&2){let e=h(2);u(7),k(e.errorMessage)}}function lA(n,t){if(n&1&&(s(0,"p",45),d(1),l()),n&2){let e=h().$implicit;u(),k(e.email)}}function cA(n,t){if(n&1&&(s(0,"p",45),d(1),l()),n&2){let e=h().$implicit;u(),k(e.username)}}function dA(n,t){if(n&1){let e=P();s(0,"div",35),x("click",function(){let r=C(e).$implicit,o=h(3);return S(o.selectUsuario(r))}),s(1,"div",36)(2,"div",37)(3,"div",38)(4,"span",39),d(5),l()()(),s(6,"div",40)(7,"p",41),d(8),l(),w(9,lA,2,1,"p",42)(10,cA,2,1,"p",42),s(11,"div",43)(12,"span",44),d(13),l()()()()()}if(n&2){let e=t.$implicit,i=h(3);g("ngClass",si(7,nA,(i.selectedUsuario==null?null:i.selectedUsuario.id)===e.id,(i.selectedUsuario==null?null:i.selectedUsuario.id)!==e.id)),u(5),E(" ",e.full_name.charAt(0)||e.username.charAt(0)||"?"," "),u(3),E(" ",e.full_name||e.username," "),u(),g("ngIf",e.email),u(),g("ngIf",!e.email),u(2),g("ngClass",si(10,yx,e.informacion_medica,!e.informacion_medica)),u(),E(" ",e.informacion_medica?"Completo":"Pendiente"," ")}}function uA(n,t){if(n&1&&(s(0,"div",33),w(1,dA,14,13,"div",34),l()),n&2){let e=h(2);u(),g("ngForOf",e.usuarios)}}function pA(n,t){if(n&1&&(s(0,"div",11)(1,"div",12)(2,"div",13)(3,"h3",14),d(4,"Usuarios"),l(),w(5,oA,4,0,"div",15)(6,aA,8,0,"div",16)(7,sA,12,1,"div",16)(8,uA,2,1,"div",17),l()()()),n&2){let e=h();u(5),g("ngIf",e.loading),u(),g("ngIf",!e.loading&&e.usuarios.length===0),u(),g("ngIf",e.errorMessage&&e.loading===!1),u(),g("ngIf",!e.loading&&e.usuarios.length>0)}}function fA(n,t){n&1&&(s(0,"div",46)(1,"div",22),I(),s(2,"svg",23),b(3,"path",47),l()(),T(),s(4,"h3",25),d(5,"Selecciona un usuario"),l(),s(6,"p",48),d(7,"Elige un usuario de la lista para ver o editar su informaci\xF3n m\xE9dica"),l()())}function mA(n,t){if(n&1&&(s(0,"span"),d(1),l()),n&2){let e=h(2);u(),E(" Informaci\xF3n M\xE9dica - ",e.selectedUsuario.full_name||e.selectedUsuario.username," ")}}function gA(n,t){n&1&&(s(0,"span"),d(1,"Mi Informaci\xF3n M\xE9dica"),l())}function hA(n,t){if(n&1&&(s(0,"div")(1,"span",112),I(),s(2,"svg",113),b(3,"circle",114),l(),d(4),l()()),n&2){let e=h(2);u(),g("ngClass",si(2,yx,e.selectedUsuario.informacion_medica,!e.selectedUsuario.informacion_medica)),u(3),E(" ",e.selectedUsuario.informacion_medica?"Informaci\xF3n Completa":"Informaci\xF3n Pendiente"," ")}}function vA(n,t){if(n&1){let e=P();s(0,"div",115)(1,"div",116)(2,"div",37),I(),s(3,"svg",117),b(4,"path",118),l()(),T(),s(5,"div",119)(6,"p",120),d(7),l()(),s(8,"div",121)(9,"button",122),x("click",function(){C(e);let r=h(2);return S(r.errorMessage="")}),I(),s(10,"svg",123),b(11,"path",124),l()()()()()}if(n&2){let e=h(2);u(7),k(e.errorMessage)}}function _A(n,t){if(n&1){let e=P();s(0,"div",125)(1,"div",116)(2,"div",37),I(),s(3,"svg",126),b(4,"path",127),l()(),T(),s(5,"div",119)(6,"p",128),d(7),l()(),s(8,"div",121)(9,"button",129),x("click",function(){C(e);let r=h(2);return S(r.successMessage="")}),I(),s(10,"svg",123),b(11,"path",124),l()()()()()}if(n&2){let e=h(2);u(7),k(e.successMessage)}}function bA(n,t){n&1&&(s(0,"div",130),d(1," Formato de tel\xE9fono inv\xE1lido "),l())}function yA(n,t){n&1&&(s(0,"div",130),d(1," El peso debe estar entre 1 y 300 kg "),l())}function xA(n,t){n&1&&(s(0,"div",130),d(1," La altura debe estar entre 50 y 250 cm "),l())}function wA(n,t){if(n&1&&(s(0,"div",131)(1,"div",132),d(2),tt(3,"number"),l(),s(4,"div",133),d(5),l()()),n&2){let e=h(2);u(),g("ngClass",e.getIMCColor()),u(),E(" ",nc(3,3,e.getIMC(),"1.1-1")," "),u(3),E(" ",e.getIMCClassification()," ")}}function CA(n,t){n&1&&(s(0,"div",134),d(1," Ingrese peso y altura "),l())}function SA(n,t){n&1&&(s(0,"div",130),d(1," Formato de tel\xE9fono inv\xE1lido "),l())}function EA(n,t){n&1&&(s(0,"span"),d(1,"Guardar Informaci\xF3n"),l())}function MA(n,t){n&1&&(s(0,"span",139),I(),s(1,"svg",140),b(2,"circle",141)(3,"path",142),l(),d(4," Guardando... "),l())}function IA(n,t){if(n&1){let e=P();s(0,"div",135)(1,"button",136),x("click",function(){C(e);let r=h(2);return S(r.resetForm())}),d(2," Cancelar "),l(),s(3,"button",137),w(4,EA,2,0,"span",5)(5,MA,5,0,"span",138),l()()}if(n&2){let e=h(2);u(3),g("disabled",e.saving||e.informacionMedicaForm.invalid),u(),g("ngIf",!e.saving),u(),g("ngIf",e.saving)}}function DA(n,t){n&1&&(s(0,"div",143)(1,"div",116)(2,"div",37),I(),s(3,"svg",144),b(4,"path",145),l()(),T(),s(5,"div",119)(6,"p",146),d(7," Solo puedes ver esta informaci\xF3n. No tienes permisos para editarla. "),l()()()())}function TA(n,t){if(n&1){let e=P();s(0,"div",12)(1,"div",13)(2,"div",49)(3,"div")(4,"h3",50),w(5,mA,2,1,"span",5)(6,gA,2,0,"span",5),l(),s(7,"p",51),d(8," Complete los campos necesarios para mantener un registro m\xE9dico actualizado. "),l()(),w(9,hA,5,5,"div",5),l(),w(10,vA,12,1,"div",52)(11,_A,12,1,"div",53),s(12,"form",54),x("ngSubmit",function(){C(e);let r=h();return S(r.saveInformacionMedica())}),s(13,"div",2)(14,"h4",55),d(15," Informaci\xF3n Personal "),l(),s(16,"div",56)(17,"div")(18,"label",57),d(19," Fecha de Nacimiento "),l(),b(20,"input",58),l(),s(21,"div")(22,"label",59),d(23,"G\xE9nero"),l(),s(24,"select",60)(25,"option",61),d(26,"Seleccionar"),l(),s(27,"option",62),d(28,"Masculino"),l(),s(29,"option",63),d(30,"Femenino"),l(),s(31,"option",64),d(32,"Otro"),l()()(),s(33,"div")(34,"label",65),d(35,"Tel\xE9fono"),l(),b(36,"input",66),w(37,bA,2,0,"div",67),l()(),s(38,"div",68)(39,"label",69),d(40,"Direcci\xF3n"),l(),b(41,"textarea",70),l()(),s(42,"div",2)(43,"h4",55),d(44," Informaci\xF3n M\xE9dica "),l(),s(45,"div",71)(46,"div")(47,"label",72),d(48," Diagn\xF3stico Principal "),l(),b(49,"input",73),l(),s(50,"div")(51,"label",74),d(52," Diagn\xF3sticos Secundarios "),l(),s(53,"input",75),x("input",function(r){C(e);let o=h();return S(o.setDiagnosticosFromString(r.target.value))}),l(),s(54,"p",51),d(55,"Separar m\xFAltiples diagn\xF3sticos con comas"),l()(),s(56,"div")(57,"label",76),d(58," Historial M\xE9dico "),l(),b(59,"textarea",77),l(),s(60,"div")(61,"label",78),d(62," Medicamentos Actuales "),l(),b(63,"textarea",79),l(),s(64,"div")(65,"label",80),d(66,"Alergias"),l(),b(67,"textarea",81),l(),s(68,"div")(69,"label",82),d(70," Limitaciones F\xEDsicas "),l(),b(71,"textarea",83),l(),s(72,"div")(73,"label",84),d(74," Observaciones Generales "),l(),b(75,"textarea",85),l()()(),s(76,"div",2)(77,"h4",55),d(78," Informaci\xF3n F\xEDsica "),l(),s(79,"div",86)(80,"div")(81,"label",87),d(82,"Peso (kg)"),l(),s(83,"input",88),x("input",function(){C(e);let r=h();return S(r.calculateIMC())}),l(),w(84,yA,2,0,"div",67),l(),s(85,"div")(86,"label",89),d(87,"Altura (cm)"),l(),s(88,"input",90),x("input",function(){C(e);let r=h();return S(r.calculateIMC())}),l(),w(89,xA,2,0,"div",67),l(),s(90,"div")(91,"label",91),d(92,"IMC"),l(),s(93,"div",92),w(94,wA,6,6,"div",93)(95,CA,2,0,"div",94),l()()()(),s(96,"div",2)(97,"h4",55),d(98," Contacto de Emergencia "),l(),s(99,"div",86)(100,"div")(101,"label",95),d(102," Nombre Completo "),l(),b(103,"input",96),l(),s(104,"div")(105,"label",97),d(106," Tel\xE9fono "),l(),b(107,"input",98),w(108,SA,2,0,"div",67),l(),s(109,"div")(110,"label",99),d(111," Relaci\xF3n "),l(),s(112,"select",100)(113,"option",61),d(114,"Seleccionar"),l(),s(115,"option",101),d(116,"Padre"),l(),s(117,"option",102),d(118,"Madre"),l(),s(119,"option",103),d(120,"Esposo"),l(),s(121,"option",104),d(122,"Esposa"),l(),s(123,"option",105),d(124,"Hijo"),l(),s(125,"option",106),d(126,"Hija"),l(),s(127,"option",107),d(128,"Hermano"),l(),s(129,"option",108),d(130,"Hermana"),l(),s(131,"option",109),d(132,"Amigo"),l(),s(133,"option",64),d(134,"Otro"),l()()()()(),w(135,IA,6,3,"div",110)(136,DA,8,0,"div",111),l()()()}if(n&2){let e,i,r,o,a=h();u(5),g("ngIf",a.isAdmin&&a.selectedUsuario),u(),g("ngIf",!a.isAdmin),u(3),g("ngIf",a.selectedUsuario),u(),g("ngIf",a.errorMessage),u(),g("ngIf",a.successMessage),u(),g("formGroup",a.informacionMedicaForm),u(8),g("disabled",!a.canEditCurrentUser()),u(4),g("disabled",!a.canEditCurrentUser()),u(12),g("disabled",!a.canEditCurrentUser()),u(),g("ngIf",((e=a.informacionMedicaForm.get("telefono"))==null?null:e.invalid)&&((e=a.informacionMedicaForm.get("telefono"))==null?null:e.touched)),u(4),g("disabled",!a.canEditCurrentUser()),u(8),g("disabled",!a.canEditCurrentUser()),u(4),g("value",a.getDiagnosticosAsString())("disabled",!a.canEditCurrentUser()),u(6),g("disabled",!a.canEditCurrentUser()),u(4),g("disabled",!a.canEditCurrentUser()),u(4),g("disabled",!a.canEditCurrentUser()),u(4),g("disabled",!a.canEditCurrentUser()),u(4),g("disabled",!a.canEditCurrentUser()),u(8),g("disabled",!a.canEditCurrentUser()),u(),g("ngIf",((i=a.informacionMedicaForm.get("peso"))==null?null:i.invalid)&&((i=a.informacionMedicaForm.get("peso"))==null?null:i.touched)),u(4),g("disabled",!a.canEditCurrentUser()),u(),g("ngIf",((r=a.informacionMedicaForm.get("altura"))==null?null:r.invalid)&&((r=a.informacionMedicaForm.get("altura"))==null?null:r.touched)),u(5),g("ngIf",a.getIMC()),u(),g("ngIf",!a.getIMC()),u(8),g("disabled",!a.canEditCurrentUser()),u(4),g("disabled",!a.canEditCurrentUser()),u(),g("ngIf",((o=a.informacionMedicaForm.get("contacto_emergencia_telefono"))==null?null:o.invalid)&&((o=a.informacionMedicaForm.get("contacto_emergencia_telefono"))==null?null:o.touched)),u(4),g("disabled",!a.canEditCurrentUser()),u(23),g("ngIf",a.canEditCurrentUser()),u(),g("ngIf",!a.canEditCurrentUser())}}var nu=class n{constructor(t,e,i){this.fb=t;this.informacionMedicaService=e;this.authService=i;this.informacionMedicaForm=this.createForm()}usuarios=[];selectedUsuario=null;informacionMedicaForm;loading=!1;saving=!1;isAdmin=!1;currentUserId=null;showModal=!1;errorMessage="";successMessage="";ngOnInit(){this.initializeComponent(),this.loadUsuarios()}initializeComponent(){let t=this.authService.getCurrentUser();t&&(this.isAdmin=t.id_perfil===1,this.currentUserId=t.id||null)}createForm(){return this.fb.group({usuario_id:[null,ze.required],fecha_nacimiento:[""],genero:[""],telefono:["",[ze.pattern(/^\+?[\d\s\-\(\)]+$/)]],direccion:[""],diagnostico_principal:[""],diagnosticos_secundarios:[[]],historial_medico:[""],medicamentos_actuales:[""],alergias:[""],limitaciones_fisicas:[""],observaciones_generales:[""],contacto_emergencia_nombre:[""],contacto_emergencia_telefono:["",[ze.pattern(/^\+?[\d\s\-\(\)]+$/)]],contacto_emergencia_relacion:[""],peso:[null,[ze.min(1),ze.max(300)]],altura:[null,[ze.min(50),ze.max(250)]]})}loadUsuarios(){return v(this,null,function*(){this.loading=!0,this.errorMessage="";try{if(this.usuarios=yield this.informacionMedicaService.getInformacionMedicaConPermisos(),!this.isAdmin&&this.usuarios.length===1)this.selectUsuario(this.usuarios[0]);else if(!this.isAdmin&&this.usuarios.length===0&&this.currentUserId){let t=this.authService.getCurrentUser();if(t&&t.id){let e={id:t.id,username:t.username||"",full_name:t.full_name||"",email:"",id_perfil:t.id_perfil||2,informacion_medica:null};this.usuarios=[e],this.selectUsuario(e)}}}catch(t){console.error("Error al cargar usuarios:",t),this.errorMessage=t?.message||"Error al cargar la informaci\xF3n de usuarios"}finally{this.loading=!1}})}selectUsuario(t){this.selectedUsuario=t,this.loadInformacionMedica(t),this.clearMessages()}loadInformacionMedica(t){let e=t.informacion_medica;if(console.log("Cargando informaci\xF3n para usuario:",t.username,"Info:",e),this.informacionMedicaForm.reset(),this.informacionMedicaForm.patchValue({usuario_id:t.id}),e){let i="";if(e.fecha_nacimiento)try{let o=new Date(e.fecha_nacimiento);isNaN(o.getTime())||(i=o.toISOString().split("T")[0])}catch(o){console.warn("Error al procesar fecha:",o)}let r={usuario_id:t.id,fecha_nacimiento:i,genero:e.genero||"",telefono:e.telefono||"",direccion:e.direccion||"",diagnostico_principal:e.diagnostico_principal||"",diagnosticos_secundarios:e.diagnosticos_secundarios||[],historial_medico:e.historial_medico||"",medicamentos_actuales:e.medicamentos_actuales||"",alergias:e.alergias||"",limitaciones_fisicas:e.limitaciones_fisicas||"",observaciones_generales:e.observaciones_generales||"",contacto_emergencia_nombre:e.contacto_emergencia_nombre||"",contacto_emergencia_telefono:e.contacto_emergencia_telefono||"",contacto_emergencia_relacion:e.contacto_emergencia_relacion||"",peso:e.peso||null,altura:e.altura||null};console.log("Datos del formulario a cargar:",r),this.informacionMedicaForm.patchValue(r),this.informacionMedicaForm.markAsPristine()}this.calculateIMC()}calculateIMC(){let t=this.informacionMedicaForm.get("peso")?.value,e=this.informacionMedicaForm.get("altura")?.value;if(t&&e&&e>0){let i=e/100,r=t/(i*i)}}saveInformacionMedica(){return v(this,null,function*(){if(this.informacionMedicaForm.invalid){this.markFormGroupTouched(),this.errorMessage="Por favor complete los campos requeridos correctamente";return}this.saving=!0,this.errorMessage="",this.successMessage="";try{let t=this.informacionMedicaForm.value,e=null;if(t.peso&&t.altura){let r=t.altura/100;e=t.peso/(r*r)}let i={usuario_id:t.usuario_id,fecha_nacimiento:t.fecha_nacimiento||null,genero:t.genero||null,telefono:t.telefono||null,direccion:t.direccion||null,diagnostico_principal:t.diagnostico_principal||null,historial_medico:t.historial_medico||null,medicamentos_actuales:t.medicamentos_actuales||null,alergias:t.alergias||null,limitaciones_fisicas:t.limitaciones_fisicas||null,observaciones_generales:t.observaciones_generales||null,contacto_emergencia_nombre:t.contacto_emergencia_nombre||null,contacto_emergencia_telefono:t.contacto_emergencia_telefono||null,contacto_emergencia_relacion:t.contacto_emergencia_relacion||null,peso:t.peso||null,altura:t.altura||null,imc:e,diagnosticos_secundarios:this.processDiagnosticosSecundarios(t.diagnosticos_secundarios)};if(yield this.informacionMedicaService.saveInformacionMedica(i),this.successMessage="Informaci\xF3n m\xE9dica guardada exitosamente",yield this.loadUsuarios(),this.selectedUsuario){let r=this.usuarios.find(o=>o.id===this.selectedUsuario.id);r&&this.selectUsuario(r)}setTimeout(()=>{this.successMessage=""},3e3)}catch(t){console.error("Error al guardar informaci\xF3n m\xE9dica:",t),this.errorMessage=t?.message||"Error al guardar la informaci\xF3n m\xE9dica"}finally{this.saving=!1}})}processDiagnosticosSecundarios(t){return t?Array.isArray(t)?t.filter(e=>e&&e.trim().length>0):typeof t=="string"?t.split(",").map(e=>e.trim()).filter(e=>e.length>0):null:null}markFormGroupTouched(){Object.keys(this.informacionMedicaForm.controls).forEach(t=>{this.informacionMedicaForm.get(t)?.markAsTouched()})}canEditCurrentUser(){return this.selectedUsuario?this.informacionMedicaService.canEditUser(this.selectedUsuario.id):!1}openModal(){this.showModal=!0}closeModal(){this.showModal=!1}getIMC(){let t=this.informacionMedicaForm.get("peso")?.value,e=this.informacionMedicaForm.get("altura")?.value;if(t&&e&&e>0){let i=e/100;return t/(i*i)}return null}getIMCClassification(){let t=this.getIMC();return t?t<18.5?"Bajo peso":t<25?"Peso normal":t<30?"Sobrepeso":"Obesidad":""}getIMCColor(){let t=this.getIMC();return t?t<18.5?"text-blue-600":t<25?"text-green-600":t<30?"text-yellow-600":"text-red-600":"text-gray-500"}getDiagnosticosAsString(){let t=this.informacionMedicaForm.get("diagnosticos_secundarios")?.value;return Array.isArray(t)?t.join(", "):t||""}setDiagnosticosFromString(t){let e=t.split(",").map(i=>i.trim()).filter(i=>i.length>0);this.informacionMedicaForm.patchValue({diagnosticos_secundarios:e})}clearMessages(){this.errorMessage="",this.successMessage=""}reloadData(){return v(this,null,function*(){this.clearMessages(),yield this.loadUsuarios()})}resetForm(){this.selectedUsuario?this.loadInformacionMedica(this.selectedUsuario):this.informacionMedicaForm.reset(),this.clearMessages()}hasFormChanges(){return this.informacionMedicaForm.dirty}getUserDisplayName(t){return t.full_name||t.username||t.email||"Usuario"}hasFieldError(t){let e=this.informacionMedicaForm.get(t);return!!(e&&e.invalid&&e.touched)}getFieldError(t){let e=this.informacionMedicaForm.get(t);return!e||!e.errors||!e.touched?"":e.errors.required?"Este campo es requerido":e.errors.pattern?"Formato inv\xE1lido":e.errors.min?`Valor m\xEDnimo: ${e.errors.min.min}`:e.errors.max?`Valor m\xE1ximo: ${e.errors.max.max}`:"Campo inv\xE1lido"}static \u0275fac=function(e){return new(e||n)(O(Ld),O(tu),O(re))};static \u0275cmp=ie({type:n,selectors:[["app-informacion-medica-usuarios"]],standalone:!1,decls:13,vars:9,consts:[[1,"min-h-screen","bg-gray-50","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-sm","text-gray-600"],[4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],["class","lg:col-span-1",4,"ngIf"],[3,"ngClass"],["class","bg-white shadow rounded-lg p-6 text-center",4,"ngIf"],["class","bg-white shadow rounded-lg",4,"ngIf"],[1,"lg:col-span-1"],[1,"bg-white","shadow","rounded-lg"],[1,"px-4","py-5","sm:p-6"],[1,"text-lg","leading-6","font-medium","text-gray-900","mb-4"],["class","text-center py-4",4,"ngIf"],["class","text-center py-8",4,"ngIf"],["class","space-y-2",4,"ngIf"],[1,"text-center","py-4"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600","mx-auto"],[1,"mt-2","text-sm","text-gray-500"],[1,"text-center","py-8"],[1,"text-gray-400","mb-4"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"],[1,"text-lg","font-medium","text-gray-900","mb-2"],[1,"text-sm","text-gray-500"],[1,"text-red-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-sm","text-gray-500","mb-4"],[1,"inline-flex","items-center","px-3","py-2","border","border-transparent","text-sm","leading-4","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"-ml-0.5","mr-2","h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"space-y-2"],["class","cursor-pointer p-3 rounded-lg border transition-colors duration-200",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"cursor-pointer","p-3","rounded-lg","border","transition-colors","duration-200",3,"click","ngClass"],[1,"flex","items-center","space-x-3"],[1,"flex-shrink-0"],[1,"h-10","w-10","rounded-full","bg-gray-300","flex","items-center","justify-center"],[1,"text-sm","font-medium","text-gray-700"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","truncate"],["class","text-sm text-gray-500 truncate",4,"ngIf"],[1,"flex","items-center","mt-1"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-medium",3,"ngClass"],[1,"text-sm","text-gray-500","truncate"],[1,"bg-white","shadow","rounded-lg","p-6","text-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-gray-500"],[1,"flex","justify-between","items-start","mb-6"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],["class","mb-4 p-4 bg-red-50 border border-red-200 rounded-md",4,"ngIf"],["class","mb-4 p-4 bg-green-50 border border-green-200 rounded-md",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"text-md","font-medium","text-gray-900","mb-4","border-b","border-gray-200","pb-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["for","fecha_nacimiento",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","fecha_nacimiento","formControlName","fecha_nacimiento",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],["for","genero",1,"block","text-sm","font-medium","text-gray-700"],["id","genero","formControlName","genero",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],["value",""],["value","masculino"],["value","femenino"],["value","otro"],["for","telefono",1,"block","text-sm","font-medium","text-gray-700"],["type","tel","id","telefono","formControlName","telefono","placeholder","+502 1234-5678",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],["class","mt-1 text-sm text-red-600",4,"ngIf"],[1,"mt-4"],["for","direccion",1,"block","text-sm","font-medium","text-gray-700"],["id","direccion","formControlName","direccion","rows","2","placeholder","Direcci\xF3n completa",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],[1,"space-y-4"],["for","diagnostico_principal",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","diagnostico_principal","formControlName","diagnostico_principal","placeholder","Diagn\xF3stico m\xE9dico principal",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],["for","diagnosticos_secundarios",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","diagnosticos_secundarios","placeholder","Separar m\xFAltiples diagn\xF3sticos con comas",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"input","value","disabled"],["for","historial_medico",1,"block","text-sm","font-medium","text-gray-700"],["id","historial_medico","formControlName","historial_medico","rows","3","placeholder","Historial m\xE9dico relevante, cirug\xEDas previas, etc.",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],["for","medicamentos_actuales",1,"block","text-sm","font-medium","text-gray-700"],["id","medicamentos_actuales","formControlName","medicamentos_actuales","rows","2","placeholder","Lista de medicamentos que toma actualmente",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],["for","alergias",1,"block","text-sm","font-medium","text-gray-700"],["id","alergias","formControlName","alergias","rows","2","placeholder","Alergias conocidas a medicamentos, alimentos, etc.",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],["for","limitaciones_fisicas",1,"block","text-sm","font-medium","text-gray-700"],["id","limitaciones_fisicas","formControlName","limitaciones_fisicas","rows","2","placeholder","Limitaciones o restricciones f\xEDsicas",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],["for","observaciones_generales",1,"block","text-sm","font-medium","text-gray-700"],["id","observaciones_generales","formControlName","observaciones_generales","rows","3","placeholder","Observaciones adicionales relevantes",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["for","peso",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","peso","formControlName","peso","step","0.1","min","1","max","300","placeholder","70.5",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"input","disabled"],["for","altura",1,"block","text-sm","font-medium","text-gray-700"],["type","number","id","altura","formControlName","altura","min","50","max","250","placeholder","175",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"input","disabled"],[1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1","p-3","bg-gray-50","border","border-gray-300","rounded-md"],["class","text-center",4,"ngIf"],["class","text-center text-gray-500 text-sm",4,"ngIf"],["for","contacto_emergencia_nombre",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","contacto_emergencia_nombre","formControlName","contacto_emergencia_nombre","placeholder","Nombre del contacto de emergencia",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],["for","contacto_emergencia_telefono",1,"block","text-sm","font-medium","text-gray-700"],["type","tel","id","contacto_emergencia_telefono","formControlName","contacto_emergencia_telefono","placeholder","+502 1234-5678",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],["for","contacto_emergencia_relacion",1,"block","text-sm","font-medium","text-gray-700"],["id","contacto_emergencia_relacion","formControlName","contacto_emergencia_relacion",1,"mt-1","block","w-full","rounded-md","border-gray-300","shadow-sm","focus:border-blue-500","focus:ring-blue-500",3,"disabled"],["value","padre"],["value","madre"],["value","esposo"],["value","esposa"],["value","hijo"],["value","hija"],["value","hermano"],["value","hermana"],["value","amigo"],["class","flex justify-end space-x-3 pt-6 border-t border-gray-200",4,"ngIf"],["class","mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-md",4,"ngIf"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],["fill","currentColor","viewBox","0 0 8 8",1,"-ml-0.5","mr-1.5","h-2","w-2"],["cx","4","cy","4","r","3"],[1,"mb-4","p-4","bg-red-50","border","border-red-200","rounded-md"],[1,"flex"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-red-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","text-red-700"],[1,"ml-auto","pl-3"],[1,"text-red-400","hover:text-red-600",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"mb-4","p-4","bg-green-50","border","border-green-200","rounded-md"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-green-400"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-sm","text-green-700"],[1,"text-green-400","hover:text-green-600",3,"click"],[1,"mt-1","text-sm","text-red-600"],[1,"text-center"],[1,"text-lg","font-semibold",3,"ngClass"],[1,"text-sm","text-gray-600"],[1,"text-center","text-gray-500","text-sm"],[1,"flex","justify-end","space-x-3","pt-6","border-t","border-gray-200"],["type","button",1,"px-4","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500",3,"click"],["type","submit",1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","flex items-center",4,"ngIf"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mt-6","p-4","bg-yellow-50","border","border-yellow-200","rounded-md"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-yellow-400"],["fill-rule","evenodd","d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"text-sm","text-yellow-700"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),d(4,"Informaci\xF3n M\xE9dica de Usuarios"),l(),s(5,"p",4),w(6,iA,2,0,"span",5)(7,rA,2,0,"span",5),l()(),s(8,"div",6),w(9,pA,9,4,"div",7),s(10,"div",8),w(11,fA,8,0,"div",9)(12,TA,137,31,"div",10),l()()()()),e&2&&(u(6),g("ngIf",i.isAdmin),u(),g("ngIf",!i.isAdmin),u(2),g("ngIf",i.isAdmin),u(),g("ngClass",si(6,tA,!i.isAdmin,i.isAdmin)),u(),g("ngIf",!i.selectedUsuario&&i.isAdmin),u(),g("ngIf",i.selectedUsuario||!i.isAdmin))},dependencies:[He,ve,le,Je,je,Le,we,xn,Ae,Ie,Ke,Cn,wn,vs,_s,um],encapsulation:2})};var iu=[{value:"terapia",label:"Terapia"},{value:"rutina",label:"Rutina"}];var Ri=class n{constructor(t){this.supabaseService=t}obtenerPaquetes(t){return v(this,null,function*(){try{let e=this.supabaseService.client.from("paquetes").select("*").order("fecha_creacion",{ascending:!1});t?.tipo&&t.tipo!=="todos"&&(e=e.eq("tipo",t.tipo)),t?.status!==void 0&&(e=e.eq("status",t.status)),t?.busqueda&&(e=e.or(`nombre.ilike.%${t.busqueda}%,descripcion.ilike.%${t.busqueda}%`)),t?.precio_min&&(e=e.gte("precio_final",t.precio_min)),t?.precio_max&&(e=e.lte("precio_final",t.precio_max));let{data:i,error:r}=yield e;if(r)throw console.error("Error obteniendo paquetes:",r),r;return i||[]}catch(e){throw console.error("Error en obtenerPaquetes:",e),e}})}obtenerPaquetePorId(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.client.from("paquetes").select(`
          *,
          paquete_rutinas:paquete_rutinas(rutina_id),
          paquete_terapias:paquete_terapias(terapia_id)
        `).eq("id",t).single();if(i)throw console.error("Error obteniendo paquete:",i),i;return e&&(e.rutinas_seleccionadas=e.paquete_rutinas?.map(r=>r.rutina_id)||[],e.terapias_seleccionadas=e.paquete_terapias?.map(r=>r.terapia_id)||[]),e}catch(e){throw console.error("Error en obtenerPaquetePorId:",e),e}})}crearPaquete(t){return v(this,null,function*(){try{let e=t,{rutinas_seleccionadas:i,terapias_seleccionadas:r}=e,o=du(e,["rutinas_seleccionadas","terapias_seleccionadas"]),{data:a,error:c}=yield this.supabaseService.client.from("paquetes").insert([o]).select().single();if(c)throw console.error("Error creando paquete:",c),c;return t.tipo==="rutina"&&i&&i.length>0?yield this.guardarRelacionesRutinas(a.id,i):t.tipo==="terapia"&&r&&r.length>0&&(yield this.guardarRelacionesTerapias(a.id,r)),{success:!0,message:"Paquete creado exitosamente",data:a}}catch(i){return console.error("Error en crearPaquete:",i),{success:!1,message:"Error al crear el paquete"}}})}actualizarPaquete(t,e){return v(this,null,function*(){try{let i=e,{rutinas_seleccionadas:r,terapias_seleccionadas:o}=i,a=du(i,["rutinas_seleccionadas","terapias_seleccionadas"]),{data:c,error:p}=yield this.supabaseService.client.from("paquetes").update(a).eq("id",t).select().single();if(p)throw console.error("Error actualizando paquete:",p),p;return yield this.limpiarRelacionesExistentes(t),e.tipo==="rutina"&&r&&r.length>0?yield this.guardarRelacionesRutinas(t,r):e.tipo==="terapia"&&o&&o.length>0&&(yield this.guardarRelacionesTerapias(t,o)),{success:!0,message:"Paquete actualizado exitosamente",data:c}}catch(r){return console.error("Error en actualizarPaquete:",r),{success:!1,message:"Error al actualizar el paquete"}}})}eliminarPaquete(t){return v(this,null,function*(){try{yield this.limpiarRelacionesExistentes(t);let{data:e,error:i}=yield this.supabaseService.client.from("paquetes").update({status:0}).eq("id",t).select().single();if(i)throw console.error("Error eliminando paquete:",i),i;return{success:!0,message:"Paquete eliminado exitosamente",data:e}}catch(e){return console.error("Error en eliminarPaquete:",e),{success:!1,message:"Error al eliminar el paquete"}}})}cambiarEstadoPaquete(t,e){return v(this,null,function*(){try{let{data:i,error:r}=yield this.supabaseService.client.from("paquetes").update({status:e}).eq("id",t).select().single();if(r)throw console.error("Error cambiando estado del paquete:",r),r;return{success:!0,message:`Paquete ${e===1?"activado":"desactivado"} exitosamente`,data:i}}catch(i){return console.error("Error en cambiarEstadoPaquete:",i),{success:!1,message:"Error al cambiar el estado del paquete"}}})}activarPaquete(t){return v(this,null,function*(){return this.cambiarEstadoPaquete(t,1)})}desactivarPaquete(t){return v(this,null,function*(){return this.cambiarEstadoPaquete(t,0)})}activarPaqueteConDatos(t,e){return v(this,null,function*(){return e?this.actualizarPaquete(t,e):this.activarPaquete(t)})}guardarRelacionesRutinas(t,e){return v(this,null,function*(){let i=e.map(o=>({paquete_id:t,rutina_id:o})),{error:r}=yield this.supabaseService.client.from("paquete_rutinas").insert(i);if(r)throw console.error("Error guardando relaciones con rutinas:",r),r})}guardarRelacionesTerapias(t,e){return v(this,null,function*(){let i=e.map(o=>({paquete_id:t,terapia_id:o})),{error:r}=yield this.supabaseService.client.from("paquete_terapias").insert(i);if(r)throw console.error("Error guardando relaciones con terapias:",r),r})}limpiarRelacionesExistentes(t){return v(this,null,function*(){yield this.supabaseService.client.from("paquete_rutinas").delete().eq("paquete_id",t),yield this.supabaseService.client.from("paquete_terapias").delete().eq("paquete_id",t)})}obtenerEstadisticasPaquetes(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.client.rpc("obtener_estadisticas_paquetes");if(e)throw console.error("Error obteniendo estad\xEDsticas:",e),e;return t}catch(t){return console.error("Error en obtenerEstadisticasPaquetes:",t),{total_paquetes:0,paquetes_activos:0,paquetes_terapia:0,paquetes_rutina:0,promedio_precio:0,total_ventas:0}}})}duplicarPaquete(t){return v(this,null,function*(){try{let e=yield this.obtenerPaquetePorId(t);if(!e)throw new Error("Paquete no encontrado");let i={nombre:`Copia de ${e.nombre}`,descripcion:e.descripcion,precio:e.precio,cantidad_sesiones:e.cantidad_sesiones,tipo:e.tipo,descuento:e.descuento,rutinas_seleccionadas:e.rutinas_seleccionadas,terapias_seleccionadas:e.terapias_seleccionadas};return yield this.crearPaquete(i)}catch(e){return console.error("Error en duplicarPaquete:",e),{success:!1,message:"Error al duplicar el paquete"}}})}validarPaquete(t){let e=[];return(!t.nombre||t.nombre.trim().length===0)&&e.push("El nombre es requerido"),t.nombre&&t.nombre.length>255&&e.push("El nombre no puede exceder 255 caracteres"),(!t.precio||t.precio<=0)&&e.push("El precio debe ser mayor a 0"),(!t.cantidad_sesiones||t.cantidad_sesiones<1||t.cantidad_sesiones>25)&&e.push("La cantidad de sesiones debe estar entre 1 y 25"),(!t.tipo||!["terapia","rutina"].includes(t.tipo))&&e.push("Debe seleccionar un tipo v\xE1lido (terapia o rutina)"),(t.descuento<0||t.descuento>100)&&e.push("El descuento debe estar entre 0 y 100%"),t.tipo==="rutina"?!t.rutinas_seleccionadas||t.rutinas_seleccionadas.length===0?e.push("Debe seleccionar al menos una rutina"):t.rutinas_seleccionadas.length>t.cantidad_sesiones&&e.push("No puede seleccionar m\xE1s rutinas que la cantidad de sesiones"):t.tipo==="terapia"&&(!t.terapias_seleccionadas||t.terapias_seleccionadas.length===0?e.push("Debe seleccionar al menos una terapia"):t.terapias_seleccionadas.length>t.cantidad_sesiones&&e.push("No puede seleccionar m\xE1s terapias que la cantidad de sesiones")),{valido:e.length===0,errores:e}}buscarPaquetes(t){return v(this,null,function*(){try{if(!t||t.trim().length===0)return yield this.obtenerPaquetes();let{data:e,error:i}=yield this.supabaseService.client.from("paquetes").select("*").or(`nombre.ilike.%${t}%,descripcion.ilike.%${t}%`).eq("status",1).order("nombre");if(i)throw console.error("Error buscando paquetes:",i),i;return e||[]}catch(e){throw console.error("Error en buscarPaquetes:",e),e}})}obtenerPaquetesPorTipo(t){return v(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.client.from("paquetes").select("*").eq("tipo",t).eq("status",1).order("nombre");if(i)throw console.error("Error obteniendo paquetes por tipo:",i),i;return e||[]}catch(e){throw console.error("Error en obtenerPaquetesPorTipo:",e),e}})}formatearPrecio(t){return new Intl.NumberFormat("es-GT",{style:"currency",currency:"GTQ"}).format(t)}calcularPrecioFinal(t,e){return t-t*e/100}calcularPrecioPorSesion(t,e){return e>0?t/e:0}obtenerResumenPaquete(t){let e=this.calcularPrecioFinal(t.precio,t.descuento),i=this.calcularPrecioPorSesion(e,t.cantidad_sesiones);return{id:t.id,nombre:t.nombre,tipo:t.tipo,cantidadSesiones:t.cantidad_sesiones,precioBase:t.precio,descuento:t.descuento,precioFinal:e,precioPorSesion:i,ahorroTotal:t.precio-e,status:t.status,fechaCreacion:t.fecha_creacion}}static \u0275fac=function(e){return new(e||n)(B(me))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function kA(n,t){if(n&1&&(s(0,"option",19),d(1),l()),n&2){let e=t.$implicit;g("value",e.value),u(),E(" ",e.label," ")}}function PA(n,t){if(n&1&&(s(0,"option",19),d(1),l()),n&2){let e=t.$implicit;g("value",e.value),u(),E(" ",e.label," ")}}function OA(n,t){n&1&&(s(0,"div",20),b(1,"div",21),s(2,"p",22),d(3,"Cargando paquetes..."),l()())}function AA(n,t){if(n&1&&(s(0,"div",23),d(1),l()),n&2){let e=h();u(),E(" ",e.error," ")}}function RA(n,t){if(n&1&&(s(0,"div",54),d(1),tt(2,"slice"),l()),n&2){let e=h().$implicit;u(),be(" ",R_(2,2,e.descripcion,0,50),"",e.descripcion.length>50?"...":""," ")}}function FA(n,t){if(n&1&&(s(0,"div",55),d(1),l()),n&2){let e=h().$implicit,i=h(2);u(),E(" ",i.formatearPrecio(e.precio)," ")}}function NA(n,t){if(n&1&&(s(0,"div",56),d(1),l()),n&2){let e=h().$implicit;u(),E(" ",e.descuento,"% descuento ")}}function VA(n,t){n&1&&(I(),s(0,"svg",5),b(1,"path",57),l())}function jA(n,t){n&1&&(I(),s(0,"svg",5),b(1,"path",58),l())}function LA(n,t){if(n&1){let e=P();s(0,"tr",33)(1,"td",34)(2,"div")(3,"div",35),d(4),l(),w(5,RA,3,6,"div",36),l()(),s(6,"td",34)(7,"span",37),d(8),tt(9,"titlecase"),l()(),s(10,"td",38),d(11),l(),s(12,"td",34)(13,"div",39),w(14,FA,2,1,"div",40),s(15,"div",41),d(16),l(),w(17,NA,2,1,"div",42),l()(),s(18,"td",34)(19,"span",37),d(20),l()(),s(21,"td",43)(22,"div",44)(23,"button",45),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.verDetalle(r.id))}),I(),s(24,"svg",5),b(25,"path",46)(26,"path",47),l()(),T(),s(27,"button",48),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.irAEditar(r.id))}),I(),s(28,"svg",5),b(29,"path",49),l()(),T(),s(30,"button",50),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.toggleStatus(r))}),w(31,VA,2,0,"svg",51)(32,jA,2,0,"svg",51),l(),s(33,"button",52),x("click",function(){let r=C(e).$implicit,o=h(2);return S(o.confirmarEliminacion(r))}),I(),s(34,"svg",5),b(35,"path",53),l()()()()()}if(n&2){let e=t.$implicit,i=h(2);u(4),k(e.nombre),u(),g("ngIf",e.descripcion),u(2),W(i.obtenerClaseTipo(e.tipo)),u(),E(" ",Rt(9,19,e.tipo)," "),u(3),E(" ",e.cantidad_sesiones," sesiones "),u(3),g("ngIf",e.descuento>0),u(),X("text-green-600",e.descuento>0),u(),E(" ",i.formatearPrecio(e.precio_final||e.precio)," "),u(),g("ngIf",e.descuento>0),u(2),W(i.obtenerClaseStatus(e.status)),u(),E(" ",i.obtenerTextoStatus(e.status)," "),u(10),W(e.status===1?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),g("title",e.status===1?"Desactivar":"Activar"),u(),g("ngIf",e.status===1),u(),g("ngIf",e.status===0)}}function UA(n,t){n&1&&(s(0,"tr")(1,"td",59)(2,"div",60),I(),s(3,"svg",61),b(4,"path",62),l(),T(),s(5,"p",63),d(6,"No se encontraron paquetes"),l(),s(7,"p",64),d(8,"Intenta ajustar los filtros o crear un nuevo paquete"),l()()()())}function BA(n,t){if(n&1){let e=P();s(0,"button",79),x("click",function(){let r=C(e).$implicit,o=h(3);return S(o.irAPagina(r))}),d(1),l()}if(n&2){let e=t.$implicit,i=h(3);W(e===i.paginaActual?"bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),u(),E(" ",e," ")}}function $A(n,t){if(n&1){let e=P();s(0,"div",65)(1,"div",66)(2,"button",67),x("click",function(){C(e);let r=h(2);return S(r.irAPagina(r.paginaActual-1))}),d(3," Anterior "),l(),s(4,"button",68),x("click",function(){C(e);let r=h(2);return S(r.irAPagina(r.paginaActual+1))}),d(5," Siguiente "),l()(),s(6,"div",69)(7,"div")(8,"p",70),d(9," Mostrando "),s(10,"span",41),d(11),l(),d(12," a "),s(13,"span",41),d(14),l(),d(15," de "),s(16,"span",41),d(17),l(),d(18," resultados "),l()(),s(19,"div")(20,"nav",71)(21,"button",72),x("click",function(){C(e);let r=h(2);return S(r.irAPagina(r.paginaActual-1))}),s(22,"span",73),d(23,"Anterior"),l(),I(),s(24,"svg",74),b(25,"path",75),l()(),w(26,BA,2,3,"button",76),T(),s(27,"button",77),x("click",function(){C(e);let r=h(2);return S(r.irAPagina(r.paginaActual+1))}),s(28,"span",73),d(29,"Siguiente"),l(),I(),s(30,"svg",74),b(31,"path",78),l()()()()()()}if(n&2){let e=h(2);u(2),g("disabled",e.paginaActual===1),u(2),g("disabled",e.paginaActual===e.totalPaginas),u(7),k((e.paginaActual-1)*e.itemsPorPagina+1),u(3),k(e.Math.min(e.paginaActual*e.itemsPorPagina,e.paquetesFiltrados.length)),u(3),k(e.paquetesFiltrados.length),u(4),g("disabled",e.paginaActual===1),u(5),g("ngForOf",e.paginasArray),u(),g("disabled",e.paginaActual===e.totalPaginas)}}function qA(n,t){if(n&1&&(s(0,"div",24)(1,"div",25)(2,"table",26)(3,"thead",27)(4,"tr")(5,"th",28),d(6," Paquete "),l(),s(7,"th",28),d(8," Tipo "),l(),s(9,"th",28),d(10," Sesiones "),l(),s(11,"th",28),d(12," Precio "),l(),s(13,"th",28),d(14," Estado "),l(),s(15,"th",28),d(16," Acciones "),l()()(),s(17,"tbody",29),w(18,LA,36,21,"tr",30)(19,UA,9,0,"tr",31),l()()(),w(20,$A,32,8,"div",32),l()),n&2){let e=h();u(18),g("ngForOf",e.paquetesPaginados),u(),g("ngIf",e.paquetesPaginados.length===0),u(),g("ngIf",e.paquetesFiltrados.length>e.itemsPorPagina)}}function HA(n,t){n&1&&(s(0,"span"),d(1,"Eliminar"),l())}function zA(n,t){n&1&&(s(0,"span"),d(1,"Eliminando..."),l())}function GA(n,t){if(n&1){let e=P();s(0,"div",80),x("click",function(){C(e);let r=h();return S(r.cancelarEliminacion())}),s(1,"div",81),x("click",function(r){return C(e),S(r.stopPropagation())}),s(2,"div",82)(3,"div",83),I(),s(4,"svg",84),b(5,"path",85),l()(),T(),s(6,"h3",86),d(7,"Confirmar eliminaci\xF3n"),l(),s(8,"div",87)(9,"p",54),d(10),l()(),s(11,"div",88)(12,"div",89)(13,"button",90),x("click",function(){C(e);let r=h();return S(r.eliminarPaquete())}),w(14,HA,2,0,"span",31)(15,zA,2,0,"span",31),l(),s(16,"button",91),x("click",function(){C(e);let r=h();return S(r.cancelarEliminacion())}),d(17," Cancelar "),l()()()()()()}if(n&2){let e=h();u(10),E(' \xBFEst\xE1s seguro de que deseas eliminar el paquete "',e.paqueteAEliminar==null?null:e.paqueteAEliminar.nombre,'"? Esta acci\xF3n no se puede deshacer. '),u(3),g("disabled",e.cargando),u(),g("ngIf",!e.cargando),u(),g("ngIf",e.cargando),u(),g("disabled",e.cargando)}}var ys=class n{constructor(t,e){this.paquetesService=t;this.router=e}paquetes=[];paquetesFiltrados=[];cargando=!1;error=null;filtros={tipo:"todos",status:1,busqueda:""};tiposPaquete=[{value:"todos",label:"Todos los tipos"},...iu];statusOptions=[{value:1,label:"Activos"},{value:0,label:"Inactivos"},{value:void 0,label:"Todos"}];paginaActual=1;itemsPorPagina=10;totalPaginas=0;mostrarModalEliminar=!1;paqueteAEliminar=null;Math;ngOnInit(){this.cargarPaquetes()}cargarPaquetes(){return v(this,null,function*(){this.cargando=!0,this.error=null;try{this.paquetes=yield this.paquetesService.obtenerPaquetes(this.filtros),this.aplicarFiltrosYPaginacion()}catch(t){console.error("Error cargando paquetes:",t),this.error="Error al cargar los paquetes. Por favor, intenta de nuevo."}finally{this.cargando=!1}})}aplicarFiltrosYPaginacion(){let t=[...this.paquetes];if(this.filtros.busqueda){let e=this.filtros.busqueda.toLowerCase();t=t.filter(i=>i.nombre.toLowerCase().includes(e)||i.descripcion&&i.descripcion.toLowerCase().includes(e))}this.paquetesFiltrados=t,this.calcularPaginacion()}onFiltroChange(){this.paginaActual=1,this.cargarPaquetes()}onBusquedaChange(){this.paginaActual=1,this.aplicarFiltrosYPaginacion()}limpiarFiltros(){this.filtros={tipo:"todos",status:1,busqueda:""},this.cargarPaquetes()}calcularPaginacion(){this.totalPaginas=Math.ceil(this.paquetesFiltrados.length/this.itemsPorPagina)}get paquetesPaginados(){let t=(this.paginaActual-1)*this.itemsPorPagina,e=t+this.itemsPorPagina;return this.paquetesFiltrados.slice(t,e)}irAPagina(t){t>=1&&t<=this.totalPaginas&&(this.paginaActual=t)}get paginasArray(){return Array.from({length:this.totalPaginas},(t,e)=>e+1)}irACrear(){this.router.navigate(["/paquetes/crear"])}irAEditar(t){this.router.navigate(["/paquetes/editar",t])}verDetalle(t){this.router.navigate(["/paquetes/detalle",t])}confirmarEliminacion(t){this.paqueteAEliminar=t,this.mostrarModalEliminar=!0}cancelarEliminacion(){this.mostrarModalEliminar=!1,this.paqueteAEliminar=null}eliminarPaquete(){return v(this,null,function*(){if(this.paqueteAEliminar){this.cargando=!0;try{let t=yield this.paquetesService.eliminarPaquete(this.paqueteAEliminar.id);t.success?(yield this.cargarPaquetes(),this.mostrarMensajeExito("Paquete eliminado exitosamente")):this.mostrarMensajeError(t.message)}catch(t){console.error("Error eliminando paquete:",t),this.mostrarMensajeError("Error al eliminar el paquete")}finally{this.cargando=!1,this.cancelarEliminacion()}}})}toggleStatus(t){return v(this,null,function*(){this.cargando=!0;try{let e=t.status===1?yield this.paquetesService.eliminarPaquete(t.id):yield this.paquetesService.activarPaquete(t.id);if(e.success){yield this.cargarPaquetes();let i=t.status===1?"desactivado":"activado";this.mostrarMensajeExito(`Paquete ${i} exitosamente`)}else this.mostrarMensajeError(e.message)}catch(e){console.error("Error cambiando status:",e),this.mostrarMensajeError("Error al cambiar el estado del paquete")}finally{this.cargando=!1}})}formatearPrecio(t){return this.paquetesService.formatearPrecio(t)}obtenerClaseStatus(t){return t===1?"badge badge-success":"badge badge-secondary"}obtenerTextoStatus(t){return t===1?"Activo":"Inactivo"}obtenerClaseTipo(t){return t==="terapia"?"badge badge-info":"badge badge-warning"}mostrarMensajeExito(t){console.log("\xC9xito:",t)}mostrarMensajeError(t){console.error("Error:",t),this.error=t}static \u0275fac=function(e){return new(e||n)(O(Ri),O(fe))};static \u0275cmp=ie({type:n,selectors:[["app-paquetes"]],standalone:!1,decls:34,vars:9,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"bg-white","p-4","rounded-lg","shadow-sm","border","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","placeholder","Nombre o descripci\xF3n...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","input","ngModel"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-end"],[1,"w-full","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-md","transition-colors",3,"click"],["class","text-center py-8",4,"ngIf"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",4,"ngIf"],["class","bg-white rounded-lg shadow-sm border overflow-hidden",4,"ngIf"],["class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",3,"click",4,"ngIf"],[3,"value"],[1,"text-center","py-8"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"mt-2","text-gray-600"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg","mb-4"],[1,"bg-white","rounded-lg","shadow-sm","border","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[4,"ngIf"],["class","bg-white px-4 py-3 border-t border-gray-200 sm:px-6",4,"ngIf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],["class","text-sm text-gray-500",4,"ngIf"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"text-sm","text-gray-900"],["class","line-through text-gray-500",4,"ngIf"],[1,"font-medium"],["class","text-xs text-green-600",4,"ngIf"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"flex","space-x-2"],["title","Ver detalle",1,"text-blue-600","hover:text-blue-900","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["title","Editar",1,"text-indigo-600","hover:text-indigo-900","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"transition-colors",3,"click","title"],["class","w-5 h-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["title","Eliminar",1,"text-red-600","hover:text-red-900","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-sm","text-gray-500"],[1,"line-through","text-gray-500"],[1,"text-xs","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L5.636 5.636"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["colspan","6",1,"px-6","py-8","text-center","text-gray-500"],[1,"flex","flex-col","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"],[1,"text-lg","font-medium"],[1,"text-sm"],[1,"bg-white","px-4","py-3","border-t","border-gray-200","sm:px-6"],[1,"flex-1","flex","justify-between","sm:hidden"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"ml-3","relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"sr-only"],["fill","currentColor","viewBox","0 0 20 20",1,"h-5","w-5"],["fill-rule","evenodd","d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule","evenodd"],["class","relative inline-flex items-center px-4 py-2 border text-sm font-medium",3,"class","click",4,"ngFor","ngForOf"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"],[1,"relative","inline-flex","items-center","px-4","py-2","border","text-sm","font-medium",3,"click"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white",3,"click"],[1,"mt-3","text-center"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-lg","leading-6","font-medium","text-gray-900","mt-4"],[1,"mt-2","px-7","py-3"],[1,"items-center","px-4","py-3"],[1,"flex","space-x-3"],[1,"px-4","py-2","bg-red-500","text-white","text-base","font-medium","rounded-md","w-full","shadow-sm","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-300","disabled:opacity-50",3,"click","disabled"],[1,"px-4","py-2","bg-gray-500","text-white","text-base","font-medium","rounded-md","w-full","shadow-sm","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-300","disabled:opacity-50",3,"click","disabled"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),d(4,"Gesti\xF3n de Paquetes"),l(),s(5,"p",3),d(6,"Administra los paquetes de terapias y rutinas"),l()(),s(7,"button",4),x("click",function(){return i.irACrear()}),I(),s(8,"svg",5),b(9,"path",6),l(),d(10," Nuevo Paquete "),l()(),T(),s(11,"div",7)(12,"div",8)(13,"div")(14,"label",9),d(15,"Buscar"),l(),s(16,"input",10),F("ngModelChange",function(o){return N(i.filtros.busqueda,o)||(i.filtros.busqueda=o),o}),x("input",function(){return i.onBusquedaChange()}),l()(),s(17,"div")(18,"label",9),d(19,"Tipo"),l(),s(20,"select",11),F("ngModelChange",function(o){return N(i.filtros.tipo,o)||(i.filtros.tipo=o),o}),x("change",function(){return i.onFiltroChange()}),w(21,kA,2,2,"option",12),l()(),s(22,"div")(23,"label",9),d(24,"Estado"),l(),s(25,"select",11),F("ngModelChange",function(o){return N(i.filtros.status,o)||(i.filtros.status=o),o}),x("change",function(){return i.onFiltroChange()}),w(26,PA,2,2,"option",12),l()(),s(27,"div",13)(28,"button",14),x("click",function(){return i.limpiarFiltros()}),d(29," Limpiar Filtros "),l()()()(),w(30,OA,4,0,"div",15)(31,AA,2,1,"div",16)(32,qA,21,3,"div",17),l(),w(33,GA,18,5,"div",18)),e&2&&(u(16),R("ngModel",i.filtros.busqueda),u(4),R("ngModel",i.filtros.tipo),u(),g("ngForOf",i.tiposPaquete),u(4),R("ngModel",i.filtros.status),u(),g("ngForOf",i.statusOptions),u(4),g("ngIf",i.cargando),u(),g("ngIf",i.error&&!i.cargando),u(),g("ngIf",!i.cargando&&!i.error),u(),g("ngIf",i.mostrarModalEliminar))},dependencies:[ve,le,je,Le,we,Ae,Ie,Re,pm,_n],styles:[".paquetes-container[_ngcontent-%COMP%]{min-height:100vh;--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-radius:9999px;padding:.125rem .625rem;font-size:.75rem;line-height:1rem;font-weight:500}.badge-success[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.badge-secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.badge-info[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.badge-warning[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.table-hover-row[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1));transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.action-button[_ngcontent-%COMP%]{display:inline-flex;height:2rem;width:2rem;align-items:center;justify-content:center;border-radius:9999px;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.action-button[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.pagination-button[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;border-width:1px;padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.pagination-button[_ngcontent-%COMP%]:hover:not(:disabled){--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.pagination-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.pagination-button.active[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:50;height:100%;width:100%;overflow-y:auto;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1));--tw-bg-opacity: .5;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.modal-content[_ngcontent-%COMP%]{position:relative;top:5rem;margin-left:auto;margin-right:auto;width:24rem;border-radius:.375rem;border-width:1px;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.25rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.loading-spinner[_ngcontent-%COMP%]{display:inline-block}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;border-radius:9999px;border-bottom-width:2px;--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.price-display[_ngcontent-%COMP%]{text-align:right}.price-original[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1));text-decoration-line:line-through}.price-final[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem;font-weight:700}.price-discount[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-weight:500}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.status-active[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.status-inactive[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{top:2.5rem;width:91.666667%}.pagination-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem;line-height:1rem}}.form-container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:56rem}.form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-radius:.5rem;border-width:1px;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.5rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.form-section-title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.125rem;line-height:1.75rem;font-weight:600;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:1.5rem}@media (min-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}.form-field[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.form-input[_ngcontent-%COMP%]{width:100%;border-radius:.375rem;border-width:1px;padding:.5rem .75rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.form-input[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.form-input[_ngcontent-%COMP%]:not(.error){--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.form-input[_ngcontent-%COMP%]:not(.error):focus{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1));--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.form-input.error[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(252 165 165 / var(--tw-border-opacity, 1))}.form-input.error[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:rgb(239 68 68 / var(--tw-border-opacity, 1));--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}.form-error[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.form-actions[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.form-actions[_ngcontent-%COMP%]{padding-top:1.5rem}.preview-card[_ngcontent-%COMP%]{border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.5rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.preview-title[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:1.25rem;line-height:1.75rem;font-weight:600;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.preview-description[_ngcontent-%COMP%]{margin-bottom:.75rem;--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.preview-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.preview-price[_ngcontent-%COMP%]{text-align:right}.info-box[_ngcontent-%COMP%]{border-radius:.375rem;padding:1rem}.info-box.blue[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.info-box.green[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.info-box.yellow[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.info-box.red[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.detail-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;align-items:flex-start;justify-content:space-between}.detail-title[_ngcontent-%COMP%]{font-size:1.875rem;line-height:2.25rem;font-weight:700;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.detail-subtitle[_ngcontent-%COMP%]{margin-top:.25rem;--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.detail-actions[_ngcontent-%COMP%]{display:flex}.detail-actions[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.stat-card[_ngcontent-%COMP%]{border-radius:.5rem;border-width:1px;padding:1rem}.stat-card.blue[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.stat-card.gray[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.stat-card.yellow[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.stat-card.green[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.stat-icon[_ngcontent-%COMP%]{height:2rem;width:2rem;flex-shrink:0}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-weight:500}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem;font-weight:700}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-top:3rem;padding-bottom:3rem;text-align:center}.empty-state-icon[_ngcontent-%COMP%]{margin-bottom:1rem;height:3rem;width:3rem;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.empty-state-title[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:1.125rem;line-height:1.75rem;font-weight:500;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.empty-state-description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.breadcrumb[_ngcontent-%COMP%]{margin-bottom:.5rem;display:flex;align-items:center;gap:.5rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-radius:.375rem;border-width:1px;border-color:transparent;padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.btn[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-offset-width: 2px}.btn-primary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.btn-primary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.btn-primary[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.btn-secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.btn-secondary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.btn-secondary[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(107 114 128 / var(--tw-ring-opacity, 1))}.btn-success[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.btn-success[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.btn-success[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(34 197 94 / var(--tw-ring-opacity, 1))}.btn-danger[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.btn-danger[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.btn-danger[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}.btn-outline[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.btn-outline[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.btn-outline[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(107 114 128 / var(--tw-ring-opacity, 1))}.btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})};function WA(n,t){n&1&&(s(0,"div",10),b(1,"div",11),s(2,"p",12),d(3,"Cargando informaci\xF3n del paquete..."),l()())}function YA(n,t){if(n&1&&(s(0,"div",13),d(1),l()),n&2){let e=h();u(),E(" ",e.error," ")}}function ZA(n,t){if(n&1&&(s(0,"p",49),d(1),l()),n&2){let e=h(2);u(),E(" ",e.obtenerMensajeError("nombre")," ")}}function QA(n,t){if(n&1&&(s(0,"option",50),d(1),l()),n&2){let e=t.$implicit;g("value",e.value),u(),E(" ",e.label," ")}}function KA(n,t){if(n&1&&(s(0,"p",49),d(1),l()),n&2){let e=h(2);u(),E(" ",e.obtenerMensajeError("tipo")," ")}}function JA(n,t){if(n&1&&(s(0,"p",49),d(1),l()),n&2){let e=h(2);u(),E(" ",e.obtenerMensajeError("cantidad_sesiones")," ")}}function XA(n,t){n&1&&(s(0,"div",10),b(1,"div",51),s(2,"p",12),d(3,"Cargando opciones disponibles..."),l()())}function eR(n,t){n&1&&(s(0,"div",55),I(),s(1,"svg",56),b(2,"path",57),l(),T(),s(3,"p"),d(4,"No hay rutinas disponibles"),l(),s(5,"p",34),d(6,"Crea rutinas primero para poder seleccionarlas"),l()())}function tR(n,t){if(n&1&&(s(0,"p",67),d(1),l()),n&2){let e=h().$implicit;u(),E(" ",e.descripcion," ")}}function nR(n,t){if(n&1&&(s(0,"p",68),d(1),l()),n&2){let e=h().$implicit;u(),E(" ",e.informacion_adicional," ")}}function iR(n,t){n&1&&(s(0,"div",69)(1,"span",70),d(2," \u2713 Seleccionada "),l()())}function rR(n,t){if(n&1){let e=P();s(0,"div",58)(1,"div",59)(2,"div",60)(3,"input",61),x("change",function(){let r=C(e).$implicit,o=h(3);return S(o.onSeleccionChange(r.id,!0))}),l()(),s(4,"div",62)(5,"label",63),d(6),l(),w(7,tR,2,1,"p",64)(8,nR,2,1,"p",65),l(),w(9,iR,3,0,"div",66),l()()}if(n&2){let e=t.$implicit,i=h(3);X("border-blue-500",e.seleccionado)("bg-blue-50",e.seleccionado)("border-gray-200",!e.seleccionado),u(3),g("id","rutina-"+e.id)("checked",e.seleccionado)("disabled",!e.seleccionado&&i.cantidadSeleccionada>=i.cantidadPermitida),u(2),g("for","rutina-"+e.id),u(),E(" ",e.nombre," "),u(),g("ngIf",e.descripcion),u(),g("ngIf",e.informacion_adicional),u(),g("ngIf",e.seleccionado)}}function oR(n,t){if(n&1&&(s(0,"div",52),w(1,eR,7,0,"div",53)(2,rR,10,14,"div",54),l()),n&2){let e=h(2);u(),g("ngIf",e.rutinasDisponibles.length===0),u(),g("ngForOf",e.rutinasDisponibles)}}function aR(n,t){n&1&&(s(0,"div",55),I(),s(1,"svg",56),b(2,"path",71),l(),T(),s(3,"p"),d(4,"No hay terapias disponibles"),l(),s(5,"p",34),d(6,"Crea terapias primero para poder seleccionarlas"),l()())}function sR(n,t){if(n&1&&(s(0,"p",67),d(1),l()),n&2){let e=h().$implicit;u(),E(" ",e.descripcion," ")}}function lR(n,t){if(n&1&&(s(0,"p",68),d(1),l()),n&2){let e=h().$implicit;u(),E(" ",e.informacion_adicional," ")}}function cR(n,t){n&1&&(s(0,"div",69)(1,"span",70),d(2," \u2713 Seleccionada "),l()())}function dR(n,t){if(n&1){let e=P();s(0,"div",58)(1,"div",59)(2,"div",60)(3,"input",61),x("change",function(){let r=C(e).$implicit,o=h(3);return S(o.onSeleccionChange(r.id,!1))}),l()(),s(4,"div",62)(5,"label",63),d(6),l(),w(7,sR,2,1,"p",64)(8,lR,2,1,"p",65),l(),w(9,cR,3,0,"div",66),l()()}if(n&2){let e=t.$implicit,i=h(3);X("border-blue-500",e.seleccionado)("bg-blue-50",e.seleccionado)("border-gray-200",!e.seleccionado),u(3),g("id","terapia-"+e.id)("checked",e.seleccionado)("disabled",!e.seleccionado&&i.cantidadSeleccionada>=i.cantidadPermitida),u(2),g("for","terapia-"+e.id),u(),E(" ",e.nombre," "),u(),g("ngIf",e.descripcion),u(),g("ngIf",e.informacion_adicional),u(),g("ngIf",e.seleccionado)}}function uR(n,t){if(n&1&&(s(0,"div",52),w(1,aR,7,0,"div",53)(2,dR,10,14,"div",54),l()),n&2){let e=h(2);u(),g("ngIf",e.terapiasDisponibles.length===0),u(),g("ngForOf",e.terapiasDisponibles)}}function pR(n,t){if(n&1){let e=P();s(0,"button",77),x("click",function(){C(e);let r=h(3);return S(r.limpiarSelecciones())}),d(1," Limpiar selecciones "),l()}}function fR(n,t){n&1&&(s(0,"span"),d(1,"Selecciona al menos una opci\xF3n"),l())}function mR(n,t){if(n&1&&(s(0,"span"),d(1),l()),n&2){let e=h(3);u(),E(" Puedes seleccionar ",e.cantidadPermitida-e.cantidadSeleccionada," m\xE1s ")}}function gR(n,t){n&1&&(s(0,"span",78),d(1," \u2713 Selecci\xF3n completa "),l())}function hR(n,t){if(n&1&&(s(0,"div",72)(1,"div",73),w(2,pR,2,0,"button",74),s(3,"div",75),w(4,fR,2,0,"span",47)(5,mR,2,1,"span",47)(6,gR,2,0,"span",76),l()()()),n&2){let e=h(2);u(2),g("ngIf",e.cantidadSeleccionada>0),u(2),g("ngIf",e.cantidadSeleccionada===0),u(),g("ngIf",e.cantidadSeleccionada>0&&e.cantidadSeleccionada<e.cantidadPermitida),u(),g("ngIf",e.cantidadSeleccionada===e.cantidadPermitida)}}function vR(n,t){if(n&1&&(s(0,"p",49),d(1),l()),n&2){let e=h(2);u(),E(" ",e.obtenerMensajeError("precio")," ")}}function _R(n,t){if(n&1&&(s(0,"p",49),d(1),l()),n&2){let e=h(2);u(),E(" ",e.obtenerMensajeError("descuento")," ")}}function bR(n,t){if(n&1&&(s(0,"span"),d(1),l()),n&2){let e=h(2);u(),E(" ",e.esEdicion?"Actualizar":"Crear"," Paquete ")}}function yR(n,t){if(n&1&&(s(0,"span",79),I(),s(1,"svg",80),b(2,"circle",81)(3,"path",82),l(),d(4),l()),n&2){let e=h(2);u(4),E(" ",e.esEdicion?"Actualizando...":"Creando..."," ")}}function xR(n,t){if(n&1){let e=P();s(0,"div",14)(1,"form",15),x("ngSubmit",function(){C(e);let r=h();return S(r.onSubmit())}),s(2,"div",16)(3,"h2",17),d(4,"Informaci\xF3n B\xE1sica"),l(),s(5,"div",18)(6,"div",19)(7,"label",20),d(8," Nombre del Paquete * "),l(),b(9,"input",21),w(10,ZA,2,1,"p",22),l(),s(11,"div")(12,"label",23),d(13," Tipo de Paquete * "),l(),s(14,"select",24),w(15,QA,2,2,"option",25),l(),w(16,KA,2,1,"p",22),l(),s(17,"div")(18,"label",26),d(19," Cantidad de Sesiones * "),l(),b(20,"input",27),s(21,"p",28),d(22,"M\xEDnimo 1, m\xE1ximo 25 sesiones"),l(),w(23,JA,2,1,"p",22),l(),s(24,"div",19)(25,"label",29),d(26," Descripci\xF3n "),l(),s(27,"textarea",30),d(28,"            "),l()()()(),s(29,"div",16)(30,"div",31)(31,"div")(32,"h2",32),d(33),l(),s(34,"p",33),d(35),l()(),s(36,"div",34)(37,"span",35),d(38,"Seleccionadas: "),l(),s(39,"span"),d(40),l()()(),w(41,XA,4,0,"div",6)(42,oR,3,2,"div",36)(43,uR,3,2,"div",36)(44,hR,7,4,"div",37),l(),s(45,"div",16)(46,"h2",17),d(47,"Informaci\xF3n de Precios"),l(),s(48,"div",18)(49,"div")(50,"label",38),d(51," Precio Base * "),l(),s(52,"div",39)(53,"span",40),d(54,"Q"),l(),b(55,"input",41),l(),w(56,vR,2,1,"p",22),l(),s(57,"div")(58,"label",42),d(59," Descuento (%) "),l(),b(60,"input",43),s(61,"p",28),d(62,"0% = Sin descuento, m\xE1ximo 100%"),l(),w(63,_R,2,1,"p",22),l()()(),s(64,"div",44)(65,"button",45),x("click",function(){C(e);let r=h();return S(r.cancelar())}),d(66," Cancelar "),l(),s(67,"button",46),w(68,bR,2,1,"span",47)(69,yR,5,1,"span",48),l()()()()}if(n&2){let e,i,r,o,a=h();u(),g("formGroup",a.paqueteForm),u(8),W(a.esInvalido("nombre")?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"),u(),g("ngIf",a.esInvalido("nombre")),u(4),W(a.esInvalido("tipo")?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"),u(),g("ngForOf",a.tiposPaquete),u(),g("ngIf",a.esInvalido("tipo")),u(4),W(a.esInvalido("cantidad_sesiones")?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"),u(3),g("ngIf",a.esInvalido("cantidad_sesiones")),u(10),E(" Seleccionar ",((e=a.paqueteForm.get("tipo"))==null?null:e.value)==="rutina"?"Rutinas":"Terapias"," "),u(2),be(" Puedes seleccionar hasta ",a.cantidadPermitida," ",((i=a.paqueteForm.get("tipo"))==null?null:i.value)==="rutina"?"rutinas":"terapias"," para este paquete "),u(4),W(a.cantidadSeleccionada===a.cantidadPermitida?"text-green-600":"text-blue-600"),u(),be(" ",a.cantidadSeleccionada," / ",a.cantidadPermitida," "),u(),g("ngIf",a.cargandoOpciones),u(),g("ngIf",!a.cargandoOpciones&&((r=a.paqueteForm.get("tipo"))==null?null:r.value)==="rutina"),u(),g("ngIf",!a.cargandoOpciones&&((o=a.paqueteForm.get("tipo"))==null?null:o.value)==="terapia"),u(),g("ngIf",!a.cargandoOpciones&&(a.rutinasDisponibles.length>0||a.terapiasDisponibles.length>0)),u(11),W(a.esInvalido("precio")?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"),u(),g("ngIf",a.esInvalido("precio")),u(4),W(a.esInvalido("descuento")?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"),u(3),g("ngIf",a.esInvalido("descuento")),u(4),g("disabled",a.paqueteForm.invalid||a.guardando||a.cantidadSeleccionada===0),u(),g("ngIf",!a.guardando),u(),g("ngIf",a.guardando)}}function wR(n,t){if(n&1&&(s(0,"p",103),d(1),l()),n&2){let e=h(2);u(),E(" ",e.paqueteForm.value.descripcion," ")}}function CR(n,t){if(n&1&&(gt(0),b(1,"span",106),d(2),ht()),n&2){let e=h().$implicit;u(2),E(" ",e.nombre," ")}}function SR(n,t){if(n&1&&(s(0,"li",105),w(1,CR,3,1,"ng-container",47),l()),n&2){let e=t.$implicit;u(),g("ngIf",e.seleccionado)}}function ER(n,t){if(n&1&&(gt(0),w(1,SR,2,1,"li",104),ht()),n&2){let e=h(2);u(),g("ngForOf",e.rutinasDisponibles)}}function MR(n,t){if(n&1&&(gt(0),b(1,"span",106),d(2),ht()),n&2){let e=h().$implicit;u(2),E(" ",e.nombre," ")}}function IR(n,t){if(n&1&&(s(0,"li",105),w(1,MR,3,1,"ng-container",47),l()),n&2){let e=t.$implicit;u(),g("ngIf",e.seleccionado)}}function DR(n,t){if(n&1&&(gt(0),w(1,IR,2,1,"li",104),ht()),n&2){let e=h(2);u(),g("ngForOf",e.terapiasDisponibles)}}function TR(n,t){if(n&1&&(s(0,"div",107),d(1),l()),n&2){let e=h(2);u(),E(" ",e.formatearPrecio(e.paqueteForm.value.precio||0)," ")}}function kR(n,t){if(n&1&&(s(0,"div",108),d(1),l()),n&2){let e=h(2);u(),E(" ",e.paqueteForm.value.descuento,"% de descuento ")}}function PR(n,t){if(n&1&&(s(0,"div",83)(1,"h3",17),d(2,"Vista Previa del Paquete"),l(),s(3,"div",84)(4,"div",85)(5,"div",86)(6,"div",87)(7,"h4",88),d(8),l(),s(9,"span",89),d(10),tt(11,"titlecase"),l()(),w(12,wR,2,1,"p",90),s(13,"div",91)(14,"div",92),I(),s(15,"svg",93),b(16,"path",94),l(),d(17),l(),T(),s(18,"div",92),I(),s(19,"svg",93),b(20,"path",57),l(),d(21),l()(),T(),s(22,"div",95)(23,"h5",96),d(24),l(),s(25,"ul",97),w(26,ER,2,1,"ng-container",47)(27,DR,2,1,"ng-container",47),l()()(),s(28,"div",98),w(29,TR,2,1,"div",99),s(30,"div",100),d(31),l(),w(32,kR,2,1,"div",101),s(33,"div",102),d(34),l()()()()()),n&2){let e=h();u(8),k(e.paqueteForm.value.nombre||"Nombre del paquete"),u(),W(e.paqueteForm.value.tipo==="terapia"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),u(),E(" ",Rt(11,17,e.paqueteForm.value.tipo)," "),u(2),g("ngIf",e.paqueteForm.value.descripcion),u(5),E(" ",e.paqueteForm.value.cantidad_sesiones||0," sesiones "),u(4),be(" ",e.cantidadSeleccionada," ",e.paqueteForm.value.tipo==="rutina"?"rutinas":"terapias"," incluidas "),u(3),E(" ",e.paqueteForm.value.tipo==="rutina"?"Rutinas":"Terapias"," incluidas: "),u(2),g("ngIf",e.paqueteForm.value.tipo==="rutina"),u(),g("ngIf",e.paqueteForm.value.tipo==="terapia"),u(2),g("ngIf",e.hayDescuento),u(),X("text-green-600",e.hayDescuento),u(),E(" ",e.formatearPrecio(e.precioFinalCalculado)," "),u(),g("ngIf",e.hayDescuento),u(2),E(" ",e.formatearPrecio(e.precioFinalCalculado/(e.paqueteForm.value.cantidad_sesiones||1))," por sesi\xF3n ")}}var xs=class n{constructor(t,e,i,r,o){this.fb=t;this.route=e;this.router=i;this.paquetesService=r;this.supabaseService=o}paqueteForm;esEdicion=!1;paqueteId=null;cargando=!1;guardando=!1;error=null;tiposPaquete=iu;rutinasDisponibles=[];terapiasDisponibles=[];cargandoOpciones=!1;rutinasSeleccionadas=[];terapiasSeleccionadas=[];ngOnInit(){this.inicializarFormulario(),this.verificarModoEdicion()}inicializarFormulario(){this.paqueteForm=this.fb.group({nombre:["",[ze.required,ze.maxLength(255)]],descripcion:[""],precio:[0,[ze.required,ze.min(.01)]],cantidad_sesiones:[1,[ze.required,ze.min(1),ze.max(25)]],tipo:["terapia",[ze.required]],descuento:[0,[ze.min(0),ze.max(100)]]}),this.paqueteForm.get("tipo")?.valueChanges.subscribe(t=>{this.onTipoChange(t)}),this.paqueteForm.get("cantidad_sesiones")?.valueChanges.subscribe(t=>{this.validarSelecciones()}),this.cargarTerapias()}verificarModoEdicion(){let t=this.route.snapshot.paramMap.get("id");t&&(this.esEdicion=!0,this.paqueteId=parseInt(t),this.cargarPaquete())}cargarPaquete(){return v(this,null,function*(){if(this.paqueteId){this.cargando=!0,this.error=null;try{let t=yield this.paquetesService.obtenerPaquetePorId(this.paqueteId);t?(this.paqueteForm.patchValue({nombre:t.nombre,descripcion:t.descripcion||"",precio:t.precio,cantidad_sesiones:t.cantidad_sesiones,tipo:t.tipo,descuento:t.descuento}),t.tipo==="rutina"&&t.rutinas_seleccionadas?this.rutinasSeleccionadas=[...t.rutinas_seleccionadas]:t.tipo==="terapia"&&t.terapias_seleccionadas&&(this.terapiasSeleccionadas=[...t.terapias_seleccionadas]),yield this.onTipoChange(t.tipo)):this.error="Paquete no encontrado"}catch(t){console.error("Error cargando paquete:",t),this.error="Error al cargar el paquete"}finally{this.cargando=!1}}})}cargarRutinas(){return v(this,null,function*(){try{this.cargandoOpciones=!0;let{data:t,error:e}=yield this.supabaseService.client.from("rutinas").select("id, nombre, descripcion, nivel, duracion_estimada, tipo").eq("status",1).order("nombre");if(e)throw e;this.rutinasDisponibles=(t||[]).map(i=>({id:Number(i.id),nombre:String(i.nombre||""),descripcion:String(i.descripcion||""),informacion_adicional:this.construirInfoRutina(i),seleccionado:this.rutinasSeleccionadas.includes(Number(i.id))}))}catch(t){console.error("Error cargando rutinas:",t),this.error="Error al cargar las rutinas disponibles"}finally{this.cargandoOpciones=!1}})}cargarTerapias(){return v(this,null,function*(){try{this.cargandoOpciones=!0;let{data:t,error:e}=yield this.supabaseService.client.from("terapias").select("id, nombre, descripcion, tipo, area_especializacion, nivel, duracion_estimada").eq("status",1).order("nombre");if(e)throw e;this.terapiasDisponibles=(t||[]).map(i=>({id:Number(i.id),nombre:String(i.nombre||""),descripcion:String(i.descripcion||""),informacion_adicional:this.construirInfoTerapia(i),seleccionado:this.terapiasSeleccionadas.includes(Number(i.id))}))}catch(t){console.error("Error cargando terapias:",t),this.error="Error al cargar las terapias disponibles"}finally{this.cargandoOpciones=!1}})}onTipoChange(t){return v(this,null,function*(){this.rutinasSeleccionadas=[],this.terapiasSeleccionadas=[],t==="rutina"?yield this.cargarRutinas():t==="terapia"&&(yield this.cargarTerapias())})}onSeleccionChange(t,e){let i=this.paqueteForm.get("cantidad_sesiones")?.value||1;if(e){let r=this.rutinasSeleccionadas.indexOf(t);if(r>-1)this.rutinasSeleccionadas.splice(r,1);else if(this.rutinasSeleccionadas.length<i)this.rutinasSeleccionadas.push(t);else{this.mostrarMensajeError(`Solo puedes seleccionar hasta ${i} rutinas`);return}this.rutinasDisponibles=this.rutinasDisponibles.map(o=>G(A({},o),{seleccionado:this.rutinasSeleccionadas.includes(o.id)}))}else{let r=this.terapiasSeleccionadas.indexOf(t);if(r>-1)this.terapiasSeleccionadas.splice(r,1);else if(this.terapiasSeleccionadas.length<i)this.terapiasSeleccionadas.push(t);else{this.mostrarMensajeError(`Solo puedes seleccionar hasta ${i} terapias`);return}this.terapiasDisponibles=this.terapiasDisponibles.map(o=>G(A({},o),{seleccionado:this.terapiasSeleccionadas.includes(o.id)}))}}validarSelecciones(){let t=this.paqueteForm.get("cantidad_sesiones")?.value||1,e=this.paqueteForm.get("tipo")?.value;e==="rutina"&&this.rutinasSeleccionadas.length>t?(this.rutinasSeleccionadas=this.rutinasSeleccionadas.slice(0,t),this.actualizarEstadoVisualRutinas()):e==="terapia"&&this.terapiasSeleccionadas.length>t&&(this.terapiasSeleccionadas=this.terapiasSeleccionadas.slice(0,t),this.actualizarEstadoVisualTerapias())}actualizarEstadoVisualRutinas(){this.rutinasDisponibles=this.rutinasDisponibles.map(t=>G(A({},t),{seleccionado:this.rutinasSeleccionadas.includes(t.id)}))}actualizarEstadoVisualTerapias(){this.terapiasDisponibles=this.terapiasDisponibles.map(t=>G(A({},t),{seleccionado:this.terapiasSeleccionadas.includes(t.id)}))}limpiarSelecciones(){this.rutinasSeleccionadas=[],this.terapiasSeleccionadas=[],this.actualizarEstadoVisualRutinas(),this.actualizarEstadoVisualTerapias()}onSubmit(){return v(this,null,function*(){if(this.paqueteForm.invalid){this.marcarCamposComoTocados();return}let t=this.paqueteForm.get("tipo")?.value;if(t==="rutina"&&this.rutinasSeleccionadas.length===0){this.error="Debe seleccionar al menos una rutina para el paquete";return}else if(t==="terapia"&&this.terapiasSeleccionadas.length===0){this.error="Debe seleccionar al menos una terapia para el paquete";return}this.guardando=!0,this.error=null;try{let e=G(A({},this.paqueteForm.value),{rutinas_seleccionadas:t==="rutina"?this.rutinasSeleccionadas:void 0,terapias_seleccionadas:t==="terapia"?this.terapiasSeleccionadas:void 0}),i;this.esEdicion&&this.paqueteId?i=yield this.paquetesService.actualizarPaquete(this.paqueteId,e):i=yield this.paquetesService.crearPaquete(e),i.success?(this.mostrarMensajeExito(i.message),this.router.navigate(["/paquetes"])):this.error=i.message}catch(e){console.error("Error guardando paquete:",e),this.error="Error al guardar el paquete"}finally{this.guardando=!1}})}cancelar(){this.router.navigate(["/paquetes"])}construirInfoRutina(t){let e=[];return t.nivel&&e.push(`Nivel: ${String(t.nivel)}`),t.duracion_estimada&&e.push(`${t.duracion_estimada} min`),t.tipo&&e.push(String(t.tipo)),e.join(" \u2022 ")}construirInfoTerapia(t){let e=[];return t.tipo&&e.push(`Tipo: ${String(t.tipo)}`),t.area_especializacion&&e.push(String(t.area_especializacion)),t.nivel&&e.push(`Nivel: ${String(t.nivel)}`),t.duracion_estimada&&e.push(`${t.duracion_estimada} min`),e.join(" \u2022 ")}marcarCamposComoTocados(){Object.keys(this.paqueteForm.controls).forEach(t=>{this.paqueteForm.get(t)?.markAsTouched()})}esInvalido(t){let e=this.paqueteForm.get(t);return!!(e&&e.invalid&&e.touched)}obtenerMensajeError(t){let e=this.paqueteForm.get(t);if(e?.errors){if(e.errors.required)return`${t} es requerido`;if(e.errors.min)return`${t} debe ser mayor a ${e.errors.min.min}`;if(e.errors.max)return`${t} debe ser menor a ${e.errors.max.max}`;if(e.errors.maxlength)return`${t} es demasiado largo`}return""}mostrarMensajeExito(t){console.log("\xC9xito:",t)}mostrarMensajeError(t){console.log("Error:",t)}get hayDescuento(){return(this.paqueteForm.get("descuento")?.value||0)>0}get precioFinalCalculado(){let t=this.paqueteForm.get("precio")?.value||0,e=this.paqueteForm.get("descuento")?.value||0;return t-t*e/100}get cantidadSeleccionada(){return this.paqueteForm.get("tipo")?.value==="rutina"?this.rutinasSeleccionadas.length:this.terapiasSeleccionadas.length}get cantidadPermitida(){return this.paqueteForm.get("cantidad_sesiones")?.value||1}formatearPrecio(t){return new Intl.NumberFormat("es-GT",{style:"currency",currency:"GTQ"}).format(t)}static \u0275fac=function(e){return new(e||n)(O(Ld),O(Zt),O(fe),O(Ri),O(me))};static \u0275cmp=ie({type:n,selectors:[["app-paquete-form"]],standalone:!1,decls:17,vars:7,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"mb-6"],[1,"flex","items-center","gap-2","text-sm","text-gray-500","mb-2"],["routerLink","/paquetes",1,"hover:text-blue-600"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],["class","text-center py-8",4,"ngIf"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",4,"ngIf"],["class","max-w-4xl",4,"ngIf"],["class","mt-8 max-w-4xl",4,"ngIf"],[1,"text-center","py-8"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"mt-2","text-gray-600"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg","mb-6"],[1,"max-w-4xl"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-white","p-6","rounded-lg","shadow-sm","border"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"md:col-span-2"],["for","nombre",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","nombre","formControlName","nombre","placeholder","Ej: Paquete Rehabilitaci\xF3n B\xE1sica",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none","focus:ring-2","transition-colors"],["class","mt-1 text-sm text-red-600",4,"ngIf"],["for","tipo",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","tipo","formControlName","tipo",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none","focus:ring-2","transition-colors"],[3,"value",4,"ngFor","ngForOf"],["for","cantidad_sesiones",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","number","id","cantidad_sesiones","formControlName","cantidad_sesiones","min","1","max","25",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none","focus:ring-2","transition-colors"],[1,"mt-1","text-xs","text-gray-500"],["for","descripcion",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","descripcion","formControlName","descripcion","rows","3","placeholder","Describe el contenido y beneficios del paquete...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:border-blue-500","focus:ring-2","focus:ring-blue-500","transition-colors"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"text-sm"],[1,"font-medium"],["class","space-y-3",4,"ngIf"],["class","mt-4 pt-4 border-t border-gray-200",4,"ngIf"],["for","precio",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"relative"],[1,"absolute","left-3","top-2","text-gray-500"],["type","number","id","precio","formControlName","precio","min","0.01","step","0.01",1,"w-full","pl-8","pr-3","py-2","border","rounded-md","focus:outline-none","focus:ring-2","transition-colors"],["for","descuento",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","number","id","descuento","formControlName","descuento","min","0","max","100","step","0.01",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none","focus:ring-2","transition-colors"],[1,"flex","flex-col","sm:flex-row","gap-3","pt-6"],["type","button",1,"px-6","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-colors",3,"click"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"mt-1","text-sm","text-red-600"],[3,"value"],[1,"inline-block","animate-spin","rounded-full","h-6","w-6","border-b-2","border-blue-600"],[1,"space-y-3"],["class","text-center py-8 text-gray-500",4,"ngIf"],["class","border rounded-lg p-4 transition-all duration-200 hover:shadow-md",3,"border-blue-500","bg-blue-50","border-gray-200",4,"ngFor","ngForOf"],[1,"text-center","py-8","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-3","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"border","rounded-lg","p-4","transition-all","duration-200","hover:shadow-md"],[1,"flex","items-start","gap-3"],[1,"flex-shrink-0","mt-1"],["type","checkbox",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500",3,"change","id","checked","disabled"],[1,"flex-1","min-w-0"],[1,"block","font-medium","text-gray-900","cursor-pointer",3,"for"],["class","text-sm text-gray-600 mt-1 line-clamp-2",4,"ngIf"],["class","text-xs text-gray-500 mt-2",4,"ngIf"],["class","flex-shrink-0",4,"ngIf"],[1,"text-sm","text-gray-600","mt-1","line-clamp-2"],[1,"text-xs","text-gray-500","mt-2"],[1,"flex-shrink-0"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"mt-4","pt-4","border-t","border-gray-200"],[1,"flex","items-center","justify-between"],["type","button","class","text-sm text-red-600 hover:text-red-700 font-medium",3,"click",4,"ngIf"],[1,"text-sm","text-gray-600"],["class","text-green-600 font-medium",4,"ngIf"],["type","button",1,"text-sm","text-red-600","hover:text-red-700","font-medium",3,"click"],[1,"text-green-600","font-medium"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mt-8","max-w-4xl"],[1,"bg-white","border","border-gray-200","rounded-lg","p-6","shadow-sm"],[1,"flex","justify-between","items-start"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-2"],[1,"text-xl","font-semibold","text-gray-900"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full"],["class","text-gray-600 mb-3",4,"ngIf"],[1,"flex","items-center","gap-4","text-sm","text-gray-500","mb-3"],[1,"flex","items-center","gap-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"bg-gray-50","rounded-lg","p-3"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"text-sm","text-gray-600","space-y-1"],[1,"text-right"],["class","text-sm text-gray-500 line-through",4,"ngIf"],[1,"text-2xl","font-bold"],["class","text-sm text-green-600 font-medium",4,"ngIf"],[1,"text-sm","text-gray-500","mt-1"],[1,"text-gray-600","mb-3"],["class","flex items-center gap-2",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-2"],[1,"w-1.5","h-1.5","bg-blue-600","rounded-full"],[1,"text-sm","text-gray-500","line-through"],[1,"text-sm","text-green-600","font-medium"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),d(4,"Paquetes"),l(),s(5,"span"),d(6,"/"),l(),s(7,"span"),d(8),l()(),s(9,"h1",4),d(10),l(),s(11,"p",5),d(12),l()(),w(13,WA,4,0,"div",6)(14,YA,2,1,"div",7)(15,xR,70,31,"div",8)(16,PR,35,19,"div",9),l()),e&2&&(u(8),E("",i.esEdicion?"Editar":"Crear"," Paquete"),u(2),E(" ",i.esEdicion?"Editar":"Crear"," Paquete "),u(2),E(" ",i.esEdicion?"Modifica la informaci\xF3n del paquete":"Completa la informaci\xF3n para crear un nuevo paquete"," "),u(),g("ngIf",i.cargando),u(),g("ngIf",i.error&&!i.cargando),u(),g("ngIf",!i.cargando),u(),g("ngIf",!i.cargando&&i.paqueteForm.value.nombre&&i.cantidadSeleccionada>0))},dependencies:[ve,le,qn,Je,je,Le,we,xn,Ae,Ie,Ke,Cn,wn,vs,_s,_n],encapsulation:2})};function OR(n,t){if(n&1){let e=P();s(0,"button",13),x("click",function(){C(e);let r=h();return S(r.irAEditar())}),I(),s(1,"svg",14),b(2,"path",15),l(),d(3," Editar "),l()}}function AR(n,t){n&1&&(s(0,"div",16),b(1,"div",17),s(2,"p",18),d(3,"Cargando informaci\xF3n del paquete..."),l()())}function RR(n,t){if(n&1&&(s(0,"div",19),d(1),l()),n&2){let e=h();u(),E(" ",e.error," ")}}function FR(n,t){if(n&1&&(s(0,"p",71),d(1),l()),n&2){let e=h(2);u(),E(" ",e.paquete.descripcion," ")}}function NR(n,t){if(n&1&&(s(0,"div",72)(1,"p",73),d(2,"Ahorro total"),l(),s(3,"p",74),d(4),l()()),n&2){let e=h(2);u(4),k(e.formatearPrecio(e.paquete.precio-(e.paquete.precio_final||e.paquete.precio)))}}function VR(n,t){n&1&&(s(0,"div",54)(1,"p",75),d(2,"Este paquete no tiene descuento aplicado"),l()())}function jR(n,t){if(n&1){let e=P();s(0,"button",13),x("click",function(){C(e);let r=h(2);return S(r.irAEditar())}),I(),s(1,"svg",67),b(2,"path",15),l(),d(3," Editar Paquete "),l()}}function LR(n,t){if(n&1&&(s(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",24)(5,"h2",25),d(6),l(),s(7,"span",26),d(8),tt(9,"titlecase"),l(),s(10,"span",26),d(11),l()(),w(12,FR,2,1,"p",27),l()(),s(13,"div",28)(14,"div",29)(15,"div",30)(16,"div",31),I(),s(17,"svg",32),b(18,"path",33),l()(),T(),s(19,"div",34)(20,"p",35),d(21,"Sesiones Incluidas"),l(),s(22,"p",36),d(23),l()()()(),s(24,"div",37)(25,"div",30)(26,"div",31),I(),s(27,"svg",38),b(28,"path",39),l()(),T(),s(29,"div",34)(30,"p",40),d(31,"Precio Base"),l(),s(32,"p",41),d(33),l()()()(),s(34,"div",42)(35,"div",30)(36,"div",31),I(),s(37,"svg",43),b(38,"path",44),l()(),T(),s(39,"div",34)(40,"p",45),d(41,"Descuento"),l(),s(42,"p",46),d(43),l()()()(),s(44,"div",47)(45,"div",30)(46,"div",31),I(),s(47,"svg",48),b(48,"path",49),l()(),T(),s(49,"div",34)(50,"p",50),d(51,"Precio Final"),l(),s(52,"p",51),d(53),l()()()()()(),s(54,"div",21)(55,"h3",52),d(56,"An\xE1lisis de Costos"),l(),s(57,"div",53)(58,"div",54)(59,"p",55),d(60,"Costo por sesi\xF3n (precio base)"),l(),s(61,"p",56),d(62),l()(),s(63,"div",57)(64,"p",58),d(65,"Costo por sesi\xF3n (precio final)"),l(),s(66,"p",59),d(67),l()(),w(68,NR,5,1,"div",60),l(),w(69,VR,3,0,"div",61),l(),s(70,"div",21)(71,"h3",52),d(72,"Informaci\xF3n del Sistema"),l(),s(73,"div",62)(74,"div")(75,"p",63),d(76,"Fecha de Creaci\xF3n"),l(),s(77,"p",64),d(78),l()(),s(79,"div")(80,"p",63),d(81,"\xDAltima Actualizaci\xF3n"),l(),s(82,"p",64),d(83),l()()()(),s(84,"div",21)(85,"h3",52),d(86,"Acciones"),l(),s(87,"div",65),w(88,jR,4,0,"button",9),s(89,"button",66),I(),s(90,"svg",67),b(91,"path",68),l(),d(92," Asignar a Cliente "),l(),T(),s(93,"button",69),I(),s(94,"svg",67),b(95,"path",70),l(),d(96," Ver Estad\xEDsticas "),l()()()()),n&2){let e=h();u(6),k(e.paquete.nombre),u(),W(e.obtenerClaseTipo(e.paquete.tipo)),u(),E(" ",Rt(9,19,e.paquete.tipo)," "),u(2),W(e.obtenerClaseStatus(e.paquete.status)),u(),E(" ",e.obtenerTextoStatus(e.paquete.status)," "),u(),g("ngIf",e.paquete.descripcion),u(11),k(e.paquete.cantidad_sesiones),u(10),k(e.formatearPrecio(e.paquete.precio)),u(10),E("",e.paquete.descuento,"%"),u(10),k(e.formatearPrecio(e.paquete.precio_final||e.paquete.precio)),u(9),k(e.formatearPrecio(e.paquete.precio/e.paquete.cantidad_sesiones)),u(5),k(e.formatearPrecio((e.paquete.precio_final||e.paquete.precio)/e.paquete.cantidad_sesiones)),u(),g("ngIf",e.paquete.descuento>0),u(),g("ngIf",e.paquete.descuento===0),u(9),k(e.formatearFecha(e.paquete.fecha_creacion)),u(5),k(e.formatearFecha(e.paquete.fecha_actualizacion)),u(5),g("ngIf",e.paquete.status===1)}}var ru=class n{constructor(t,e,i){this.route=t;this.router=e;this.paquetesService=i;this.paqueteId=parseInt(this.route.snapshot.paramMap.get("id")||"0")}paquete=null;cargando=!1;error=null;paqueteId;mostrarModalEliminar=!1;mostrarModalActivar=!1;procesandoAccion=!1;ahorroTotal=0;preciosPorSesion={base:0,final:0};ngOnInit(){this.paqueteId>0?this.cargarPaquete():this.error="ID de paquete inv\xE1lido"}cargarPaquete(){return v(this,null,function*(){this.cargando=!0,this.error=null;try{this.paquete=yield this.paquetesService.obtenerPaquetePorId(this.paqueteId),this.paquete?this.calcularDatosAdicionales():this.error="Paquete no encontrado"}catch(t){console.error("Error cargando paquete:",t),this.error="Error al cargar el paquete. Por favor, intenta de nuevo."}finally{this.cargando=!1}})}calcularDatosAdicionales(){this.paquete&&(this.ahorroTotal=this.paquete.precio-(this.paquete.precio_final||this.paquete.precio),this.preciosPorSesion={base:this.paquete.precio/this.paquete.cantidad_sesiones,final:(this.paquete.precio_final||this.paquete.precio)/this.paquete.cantidad_sesiones})}irAEditar(){this.router.navigate(["/paquetes/editar",this.paqueteId])}volver(){this.router.navigate(["/paquetes"])}irALista(){this.router.navigate(["/paquetes"])}confirmarEliminacion(){this.mostrarModalEliminar=!0}cancelarEliminacion(){this.mostrarModalEliminar=!1}eliminarPaquete(){return v(this,null,function*(){if(this.paquete){this.procesandoAccion=!0;try{let t=yield this.paquetesService.eliminarPaquete(this.paquete.id);t.success?(this.mostrarMensajeExito("Paquete eliminado exitosamente"),setTimeout(()=>{this.volver()},1500)):this.mostrarMensajeError(t.message)}catch(t){console.error("Error eliminando paquete:",t),this.mostrarMensajeError("Error al eliminar el paquete")}finally{this.procesandoAccion=!1,this.cancelarEliminacion()}}})}confirmarActivacion(){this.mostrarModalActivar=!0}cancelarActivacion(){this.mostrarModalActivar=!1}activarPaquete(){return v(this,null,function*(){if(this.paquete){this.procesandoAccion=!0;try{let t=yield this.paquetesService.activarPaquete(this.paquete.id);t.success?(this.mostrarMensajeExito("Paquete activado exitosamente"),yield this.cargarPaquete()):this.mostrarMensajeError(t.message)}catch(t){console.error("Error activando paquete:",t),this.mostrarMensajeError("Error al activar el paquete")}finally{this.procesandoAccion=!1,this.cancelarActivacion()}}})}toggleStatus(){return v(this,null,function*(){this.paquete&&(this.paquete.status===1?this.confirmarEliminacion():this.confirmarActivacion())})}formatearPrecio(t){return this.paquetesService.formatearPrecio(t)}formatearFecha(t){return new Date(t).toLocaleDateString("es-GT",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}formatearFechaCorta(t){return new Date(t).toLocaleDateString("es-GT",{year:"numeric",month:"short",day:"numeric"})}obtenerClaseStatus(t){return t===1?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"}obtenerTextoStatus(t){return t===1?"Activo":"Inactivo"}obtenerIconoStatus(t){return t===1?"\u2713":"\u2717"}obtenerClaseTipo(t){return t==="terapia"?"bg-blue-100 text-blue-800 border-blue-200":"bg-yellow-100 text-yellow-800 border-yellow-200"}obtenerIconoTipo(t){return t==="terapia"?"\u{1F3E5}":"\u{1F4AA}"}get tieneDescuento(){return(this.paquete?.descuento||0)>0}get esPaqueteActivo(){return this.paquete?.status===1}get porcentajeAhorro(){return!this.paquete||this.paquete.precio===0?0:this.ahorroTotal/this.paquete.precio*100}get informacionResumida(){return this.paquete?{sesiones:this.paquete.cantidad_sesiones,tipo:this.paquete.tipo,precio_base:this.paquete.precio,precio_final:this.paquete.precio_final||this.paquete.precio,descuento:this.paquete.descuento,precio_por_sesion:this.preciosPorSesion.final,ahorro_total:this.ahorroTotal,estado:this.paquete.status}:null}duplicarPaquete(){this.paquete&&this.router.navigate(["/paquetes/crear"],{queryParams:{duplicar:this.paquete.id,nombre:`Copia de ${this.paquete.nombre}`,tipo:this.paquete.tipo,precio:this.paquete.precio,sesiones:this.paquete.cantidad_sesiones,descuento:this.paquete.descuento}})}imprimirPaquete(){window.print()}exportarPaquete(){if(!this.paquete)return;let t=G(A({},this.paquete),{precio_por_sesion:this.preciosPorSesion.final,ahorro_total:this.ahorroTotal,exportado_en:new Date().toISOString()}),e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),i=document.createElement("a");i.setAttribute("href",e),i.setAttribute("download",`paquete_${this.paquete.id}_${this.paquete.nombre.replace(/\s+/g,"_")}.json`),document.body.appendChild(i),i.click(),i.remove()}compartirPaquete(){this.paquete&&(navigator.share?navigator.share({title:this.paquete.nombre,text:`${this.paquete.descripcion||"Paquete de "+this.paquete.tipo}`,url:window.location.href}).catch(console.error):navigator.clipboard.writeText(window.location.href).then(()=>{this.mostrarMensajeExito("Enlace copiado al portapapeles")}))}mostrarMensajeExito(t){console.log("\xC9xito:",t)}mostrarMensajeError(t){console.error("Error:",t),this.error=t}mostrarMensajeInfo(t){console.info("Info:",t)}limpiarError(){this.error=null}ngOnDestroy(){this.cancelarEliminacion(),this.cancelarActivacion()}static \u0275fac=function(e){return new(e||n)(O(Zt),O(fe),O(Ri))};static \u0275cmp=ie({type:n,selectors:[["app-paquete-detalle"]],standalone:!1,decls:22,vars:4,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"mb-6"],[1,"flex","items-center","gap-2","text-sm","text-gray-500","mb-2"],["routerLink","/paquetes",1,"hover:text-blue-600"],[1,"flex","justify-between","items-start"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","space-x-3"],[1,"bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-lg","transition-colors",3,"click"],["class","bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",3,"click",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-center","py-12"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"mt-2","text-gray-600"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg"],[1,"space-y-6"],[1,"bg-white","rounded-lg","shadow-sm","border","p-6"],[1,"flex","justify-between","items-start","mb-6"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-2"],[1,"text-2xl","font-bold","text-gray-900"],[1,"px-3","py-1","text-sm","font-semibold","rounded-full"],["class","text-gray-600 text-lg",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-blue-50","p-4","rounded-lg","border","border-blue-200"],[1,"flex","items-center"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-4"],[1,"text-sm","font-medium","text-blue-900"],[1,"text-2xl","font-bold","text-blue-600"],[1,"bg-gray-50","p-4","rounded-lg","border","border-gray-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-2xl","font-bold","text-gray-600"],[1,"bg-yellow-50","p-4","rounded-lg","border","border-yellow-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"text-sm","font-medium","text-yellow-900"],[1,"text-2xl","font-bold","text-yellow-600"],[1,"bg-green-50","p-4","rounded-lg","border","border-green-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","font-medium","text-green-900"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"text-center","p-4","bg-gray-50","rounded-lg"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-center","p-4","bg-green-50","rounded-lg"],[1,"text-sm","text-green-700","mb-1"],[1,"text-xl","font-bold","text-green-600"],["class","text-center p-4 bg-blue-50 rounded-lg",4,"ngIf"],["class","text-center p-4 bg-gray-50 rounded-lg",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-gray-900"],[1,"flex","flex-wrap","gap-3"],[1,"bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"bg-purple-600","hover:bg-purple-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-gray-600","text-lg"],[1,"text-center","p-4","bg-blue-50","rounded-lg"],[1,"text-sm","text-blue-700","mb-1"],[1,"text-xl","font-bold","text-blue-600"],[1,"text-gray-600"]],template:function(e,i){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),d(4,"Paquetes"),l(),s(5,"span"),d(6,"/"),l(),s(7,"span"),d(8,"Detalle"),l()(),s(9,"div",4)(10,"div")(11,"h1",5),d(12,"Detalle del Paquete"),l(),s(13,"p",6),d(14,"Informaci\xF3n completa del paquete seleccionado"),l()(),s(15,"div",7)(16,"button",8),x("click",function(){return i.volver()}),d(17," Volver "),l(),w(18,OR,4,0,"button",9),l()()(),w(19,AR,4,0,"div",10)(20,RR,2,1,"div",11)(21,LR,97,21,"div",12),l()),e&2&&(u(18),g("ngIf",i.paquete&&i.paquete.status===1),u(),g("ngIf",i.cargando),u(),g("ngIf",i.error&&!i.cargando),u(),g("ngIf",i.paquete&&!i.cargando&&!i.error))},dependencies:[le,qn,_n],styles:[".detalle-container[_ngcontent-%COMP%]{min-height:100vh;--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.detalle-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-bottom-width:1px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.breadcrumb-nav[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;align-items:center;gap:.5rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.breadcrumb-link[_ngcontent-%COMP%]{cursor:pointer;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumb-link[_ngcontent-%COMP%]:hover{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.breadcrumb-separator[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.header-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}@media (min-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start;justify-content:space-between}}.header-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:1.875rem;line-height:2.25rem;font-weight:700;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.header-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.header-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-radius:9999px;border-width:1px;padding:.25rem .75rem;font-size:.875rem;line-height:1.25rem;font-weight:600}.badge-tipo[_ngcontent-%COMP%], .badge-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.tipo-icon[_ngcontent-%COMP%], .status-icon[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}.info-card[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-radius:.5rem;border-width:1px;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.5rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.card-title[_ngcontent-%COMP%]{margin-bottom:1rem;border-bottom-width:1px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));padding-bottom:.5rem;font-size:1.125rem;line-height:1.75rem;font-weight:600;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.card-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:1.5rem}@media (min-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width: 1024px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,minmax(0,1fr))}}.stat-card[_ngcontent-%COMP%]{border-radius:.5rem;border-width:1px;padding:1rem;transition:transform .2s ease,box-shadow .2s ease}.stat-card[_ngcontent-%COMP%]:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));box-shadow:0 10px 25px #0000001a}.stat-card.blue[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.stat-card.gray[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.stat-card.yellow[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.stat-card.green[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.stat-card.red[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.stat-header[_ngcontent-%COMP%]{margin-bottom:.5rem;display:flex;align-items:center;gap:.75rem}.stat-icon[_ngcontent-%COMP%]{height:2rem;width:2rem;flex-shrink:0}.stat-icon.blue[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.stat-icon.gray[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.stat-icon.yellow[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.stat-icon.green[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.stat-icon.red[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.25rem;font-size:.875rem;line-height:1.25rem;font-weight:500}.stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem;font-weight:700}.stat-content.blue[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.stat-content.blue[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.stat-content.gray[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.stat-content.gray[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.stat-content.yellow[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(113 63 18 / var(--tw-text-opacity, 1))}.stat-content.yellow[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.stat-content.green[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(20 83 45 / var(--tw-text-opacity, 1))}.stat-content.green[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.stat-content.red[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(127 29 29 / var(--tw-text-opacity, 1))}.stat-content.red[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.cost-analysis[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:1.5rem}@media (min-width: 768px){.cost-analysis[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}.cost-item[_ngcontent-%COMP%]{border-radius:.5rem;padding:1rem;text-align:center}.cost-item.gray[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.cost-item.green[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.cost-item.blue[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.cost-label[_ngcontent-%COMP%]{margin-bottom:.25rem;font-size:.875rem;line-height:1.25rem}.cost-label.gray[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.cost-label.green[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.cost-label.blue[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.cost-value[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.75rem;font-weight:700}.cost-value.gray[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.cost-value.green[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.cost-value.blue[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.system-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:1.5rem}@media (min-width: 768px){.system-info[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}.info-item[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.info-label[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.info-value[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.no-discount[_ngcontent-%COMP%]{border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1));padding:1rem;text-align:center}.no-discount[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:1rem}@media (min-width: 768px){.actions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width: 1024px){.actions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}.action-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;border-radius:.5rem;padding:.5rem 1rem;font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.action-button[_ngcontent-%COMP%]:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.action-button.primary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.primary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.action-button.success[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.success[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.action-button.warning[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(202 138 4 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.warning[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(161 98 7 / var(--tw-bg-opacity, 1))}.action-button.danger[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.danger[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.action-button.secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.secondary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.action-button.purple[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.purple[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}.action-button.indigo[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.indigo[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(67 56 202 / var(--tw-bg-opacity, 1))}.action-icon[_ngcontent-%COMP%]{height:1rem;width:1rem}.loading-container[_ngcontent-%COMP%]{padding-top:3rem;padding-bottom:3rem;text-align:center}.loading-spinner[_ngcontent-%COMP%]{margin-bottom:1rem;display:inline-block;height:2rem;width:2rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;border-radius:9999px;border-bottom-width:2px;--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.loading-text[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.error-container[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1));padding:.75rem 1rem;--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.error-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.error-message[_ngcontent-%COMP%]{flex:1 1 0%}.error-close[_ngcontent-%COMP%]{margin-left:1rem;cursor:pointer;--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.error-close[_ngcontent-%COMP%]:hover{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:50;display:flex;height:100%;width:100%;align-items:center;justify-content:center;overflow-y:auto;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1));--tw-bg-opacity: .5;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.modal-container[_ngcontent-%COMP%]{position:relative;margin-left:1rem;margin-right:1rem;width:100%;max-width:28rem;border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 1rem}.modal-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-bottom:1rem;display:flex;height:3rem;width:3rem;align-items:center;justify-content:center;border-radius:9999px}.modal-icon.danger[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.modal-icon.success[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.modal-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem}.modal-icon.danger[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.modal-icon.success[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.modal-title[_ngcontent-%COMP%]{text-align:center;font-size:1.125rem;font-weight:500;line-height:1.5rem;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.modal-body[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem;padding-bottom:1rem}.modal-text[_ngcontent-%COMP%]{text-align:center;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.modal-footer[_ngcontent-%COMP%]{padding:.5rem 1.5rem 1.5rem}.modal-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;gap:.75rem}@media (min-width: 768px){.modal-actions[_ngcontent-%COMP%]{flex-direction:row}}.modal-button[_ngcontent-%COMP%]{flex:1 1 0%;border-radius:.375rem;padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.modal-button[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-offset-width: 2px}.modal-button.primary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.modal-button.primary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.modal-button.primary[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}.modal-button.secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.modal-button.secondary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))}.modal-button.secondary[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(107 114 128 / var(--tw-ring-opacity, 1))}.modal-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.paquete-description[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem;line-height:1.625;--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.actions-grid[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}@media (min-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}.cost-analysis[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}.modal-container[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}.modal-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.info-card[_ngcontent-%COMP%]:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition:box-shadow .3s ease}.action-button[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-offset-width: 2px}.action-button.primary[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.action-button.success[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(34 197 94 / var(--tw-ring-opacity, 1))}.action-button.warning[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(234 179 8 / var(--tw-ring-opacity, 1))}.action-button.danger[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}@media print{.header-actions[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%], .action-button[_ngcontent-%COMP%]{display:none}.info-card[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}}"]})};var UR=[{path:"",component:bs},{path:"home",component:bs},{path:"login",component:Bd},{path:"register",component:$d},{path:"",component:zd,canActivate:[Oi],children:[{path:"dashboard",component:qd},{path:"usuarios",component:Hd,canActivate:[br],data:{permissions:["view","admin"],profiles:[1,3]}},{path:"rutinas",component:Gd,canActivate:[br],data:{permissions:["view"],profiles:[1,3]}},{path:"tipos-seccion",component:Wd,canActivate:[cs],data:{profiles:[1]}},{path:"rutinas-usuario",component:Yd,canActivate:[cs],data:{profiles:[1]}},{path:"mis-rutinas",component:Kd,canActivate:[Oi]},{path:"terapias",component:Jd,canActivate:[br],data:{permissions:["view"],profiles:[1,3]}},{path:"terapias-asignadas",component:Xd,canActivate:[br],data:{permissions:["view"],profiles:[1,3]}},{path:"mis-terapias",component:eu,canActivate:[Oi]},{path:"informacion-medica",component:nu,canActivate:[Oi]},{path:"paquetes",component:ys,canActivate:[Oi]},{path:"paquetes",children:[{path:"",component:ys,data:{title:"Gesti\xF3n de Paquetes"}},{path:"crear",component:xs,data:{title:"Crear Paquete"}},{path:"editar/:id",component:xs,data:{title:"Editar Paquete"}},{path:"detalle/:id",component:ru,data:{title:"Detalle del Paquete"}}]}]},{path:"**",redirectTo:"/"}],ou=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Ye({type:n});static \u0275inj=We({imports:[ci.forRoot(UR,{enableTracing:!1,scrollPositionRestoration:"top",anchorScrolling:"enabled",preloadingStrategy:void 0}),ci]})};var au=class n{title="Rehabimovementgt";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ie({type:n,selectors:[["app-root"]],standalone:!1,decls:1,vars:0,template:function(e,i){e&1&&b(0,"router-outlet")},dependencies:[or],encapsulation:2})};var BR=[],su=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Ye({type:n});static \u0275inj=We({imports:[ci.forChild(BR),ci]})};var lu=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Ye({type:n});static \u0275inj=We({imports:[Xi,su,Ud]})};var cu=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Ye({type:n,bootstrap:[au]});static \u0275inj=We({providers:[me,re],imports:[Sm,ou,Ud,vx,ci,Xi,lu]})};Cm().bootstrapModule(cu,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
