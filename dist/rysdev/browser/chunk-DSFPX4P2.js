import{$ as U,A as g,Aa as je,B as te,C as ie,Ca as Y,D as q,E as b,Ea as A,F as p,Fa as K,H as o,Ha as ne,I as y,Ia as Z,J as m,K as I,M as qe,N as S,O as E,P as M,V as O,W as j,X as Ce,Y as Se,aa as R,ba as B,ca as Ee,d as se,e as ce,ea as Me,f as le,fa as ke,h as x,i as h,ia as N,j as _,ja as F,k as w,ka as G,la as Ie,na as X,o as s,oa as Oe,p as P,pa as pe,q as T,qa as Fe,r as de,ra as Te,s as u,sa as H,ta as $,u as l,ua as W,va as ue,w as L,wa as me,x as C,y as i,ya as Ae,z as n,za as Ve}from"./chunk-FV7QAGBK.js";import{a as D,b as z,c as we,g as v}from"./chunk-6AOLKZEJ.js";var ge=[{value:"terapia",label:"Terapia"},{value:"rutina",label:"Rutina"}];var V=class a{constructor(t){this.supabaseService=t}obtenerPaquetes(t){return v(this,null,function*(){try{let e=this.supabaseService.client.from("paquetes").select("*").order("fecha_creacion",{ascending:!1});t?.tipo&&t.tipo!=="todos"&&(e=e.eq("tipo",t.tipo)),t?.status!==void 0&&(e=e.eq("status",t.status)),t?.busqueda&&(e=e.or(`nombre.ilike.%${t.busqueda}%,descripcion.ilike.%${t.busqueda}%`)),t?.precio_min&&(e=e.gte("precio_final",t.precio_min)),t?.precio_max&&(e=e.lte("precio_final",t.precio_max));let{data:r,error:c}=yield e;if(c)throw console.error("Error obteniendo paquetes:",c),c;return r||[]}catch(e){throw console.error("Error en obtenerPaquetes:",e),e}})}obtenerPaquetePorId(t){return v(this,null,function*(){try{let{data:e,error:r}=yield this.supabaseService.client.from("paquetes").select(`
          *,
          paquete_rutinas:paquete_rutinas(rutina_id),
          paquete_terapias:paquete_terapias(terapia_id)
        `).eq("id",t).single();if(r)throw console.error("Error obteniendo paquete:",r),r;return e&&(e.rutinas_seleccionadas=e.paquete_rutinas?.map(c=>c.rutina_id)||[],e.terapias_seleccionadas=e.paquete_terapias?.map(c=>c.terapia_id)||[]),e}catch(e){throw console.error("Error en obtenerPaquetePorId:",e),e}})}crearPaquete(t){return v(this,null,function*(){try{let e=t,{rutinas_seleccionadas:r,terapias_seleccionadas:c}=e,d=we(e,["rutinas_seleccionadas","terapias_seleccionadas"]),{data:f,error:k}=yield this.supabaseService.client.from("paquetes").insert([d]).select().single();if(k)throw console.error("Error creando paquete:",k),k;return t.tipo==="rutina"&&r&&r.length>0?yield this.guardarRelacionesRutinas(f.id,r):t.tipo==="terapia"&&c&&c.length>0&&(yield this.guardarRelacionesTerapias(f.id,c)),{success:!0,message:"Paquete creado exitosamente",data:f}}catch(r){return console.error("Error en crearPaquete:",r),{success:!1,message:"Error al crear el paquete"}}})}actualizarPaquete(t,e){return v(this,null,function*(){try{let r=e,{rutinas_seleccionadas:c,terapias_seleccionadas:d}=r,f=we(r,["rutinas_seleccionadas","terapias_seleccionadas"]),{data:k,error:J}=yield this.supabaseService.client.from("paquetes").update(f).eq("id",t).select().single();if(J)throw console.error("Error actualizando paquete:",J),J;return yield this.limpiarRelacionesExistentes(t),e.tipo==="rutina"&&c&&c.length>0?yield this.guardarRelacionesRutinas(t,c):e.tipo==="terapia"&&d&&d.length>0&&(yield this.guardarRelacionesTerapias(t,d)),{success:!0,message:"Paquete actualizado exitosamente",data:k}}catch(c){return console.error("Error en actualizarPaquete:",c),{success:!1,message:"Error al actualizar el paquete"}}})}eliminarPaquete(t){return v(this,null,function*(){try{yield this.limpiarRelacionesExistentes(t);let{data:e,error:r}=yield this.supabaseService.client.from("paquetes").update({status:0}).eq("id",t).select().single();if(r)throw console.error("Error eliminando paquete:",r),r;return{success:!0,message:"Paquete eliminado exitosamente",data:e}}catch(e){return console.error("Error en eliminarPaquete:",e),{success:!1,message:"Error al eliminar el paquete"}}})}cambiarEstadoPaquete(t,e){return v(this,null,function*(){try{let{data:r,error:c}=yield this.supabaseService.client.from("paquetes").update({status:e}).eq("id",t).select().single();if(c)throw console.error("Error cambiando estado del paquete:",c),c;return{success:!0,message:`Paquete ${e===1?"activado":"desactivado"} exitosamente`,data:r}}catch(r){return console.error("Error en cambiarEstadoPaquete:",r),{success:!1,message:"Error al cambiar el estado del paquete"}}})}activarPaquete(t){return v(this,null,function*(){return this.cambiarEstadoPaquete(t,1)})}desactivarPaquete(t){return v(this,null,function*(){return this.cambiarEstadoPaquete(t,0)})}activarPaqueteConDatos(t,e){return v(this,null,function*(){return e?this.actualizarPaquete(t,e):this.activarPaquete(t)})}guardarRelacionesRutinas(t,e){return v(this,null,function*(){let r=e.map(d=>({paquete_id:t,rutina_id:d})),{error:c}=yield this.supabaseService.client.from("paquete_rutinas").insert(r);if(c)throw console.error("Error guardando relaciones con rutinas:",c),c})}guardarRelacionesTerapias(t,e){return v(this,null,function*(){let r=e.map(d=>({paquete_id:t,terapia_id:d})),{error:c}=yield this.supabaseService.client.from("paquete_terapias").insert(r);if(c)throw console.error("Error guardando relaciones con terapias:",c),c})}limpiarRelacionesExistentes(t){return v(this,null,function*(){yield this.supabaseService.client.from("paquete_rutinas").delete().eq("paquete_id",t),yield this.supabaseService.client.from("paquete_terapias").delete().eq("paquete_id",t)})}obtenerEstadisticasPaquetes(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.client.rpc("obtener_estadisticas_paquetes");if(e)throw console.error("Error obteniendo estad\xEDsticas:",e),e;return t}catch(t){return console.error("Error en obtenerEstadisticasPaquetes:",t),{total_paquetes:0,paquetes_activos:0,paquetes_terapia:0,paquetes_rutina:0,promedio_precio:0,total_ventas:0}}})}duplicarPaquete(t){return v(this,null,function*(){try{let e=yield this.obtenerPaquetePorId(t);if(!e)throw new Error("Paquete no encontrado");let r={nombre:`Copia de ${e.nombre}`,descripcion:e.descripcion,precio:e.precio,cantidad_sesiones:e.cantidad_sesiones,tipo:e.tipo,descuento:e.descuento,rutinas_seleccionadas:e.rutinas_seleccionadas,terapias_seleccionadas:e.terapias_seleccionadas};return yield this.crearPaquete(r)}catch(e){return console.error("Error en duplicarPaquete:",e),{success:!1,message:"Error al duplicar el paquete"}}})}validarPaquete(t){let e=[];return(!t.nombre||t.nombre.trim().length===0)&&e.push("El nombre es requerido"),t.nombre&&t.nombre.length>255&&e.push("El nombre no puede exceder 255 caracteres"),(!t.precio||t.precio<=0)&&e.push("El precio debe ser mayor a 0"),(!t.cantidad_sesiones||t.cantidad_sesiones<1||t.cantidad_sesiones>25)&&e.push("La cantidad de sesiones debe estar entre 1 y 25"),(!t.tipo||!["terapia","rutina"].includes(t.tipo))&&e.push("Debe seleccionar un tipo v\xE1lido (terapia o rutina)"),(t.descuento<0||t.descuento>100)&&e.push("El descuento debe estar entre 0 y 100%"),t.tipo==="rutina"?!t.rutinas_seleccionadas||t.rutinas_seleccionadas.length===0?e.push("Debe seleccionar al menos una rutina"):t.rutinas_seleccionadas.length>t.cantidad_sesiones&&e.push("No puede seleccionar m\xE1s rutinas que la cantidad de sesiones"):t.tipo==="terapia"&&(!t.terapias_seleccionadas||t.terapias_seleccionadas.length===0?e.push("Debe seleccionar al menos una terapia"):t.terapias_seleccionadas.length>t.cantidad_sesiones&&e.push("No puede seleccionar m\xE1s terapias que la cantidad de sesiones")),{valido:e.length===0,errores:e}}buscarPaquetes(t){return v(this,null,function*(){try{if(!t||t.trim().length===0)return yield this.obtenerPaquetes();let{data:e,error:r}=yield this.supabaseService.client.from("paquetes").select("*").or(`nombre.ilike.%${t}%,descripcion.ilike.%${t}%`).eq("status",1).order("nombre");if(r)throw console.error("Error buscando paquetes:",r),r;return e||[]}catch(e){throw console.error("Error en buscarPaquetes:",e),e}})}obtenerPaquetesPorTipo(t){return v(this,null,function*(){try{let{data:e,error:r}=yield this.supabaseService.client.from("paquetes").select("*").eq("tipo",t).eq("status",1).order("nombre");if(r)throw console.error("Error obteniendo paquetes por tipo:",r),r;return e||[]}catch(e){throw console.error("Error en obtenerPaquetesPorTipo:",e),e}})}formatearPrecio(t){return new Intl.NumberFormat("es-GT",{style:"currency",currency:"GTQ"}).format(t)}calcularPrecioFinal(t,e){return t-t*e/100}calcularPrecioPorSesion(t,e){return e>0?t/e:0}obtenerResumenPaquete(t){let e=this.calcularPrecioFinal(t.precio,t.descuento),r=this.calcularPrecioPorSesion(e,t.cantidad_sesiones);return{id:t.id,nombre:t.nombre,tipo:t.tipo,cantidadSesiones:t.cantidad_sesiones,precioBase:t.precio,descuento:t.descuento,precioFinal:e,precioPorSesion:r,ahorroTotal:t.precio-e,status:t.status,fechaCreacion:t.fecha_creacion}}static \u0275fac=function(e){return new(e||a)(le(Z))};static \u0275prov=se({token:a,factory:a.\u0275fac,providedIn:"root"})};function Ue(a,t){if(a&1&&(i(0,"option",19),o(1),n()),a&2){let e=t.$implicit;l("value",e.value),s(),m(" ",e.label," ")}}function Re(a,t){if(a&1&&(i(0,"option",19),o(1),n()),a&2){let e=t.$implicit;l("value",e.value),s(),m(" ",e.label," ")}}function Be(a,t){a&1&&(i(0,"div",20),g(1,"div",21),i(2,"p",22),o(3,"Cargando paquetes..."),n()())}function Ne(a,t){if(a&1&&(i(0,"div",23),o(1),n()),a&2){let e=p();s(),m(" ",e.error," ")}}function Ge(a,t){if(a&1&&(i(0,"div",54),o(1),O(2,"slice"),n()),a&2){let e=p().$implicit;s(),I(" ",Se(2,2,e.descripcion,0,50),"",e.descripcion.length>50?"...":""," ")}}function He(a,t){if(a&1&&(i(0,"div",55),o(1),n()),a&2){let e=p().$implicit,r=p(2);s(),m(" ",r.formatearPrecio(e.precio)," ")}}function $e(a,t){if(a&1&&(i(0,"div",56),o(1),n()),a&2){let e=p().$implicit;s(),m(" ",e.descuento,"% descuento ")}}function We(a,t){a&1&&(_(),i(0,"svg",5),g(1,"path",57),n())}function Ye(a,t){a&1&&(_(),i(0,"svg",5),g(1,"path",58),n())}function Qe(a,t){if(a&1){let e=q();i(0,"tr",33)(1,"td",34)(2,"div")(3,"div",35),o(4),n(),u(5,Ge,3,6,"div",36),n()(),i(6,"td",34)(7,"span",37),o(8),O(9,"titlecase"),n()(),i(10,"td",38),o(11),n(),i(12,"td",34)(13,"div",39),u(14,He,2,1,"div",40),i(15,"div",41),o(16),n(),u(17,$e,2,1,"div",42),n()(),i(18,"td",34)(19,"span",37),o(20),n()(),i(21,"td",43)(22,"div",44)(23,"button",45),b("click",function(){let c=x(e).$implicit,d=p(2);return h(d.verDetalle(c.id))}),_(),i(24,"svg",5),g(25,"path",46)(26,"path",47),n()(),w(),i(27,"button",48),b("click",function(){let c=x(e).$implicit,d=p(2);return h(d.irAEditar(c.id))}),_(),i(28,"svg",5),g(29,"path",49),n()(),w(),i(30,"button",50),b("click",function(){let c=x(e).$implicit,d=p(2);return h(d.toggleStatus(c))}),u(31,We,2,0,"svg",51)(32,Ye,2,0,"svg",51),n(),i(33,"button",52),b("click",function(){let c=x(e).$implicit,d=p(2);return h(d.confirmarEliminacion(c))}),_(),i(34,"svg",5),g(35,"path",53),n()()()()()}if(a&2){let e=t.$implicit,r=p(2);s(4),y(e.nombre),s(),l("ngIf",e.descripcion),s(2),C(r.obtenerClaseTipo(e.tipo)),s(),m(" ",j(9,19,e.tipo)," "),s(3),m(" ",e.cantidad_sesiones," sesiones "),s(3),l("ngIf",e.descuento>0),s(),L("text-green-600",e.descuento>0),s(),m(" ",r.formatearPrecio(e.precio_final||e.precio)," "),s(),l("ngIf",e.descuento>0),s(2),C(r.obtenerClaseStatus(e.status)),s(),m(" ",r.obtenerTextoStatus(e.status)," "),s(10),C(e.status===1?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),l("title",e.status===1?"Desactivar":"Activar"),s(),l("ngIf",e.status===1),s(),l("ngIf",e.status===0)}}function Je(a,t){a&1&&(i(0,"tr")(1,"td",59)(2,"div",60),_(),i(3,"svg",61),g(4,"path",62),n(),w(),i(5,"p",63),o(6,"No se encontraron paquetes"),n(),i(7,"p",64),o(8,"Intenta ajustar los filtros o crear un nuevo paquete"),n()()()())}function Xe(a,t){if(a&1){let e=q();i(0,"button",79),b("click",function(){let c=x(e).$implicit,d=p(3);return h(d.irAPagina(c))}),o(1),n()}if(a&2){let e=t.$implicit,r=p(3);C(e===r.paginaActual?"bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),s(),m(" ",e," ")}}function Ke(a,t){if(a&1){let e=q();i(0,"div",65)(1,"div",66)(2,"button",67),b("click",function(){x(e);let c=p(2);return h(c.irAPagina(c.paginaActual-1))}),o(3," Anterior "),n(),i(4,"button",68),b("click",function(){x(e);let c=p(2);return h(c.irAPagina(c.paginaActual+1))}),o(5," Siguiente "),n()(),i(6,"div",69)(7,"div")(8,"p",70),o(9," Mostrando "),i(10,"span",41),o(11),n(),o(12," a "),i(13,"span",41),o(14),n(),o(15," de "),i(16,"span",41),o(17),n(),o(18," resultados "),n()(),i(19,"div")(20,"nav",71)(21,"button",72),b("click",function(){x(e);let c=p(2);return h(c.irAPagina(c.paginaActual-1))}),i(22,"span",73),o(23,"Anterior"),n(),_(),i(24,"svg",74),g(25,"path",75),n()(),u(26,Xe,2,3,"button",76),w(),i(27,"button",77),b("click",function(){x(e);let c=p(2);return h(c.irAPagina(c.paginaActual+1))}),i(28,"span",73),o(29,"Siguiente"),n(),_(),i(30,"svg",74),g(31,"path",78),n()()()()()()}if(a&2){let e=p(2);s(2),l("disabled",e.paginaActual===1),s(2),l("disabled",e.paginaActual===e.totalPaginas),s(7),y((e.paginaActual-1)*e.itemsPorPagina+1),s(3),y(e.Math.min(e.paginaActual*e.itemsPorPagina,e.paquetesFiltrados.length)),s(3),y(e.paquetesFiltrados.length),s(4),l("disabled",e.paginaActual===1),s(5),l("ngForOf",e.paginasArray),s(),l("disabled",e.paginaActual===e.totalPaginas)}}function Ze(a,t){if(a&1&&(i(0,"div",24)(1,"div",25)(2,"table",26)(3,"thead",27)(4,"tr")(5,"th",28),o(6," Paquete "),n(),i(7,"th",28),o(8," Tipo "),n(),i(9,"th",28),o(10," Sesiones "),n(),i(11,"th",28),o(12," Precio "),n(),i(13,"th",28),o(14," Estado "),n(),i(15,"th",28),o(16," Acciones "),n()()(),i(17,"tbody",29),u(18,Qe,36,21,"tr",30)(19,Je,9,0,"tr",31),n()()(),u(20,Ke,32,8,"div",32),n()),a&2){let e=p();s(18),l("ngForOf",e.paquetesPaginados),s(),l("ngIf",e.paquetesPaginados.length===0),s(),l("ngIf",e.paquetesFiltrados.length>e.itemsPorPagina)}}function et(a,t){a&1&&(i(0,"span"),o(1,"Eliminar"),n())}function tt(a,t){a&1&&(i(0,"span"),o(1,"Eliminando..."),n())}function it(a,t){if(a&1){let e=q();i(0,"div",80),b("click",function(){x(e);let c=p();return h(c.cancelarEliminacion())}),i(1,"div",81),b("click",function(c){return x(e),h(c.stopPropagation())}),i(2,"div",82)(3,"div",83),_(),i(4,"svg",84),g(5,"path",85),n()(),w(),i(6,"h3",86),o(7,"Confirmar eliminaci\xF3n"),n(),i(8,"div",87)(9,"p",54),o(10),n()(),i(11,"div",88)(12,"div",89)(13,"button",90),b("click",function(){x(e);let c=p();return h(c.eliminarPaquete())}),u(14,et,2,0,"span",31)(15,tt,2,0,"span",31),n(),i(16,"button",91),b("click",function(){x(e);let c=p();return h(c.cancelarEliminacion())}),o(17," Cancelar "),n()()()()()()}if(a&2){let e=p();s(10),m(' \xBFEst\xE1s seguro de que deseas eliminar el paquete "',e.paqueteAEliminar==null?null:e.paqueteAEliminar.nombre,'"? Esta acci\xF3n no se puede deshacer. '),s(3),l("disabled",e.cargando),s(),l("ngIf",!e.cargando),s(),l("ngIf",e.cargando),s(),l("disabled",e.cargando)}}var ve=class a{constructor(t,e){this.paquetesService=t;this.router=e}paquetes=[];paquetesFiltrados=[];cargando=!1;error=null;filtros={tipo:"todos",status:1,busqueda:""};tiposPaquete=[{value:"todos",label:"Todos los tipos"},...ge];statusOptions=[{value:1,label:"Activos"},{value:0,label:"Inactivos"},{value:void 0,label:"Todos"}];paginaActual=1;itemsPorPagina=10;totalPaginas=0;mostrarModalEliminar=!1;paqueteAEliminar=null;Math;ngOnInit(){this.cargarPaquetes()}cargarPaquetes(){return v(this,null,function*(){this.cargando=!0,this.error=null;try{this.paquetes=yield this.paquetesService.obtenerPaquetes(this.filtros),this.aplicarFiltrosYPaginacion()}catch(t){console.error("Error cargando paquetes:",t),this.error="Error al cargar los paquetes. Por favor, intenta de nuevo."}finally{this.cargando=!1}})}aplicarFiltrosYPaginacion(){let t=[...this.paquetes];if(this.filtros.busqueda){let e=this.filtros.busqueda.toLowerCase();t=t.filter(r=>r.nombre.toLowerCase().includes(e)||r.descripcion&&r.descripcion.toLowerCase().includes(e))}this.paquetesFiltrados=t,this.calcularPaginacion()}onFiltroChange(){this.paginaActual=1,this.cargarPaquetes()}onBusquedaChange(){this.paginaActual=1,this.aplicarFiltrosYPaginacion()}limpiarFiltros(){this.filtros={tipo:"todos",status:1,busqueda:""},this.cargarPaquetes()}calcularPaginacion(){this.totalPaginas=Math.ceil(this.paquetesFiltrados.length/this.itemsPorPagina)}get paquetesPaginados(){let t=(this.paginaActual-1)*this.itemsPorPagina,e=t+this.itemsPorPagina;return this.paquetesFiltrados.slice(t,e)}irAPagina(t){t>=1&&t<=this.totalPaginas&&(this.paginaActual=t)}get paginasArray(){return Array.from({length:this.totalPaginas},(t,e)=>e+1)}irACrear(){this.router.navigate(["/paquetes/crear"])}irAEditar(t){this.router.navigate(["/paquetes/editar",t])}verDetalle(t){this.router.navigate(["/paquetes/detalle",t])}confirmarEliminacion(t){this.paqueteAEliminar=t,this.mostrarModalEliminar=!0}cancelarEliminacion(){this.mostrarModalEliminar=!1,this.paqueteAEliminar=null}eliminarPaquete(){return v(this,null,function*(){if(this.paqueteAEliminar){this.cargando=!0;try{let t=yield this.paquetesService.eliminarPaquete(this.paqueteAEliminar.id);t.success?(yield this.cargarPaquetes(),this.mostrarMensajeExito("Paquete eliminado exitosamente")):this.mostrarMensajeError(t.message)}catch(t){console.error("Error eliminando paquete:",t),this.mostrarMensajeError("Error al eliminar el paquete")}finally{this.cargando=!1,this.cancelarEliminacion()}}})}toggleStatus(t){return v(this,null,function*(){this.cargando=!0;try{let e=t.status===1?yield this.paquetesService.eliminarPaquete(t.id):yield this.paquetesService.activarPaquete(t.id);if(e.success){yield this.cargarPaquetes();let r=t.status===1?"desactivado":"activado";this.mostrarMensajeExito(`Paquete ${r} exitosamente`)}else this.mostrarMensajeError(e.message)}catch(e){console.error("Error cambiando status:",e),this.mostrarMensajeError("Error al cambiar el estado del paquete")}finally{this.cargando=!1}})}formatearPrecio(t){return this.paquetesService.formatearPrecio(t)}obtenerClaseStatus(t){return t===1?"badge badge-success":"badge badge-secondary"}obtenerTextoStatus(t){return t===1?"Activo":"Inactivo"}obtenerClaseTipo(t){return t==="terapia"?"badge badge-info":"badge badge-warning"}mostrarMensajeExito(t){console.log("\xC9xito:",t)}mostrarMensajeError(t){console.error("Error:",t),this.error=t}static \u0275fac=function(e){return new(e||a)(P(V),P(A))};static \u0275cmp=T({type:a,selectors:[["app-paquetes"]],standalone:!1,decls:34,vars:9,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"bg-white","p-4","rounded-lg","shadow-sm","border","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","placeholder","Nombre o descripci\xF3n...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","input","ngModel"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-end"],[1,"w-full","bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-md","transition-colors",3,"click"],["class","text-center py-8",4,"ngIf"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",4,"ngIf"],["class","bg-white rounded-lg shadow-sm border overflow-hidden",4,"ngIf"],["class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",3,"click",4,"ngIf"],[3,"value"],[1,"text-center","py-8"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"mt-2","text-gray-600"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg","mb-4"],[1,"bg-white","rounded-lg","shadow-sm","border","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],[4,"ngIf"],["class","bg-white px-4 py-3 border-t border-gray-200 sm:px-6",4,"ngIf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],["class","text-sm text-gray-500",4,"ngIf"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"text-sm","text-gray-900"],["class","line-through text-gray-500",4,"ngIf"],[1,"font-medium"],["class","text-xs text-green-600",4,"ngIf"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"flex","space-x-2"],["title","Ver detalle",1,"text-blue-600","hover:text-blue-900","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],["title","Editar",1,"text-indigo-600","hover:text-indigo-900","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"transition-colors",3,"click","title"],["class","w-5 h-5","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["title","Eliminar",1,"text-red-600","hover:text-red-900","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"text-sm","text-gray-500"],[1,"line-through","text-gray-500"],[1,"text-xs","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L5.636 5.636"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],["colspan","6",1,"px-6","py-8","text-center","text-gray-500"],[1,"flex","flex-col","items-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"],[1,"text-lg","font-medium"],[1,"text-sm"],[1,"bg-white","px-4","py-3","border-t","border-gray-200","sm:px-6"],[1,"flex-1","flex","justify-between","sm:hidden"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"ml-3","relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"sr-only"],["fill","currentColor","viewBox","0 0 20 20",1,"h-5","w-5"],["fill-rule","evenodd","d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule","evenodd"],["class","relative inline-flex items-center px-4 py-2 border text-sm font-medium",3,"class","click",4,"ngFor","ngForOf"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"],[1,"relative","inline-flex","items-center","px-4","py-2","border","text-sm","font-medium",3,"click"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white",3,"click"],[1,"mt-3","text-center"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-lg","leading-6","font-medium","text-gray-900","mt-4"],[1,"mt-2","px-7","py-3"],[1,"items-center","px-4","py-3"],[1,"flex","space-x-3"],[1,"px-4","py-2","bg-red-500","text-white","text-base","font-medium","rounded-md","w-full","shadow-sm","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-300","disabled:opacity-50",3,"click","disabled"],[1,"px-4","py-2","bg-gray-500","text-white","text-base","font-medium","rounded-md","w-full","shadow-sm","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-300","disabled:opacity-50",3,"click","disabled"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),o(4,"Gesti\xF3n de Paquetes"),n(),i(5,"p",3),o(6,"Administra los paquetes de terapias y rutinas"),n()(),i(7,"button",4),b("click",function(){return r.irACrear()}),_(),i(8,"svg",5),g(9,"path",6),n(),o(10," Nuevo Paquete "),n()(),w(),i(11,"div",7)(12,"div",8)(13,"div")(14,"label",9),o(15,"Buscar"),n(),i(16,"input",10),M("ngModelChange",function(d){return E(r.filtros.busqueda,d)||(r.filtros.busqueda=d),d}),b("input",function(){return r.onBusquedaChange()}),n()(),i(17,"div")(18,"label",9),o(19,"Tipo"),n(),i(20,"select",11),M("ngModelChange",function(d){return E(r.filtros.tipo,d)||(r.filtros.tipo=d),d}),b("change",function(){return r.onFiltroChange()}),u(21,Ue,2,2,"option",12),n()(),i(22,"div")(23,"label",9),o(24,"Estado"),n(),i(25,"select",11),M("ngModelChange",function(d){return E(r.filtros.status,d)||(r.filtros.status=d),d}),b("change",function(){return r.onFiltroChange()}),u(26,Re,2,2,"option",12),n()(),i(27,"div",13)(28,"button",14),b("click",function(){return r.limpiarFiltros()}),o(29," Limpiar Filtros "),n()()()(),u(30,Be,4,0,"div",15)(31,Ne,2,1,"div",16)(32,Ze,21,3,"div",17),n(),u(33,it,18,5,"div",18)),e&2&&(s(16),S("ngModel",r.filtros.busqueda),s(4),S("ngModel",r.filtros.tipo),s(),l("ngForOf",r.tiposPaquete),s(4),S("ngModel",r.filtros.status),s(),l("ngForOf",r.statusOptions),s(4),l("ngIf",r.cargando),s(),l("ngIf",r.error&&!r.cargando),s(),l("ngIf",!r.cargando&&!r.error),s(),l("ngIf",r.mostrarModalEliminar))},dependencies:[U,R,$,W,N,H,G,X,Me,B],styles:[".paquetes-container[_ngcontent-%COMP%]{min-height:100vh;--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-radius:9999px;padding:.125rem .625rem;font-size:.75rem;line-height:1rem;font-weight:500}.badge-success[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.badge-secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.badge-info[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.badge-warning[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.table-hover-row[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1));transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.action-button[_ngcontent-%COMP%]{display:inline-flex;height:2rem;width:2rem;align-items:center;justify-content:center;border-radius:9999px;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.action-button[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.pagination-button[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;border-width:1px;padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.pagination-button[_ngcontent-%COMP%]:hover:not(:disabled){--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.pagination-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.pagination-button.active[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:50;height:100%;width:100%;overflow-y:auto;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1));--tw-bg-opacity: .5;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.modal-content[_ngcontent-%COMP%]{position:relative;top:5rem;margin-left:auto;margin-right:auto;width:24rem;border-radius:.375rem;border-width:1px;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.25rem;--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.loading-spinner[_ngcontent-%COMP%]{display:inline-block}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;border-radius:9999px;border-bottom-width:2px;--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.price-display[_ngcontent-%COMP%]{text-align:right}.price-original[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1));text-decoration-line:line-through}.price-final[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem;font-weight:700}.price-discount[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-weight:500}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.status-active[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.status-inactive[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{top:2.5rem;width:91.666667%}.pagination-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem;line-height:1rem}}.form-container[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:56rem}.form-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-radius:.5rem;border-width:1px;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.5rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.form-section-title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.125rem;line-height:1.75rem;font-weight:600;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:1.5rem}@media (min-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}.form-field[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.form-input[_ngcontent-%COMP%]{width:100%;border-radius:.375rem;border-width:1px;padding:.5rem .75rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.form-input[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.form-input[_ngcontent-%COMP%]:not(.error){--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.form-input[_ngcontent-%COMP%]:not(.error):focus{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1));--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.form-input.error[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(252 165 165 / var(--tw-border-opacity, 1))}.form-input.error[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:rgb(239 68 68 / var(--tw-border-opacity, 1));--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}.form-error[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.form-actions[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.form-actions[_ngcontent-%COMP%]{padding-top:1.5rem}.preview-card[_ngcontent-%COMP%]{border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.5rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.preview-title[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:1.25rem;line-height:1.75rem;font-weight:600;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.preview-description[_ngcontent-%COMP%]{margin-bottom:.75rem;--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.preview-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.preview-price[_ngcontent-%COMP%]{text-align:right}.info-box[_ngcontent-%COMP%]{border-radius:.375rem;padding:1rem}.info-box.blue[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.info-box.green[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.info-box.yellow[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.info-box.red[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.detail-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;align-items:flex-start;justify-content:space-between}.detail-title[_ngcontent-%COMP%]{font-size:1.875rem;line-height:2.25rem;font-weight:700;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.detail-subtitle[_ngcontent-%COMP%]{margin-top:.25rem;--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.detail-actions[_ngcontent-%COMP%]{display:flex}.detail-actions[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.stat-card[_ngcontent-%COMP%]{border-radius:.5rem;border-width:1px;padding:1rem}.stat-card.blue[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.stat-card.gray[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.stat-card.yellow[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.stat-card.green[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.stat-icon[_ngcontent-%COMP%]{height:2rem;width:2rem;flex-shrink:0}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-weight:500}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem;font-weight:700}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding-top:3rem;padding-bottom:3rem;text-align:center}.empty-state-icon[_ngcontent-%COMP%]{margin-bottom:1rem;height:3rem;width:3rem;--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.empty-state-title[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:1.125rem;line-height:1.75rem;font-weight:500;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.empty-state-description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.breadcrumb[_ngcontent-%COMP%]{margin-bottom:.5rem;display:flex;align-items:center;gap:.5rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-radius:.375rem;border-width:1px;border-color:transparent;padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.btn[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-offset-width: 2px}.btn-primary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.btn-primary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.btn-primary[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.btn-secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.btn-secondary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1))}.btn-secondary[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(107 114 128 / var(--tw-ring-opacity, 1))}.btn-success[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.btn-success[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.btn-success[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(34 197 94 / var(--tw-ring-opacity, 1))}.btn-danger[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.btn-danger[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.btn-danger[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}.btn-outline[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.btn-outline[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.btn-outline[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(107 114 128 / var(--tw-ring-opacity, 1))}.btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})};function nt(a,t){a&1&&(i(0,"div",10),g(1,"div",11),i(2,"p",12),o(3,"Cargando informaci\xF3n del paquete..."),n()())}function rt(a,t){if(a&1&&(i(0,"div",13),o(1),n()),a&2){let e=p();s(),m(" ",e.error," ")}}function at(a,t){if(a&1&&(i(0,"p",49),o(1),n()),a&2){let e=p(2);s(),m(" ",e.obtenerMensajeError("nombre")," ")}}function ot(a,t){if(a&1&&(i(0,"option",50),o(1),n()),a&2){let e=t.$implicit;l("value",e.value),s(),m(" ",e.label," ")}}function st(a,t){if(a&1&&(i(0,"p",49),o(1),n()),a&2){let e=p(2);s(),m(" ",e.obtenerMensajeError("tipo")," ")}}function ct(a,t){if(a&1&&(i(0,"p",49),o(1),n()),a&2){let e=p(2);s(),m(" ",e.obtenerMensajeError("cantidad_sesiones")," ")}}function lt(a,t){a&1&&(i(0,"div",10),g(1,"div",51),i(2,"p",12),o(3,"Cargando opciones disponibles..."),n()())}function dt(a,t){a&1&&(i(0,"div",55),_(),i(1,"svg",56),g(2,"path",57),n(),w(),i(3,"p"),o(4,"No hay rutinas disponibles"),n(),i(5,"p",34),o(6,"Crea rutinas primero para poder seleccionarlas"),n()())}function pt(a,t){if(a&1&&(i(0,"p",67),o(1),n()),a&2){let e=p().$implicit;s(),m(" ",e.descripcion," ")}}function ut(a,t){if(a&1&&(i(0,"p",68),o(1),n()),a&2){let e=p().$implicit;s(),m(" ",e.informacion_adicional," ")}}function mt(a,t){a&1&&(i(0,"div",69)(1,"span",70),o(2," \u2713 Seleccionada "),n()())}function gt(a,t){if(a&1){let e=q();i(0,"div",58)(1,"div",59)(2,"div",60)(3,"input",61),b("change",function(){let c=x(e).$implicit,d=p(3);return h(d.onSeleccionChange(c.id,!0))}),n()(),i(4,"div",62)(5,"label",63),o(6),n(),u(7,pt,2,1,"p",64)(8,ut,2,1,"p",65),n(),u(9,mt,3,0,"div",66),n()()}if(a&2){let e=t.$implicit,r=p(3);L("border-blue-500",e.seleccionado)("bg-blue-50",e.seleccionado)("border-gray-200",!e.seleccionado),s(3),l("id","rutina-"+e.id)("checked",e.seleccionado)("disabled",!e.seleccionado&&r.cantidadSeleccionada>=r.cantidadPermitida),s(2),l("for","rutina-"+e.id),s(),m(" ",e.nombre," "),s(),l("ngIf",e.descripcion),s(),l("ngIf",e.informacion_adicional),s(),l("ngIf",e.seleccionado)}}function bt(a,t){if(a&1&&(i(0,"div",52),u(1,dt,7,0,"div",53)(2,gt,10,14,"div",54),n()),a&2){let e=p(2);s(),l("ngIf",e.rutinasDisponibles.length===0),s(),l("ngForOf",e.rutinasDisponibles)}}function vt(a,t){a&1&&(i(0,"div",55),_(),i(1,"svg",56),g(2,"path",71),n(),w(),i(3,"p"),o(4,"No hay terapias disponibles"),n(),i(5,"p",34),o(6,"Crea terapias primero para poder seleccionarlas"),n()())}function ft(a,t){if(a&1&&(i(0,"p",67),o(1),n()),a&2){let e=p().$implicit;s(),m(" ",e.descripcion," ")}}function _t(a,t){if(a&1&&(i(0,"p",68),o(1),n()),a&2){let e=p().$implicit;s(),m(" ",e.informacion_adicional," ")}}function xt(a,t){a&1&&(i(0,"div",69)(1,"span",70),o(2," \u2713 Seleccionada "),n()())}function ht(a,t){if(a&1){let e=q();i(0,"div",58)(1,"div",59)(2,"div",60)(3,"input",61),b("change",function(){let c=x(e).$implicit,d=p(3);return h(d.onSeleccionChange(c.id,!1))}),n()(),i(4,"div",62)(5,"label",63),o(6),n(),u(7,ft,2,1,"p",64)(8,_t,2,1,"p",65),n(),u(9,xt,3,0,"div",66),n()()}if(a&2){let e=t.$implicit,r=p(3);L("border-blue-500",e.seleccionado)("bg-blue-50",e.seleccionado)("border-gray-200",!e.seleccionado),s(3),l("id","terapia-"+e.id)("checked",e.seleccionado)("disabled",!e.seleccionado&&r.cantidadSeleccionada>=r.cantidadPermitida),s(2),l("for","terapia-"+e.id),s(),m(" ",e.nombre," "),s(),l("ngIf",e.descripcion),s(),l("ngIf",e.informacion_adicional),s(),l("ngIf",e.seleccionado)}}function yt(a,t){if(a&1&&(i(0,"div",52),u(1,vt,7,0,"div",53)(2,ht,10,14,"div",54),n()),a&2){let e=p(2);s(),l("ngIf",e.terapiasDisponibles.length===0),s(),l("ngForOf",e.terapiasDisponibles)}}function wt(a,t){if(a&1){let e=q();i(0,"button",77),b("click",function(){x(e);let c=p(3);return h(c.limpiarSelecciones())}),o(1," Limpiar selecciones "),n()}}function Pt(a,t){a&1&&(i(0,"span"),o(1,"Selecciona al menos una opci\xF3n"),n())}function qt(a,t){if(a&1&&(i(0,"span"),o(1),n()),a&2){let e=p(3);s(),m(" Puedes seleccionar ",e.cantidadPermitida-e.cantidadSeleccionada," m\xE1s ")}}function Ct(a,t){a&1&&(i(0,"span",78),o(1," \u2713 Selecci\xF3n completa "),n())}function St(a,t){if(a&1&&(i(0,"div",72)(1,"div",73),u(2,wt,2,0,"button",74),i(3,"div",75),u(4,Pt,2,0,"span",47)(5,qt,2,1,"span",47)(6,Ct,2,0,"span",76),n()()()),a&2){let e=p(2);s(2),l("ngIf",e.cantidadSeleccionada>0),s(2),l("ngIf",e.cantidadSeleccionada===0),s(),l("ngIf",e.cantidadSeleccionada>0&&e.cantidadSeleccionada<e.cantidadPermitida),s(),l("ngIf",e.cantidadSeleccionada===e.cantidadPermitida)}}function Et(a,t){if(a&1&&(i(0,"p",49),o(1),n()),a&2){let e=p(2);s(),m(" ",e.obtenerMensajeError("precio")," ")}}function Mt(a,t){if(a&1&&(i(0,"p",49),o(1),n()),a&2){let e=p(2);s(),m(" ",e.obtenerMensajeError("descuento")," ")}}function kt(a,t){if(a&1&&(i(0,"span"),o(1),n()),a&2){let e=p(2);s(),m(" ",e.esEdicion?"Actualizar":"Crear"," Paquete ")}}function It(a,t){if(a&1&&(i(0,"span",79),_(),i(1,"svg",80),g(2,"circle",81)(3,"path",82),n(),o(4),n()),a&2){let e=p(2);s(4),m(" ",e.esEdicion?"Actualizando...":"Creando..."," ")}}function Ot(a,t){if(a&1){let e=q();i(0,"div",14)(1,"form",15),b("ngSubmit",function(){x(e);let c=p();return h(c.onSubmit())}),i(2,"div",16)(3,"h2",17),o(4,"Informaci\xF3n B\xE1sica"),n(),i(5,"div",18)(6,"div",19)(7,"label",20),o(8," Nombre del Paquete * "),n(),g(9,"input",21),u(10,at,2,1,"p",22),n(),i(11,"div")(12,"label",23),o(13," Tipo de Paquete * "),n(),i(14,"select",24),u(15,ot,2,2,"option",25),n(),u(16,st,2,1,"p",22),n(),i(17,"div")(18,"label",26),o(19," Cantidad de Sesiones * "),n(),g(20,"input",27),i(21,"p",28),o(22,"M\xEDnimo 1, m\xE1ximo 25 sesiones"),n(),u(23,ct,2,1,"p",22),n(),i(24,"div",19)(25,"label",29),o(26," Descripci\xF3n "),n(),i(27,"textarea",30),o(28,"            "),n()()()(),i(29,"div",16)(30,"div",31)(31,"div")(32,"h2",32),o(33),n(),i(34,"p",33),o(35),n()(),i(36,"div",34)(37,"span",35),o(38,"Seleccionadas: "),n(),i(39,"span"),o(40),n()()(),u(41,lt,4,0,"div",6)(42,bt,3,2,"div",36)(43,yt,3,2,"div",36)(44,St,7,4,"div",37),n(),i(45,"div",16)(46,"h2",17),o(47,"Informaci\xF3n de Precios"),n(),i(48,"div",18)(49,"div")(50,"label",38),o(51," Precio Base * "),n(),i(52,"div",39)(53,"span",40),o(54,"Q"),n(),g(55,"input",41),n(),u(56,Et,2,1,"p",22),n(),i(57,"div")(58,"label",42),o(59," Descuento (%) "),n(),g(60,"input",43),i(61,"p",28),o(62,"0% = Sin descuento, m\xE1ximo 100%"),n(),u(63,Mt,2,1,"p",22),n()()(),i(64,"div",44)(65,"button",45),b("click",function(){x(e);let c=p();return h(c.cancelar())}),o(66," Cancelar "),n(),i(67,"button",46),u(68,kt,2,1,"span",47)(69,It,5,1,"span",48),n()()()()}if(a&2){let e,r,c,d,f=p();s(),l("formGroup",f.paqueteForm),s(8),C(f.esInvalido("nombre")?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"),s(),l("ngIf",f.esInvalido("nombre")),s(4),C(f.esInvalido("tipo")?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"),s(),l("ngForOf",f.tiposPaquete),s(),l("ngIf",f.esInvalido("tipo")),s(4),C(f.esInvalido("cantidad_sesiones")?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"),s(3),l("ngIf",f.esInvalido("cantidad_sesiones")),s(10),m(" Seleccionar ",((e=f.paqueteForm.get("tipo"))==null?null:e.value)==="rutina"?"Rutinas":"Terapias"," "),s(2),I(" Puedes seleccionar hasta ",f.cantidadPermitida," ",((r=f.paqueteForm.get("tipo"))==null?null:r.value)==="rutina"?"rutinas":"terapias"," para este paquete "),s(4),C(f.cantidadSeleccionada===f.cantidadPermitida?"text-green-600":"text-blue-600"),s(),I(" ",f.cantidadSeleccionada," / ",f.cantidadPermitida," "),s(),l("ngIf",f.cargandoOpciones),s(),l("ngIf",!f.cargandoOpciones&&((c=f.paqueteForm.get("tipo"))==null?null:c.value)==="rutina"),s(),l("ngIf",!f.cargandoOpciones&&((d=f.paqueteForm.get("tipo"))==null?null:d.value)==="terapia"),s(),l("ngIf",!f.cargandoOpciones&&(f.rutinasDisponibles.length>0||f.terapiasDisponibles.length>0)),s(11),C(f.esInvalido("precio")?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"),s(),l("ngIf",f.esInvalido("precio")),s(4),C(f.esInvalido("descuento")?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"),s(3),l("ngIf",f.esInvalido("descuento")),s(4),l("disabled",f.paqueteForm.invalid||f.guardando||f.cantidadSeleccionada===0),s(),l("ngIf",!f.guardando),s(),l("ngIf",f.guardando)}}function Ft(a,t){if(a&1&&(i(0,"p",103),o(1),n()),a&2){let e=p(2);s(),m(" ",e.paqueteForm.value.descripcion," ")}}function Tt(a,t){if(a&1&&(te(0),g(1,"span",106),o(2),ie()),a&2){let e=p().$implicit;s(2),m(" ",e.nombre," ")}}function At(a,t){if(a&1&&(i(0,"li",105),u(1,Tt,3,1,"ng-container",47),n()),a&2){let e=t.$implicit;s(),l("ngIf",e.seleccionado)}}function Vt(a,t){if(a&1&&(te(0),u(1,At,2,1,"li",104),ie()),a&2){let e=p(2);s(),l("ngForOf",e.rutinasDisponibles)}}function jt(a,t){if(a&1&&(te(0),g(1,"span",106),o(2),ie()),a&2){let e=p().$implicit;s(2),m(" ",e.nombre," ")}}function Dt(a,t){if(a&1&&(i(0,"li",105),u(1,jt,3,1,"ng-container",47),n()),a&2){let e=t.$implicit;s(),l("ngIf",e.seleccionado)}}function zt(a,t){if(a&1&&(te(0),u(1,Dt,2,1,"li",104),ie()),a&2){let e=p(2);s(),l("ngForOf",e.terapiasDisponibles)}}function Lt(a,t){if(a&1&&(i(0,"div",107),o(1),n()),a&2){let e=p(2);s(),m(" ",e.formatearPrecio(e.paqueteForm.value.precio||0)," ")}}function Ut(a,t){if(a&1&&(i(0,"div",108),o(1),n()),a&2){let e=p(2);s(),m(" ",e.paqueteForm.value.descuento,"% de descuento ")}}function Rt(a,t){if(a&1&&(i(0,"div",83)(1,"h3",17),o(2,"Vista Previa del Paquete"),n(),i(3,"div",84)(4,"div",85)(5,"div",86)(6,"div",87)(7,"h4",88),o(8),n(),i(9,"span",89),o(10),O(11,"titlecase"),n()(),u(12,Ft,2,1,"p",90),i(13,"div",91)(14,"div",92),_(),i(15,"svg",93),g(16,"path",94),n(),o(17),n(),w(),i(18,"div",92),_(),i(19,"svg",93),g(20,"path",57),n(),o(21),n()(),w(),i(22,"div",95)(23,"h5",96),o(24),n(),i(25,"ul",97),u(26,Vt,2,1,"ng-container",47)(27,zt,2,1,"ng-container",47),n()()(),i(28,"div",98),u(29,Lt,2,1,"div",99),i(30,"div",100),o(31),n(),u(32,Ut,2,1,"div",101),i(33,"div",102),o(34),n()()()()()),a&2){let e=p();s(8),y(e.paqueteForm.value.nombre||"Nombre del paquete"),s(),C(e.paqueteForm.value.tipo==="terapia"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),s(),m(" ",j(11,17,e.paqueteForm.value.tipo)," "),s(2),l("ngIf",e.paqueteForm.value.descripcion),s(5),m(" ",e.paqueteForm.value.cantidad_sesiones||0," sesiones "),s(4),I(" ",e.cantidadSeleccionada," ",e.paqueteForm.value.tipo==="rutina"?"rutinas":"terapias"," incluidas "),s(3),m(" ",e.paqueteForm.value.tipo==="rutina"?"Rutinas":"Terapias"," incluidas: "),s(2),l("ngIf",e.paqueteForm.value.tipo==="rutina"),s(),l("ngIf",e.paqueteForm.value.tipo==="terapia"),s(2),l("ngIf",e.hayDescuento),s(),L("text-green-600",e.hayDescuento),s(),m(" ",e.formatearPrecio(e.precioFinalCalculado)," "),s(),l("ngIf",e.hayDescuento),s(2),m(" ",e.formatearPrecio(e.precioFinalCalculado/(e.paqueteForm.value.cantidad_sesiones||1))," por sesi\xF3n ")}}var re=class a{constructor(t,e,r,c,d){this.fb=t;this.route=e;this.router=r;this.paquetesService=c;this.supabaseService=d}paqueteForm;esEdicion=!1;paqueteId=null;cargando=!1;guardando=!1;error=null;tiposPaquete=ge;rutinasDisponibles=[];terapiasDisponibles=[];cargandoOpciones=!1;rutinasSeleccionadas=[];terapiasSeleccionadas=[];ngOnInit(){this.inicializarFormulario(),this.verificarModoEdicion()}inicializarFormulario(){this.paqueteForm=this.fb.group({nombre:["",[F.required,F.maxLength(255)]],descripcion:[""],precio:[0,[F.required,F.min(.01)]],cantidad_sesiones:[1,[F.required,F.min(1),F.max(25)]],tipo:["terapia",[F.required]],descuento:[0,[F.min(0),F.max(100)]]}),this.paqueteForm.get("tipo")?.valueChanges.subscribe(t=>{this.onTipoChange(t)}),this.paqueteForm.get("cantidad_sesiones")?.valueChanges.subscribe(t=>{this.validarSelecciones()}),this.cargarTerapias()}verificarModoEdicion(){let t=this.route.snapshot.paramMap.get("id");t&&(this.esEdicion=!0,this.paqueteId=parseInt(t),this.cargarPaquete())}cargarPaquete(){return v(this,null,function*(){if(this.paqueteId){this.cargando=!0,this.error=null;try{let t=yield this.paquetesService.obtenerPaquetePorId(this.paqueteId);t?(this.paqueteForm.patchValue({nombre:t.nombre,descripcion:t.descripcion||"",precio:t.precio,cantidad_sesiones:t.cantidad_sesiones,tipo:t.tipo,descuento:t.descuento}),t.tipo==="rutina"&&t.rutinas_seleccionadas?this.rutinasSeleccionadas=[...t.rutinas_seleccionadas]:t.tipo==="terapia"&&t.terapias_seleccionadas&&(this.terapiasSeleccionadas=[...t.terapias_seleccionadas]),yield this.onTipoChange(t.tipo)):this.error="Paquete no encontrado"}catch(t){console.error("Error cargando paquete:",t),this.error="Error al cargar el paquete"}finally{this.cargando=!1}}})}cargarRutinas(){return v(this,null,function*(){try{this.cargandoOpciones=!0;let{data:t,error:e}=yield this.supabaseService.client.from("rutinas").select("id, nombre, descripcion, nivel, duracion_estimada, tipo").eq("status",1).order("nombre");if(e)throw e;this.rutinasDisponibles=(t||[]).map(r=>({id:Number(r.id),nombre:String(r.nombre||""),descripcion:String(r.descripcion||""),informacion_adicional:this.construirInfoRutina(r),seleccionado:this.rutinasSeleccionadas.includes(Number(r.id))}))}catch(t){console.error("Error cargando rutinas:",t),this.error="Error al cargar las rutinas disponibles"}finally{this.cargandoOpciones=!1}})}cargarTerapias(){return v(this,null,function*(){try{this.cargandoOpciones=!0;let{data:t,error:e}=yield this.supabaseService.client.from("terapias").select("id, nombre, descripcion, tipo, area_especializacion, nivel, duracion_estimada").eq("status",1).order("nombre");if(e)throw e;this.terapiasDisponibles=(t||[]).map(r=>({id:Number(r.id),nombre:String(r.nombre||""),descripcion:String(r.descripcion||""),informacion_adicional:this.construirInfoTerapia(r),seleccionado:this.terapiasSeleccionadas.includes(Number(r.id))}))}catch(t){console.error("Error cargando terapias:",t),this.error="Error al cargar las terapias disponibles"}finally{this.cargandoOpciones=!1}})}onTipoChange(t){return v(this,null,function*(){this.rutinasSeleccionadas=[],this.terapiasSeleccionadas=[],t==="rutina"?yield this.cargarRutinas():t==="terapia"&&(yield this.cargarTerapias())})}onSeleccionChange(t,e){let r=this.paqueteForm.get("cantidad_sesiones")?.value||1;if(e){let c=this.rutinasSeleccionadas.indexOf(t);if(c>-1)this.rutinasSeleccionadas.splice(c,1);else if(this.rutinasSeleccionadas.length<r)this.rutinasSeleccionadas.push(t);else{this.mostrarMensajeError(`Solo puedes seleccionar hasta ${r} rutinas`);return}this.rutinasDisponibles=this.rutinasDisponibles.map(d=>z(D({},d),{seleccionado:this.rutinasSeleccionadas.includes(d.id)}))}else{let c=this.terapiasSeleccionadas.indexOf(t);if(c>-1)this.terapiasSeleccionadas.splice(c,1);else if(this.terapiasSeleccionadas.length<r)this.terapiasSeleccionadas.push(t);else{this.mostrarMensajeError(`Solo puedes seleccionar hasta ${r} terapias`);return}this.terapiasDisponibles=this.terapiasDisponibles.map(d=>z(D({},d),{seleccionado:this.terapiasSeleccionadas.includes(d.id)}))}}validarSelecciones(){let t=this.paqueteForm.get("cantidad_sesiones")?.value||1,e=this.paqueteForm.get("tipo")?.value;e==="rutina"&&this.rutinasSeleccionadas.length>t?(this.rutinasSeleccionadas=this.rutinasSeleccionadas.slice(0,t),this.actualizarEstadoVisualRutinas()):e==="terapia"&&this.terapiasSeleccionadas.length>t&&(this.terapiasSeleccionadas=this.terapiasSeleccionadas.slice(0,t),this.actualizarEstadoVisualTerapias())}actualizarEstadoVisualRutinas(){this.rutinasDisponibles=this.rutinasDisponibles.map(t=>z(D({},t),{seleccionado:this.rutinasSeleccionadas.includes(t.id)}))}actualizarEstadoVisualTerapias(){this.terapiasDisponibles=this.terapiasDisponibles.map(t=>z(D({},t),{seleccionado:this.terapiasSeleccionadas.includes(t.id)}))}limpiarSelecciones(){this.rutinasSeleccionadas=[],this.terapiasSeleccionadas=[],this.actualizarEstadoVisualRutinas(),this.actualizarEstadoVisualTerapias()}onSubmit(){return v(this,null,function*(){if(this.paqueteForm.invalid){this.marcarCamposComoTocados();return}let t=this.paqueteForm.get("tipo")?.value;if(t==="rutina"&&this.rutinasSeleccionadas.length===0){this.error="Debe seleccionar al menos una rutina para el paquete";return}else if(t==="terapia"&&this.terapiasSeleccionadas.length===0){this.error="Debe seleccionar al menos una terapia para el paquete";return}this.guardando=!0,this.error=null;try{let e=z(D({},this.paqueteForm.value),{rutinas_seleccionadas:t==="rutina"?this.rutinasSeleccionadas:void 0,terapias_seleccionadas:t==="terapia"?this.terapiasSeleccionadas:void 0}),r;this.esEdicion&&this.paqueteId?r=yield this.paquetesService.actualizarPaquete(this.paqueteId,e):r=yield this.paquetesService.crearPaquete(e),r.success?(this.mostrarMensajeExito(r.message),this.router.navigate(["/paquetes"])):this.error=r.message}catch(e){console.error("Error guardando paquete:",e),this.error="Error al guardar el paquete"}finally{this.guardando=!1}})}cancelar(){this.router.navigate(["/paquetes"])}construirInfoRutina(t){let e=[];return t.nivel&&e.push(`Nivel: ${String(t.nivel)}`),t.duracion_estimada&&e.push(`${t.duracion_estimada} min`),t.tipo&&e.push(String(t.tipo)),e.join(" \u2022 ")}construirInfoTerapia(t){let e=[];return t.tipo&&e.push(`Tipo: ${String(t.tipo)}`),t.area_especializacion&&e.push(String(t.area_especializacion)),t.nivel&&e.push(`Nivel: ${String(t.nivel)}`),t.duracion_estimada&&e.push(`${t.duracion_estimada} min`),e.join(" \u2022 ")}marcarCamposComoTocados(){Object.keys(this.paqueteForm.controls).forEach(t=>{this.paqueteForm.get(t)?.markAsTouched()})}esInvalido(t){let e=this.paqueteForm.get(t);return!!(e&&e.invalid&&e.touched)}obtenerMensajeError(t){let e=this.paqueteForm.get(t);if(e?.errors){if(e.errors.required)return`${t} es requerido`;if(e.errors.min)return`${t} debe ser mayor a ${e.errors.min.min}`;if(e.errors.max)return`${t} debe ser menor a ${e.errors.max.max}`;if(e.errors.maxlength)return`${t} es demasiado largo`}return""}mostrarMensajeExito(t){console.log("\xC9xito:",t)}mostrarMensajeError(t){console.log("Error:",t)}get hayDescuento(){return(this.paqueteForm.get("descuento")?.value||0)>0}get precioFinalCalculado(){let t=this.paqueteForm.get("precio")?.value||0,e=this.paqueteForm.get("descuento")?.value||0;return t-t*e/100}get cantidadSeleccionada(){return this.paqueteForm.get("tipo")?.value==="rutina"?this.rutinasSeleccionadas.length:this.terapiasSeleccionadas.length}get cantidadPermitida(){return this.paqueteForm.get("cantidad_sesiones")?.value||1}formatearPrecio(t){return new Intl.NumberFormat("es-GT",{style:"currency",currency:"GTQ"}).format(t)}static \u0275fac=function(e){return new(e||a)(P(Ae),P(Y),P(A),P(V),P(Z))};static \u0275cmp=T({type:a,selectors:[["app-paquete-form"]],standalone:!1,decls:17,vars:7,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"mb-6"],[1,"flex","items-center","gap-2","text-sm","text-gray-500","mb-2"],["routerLink","/paquetes",1,"hover:text-blue-600"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],["class","text-center py-8",4,"ngIf"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",4,"ngIf"],["class","max-w-4xl",4,"ngIf"],["class","mt-8 max-w-4xl",4,"ngIf"],[1,"text-center","py-8"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"mt-2","text-gray-600"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg","mb-6"],[1,"max-w-4xl"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-white","p-6","rounded-lg","shadow-sm","border"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"md:col-span-2"],["for","nombre",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","nombre","formControlName","nombre","placeholder","Ej: Paquete Rehabilitaci\xF3n B\xE1sica",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none","focus:ring-2","transition-colors"],["class","mt-1 text-sm text-red-600",4,"ngIf"],["for","tipo",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","tipo","formControlName","tipo",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none","focus:ring-2","transition-colors"],[3,"value",4,"ngFor","ngForOf"],["for","cantidad_sesiones",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","number","id","cantidad_sesiones","formControlName","cantidad_sesiones","min","1","max","25",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none","focus:ring-2","transition-colors"],[1,"mt-1","text-xs","text-gray-500"],["for","descripcion",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","descripcion","formControlName","descripcion","rows","3","placeholder","Describe el contenido y beneficios del paquete...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:border-blue-500","focus:ring-2","focus:ring-blue-500","transition-colors"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"text-sm"],[1,"font-medium"],["class","space-y-3",4,"ngIf"],["class","mt-4 pt-4 border-t border-gray-200",4,"ngIf"],["for","precio",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"relative"],[1,"absolute","left-3","top-2","text-gray-500"],["type","number","id","precio","formControlName","precio","min","0.01","step","0.01",1,"w-full","pl-8","pr-3","py-2","border","rounded-md","focus:outline-none","focus:ring-2","transition-colors"],["for","descuento",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","number","id","descuento","formControlName","descuento","min","0","max","100","step","0.01",1,"w-full","px-3","py-2","border","rounded-md","focus:outline-none","focus:ring-2","transition-colors"],[1,"flex","flex-col","sm:flex-row","gap-3","pt-6"],["type","button",1,"px-6","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-gray-500","focus:ring-offset-2","transition-colors",3,"click"],["type","submit",1,"px-6","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"mt-1","text-sm","text-red-600"],[3,"value"],[1,"inline-block","animate-spin","rounded-full","h-6","w-6","border-b-2","border-blue-600"],[1,"space-y-3"],["class","text-center py-8 text-gray-500",4,"ngIf"],["class","border rounded-lg p-4 transition-all duration-200 hover:shadow-md",3,"border-blue-500","bg-blue-50","border-gray-200",4,"ngFor","ngForOf"],[1,"text-center","py-8","text-gray-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-3","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"border","rounded-lg","p-4","transition-all","duration-200","hover:shadow-md"],[1,"flex","items-start","gap-3"],[1,"flex-shrink-0","mt-1"],["type","checkbox",1,"w-4","h-4","text-blue-600","border-gray-300","rounded","focus:ring-blue-500",3,"change","id","checked","disabled"],[1,"flex-1","min-w-0"],[1,"block","font-medium","text-gray-900","cursor-pointer",3,"for"],["class","text-sm text-gray-600 mt-1 line-clamp-2",4,"ngIf"],["class","text-xs text-gray-500 mt-2",4,"ngIf"],["class","flex-shrink-0",4,"ngIf"],[1,"text-sm","text-gray-600","mt-1","line-clamp-2"],[1,"text-xs","text-gray-500","mt-2"],[1,"flex-shrink-0"],[1,"inline-flex","items-center","px-2","py-1","rounded-full","text-xs","font-medium","bg-blue-100","text-blue-800"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"],[1,"mt-4","pt-4","border-t","border-gray-200"],[1,"flex","items-center","justify-between"],["type","button","class","text-sm text-red-600 hover:text-red-700 font-medium",3,"click",4,"ngIf"],[1,"text-sm","text-gray-600"],["class","text-green-600 font-medium",4,"ngIf"],["type","button",1,"text-sm","text-red-600","hover:text-red-700","font-medium",3,"click"],[1,"text-green-600","font-medium"],[1,"flex","items-center"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"mt-8","max-w-4xl"],[1,"bg-white","border","border-gray-200","rounded-lg","p-6","shadow-sm"],[1,"flex","justify-between","items-start"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-2"],[1,"text-xl","font-semibold","text-gray-900"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full"],["class","text-gray-600 mb-3",4,"ngIf"],[1,"flex","items-center","gap-4","text-sm","text-gray-500","mb-3"],[1,"flex","items-center","gap-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"bg-gray-50","rounded-lg","p-3"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"text-sm","text-gray-600","space-y-1"],[1,"text-right"],["class","text-sm text-gray-500 line-through",4,"ngIf"],[1,"text-2xl","font-bold"],["class","text-sm text-green-600 font-medium",4,"ngIf"],[1,"text-sm","text-gray-500","mt-1"],[1,"text-gray-600","mb-3"],["class","flex items-center gap-2",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-2"],[1,"w-1.5","h-1.5","bg-blue-600","rounded-full"],[1,"text-sm","text-gray-500","line-through"],[1,"text-sm","text-green-600","font-medium"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),o(4,"Paquetes"),n(),i(5,"span"),o(6,"/"),n(),i(7,"span"),o(8),n()(),i(9,"h1",4),o(10),n(),i(11,"p",5),o(12),n()(),u(13,nt,4,0,"div",6)(14,rt,2,1,"div",7)(15,Ot,70,31,"div",8)(16,Rt,35,19,"div",9),n()),e&2&&(s(8),m("",r.esEdicion?"Editar":"Crear"," Paquete"),s(2),m(" ",r.esEdicion?"Editar":"Crear"," Paquete "),s(2),m(" ",r.esEdicion?"Modifica la informaci\xF3n del paquete":"Completa la informaci\xF3n para crear un nuevo paquete"," "),s(),l("ngIf",r.cargando),s(),l("ngIf",r.error&&!r.cargando),s(),l("ngIf",!r.cargando),s(),l("ngIf",!r.cargando&&r.paqueteForm.value.nombre&&r.cantidadSeleccionada>0))},dependencies:[U,R,Oe,$,W,N,pe,H,G,Ie,me,ue,Fe,Te,K,B],encapsulation:2})};function Bt(a,t){if(a&1){let e=q();i(0,"button",15),b("click",function(){x(e);let c=p();return h(c.irAAsignar())}),_(),i(1,"svg",16),g(2,"path",17),n(),o(3," Asignar a Usuario "),n()}}function Nt(a,t){if(a&1){let e=q();i(0,"button",18),b("click",function(){x(e);let c=p();return h(c.irAEditar())}),_(),i(1,"svg",16),g(2,"path",19),n(),o(3," Editar "),n()}}function Gt(a,t){a&1&&(i(0,"div",20),g(1,"div",21),i(2,"p",22),o(3,"Cargando informaci\xF3n del paquete..."),n()())}function Ht(a,t){if(a&1){let e=q();i(0,"div",23)(1,"div",24)(2,"span"),o(3),n(),i(4,"button",25),b("click",function(){x(e);let c=p();return h(c.limpiarError())}),_(),i(5,"svg",16),g(6,"path",26),n()()()()}if(a&2){let e=p();s(3),y(e.error)}}function $t(a,t){if(a&1&&(i(0,"p",91),o(1),n()),a&2){let e=p(2);s(),m(" ",e.paquete.descripcion," ")}}function Wt(a,t){if(a&1&&(i(0,"div",92)(1,"p",93),o(2,"Ahorro total"),n(),i(3,"p",94),o(4),n()()),a&2){let e=p(2);s(4),y(e.formatearPrecio(e.paquete.precio-(e.paquete.precio_final||e.paquete.precio)))}}function Yt(a,t){a&1&&(i(0,"div",61)(1,"p",95),o(2,"Este paquete no tiene descuento aplicado"),n()())}function Qt(a,t){if(a&1){let e=q();i(0,"button",96),b("click",function(){x(e);let c=p(2);return h(c.irAAsignar())}),_(),i(1,"svg",16),g(2,"path",17),n(),w(),i(3,"div",76)(4,"div",77),o(5,"Asignar a Usuario"),n(),i(6,"div",78),o(7,"Crear nueva asignaci\xF3n"),n()()()}}function Jt(a,t){if(a&1){let e=q();i(0,"button",97),b("click",function(){x(e);let c=p(2);return h(c.irAEditar())}),_(),i(1,"svg",16),g(2,"path",19),n(),w(),i(3,"div",76)(4,"div",77),o(5,"Editar Paquete"),n(),i(6,"div",78),o(7,"Modificar informaci\xF3n"),n()()()}}function Xt(a,t){a&1&&(_(),i(0,"svg",82),g(1,"path",98),n())}function Kt(a,t){a&1&&(_(),i(0,"svg",82),g(1,"path",56),n())}function Zt(a,t){if(a&1){let e=q();i(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"div",31)(5,"h2",32),o(6),n(),i(7,"span",33),o(8),O(9,"titlecase"),n(),i(10,"span",33),o(11),n()(),u(12,$t,2,1,"p",34),n()(),i(13,"div",35)(14,"div",36)(15,"div",37)(16,"div",38),_(),i(17,"svg",39),g(18,"path",40),n()(),w(),i(19,"div",41)(20,"p",42),o(21,"Sesiones Incluidas"),n(),i(22,"p",43),o(23),n()()()(),i(24,"div",44)(25,"div",37)(26,"div",38),_(),i(27,"svg",45),g(28,"path",46),n()(),w(),i(29,"div",41)(30,"p",47),o(31,"Precio Base"),n(),i(32,"p",48),o(33),n()()()(),i(34,"div",49)(35,"div",37)(36,"div",38),_(),i(37,"svg",50),g(38,"path",51),n()(),w(),i(39,"div",41)(40,"p",52),o(41,"Descuento"),n(),i(42,"p",53),o(43),n()()()(),i(44,"div",54)(45,"div",37)(46,"div",38),_(),i(47,"svg",55),g(48,"path",56),n()(),w(),i(49,"div",41)(50,"p",57),o(51,"Precio Final"),n(),i(52,"p",58),o(53),n()()()()()(),i(54,"div",28)(55,"h3",59),o(56,"An\xE1lisis de Costos"),n(),i(57,"div",60)(58,"div",61)(59,"p",62),o(60,"Costo por sesi\xF3n (precio base)"),n(),i(61,"p",63),o(62),n()(),i(63,"div",64)(64,"p",65),o(65,"Costo por sesi\xF3n (precio final)"),n(),i(66,"p",66),o(67),n()(),u(68,Wt,5,1,"div",67)(69,Yt,3,0,"div",68),n()(),i(70,"div",28)(71,"h3",59),o(72,"Informaci\xF3n del Sistema"),n(),i(73,"div",69)(74,"div")(75,"p",70),o(76,"Fecha de Creaci\xF3n"),n(),i(77,"p",71),o(78),n()(),i(79,"div")(80,"p",70),o(81,"\xDAltima Actualizaci\xF3n"),n(),i(82,"p",71),o(83),n()()()(),i(84,"div",28)(85,"h3",59),o(86,"Acciones Principales"),n(),i(87,"div",72),u(88,Qt,8,0,"button",73),i(89,"button",74),b("click",function(){x(e);let c=p();return h(c.verAsignaciones())}),_(),i(90,"svg",16),g(91,"path",75),n(),w(),i(92,"div",76)(93,"div",77),o(94,"Ver Asignaciones"),n(),i(95,"div",78),o(96,"Usuarios con este paquete"),n()()(),u(97,Jt,8,0,"button",79),n()(),i(98,"div",28)(99,"h3",59),o(100,"Acciones Adicionales"),n(),i(101,"div",80)(102,"button",81),b("click",function(){x(e);let c=p();return h(c.duplicarPaquete())}),_(),i(103,"svg",82),g(104,"path",83),n(),o(105," Duplicar "),n(),w(),i(106,"button",84),b("click",function(){x(e);let c=p();return h(c.exportarPaquete())}),_(),i(107,"svg",82),g(108,"path",85),n(),o(109," Exportar "),n(),w(),i(110,"button",15),b("click",function(){x(e);let c=p();return h(c.imprimirPaquete())}),_(),i(111,"svg",82),g(112,"path",86),n(),o(113," Imprimir "),n(),w(),i(114,"button",87),b("click",function(){x(e);let c=p();return h(c.compartirPaquete())}),_(),i(115,"svg",82),g(116,"path",88),n(),o(117," Compartir "),n(),w(),i(118,"button",89),b("click",function(){x(e);let c=p();return h(c.toggleStatus())}),u(119,Xt,2,0,"svg",90)(120,Kt,2,0,"svg",90),o(121),n()()()()}if(a&2){let e=p();s(6),y(e.paquete.nombre),s(),C(e.obtenerClaseTipo(e.paquete.tipo)),s(),I(" ",e.obtenerIconoTipo(e.paquete.tipo)," ",j(9,27,e.paquete.tipo)," "),s(2),C(e.obtenerClaseStatus(e.paquete.status)),s(),I(" ",e.obtenerIconoStatus(e.paquete.status)," ",e.obtenerTextoStatus(e.paquete.status)," "),s(),l("ngIf",e.paquete.descripcion),s(11),y(e.paquete.cantidad_sesiones),s(10),y(e.formatearPrecio(e.paquete.precio)),s(10),m("",e.paquete.descuento||0,"%"),s(10),y(e.formatearPrecio(e.paquete.precio_final||e.paquete.precio)),s(9),y(e.formatearPrecio(e.paquete.precio/e.paquete.cantidad_sesiones)),s(5),y(e.formatearPrecio((e.paquete.precio_final||e.paquete.precio)/e.paquete.cantidad_sesiones)),s(),l("ngIf",(e.paquete.descuento||0)>0),s(),l("ngIf",(e.paquete.descuento||0)===0),s(9),y(e.formatearFecha(e.paquete.fecha_creacion)),s(5),y(e.formatearFecha(e.paquete.fecha_actualizacion)),s(5),l("ngIf",e.paquete.status===1),s(9),l("ngIf",e.paquete.status===1),s(21),C(e.paquete.status===1?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"),s(),l("ngIf",e.paquete.status===1),s(),l("ngIf",e.paquete.status===0),s(),m(" ",e.paquete.status===1?"Desactivar":"Activar"," ")}}function ei(a,t){a&1&&(i(0,"span"),o(1,"Desactivar"),n())}function ti(a,t){a&1&&(i(0,"span"),o(1,"Desactivando..."),n())}function ii(a,t){if(a&1){let e=q();i(0,"div",99),b("click",function(){x(e);let c=p();return h(c.cancelarEliminacion())}),i(1,"div",100),b("click",function(c){return x(e),h(c.stopPropagation())}),i(2,"div",101)(3,"div",102),_(),i(4,"svg",103),g(5,"path",104),n()(),w(),i(6,"h3",105),o(7,"Confirmar desactivaci\xF3n"),n(),i(8,"div",106)(9,"p",107),o(10),n()(),i(11,"div",108)(12,"div",7)(13,"button",109),b("click",function(){x(e);let c=p();return h(c.eliminarPaquete())}),u(14,ei,2,0,"span",110)(15,ti,2,0,"span",110),n(),i(16,"button",111),b("click",function(){x(e);let c=p();return h(c.cancelarEliminacion())}),o(17," Cancelar "),n()()()()()()}if(a&2){let e=p();s(10),m(' \xBFEst\xE1s seguro de que deseas desactivar el paquete "',e.paquete==null?null:e.paquete.nombre,'"? Esto afectar\xE1 las asignaciones activas. '),s(3),l("disabled",e.procesandoAccion),s(),l("ngIf",!e.procesandoAccion),s(),l("ngIf",e.procesandoAccion),s(),l("disabled",e.procesandoAccion)}}function ni(a,t){a&1&&(i(0,"span"),o(1,"Activar"),n())}function ri(a,t){a&1&&(i(0,"span"),o(1,"Activando..."),n())}function ai(a,t){if(a&1){let e=q();i(0,"div",99),b("click",function(){x(e);let c=p();return h(c.cancelarActivacion())}),i(1,"div",100),b("click",function(c){return x(e),h(c.stopPropagation())}),i(2,"div",101)(3,"div",112),_(),i(4,"svg",113),g(5,"path",56),n()(),w(),i(6,"h3",105),o(7,"Confirmar activaci\xF3n"),n(),i(8,"div",106)(9,"p",107),o(10),n()(),i(11,"div",108)(12,"div",7)(13,"button",114),b("click",function(){x(e);let c=p();return h(c.activarPaquete())}),u(14,ni,2,0,"span",110)(15,ri,2,0,"span",110),n(),i(16,"button",111),b("click",function(){x(e);let c=p();return h(c.cancelarActivacion())}),o(17," Cancelar "),n()()()()()()}if(a&2){let e=p();s(10),m(' \xBFEst\xE1s seguro de que deseas activar el paquete "',e.paquete==null?null:e.paquete.nombre,'"? Estar\xE1 disponible para nuevas asignaciones. '),s(3),l("disabled",e.procesandoAccion),s(),l("ngIf",!e.procesandoAccion),s(),l("ngIf",e.procesandoAccion),s(),l("disabled",e.procesandoAccion)}}var he=class a{constructor(t,e,r){this.route=t;this.router=e;this.paquetesService=r;this.paqueteId=parseInt(this.route.snapshot.paramMap.get("id")||"0")}paquete=null;cargando=!1;error=null;paqueteId;mostrarModalEliminar=!1;mostrarModalActivar=!1;procesandoAccion=!1;ahorroTotal=0;preciosPorSesion={base:0,final:0};ngOnInit(){this.paqueteId>0?this.cargarPaquete():this.error="ID de paquete inv\xE1lido"}cargarPaquete(){return v(this,null,function*(){this.cargando=!0,this.error=null;try{this.paquete=yield this.paquetesService.obtenerPaquetePorId(this.paqueteId),this.paquete?this.calcularDatosAdicionales():this.error="Paquete no encontrado"}catch(t){console.error("Error cargando paquete:",t),this.error="Error al cargar el paquete. Por favor, intenta de nuevo."}finally{this.cargando=!1}})}calcularDatosAdicionales(){this.paquete&&(this.ahorroTotal=this.paquete.precio-(this.paquete.precio_final||this.paquete.precio),this.preciosPorSesion={base:this.paquete.precio/this.paquete.cantidad_sesiones,final:(this.paquete.precio_final||this.paquete.precio)/this.paquete.cantidad_sesiones})}irAEditar(){this.router.navigate(["/paquetes/editar",this.paqueteId])}volver(){this.router.navigate(["/paquetes"])}irALista(){this.router.navigate(["/paquetes"])}irAAsignar(){this.router.navigate(["/paquetes/asignar"],{queryParams:{paquete_id:this.paqueteId}})}verAsignaciones(){this.router.navigate(["/paquetes/asignaciones"],{queryParams:{paquete_id:this.paqueteId}})}confirmarEliminacion(){this.mostrarModalEliminar=!0}cancelarEliminacion(){this.mostrarModalEliminar=!1}eliminarPaquete(){return v(this,null,function*(){if(this.paquete){this.procesandoAccion=!0;try{let t=yield this.paquetesService.eliminarPaquete(this.paquete.id);t.success?(this.mostrarMensajeExito("Paquete eliminado exitosamente"),setTimeout(()=>{this.volver()},1500)):this.mostrarMensajeError(t.message)}catch(t){console.error("Error eliminando paquete:",t),this.mostrarMensajeError("Error al eliminar el paquete")}finally{this.procesandoAccion=!1,this.cancelarEliminacion()}}})}confirmarActivacion(){this.mostrarModalActivar=!0}cancelarActivacion(){this.mostrarModalActivar=!1}activarPaquete(){return v(this,null,function*(){if(this.paquete){this.procesandoAccion=!0;try{let t=yield this.paquetesService.activarPaquete(this.paquete.id);t.success?(this.mostrarMensajeExito("Paquete activado exitosamente"),yield this.cargarPaquete()):this.mostrarMensajeError(t.message)}catch(t){console.error("Error activando paquete:",t),this.mostrarMensajeError("Error al activar el paquete")}finally{this.procesandoAccion=!1,this.cancelarActivacion()}}})}toggleStatus(){return v(this,null,function*(){this.paquete&&(this.paquete.status===1?this.confirmarEliminacion():this.confirmarActivacion())})}formatearPrecio(t){return this.paquetesService.formatearPrecio(t)}formatearFecha(t){return new Date(t).toLocaleDateString("es-GT",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}formatearFechaCorta(t){return new Date(t).toLocaleDateString("es-GT",{year:"numeric",month:"short",day:"numeric"})}obtenerClaseStatus(t){return t===1?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"}obtenerTextoStatus(t){return t===1?"Activo":"Inactivo"}obtenerIconoStatus(t){return t===1?"\u2713":"\u2717"}obtenerClaseTipo(t){return t==="terapia"?"bg-blue-100 text-blue-800 border-blue-200":"bg-yellow-100 text-yellow-800 border-yellow-200"}obtenerIconoTipo(t){return t==="terapia"?"\u{1F3E5}":"\u{1F4AA}"}get tieneDescuento(){return(this.paquete?.descuento||0)>0}get esPaqueteActivo(){return this.paquete?.status===1}get porcentajeAhorro(){return!this.paquete||this.paquete.precio===0?0:this.ahorroTotal/this.paquete.precio*100}get informacionResumida(){return this.paquete?{sesiones:this.paquete.cantidad_sesiones,tipo:this.paquete.tipo,precio_base:this.paquete.precio,precio_final:this.paquete.precio_final||this.paquete.precio,descuento:this.paquete.descuento,precio_por_sesion:this.preciosPorSesion.final,ahorro_total:this.ahorroTotal,estado:this.paquete.status}:null}duplicarPaquete(){this.paquete&&this.router.navigate(["/paquetes/crear"],{queryParams:{duplicar:this.paquete.id,nombre:`Copia de ${this.paquete.nombre}`,tipo:this.paquete.tipo,precio:this.paquete.precio,sesiones:this.paquete.cantidad_sesiones,descuento:this.paquete.descuento}})}imprimirPaquete(){window.print()}exportarPaquete(){if(!this.paquete)return;let t=z(D({},this.paquete),{precio_por_sesion:this.preciosPorSesion.final,ahorro_total:this.ahorroTotal,exportado_en:new Date().toISOString()}),e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",`paquete_${this.paquete.id}_${this.paquete.nombre.replace(/\s+/g,"_")}.json`),document.body.appendChild(r),r.click(),r.remove()}compartirPaquete(){this.paquete&&(navigator.share?navigator.share({title:this.paquete.nombre,text:`${this.paquete.descripcion||"Paquete de "+this.paquete.tipo}`,url:window.location.href}).catch(console.error):navigator.clipboard.writeText(window.location.href).then(()=>{this.mostrarMensajeExito("Enlace copiado al portapapeles")}))}mostrarMensajeExito(t){console.log("\xC9xito:",t)}mostrarMensajeError(t){console.error("Error:",t),this.error=t}mostrarMensajeInfo(t){console.info("Info:",t)}limpiarError(){this.error=null}ngOnDestroy(){this.cancelarEliminacion(),this.cancelarActivacion()}static \u0275fac=function(e){return new(e||a)(P(Y),P(A),P(V))};static \u0275cmp=T({type:a,selectors:[["app-paquete-detalle"]],standalone:!1,decls:25,vars:7,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"mb-6"],[1,"flex","items-center","gap-2","text-sm","text-gray-500","mb-2"],["routerLink","/paquetes",1,"hover:text-blue-600"],[1,"flex","justify-between","items-start"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","space-x-3"],[1,"bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-lg","transition-colors",3,"click"],["class","bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",3,"click",4,"ngIf"],["class","bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",3,"click",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",4,"ngIf"],["class","space-y-6",4,"ngIf"],["class","fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",3,"click",4,"ngIf"],[1,"bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-center","py-12"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"mt-2","text-gray-600"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg"],[1,"flex","items-center","justify-between"],[1,"text-red-500","hover:text-red-700",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"space-y-6"],[1,"bg-white","rounded-lg","shadow-sm","border","p-6"],[1,"flex","justify-between","items-start","mb-6"],[1,"flex-1"],[1,"flex","items-center","gap-3","mb-2"],[1,"text-2xl","font-bold","text-gray-900"],[1,"px-3","py-1","text-sm","font-semibold","rounded-full","border"],["class","text-gray-600 text-lg",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-blue-50","p-4","rounded-lg","border","border-blue-200"],[1,"flex","items-center"],[1,"flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"ml-4"],[1,"text-sm","font-medium","text-blue-900"],[1,"text-2xl","font-bold","text-blue-600"],[1,"bg-gray-50","p-4","rounded-lg","border","border-gray-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-2xl","font-bold","text-gray-600"],[1,"bg-yellow-50","p-4","rounded-lg","border","border-yellow-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"],[1,"text-sm","font-medium","text-yellow-900"],[1,"text-2xl","font-bold","text-yellow-600"],[1,"bg-green-50","p-4","rounded-lg","border","border-green-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","font-medium","text-green-900"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"text-center","p-4","bg-gray-50","rounded-lg"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-center","p-4","bg-green-50","rounded-lg"],[1,"text-sm","text-green-700","mb-1"],[1,"text-xl","font-bold","text-green-600"],["class","text-center p-4 bg-blue-50 rounded-lg",4,"ngIf"],["class","text-center p-4 bg-gray-50 rounded-lg",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-gray-900"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],["class","bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg flex items-center gap-3 transition-colors w-full",3,"click",4,"ngIf"],[1,"bg-purple-600","hover:bg-purple-700","text-white","px-4","py-3","rounded-lg","flex","items-center","gap-3","transition-colors","w-full",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"text-left"],[1,"font-medium"],[1,"text-sm","opacity-90"],["class","bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg flex items-center gap-3 transition-colors w-full",3,"click",4,"ngIf"],[1,"flex","flex-wrap","gap-3"],[1,"bg-gray-600","hover:bg-gray-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"bg-indigo-600","hover:bg-indigo-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],[1,"bg-yellow-600","hover:bg-yellow-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"],[1,"text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors",3,"click"],["class","w-4 h-4","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"text-gray-600","text-lg"],[1,"text-center","p-4","bg-blue-50","rounded-lg"],[1,"text-sm","text-blue-700","mb-1"],[1,"text-xl","font-bold","text-blue-600"],[1,"text-gray-600"],[1,"bg-green-600","hover:bg-green-700","text-white","px-4","py-3","rounded-lg","flex","items-center","gap-3","transition-colors","w-full",3,"click"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-3","rounded-lg","flex","items-center","gap-3","transition-colors","w-full",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L5.636 5.636"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","overflow-y-auto","h-full","w-full","z-50",3,"click"],[1,"relative","top-20","mx-auto","p-5","border","w-96","shadow-lg","rounded-md","bg-white",3,"click"],[1,"mt-3","text-center"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"],[1,"text-lg","leading-6","font-medium","text-gray-900","mt-4"],[1,"mt-2","px-7","py-3"],[1,"text-sm","text-gray-500"],[1,"items-center","px-4","py-3"],[1,"px-4","py-2","bg-red-500","text-white","text-base","font-medium","rounded-md","w-full","shadow-sm","hover:bg-red-700","focus:outline-none","focus:ring-2","focus:ring-red-300","disabled:opacity-50",3,"click","disabled"],[4,"ngIf"],[1,"px-4","py-2","bg-gray-500","text-white","text-base","font-medium","rounded-md","w-full","shadow-sm","hover:bg-gray-700","focus:outline-none","focus:ring-2","focus:ring-gray-300","disabled:opacity-50",3,"click","disabled"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-green-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"h-6","w-6","text-green-600"],[1,"px-4","py-2","bg-green-500","text-white","text-base","font-medium","rounded-md","w-full","shadow-sm","hover:bg-green-700","focus:outline-none","focus:ring-2","focus:ring-green-300","disabled:opacity-50",3,"click","disabled"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),o(4,"Paquetes"),n(),i(5,"span"),o(6,"/"),n(),i(7,"span"),o(8,"Detalle"),n()(),i(9,"div",4)(10,"div")(11,"h1",5),o(12,"Detalle del Paquete"),n(),i(13,"p",6),o(14,"Informaci\xF3n completa del paquete seleccionado"),n()(),i(15,"div",7)(16,"button",8),b("click",function(){return r.volver()}),o(17," Volver "),n(),u(18,Bt,4,0,"button",9)(19,Nt,4,0,"button",10),n()()(),u(20,Gt,4,0,"div",11)(21,Ht,7,1,"div",12)(22,Zt,122,29,"div",13),n(),u(23,ii,18,5,"div",14)(24,ai,18,5,"div",14)),e&2&&(s(18),l("ngIf",r.paquete&&r.paquete.status===1),s(),l("ngIf",r.paquete&&r.paquete.status===1),s(),l("ngIf",r.cargando),s(),l("ngIf",r.error&&!r.cargando),s(),l("ngIf",r.paquete&&!r.cargando&&!r.error),s(),l("ngIf",r.mostrarModalEliminar),s(),l("ngIf",r.mostrarModalActivar))},dependencies:[R,K,B],styles:[".detalle-container[_ngcontent-%COMP%]{min-height:100vh;--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.detalle-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-bottom-width:1px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.breadcrumb-nav[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;align-items:center;gap:.5rem;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.breadcrumb-link[_ngcontent-%COMP%]{cursor:pointer;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.breadcrumb-link[_ngcontent-%COMP%]:hover{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.breadcrumb-separator[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.header-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}@media (min-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start;justify-content:space-between}}.header-info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:1.875rem;line-height:2.25rem;font-weight:700;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.header-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.header-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;border-radius:9999px;border-width:1px;padding:.25rem .75rem;font-size:.875rem;line-height:1.25rem;font-weight:600}.badge-tipo[_ngcontent-%COMP%], .badge-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.tipo-icon[_ngcontent-%COMP%], .status-icon[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}.info-card[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-radius:.5rem;border-width:1px;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.5rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.card-title[_ngcontent-%COMP%]{margin-bottom:1rem;border-bottom-width:1px;--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));padding-bottom:.5rem;font-size:1.125rem;line-height:1.75rem;font-weight:600;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.card-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:1.5rem}@media (min-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width: 1024px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,minmax(0,1fr))}}.stat-card[_ngcontent-%COMP%]{border-radius:.5rem;border-width:1px;padding:1rem;transition:transform .2s ease,box-shadow .2s ease}.stat-card[_ngcontent-%COMP%]:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));box-shadow:0 10px 25px #0000001a}.stat-card.blue[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.stat-card.gray[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.stat-card.yellow[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.stat-card.green[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.stat-card.red[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.stat-header[_ngcontent-%COMP%]{margin-bottom:.5rem;display:flex;align-items:center;gap:.75rem}.stat-icon[_ngcontent-%COMP%]{height:2rem;width:2rem;flex-shrink:0}.stat-icon.blue[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.stat-icon.gray[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.stat-icon.yellow[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.stat-icon.green[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.stat-icon.red[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.25rem;font-size:.875rem;line-height:1.25rem;font-weight:500}.stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;line-height:2rem;font-weight:700}.stat-content.blue[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(30 58 138 / var(--tw-text-opacity, 1))}.stat-content.blue[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.stat-content.gray[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.stat-content.gray[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.stat-content.yellow[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(113 63 18 / var(--tw-text-opacity, 1))}.stat-content.yellow[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(202 138 4 / var(--tw-text-opacity, 1))}.stat-content.green[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(20 83 45 / var(--tw-text-opacity, 1))}.stat-content.green[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.stat-content.red[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(127 29 29 / var(--tw-text-opacity, 1))}.stat-content.red[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.cost-analysis[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:1.5rem}@media (min-width: 768px){.cost-analysis[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}.cost-item[_ngcontent-%COMP%]{border-radius:.5rem;padding:1rem;text-align:center}.cost-item.gray[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.cost-item.green[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.cost-item.blue[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.cost-label[_ngcontent-%COMP%]{margin-bottom:.25rem;font-size:.875rem;line-height:1.25rem}.cost-label.gray[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.cost-label.green[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.cost-label.blue[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.cost-value[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.75rem;font-weight:700}.cost-value.gray[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.cost-value.green[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.cost-value.blue[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.system-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:1.5rem}@media (min-width: 768px){.system-info[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}.info-item[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.info-label[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-weight:500;--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.info-value[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.no-discount[_ngcontent-%COMP%]{border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1));padding:1rem;text-align:center}.no-discount[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:1rem}@media (min-width: 768px){.actions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}@media (min-width: 1024px){.actions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}}.action-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;border-radius:.5rem;padding:.5rem 1rem;font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.action-button[_ngcontent-%COMP%]:hover{--tw-scale-x: 1.05;--tw-scale-y: 1.05;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.action-button.primary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.primary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.action-button.success[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.success[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity, 1))}.action-button.warning[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(202 138 4 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.warning[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(161 98 7 / var(--tw-bg-opacity, 1))}.action-button.danger[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.danger[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.action-button.secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.secondary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.action-button.purple[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.purple[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}.action-button.indigo[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.action-button.indigo[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(67 56 202 / var(--tw-bg-opacity, 1))}.action-icon[_ngcontent-%COMP%]{height:1rem;width:1rem}.loading-container[_ngcontent-%COMP%]{padding-top:3rem;padding-bottom:3rem;text-align:center}.loading-spinner[_ngcontent-%COMP%]{margin-bottom:1rem;display:inline-block;height:2rem;width:2rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;border-radius:9999px;border-bottom-width:2px;--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.loading-text[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.error-container[_ngcontent-%COMP%]{margin-bottom:1.5rem;border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1));padding:.75rem 1rem;--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.error-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.error-message[_ngcontent-%COMP%]{flex:1 1 0%}.error-close[_ngcontent-%COMP%]{margin-left:1rem;cursor:pointer;--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.error-close[_ngcontent-%COMP%]:hover{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:50;display:flex;height:100%;width:100%;align-items:center;justify-content:center;overflow-y:auto;background-color:rgb(75 85 99 / var(--tw-bg-opacity, 1));--tw-bg-opacity: .5;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.modal-container[_ngcontent-%COMP%]{position:relative;margin-left:1rem;margin-right:1rem;width:100%;max-width:28rem;border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 1rem}.modal-icon[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-bottom:1rem;display:flex;height:3rem;width:3rem;align-items:center;justify-content:center;border-radius:9999px}.modal-icon.danger[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.modal-icon.success[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.modal-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem}.modal-icon.danger[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.modal-icon.success[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.modal-title[_ngcontent-%COMP%]{text-align:center;font-size:1.125rem;font-weight:500;line-height:1.5rem;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.modal-body[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem;padding-bottom:1rem}.modal-text[_ngcontent-%COMP%]{text-align:center;font-size:.875rem;line-height:1.25rem;--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.modal-footer[_ngcontent-%COMP%]{padding:.5rem 1.5rem 1.5rem}.modal-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;gap:.75rem}@media (min-width: 768px){.modal-actions[_ngcontent-%COMP%]{flex-direction:row}}.modal-button[_ngcontent-%COMP%]{flex:1 1 0%;border-radius:.375rem;padding:.5rem 1rem;font-size:.875rem;line-height:1.25rem;font-weight:500;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.modal-button[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-offset-width: 2px}.modal-button.primary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.modal-button.primary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.modal-button.primary[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}.modal-button.secondary[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1));--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.modal-button.secondary[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(156 163 175 / var(--tw-bg-opacity, 1))}.modal-button.secondary[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(107 114 128 / var(--tw-ring-opacity, 1))}.modal-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.5}.paquete-description[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem;line-height:1.625;--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.actions-grid[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}@media (min-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}.cost-analysis[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}.modal-container[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}.modal-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .3s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.info-card[_ngcontent-%COMP%]:hover{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition:box-shadow .3s ease}.action-button[_ngcontent-%COMP%]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-offset-width: 2px}.action-button.primary[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.action-button.success[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(34 197 94 / var(--tw-ring-opacity, 1))}.action-button.warning[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(234 179 8 / var(--tw-ring-opacity, 1))}.action-button.danger[_ngcontent-%COMP%]:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(239 68 68 / var(--tw-ring-opacity, 1))}@media print{.header-actions[_ngcontent-%COMP%], .modal-overlay[_ngcontent-%COMP%], .action-button[_ngcontent-%COMP%]{display:none}.info-card[_ngcontent-%COMP%]{border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}}"]})};var ee=class a{constructor(t){this.supabaseService=t}obtenerUsuarios(){return v(this,null,function*(){try{console.log("\u{1F50D} Iniciando carga de usuarios...");let{data:t,error:e}=yield this.supabaseService.client.from("profiles").select("id, nombre, email, telefono, fecha_nacimiento, status").eq("status",1).order("nombre");if(e)throw console.error("\u274C Error obteniendo usuarios:",e),e;return console.log("\u2705 Usuarios cargados:",t?.length||0),console.log("\u{1F4CB} Usuarios:",t),t||[]}catch(t){throw console.error("\u{1F4A5} Error en obtenerUsuarios:",t),t}})}buscarUsuarios(t){return v(this,null,function*(){try{if(console.log("\u{1F50D} Buscando usuarios con t\xE9rmino:",t),!t||t.trim().length===0)return yield this.obtenerUsuarios();let e=t.trim(),{data:r,error:c}=yield this.supabaseService.client.from("profiles").select("id, nombre, email, telefono, fecha_nacimiento, status").eq("status",1).or(`nombre.ilike.%${e}%,email.ilike.%${e}%`).order("nombre").limit(50);if(c)throw console.error("\u274C Error buscando usuarios:",c),c;return console.log("\u2705 Usuarios encontrados:",r?.length||0),r||[]}catch(e){throw console.error("\u{1F4A5} Error en buscarUsuarios:",e),e}})}verificarTablaUsuarios(){return v(this,null,function*(){try{console.log("\u{1F50D} Verificando tabla profiles...");let{data:t,error:e}=yield this.supabaseService.client.from("profiles").select("count",{count:"exact"}).limit(1);if(e){console.error("\u274C Error de conexi\xF3n a la tabla profiles:",e);return}console.log("\u2705 Conexi\xF3n exitosa a profiles");let{data:r,error:c}=yield this.supabaseService.client.from("profiles").select("*").limit(1);if(c){console.error("\u274C Error obteniendo muestra:",c);return}console.log("\u{1F4CB} Estructura de la tabla profiles:",r);let{count:d,error:f}=yield this.supabaseService.client.from("profiles").select("*",{count:"exact",head:!0});f||console.log(`\u{1F4CA} Total de registros en profiles: ${d}`)}catch(t){console.error("\u{1F4A5} Error verificando tabla usuarios:",t)}})}obtenerTerapeutas(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.client.from("profiles").select("id, nombre, email").eq("status",1).eq("rol","terapeuta").order("nombre");if(e)throw console.error("Error obteniendo terapeutas:",e),e;return t||[]}catch(t){return console.error("Error en obtenerTerapeutas:",t),[]}})}asignarPaqueteAUsuario(t){return v(this,null,function*(){try{if(!t.usuario_id||!t.paquete_id)return{success:!1,message:"Usuario y paquete son requeridos"};let{data:e,error:r}=yield this.supabaseService.client.rpc("asignar_paquete_a_usuario",{p_usuario_id:t.usuario_id,p_paquete_id:t.paquete_id,p_fecha_inicio:t.fecha_inicio,p_precio_pagado:t.precio_pagado,p_terapeuta_id:t.terapeuta_asignado||null,p_metodo_pago:t.metodo_pago||null});return r?(console.error("Error asignando paquete:",r),{success:!1,message:r.message||"Error al asignar el paquete",error:r}):(t.notas_administrativas&&e&&(yield this.actualizarNotasAsignacion(e,t.notas_administrativas)),{success:!0,message:"Paquete asignado exitosamente",data:e})}catch(e){return console.error("Error en asignarPaqueteAUsuario:",e),{success:!1,message:"Error interno al asignar el paquete",error:e}}})}actualizarNotasAsignacion(t,e){return v(this,null,function*(){yield this.supabaseService.client.from("usuario_paquetes").update({notas_administrativas:e}).eq("id",t)})}obtenerAsignaciones(t){return v(this,null,function*(){try{let e=this.supabaseService.client.from("usuario_paquetes").select(`
          *,
          usuario:profiles!usuario_paquetes_usuario_id_fkey (
            id, nombre, email, telefono
          ),
          paquete:paquetes!usuario_paquetes_paquete_id_fkey (
            id, nombre, tipo, cantidad_sesiones, precio, precio_final
          ),
          terapeuta:profiles!usuario_paquetes_terapeuta_asignado_fkey (
            id, nombre, email
          )
        `);t&&(t.usuario_id&&(e=e.eq("usuario_id",t.usuario_id)),t.paquete_id&&(e=e.eq("paquete_id",t.paquete_id)),t.estado&&(e=e.eq("estado",t.estado)),t.terapeuta_id&&(e=e.eq("terapeuta_asignado",t.terapeuta_id)),t.fecha_inicio&&(e=e.gte("fecha_inicio",t.fecha_inicio)),t.fecha_fin&&(e=e.lte("fecha_fin",t.fecha_fin)));let{data:r,error:c}=yield e.order("created_at",{ascending:!1});if(c)throw console.error("Error obteniendo asignaciones:",c),c;return r||[]}catch(e){throw console.error("Error en obtenerAsignaciones:",e),e}})}obtenerAsignacionesPorUsuario(t){return v(this,null,function*(){return yield this.obtenerAsignaciones({usuario_id:t})})}obtenerAsignacionesPorPaquete(t){return v(this,null,function*(){return yield this.obtenerAsignaciones({paquete_id:t})})}obtenerSeguimientoPaquete(t){return v(this,null,function*(){try{let{data:e,error:r}=yield this.supabaseService.client.from("paquete_seguimiento").select(`
          *,
          rutina:rutinas (id, nombre, descripcion),
          terapia:terapias (id, nombre, descripcion)
        `).eq("usuario_paquete_id",t).order("fecha_programada");if(r)throw console.error("Error obteniendo seguimiento:",r),r;return e||[]}catch(e){throw console.error("Error en obtenerSeguimientoPaquete:",e),e}})}actualizarEstadoAsignacion(t,e){return v(this,null,function*(){try{let{data:r,error:c}=yield this.supabaseService.client.from("usuario_paquetes").update({estado:e}).eq("id",t).select().single();return c?(console.error("Error actualizando estado:",c),{success:!1,message:"Error al actualizar el estado",error:c}):{success:!0,message:"Estado actualizado exitosamente",data:r}}catch(r){return console.error("Error en actualizarEstadoAsignacion:",r),{success:!1,message:"Error interno al actualizar el estado",error:r}}})}obtenerEstadisticasAsignaciones(){return v(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.client.from("usuario_paquetes").select("estado").then(({data:r,error:c})=>{if(c)throw c;return{data:{total:r?.length||0,activos:r?.filter(f=>f.estado==="activo").length||0,completados:r?.filter(f=>f.estado==="completado").length||0,pausados:r?.filter(f=>f.estado==="pausado").length||0,cancelados:r?.filter(f=>f.estado==="cancelado").length||0},error:null}});if(e)throw console.error("Error obteniendo estad\xEDsticas:",e),e;return t}catch(t){return console.error("Error en obtenerEstadisticasAsignaciones:",t),{total:0,activos:0,completados:0,pausados:0,cancelados:0}}})}validarAsignacion(t,e){return v(this,null,function*(){try{let r=yield this.obtenerAsignaciones({usuario_id:t,estado:"activo"}),{data:c,error:d}=yield this.supabaseService.client.from("paquetes").select("tipo, nombre").eq("id",e).single();if(d)return{esValida:!1,mensaje:"Paquete no encontrado"};let f=r.filter(k=>k.paquete?.tipo===c.tipo);return f.length>0?{esValida:!1,mensaje:`El usuario ya tiene un paquete de ${c.tipo} activo`,paquetesActivos:f}:{esValida:!0,mensaje:"La asignaci\xF3n es v\xE1lida"}}catch(r){return console.error("Error en validarAsignacion:",r),{esValida:!1,mensaje:"Error al validar la asignaci\xF3n"}}})}calcularPrecioFinal(t,e){return t-t*e/100}formatearPrecio(t){return new Intl.NumberFormat("es-GT",{style:"currency",currency:"GTQ"}).format(t)}calcularDiasRestantes(t){let e=new Date,c=new Date(t).getTime()-e.getTime();return Math.ceil(c/(1e3*3600*24))}obtenerEstadoTexto(t){return{activo:"Activo",pausado:"Pausado",completado:"Completado",cancelado:"Cancelado"}[t]||t}obtenerClaseEstado(t){return{activo:"bg-green-100 text-green-800",pausado:"bg-yellow-100 text-yellow-800",completado:"bg-blue-100 text-blue-800",cancelado:"bg-red-100 text-red-800"}[t]||"bg-gray-100 text-gray-800"}static \u0275fac=function(e){return new(e||a)(le(Z))};static \u0275prov=se({token:a,factory:a.\u0275fac,providedIn:"root"})};function oi(a,t){if(a&1&&(i(0,"div",50)(1,"div",51),_(),i(2,"svg",52),g(3,"path",53),n(),w(),i(4,"pre",54),o(5),n()()()),a&2){let e=p();s(5),y(e.error)}}function si(a,t){if(a&1&&(i(0,"div",55)(1,"div",51),_(),i(2,"svg",52),g(3,"path",56),n(),w(),i(4,"pre",54),o(5),n()()()),a&2){let e=p();s(5),y(e.exito)}}function ci(a,t){if(a&1&&(i(0,"option",17),o(1),O(2,"titlecase"),n()),a&2){let e=t.$implicit,r=p();l("value",e.id),s(),qe(" ",e.nombre," - ",j(2,5,e.tipo)," (",e.cantidad_sesiones," sesiones) - ",r.formatearPrecio(e.precio_final||e.precio)," ")}}function li(a,t){if(a&1&&(i(0,"div")(1,"span",59),o(2,"Descuento:"),n(),i(3,"span",60),o(4),n()()),a&2){let e=p(2);s(4),m("",e.paqueteSeleccionado==null?null:e.paqueteSeleccionado.descuento,"%")}}function di(a,t){if(a&1&&(i(0,"p",63),o(1),n()),a&2){let e=p(2);s(),m(" ",e.paqueteSeleccionado==null?null:e.paqueteSeleccionado.descripcion," ")}}function pi(a,t){if(a&1&&(i(0,"div",57)(1,"h4",44),o(2),n(),i(3,"div",58)(4,"div")(5,"span",59),o(6,"Tipo:"),n(),i(7,"span",60),o(8),O(9,"titlecase"),n()(),i(10,"div")(11,"span",59),o(12,"Sesiones:"),n(),i(13,"span",60),o(14),n()(),i(15,"div")(16,"span",59),o(17,"Precio base:"),n(),i(18,"span",60),o(19),n()(),u(20,li,5,1,"div",61),n(),u(21,di,2,1,"p",62),n()),a&2){let e=p();s(2),y(e.paqueteSeleccionado==null?null:e.paqueteSeleccionado.nombre),s(6),y(j(9,6,e.paqueteSeleccionado==null?null:e.paqueteSeleccionado.tipo)),s(6),y(e.paqueteSeleccionado==null?null:e.paqueteSeleccionado.cantidad_sesiones),s(5),y(e.formatearPrecio((e.paqueteSeleccionado==null?null:e.paqueteSeleccionado.precio)||0)),s(),l("ngIf",((e.paqueteSeleccionado==null?null:e.paqueteSeleccionado.descuento)||0)>0),s(),l("ngIf",e.paqueteSeleccionado==null?null:e.paqueteSeleccionado.descripcion)}}function ui(a,t){a&1&&(i(0,"div",64),o(1," Buscando usuarios... "),n())}function mi(a,t){a&1&&(i(0,"div",65)(1,"p"),o(2,"No se encontraron usuarios"),n()())}function gi(a,t){if(a&1&&(i(0,"p",72),o(1),n()),a&2){let e=p().$implicit;s(),m(" ",e.telefono," ")}}function bi(a,t){if(a&1){let e=q();i(0,"label",66)(1,"input",67),b("change",function(){let c=x(e).$implicit,d=p();return h(d.toggleUsuario(c.id))}),n(),i(2,"div",68)(3,"p",69),o(4),n(),i(5,"p",70),o(6),n(),u(7,gi,2,1,"p",71),n()()}if(a&2){let e=t.$implicit,r=p();L("bg-blue-50",r.isUsuarioSelected(e.id)),s(),l("checked",r.isUsuarioSelected(e.id)),s(3),m(" ",e.nombre," "),s(2),m(" ",e.email," "),s(),l("ngIf",e.telefono)}}function vi(a,t){if(a&1&&(i(0,"option",17),o(1),n()),a&2){let e=t.$implicit;l("value",e.value),s(),m(" ",e.label," ")}}function fi(a,t){if(a&1&&(i(0,"option",17),o(1),n()),a&2){let e=t.$implicit;l("value",e.id),s(),I(" ",e.nombre," - ",e.email," ")}}function _i(a,t){if(a&1&&(i(0,"div",90),o(1),n()),a&2){let e=t.$implicit;s(),m(" ",e," ")}}function xi(a,t){if(a&1&&(i(0,"div",91)(1,"span"),o(2),n(),i(3,"span"),o(4),n()()),a&2){let e=p(2);s(2),m("Descuento (",e.resumenAsignacion.descuento,"%):"),s(2),m("-",e.formatearPrecio(e.resumenAsignacion.ahorro_por_usuario),"")}}function hi(a,t){if(a&1&&(i(0,"div",92)(1,"span"),o(2,"Ahorro total:"),n(),i(3,"span"),o(4),n()()),a&2){let e=p(2);s(4),y(e.formatearPrecio(e.resumenAsignacion.ahorro_total))}}function yi(a,t){if(a&1&&(i(0,"div",13)(1,"h3",14),o(2,"Resumen de Asignaci\xF3n"),n(),i(3,"div",73)(4,"div",74)(5,"span",75),o(6,"Paquete:"),n(),i(7,"span",76),o(8),n()(),i(9,"div",74)(10,"span",75),o(11,"Tipo:"),n(),i(12,"span",77),o(13),n()(),i(14,"div",74)(15,"span",75),o(16,"Sesiones:"),n(),i(17,"span",76),o(18),n()(),i(19,"div",74)(20,"span",75),o(21,"Usuarios seleccionados:"),n(),i(22,"span",76),o(23),n()(),i(24,"div",74)(25,"span",75),o(26,"Fecha inicio:"),n(),i(27,"span",76),o(28),O(29,"date"),n()(),g(30,"hr",78),i(31,"div",79)(32,"span",80),o(33,"Usuarios:"),n(),i(34,"div",81),u(35,_i,2,1,"div",82),n()(),g(36,"hr",78),i(37,"div",83)(38,"div",74)(39,"span",75),o(40,"Precio base por usuario:"),n(),i(41,"span"),o(42),n()(),u(43,xi,5,2,"div",84),i(44,"div",85)(45,"span"),o(46,"Precio final por usuario:"),n(),i(47,"span"),o(48),n()(),g(49,"hr",86),i(50,"div",87)(51,"span"),o(52,"Total a cobrar:"),n(),i(53,"span",88),o(54),n()(),u(55,hi,5,1,"div",89),n()()()),a&2){let e=p();s(8),y(e.resumenAsignacion.paquete),s(5),y(e.resumenAsignacion.tipo),s(5),y(e.resumenAsignacion.sesiones),s(5),y(e.resumenAsignacion.usuarios_count),s(5),y(Ce(29,11,e.resumenAsignacion.fecha_inicio,"dd/MM/yyyy")),s(7),l("ngForOf",e.resumenAsignacion.usuarios_nombres),s(7),y(e.formatearPrecio(e.resumenAsignacion.precio_base)),s(),l("ngIf",e.resumenAsignacion.descuento>0),s(5),y(e.formatearPrecio(e.resumenAsignacion.precio_final)),s(6),y(e.formatearPrecio(e.resumenAsignacion.precio_total)),s(),l("ngIf",e.resumenAsignacion.ahorro_total>0)}}function wi(a,t){a&1&&(_(),i(0,"svg",93),g(1,"circle",94)(2,"path",95),n())}var ae=class a{constructor(t,e,r,c){this.router=t;this.route=e;this.asignacionService=r;this.paquetesService=c}cargando=!1;buscandoUsuarios=!1;error=null;exito=null;usuarios=[];paquetes=[];terapeutas=[];asignacionForm={paquete_id:null,usuarios_seleccionados:[],fecha_inicio:this.obtenerFechaHoy(),precio_pagado:0,descuento_aplicado:0,terapeuta_asignado:null,metodo_pago:"efectivo",notas_administrativas:""};terminoBusquedaUsuarios="";paqueteSeleccionado=null;precioFinal=0;descuentoAplicado=0;metodosPago=[{value:"efectivo",label:"Efectivo"},{value:"tarjeta",label:"Tarjeta de Cr\xE9dito"},{value:"transferencia",label:"Transferencia Bancaria"},{value:"deposito",label:"Dep\xF3sito Bancario"},{value:"otro",label:"Otro"}];ngOnInit(){this.inicializarDatos(),this.verificarParametrosURL()}inicializarDatos(){return v(this,null,function*(){this.cargando=!0;try{yield Promise.all([this.cargarPaquetes(),this.cargarTerapeutas(),this.cargarUsuarios()])}catch(t){console.error("Error inicializando datos:",t),this.mostrarError("Error al cargar los datos iniciales")}finally{this.cargando=!1}})}verificarParametrosURL(){let t=this.route.snapshot.queryParams.paquete_id;t&&(this.asignacionForm.paquete_id=parseInt(t),this.onPaqueteSeleccionado(this.asignacionForm.paquete_id))}cargarPaquetes(){return v(this,null,function*(){try{this.paquetes=yield this.paquetesService.obtenerPaquetes({status:1})}catch(t){console.error("Error cargando paquetes:",t),this.paquetes=[]}})}cargarTerapeutas(){return v(this,null,function*(){try{this.terapeutas=yield this.asignacionService.obtenerTerapeutas()}catch(t){console.error("Error cargando terapeutas:",t),this.terapeutas=[]}})}cargarUsuarios(){return v(this,null,function*(){try{console.log("\u{1F680} Iniciando carga inicial de usuarios..."),yield this.asignacionService.verificarTablaUsuarios(),this.usuarios=yield this.asignacionService.obtenerUsuarios(),console.log("\u2705 Usuarios cargados en componente:",this.usuarios.length),this.usuarios.length===0&&(console.warn("\u26A0\uFE0F No se encontraron usuarios activos"),this.mostrarError("No se encontraron usuarios activos en el sistema"))}catch(t){console.error("\u{1F4A5} Error cargando usuarios en componente:",t),this.usuarios=[],this.mostrarError("Error al cargar la lista de usuarios. Verifique su conexi\xF3n.")}})}buscarUsuarios(){return v(this,null,function*(){if(this.terminoBusquedaUsuarios.length<2){yield this.cargarUsuarios();return}this.buscandoUsuarios=!0;try{this.usuarios=yield this.asignacionService.buscarUsuarios(this.terminoBusquedaUsuarios)}catch(t){console.error("Error buscando usuarios:",t),this.usuarios=[]}finally{this.buscandoUsuarios=!1}})}isUsuarioSelected(t){return this.asignacionForm.usuarios_seleccionados.includes(t)}toggleUsuario(t){let e=this.asignacionForm.usuarios_seleccionados.indexOf(t);e>-1?this.asignacionForm.usuarios_seleccionados.splice(e,1):this.asignacionForm.usuarios_seleccionados.push(t),console.log("Usuarios seleccionados:",this.asignacionForm.usuarios_seleccionados)}selectAllUsuarios(){this.asignacionForm.usuarios_seleccionados=this.usuarios.map(t=>t.id)}clearAllUsuarios(){this.asignacionForm.usuarios_seleccionados=[]}trackByUserId(t,e){return e.id}onPaqueteSeleccionado(t){this.paqueteSeleccionado=this.paquetes.find(e=>e.id===t)||null,this.paqueteSeleccionado&&(this.asignacionForm.precio_pagado=this.paqueteSeleccionado.precio_final||this.paqueteSeleccionado.precio,this.asignacionForm.descuento_aplicado=this.paqueteSeleccionado.descuento||0,this.calcularPrecioFinal())}onDescuentoChange(){this.calcularPrecioFinal()}calcularPrecioFinal(){if(!this.paqueteSeleccionado)return;let t=this.paqueteSeleccionado.precio,e=this.asignacionForm.descuento_aplicado||0;this.precioFinal=this.asignacionService.calcularPrecioFinal(t,e),this.descuentoAplicado=t-this.precioFinal,this.asignacionForm.precio_pagado=this.precioFinal}onSubmit(){return v(this,null,function*(){if(!this.asignacionForm.paquete_id){this.mostrarError("Debe seleccionar un paquete");return}if(this.asignacionForm.usuarios_seleccionados.length===0){this.mostrarError("Debe seleccionar al menos un usuario");return}if(!this.asignacionForm.fecha_inicio){this.mostrarError("Debe especificar la fecha de inicio");return}this.cargando=!0,this.limpiarMensajes();try{let t=[],e=0,r=0;for(let d of this.asignacionForm.usuarios_seleccionados){let f=this.usuarios.find(k=>k.id===d);try{let k={usuario_id:d,paquete_id:this.asignacionForm.paquete_id,fecha_inicio:this.asignacionForm.fecha_inicio,precio_pagado:this.asignacionForm.precio_pagado,descuento_aplicado:this.asignacionForm.descuento_aplicado,metodo_pago:this.asignacionForm.metodo_pago,notas_administrativas:this.asignacionForm.notas_administrativas},J=yield this.asignacionService.asignarPaqueteAUsuario(k);J.success?(e++,t.push(`\u2705 ${f?.nombre||`Usuario ${d}`}: Asignado exitosamente`)):(r++,t.push(`\u274C ${f?.nombre||`Usuario ${d}`}: ${J.message}`))}catch{r++,t.push(`\u274C ${f?.nombre||`Usuario ${d}`}: Error interno`)}}let c=`
        Proceso completado:
        \u2022 Exitosos: ${e}
        \u2022 Con errores: ${r}
        
        Detalles:
        ${t.join(`
`)}
      `;e>0?(this.mostrarExito(c),r===0&&setTimeout(()=>{this.router.navigate(["/paquetes/asignaciones"])},3e3)):this.mostrarError(c)}catch(t){console.error("Error en proceso de asignaci\xF3n:",t),this.mostrarError("Error interno al procesar las asignaciones")}finally{this.cargando=!1}})}obtenerFechaHoy(){return new Date().toISOString().split("T")[0]}formatearPrecio(t){return this.asignacionService.formatearPrecio(t)}volver(){this.router.navigate(["/paquetes"])}irAAsignaciones(){this.router.navigate(["/paquetes/asignaciones"])}mostrarError(t){this.error=t,this.exito=null}mostrarExito(t){this.exito=t,this.error=null}limpiarMensajes(){this.error=null,this.exito=null}get usuariosSeleccionadosNombres(){return this.asignacionForm.usuarios_seleccionados.map(t=>this.usuarios.find(r=>r.id===t)?.nombre||`Usuario ${t}`)}get resumenAsignacion(){return!this.paqueteSeleccionado||this.asignacionForm.usuarios_seleccionados.length===0?null:{paquete:this.paqueteSeleccionado.nombre,tipo:this.paqueteSeleccionado.tipo,sesiones:this.paqueteSeleccionado.cantidad_sesiones,usuarios_count:this.asignacionForm.usuarios_seleccionados.length,usuarios_nombres:this.usuariosSeleccionadosNombres,precio_base:this.paqueteSeleccionado.precio,descuento:this.asignacionForm.descuento_aplicado||0,precio_final:this.precioFinal,precio_total:this.precioFinal*this.asignacionForm.usuarios_seleccionados.length,ahorro_por_usuario:this.descuentoAplicado,ahorro_total:this.descuentoAplicado*this.asignacionForm.usuarios_seleccionados.length,fecha_inicio:this.asignacionForm.fecha_inicio}}get mostrarResumen(){return!!(this.paqueteSeleccionado&&this.asignacionForm.usuarios_seleccionados.length>0)}static \u0275fac=function(e){return new(e||a)(P(A),P(Y),P(ee),P(V))};static \u0275cmp=T({type:a,selectors:[["app-asignar-paquete"]],standalone:!1,decls:110,vars:25,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"mb-6"],[1,"flex","items-center","gap-2","text-sm","text-gray-500","mb-2"],["routerLink","/paquetes",1,"hover:text-blue-600"],[1,"flex","justify-between","items-start"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","space-x-3"],[1,"bg-gray-500","hover:bg-gray-600","text-white","px-4","py-2","rounded-lg","transition-colors",3,"click"],["class","bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",4,"ngIf"],["class","bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-6",4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","shadow-sm","border","p-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["class","mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",4,"ngIf"],[1,"mb-4"],["type","text","placeholder","Escribe nombre o email...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","input","ngModel"],["class","mt-2 text-sm text-gray-500",4,"ngIf"],[1,"flex","justify-between","items-center","mb-3"],[1,"block","text-sm","font-medium","text-gray-700"],[1,"text-gray-500"],[1,"flex","space-x-2"],["type","button",1,"text-xs","text-blue-600","hover:text-blue-800",3,"click"],["type","button",1,"text-xs","text-gray-600","hover:text-gray-800",3,"click"],[1,"border","border-gray-300","rounded-md","p-3","max-h-64","overflow-y-auto"],["class","text-center py-4 text-gray-500",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2"],["class","flex items-center p-2 hover:bg-gray-50 rounded cursor-pointer",3,"bg-blue-50",4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","date",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","number","min","0","max","100","step","0.01","placeholder","0.00",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","input","ngModel"],["type","number","min","0","step","0.01","readonly","",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"md:col-span-2"],["rows","3","placeholder","Notas internas sobre esta asignaci\xF3n...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"lg:col-span-1"],[1,"sticky","top-6"],["class","bg-white rounded-lg shadow-sm border p-6",4,"ngIf"],[1,"bg-blue-50","rounded-lg","border","border-blue-200","p-4","mt-6"],[1,"font-medium","text-blue-900","mb-2"],[1,"text-sm","text-blue-800","space-y-1"],[1,"flex","justify-end","space-x-4","pt-6","border-t","mt-6"],["type","button",1,"px-6","py-2","border","border-gray-300","text-gray-700","rounded-lg","hover:bg-gray-50","transition-colors",3,"click"],["type","button",1,"px-6","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed","flex","items-center",3,"click","disabled"],["class","animate-spin -ml-1 mr-3 h-5 w-5 text-white","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"bg-red-50","border","border-red-200","text-red-700","px-4","py-3","rounded-lg","mb-6"],[1,"flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","mr-2"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"whitespace-pre-wrap"],[1,"bg-green-50","border","border-green-200","text-green-700","px-4","py-3","rounded-lg","mb-6"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"mt-4","p-4","bg-blue-50","rounded-lg","border","border-blue-200"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-blue-700"],[1,"ml-1"],[4,"ngIf"],["class","text-blue-800 mt-2",4,"ngIf"],[1,"text-blue-800","mt-2"],[1,"mt-2","text-sm","text-gray-500"],[1,"text-center","py-4","text-gray-500"],[1,"flex","items-center","p-2","hover:bg-gray-50","rounded","cursor-pointer"],["type","checkbox",1,"h-4","w-4","text-blue-600","focus:ring-blue-500","border-gray-300","rounded",3,"change","checked"],[1,"ml-3","min-w-0","flex-1"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"text-xs","text-gray-500","truncate"],["class","text-xs text-gray-500",4,"ngIf"],[1,"text-xs","text-gray-500"],[1,"space-y-3"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"font-medium"],[1,"font-medium","capitalize"],[1,"my-3"],[1,"mb-3"],[1,"text-sm","font-medium","text-gray-700"],[1,"mt-1","max-h-32","overflow-y-auto"],["class","text-sm text-gray-600 py-1 px-2 bg-gray-50 rounded mb-1",4,"ngFor","ngForOf"],[1,"space-y-2"],["class","flex justify-between text-green-600",4,"ngIf"],[1,"flex","justify-between","font-medium"],[1,"my-2"],[1,"flex","justify-between","text-lg","font-bold","text-gray-900","pt-2","border-t"],[1,"text-blue-600"],["class","flex justify-between text-sm text-green-600",4,"ngIf"],[1,"text-sm","text-gray-600","py-1","px-2","bg-gray-50","rounded","mb-1"],[1,"flex","justify-between","text-green-600"],[1,"flex","justify-between","text-sm","text-green-600"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),o(4,"Paquetes"),n(),i(5,"span"),o(6,"/"),n(),i(7,"span"),o(8,"Asignar a Usuarios"),n()(),i(9,"div",4)(10,"div")(11,"h1",5),o(12,"Asignar Paquete a Usuarios"),n(),i(13,"p",6),o(14,"Asigna un paquete a m\xFAltiples usuarios y genera el seguimiento autom\xE1tico"),n()(),i(15,"div",7)(16,"button",8),b("click",function(){return r.volver()}),o(17," Cancelar "),n()()()(),u(18,oi,6,1,"div",9)(19,si,6,1,"div",10),i(20,"div",11)(21,"div",12)(22,"div",13)(23,"h3",14),o(24,"1. Seleccionar Paquete"),n(),i(25,"div")(26,"label",15),o(27," Paquete * "),n(),i(28,"select",16),M("ngModelChange",function(d){return E(r.asignacionForm.paquete_id,d)||(r.asignacionForm.paquete_id=d),d}),b("change",function(){return r.onPaqueteSeleccionado(r.asignacionForm.paquete_id)}),i(29,"option",17),o(30,"Seleccionar paquete..."),n(),u(31,ci,3,7,"option",18),n()(),u(32,pi,22,8,"div",19),n(),i(33,"div",13)(34,"h3",14),o(35,"2. Seleccionar Usuarios"),n(),i(36,"div",20)(37,"label",15),o(38," Buscar Usuarios "),n(),i(39,"input",21),M("ngModelChange",function(d){return E(r.terminoBusquedaUsuarios,d)||(r.terminoBusquedaUsuarios=d),d}),b("input",function(){return r.buscarUsuarios()}),n(),u(40,ui,2,0,"div",22),n(),i(41,"div",23)(42,"label",24),o(43," Usuarios * "),i(44,"span",25),o(45),n()(),i(46,"div",26)(47,"button",27),b("click",function(){return r.selectAllUsuarios()}),o(48," Seleccionar todos "),n(),i(49,"button",28),b("click",function(){return r.clearAllUsuarios()}),o(50," Limpiar selecci\xF3n "),n()()(),i(51,"div",29),u(52,mi,3,0,"div",30),i(53,"div",31),u(54,bi,8,6,"label",32),n()()(),i(55,"div",13)(56,"h3",14),o(57,"3. Configuraci\xF3n de la Asignaci\xF3n"),n(),i(58,"div",33)(59,"div")(60,"label",15),o(61," Fecha de Inicio * "),n(),i(62,"input",34),M("ngModelChange",function(d){return E(r.asignacionForm.fecha_inicio,d)||(r.asignacionForm.fecha_inicio=d),d}),n()(),i(63,"div")(64,"label",15),o(65," M\xE9todo de Pago * "),n(),i(66,"select",35),M("ngModelChange",function(d){return E(r.asignacionForm.metodo_pago,d)||(r.asignacionForm.metodo_pago=d),d}),u(67,vi,2,2,"option",18),n()(),i(68,"div")(69,"label",15),o(70," Descuento Adicional (%) "),n(),i(71,"input",36),M("ngModelChange",function(d){return E(r.asignacionForm.descuento_aplicado,d)||(r.asignacionForm.descuento_aplicado=d),d}),b("input",function(){return r.onDescuentoChange()}),n()(),i(72,"div")(73,"label",15),o(74," Precio por Usuario * "),n(),i(75,"input",37),M("ngModelChange",function(d){return E(r.asignacionForm.precio_pagado,d)||(r.asignacionForm.precio_pagado=d),d}),n()(),i(76,"div",38)(77,"label",15),o(78," Terapeuta Asignado (Opcional) "),n(),i(79,"select",35),M("ngModelChange",function(d){return E(r.asignacionForm.terapeuta_asignado,d)||(r.asignacionForm.terapeuta_asignado=d),d}),i(80,"option",17),o(81,"Sin terapeuta asignado"),n(),u(82,fi,2,3,"option",18),n()(),i(83,"div",38)(84,"label",15),o(85," Notas Administrativas "),n(),i(86,"textarea",39),M("ngModelChange",function(d){return E(r.asignacionForm.notas_administrativas,d)||(r.asignacionForm.notas_administrativas=d),d}),n()()()()(),i(87,"div",40)(88,"div",41),u(89,yi,56,14,"div",42),i(90,"div",43)(91,"h4",44),o(92,"\u2139\uFE0F Informaci\xF3n Importante"),n(),i(93,"ul",45)(94,"li"),o(95,"\u2022 Se crear\xE1 autom\xE1ticamente el seguimiento para cada usuario"),n(),i(96,"li"),o(97,"\u2022 Las sesiones se programar\xE1n seg\xFAn el tipo de paquete"),n(),i(98,"li"),o(99,"\u2022 Cada usuario podr\xE1 ver su progreso individual"),n(),i(100,"li"),o(101,"\u2022 Se notificar\xE1 al terapeuta asignado (si aplica)"),n(),i(102,"li"),o(103,"\u2022 El precio se aplicar\xE1 por separado a cada usuario"),n()()()()()(),i(104,"div",46)(105,"button",47),b("click",function(){return r.volver()}),o(106," Cancelar "),n(),i(107,"button",48),b("click",function(){return r.onSubmit()}),u(108,wi,3,0,"svg",49),o(109),n()()()),e&2&&(s(18),l("ngIf",r.error),s(),l("ngIf",r.exito),s(9),S("ngModel",r.asignacionForm.paquete_id),s(),l("value",null),s(2),l("ngForOf",r.paquetes),s(),l("ngIf",r.paqueteSeleccionado),s(7),S("ngModel",r.terminoBusquedaUsuarios),s(),l("ngIf",r.buscandoUsuarios),s(5),m("(",r.asignacionForm.usuarios_seleccionados.length," seleccionados)"),s(7),l("ngIf",r.usuarios.length===0&&!r.buscandoUsuarios),s(2),l("ngForOf",r.usuarios)("ngForTrackBy",r.trackByUserId),s(8),S("ngModel",r.asignacionForm.fecha_inicio),s(4),S("ngModel",r.asignacionForm.metodo_pago),s(),l("ngForOf",r.metodosPago),s(4),S("ngModel",r.asignacionForm.descuento_aplicado),s(4),S("ngModel",r.asignacionForm.precio_pagado),s(4),S("ngModel",r.asignacionForm.terapeuta_asignado),s(),l("value",null),s(2),l("ngForOf",r.terapeutas),s(4),S("ngModel",r.asignacionForm.notas_administrativas),s(3),l("ngIf",r.mostrarResumen),s(18),l("disabled",!r.mostrarResumen||r.cargando),s(),l("ngIf",r.cargando),s(),m(" ",r.cargando?"Asignando...":"Asignar a "+(r.asignacionForm.usuarios_seleccionados.length||0)+" Usuario(s)"," "))},dependencies:[U,R,$,W,N,pe,H,G,me,ue,X,K,B,Ee],encapsulation:2})};function Pi(a,t){if(a&1&&(i(0,"option",39),o(1),n()),a&2){let e=t.$implicit;l("value",e.value),s(),m(" ",e.label," ")}}var oe=class a{constructor(t,e,r){this.asignacionService=t;this.router=e;this.route=r}asignaciones=[];asignacionesFiltradas=[];cargando=!1;error=null;filtros={};terminoBusqueda="";estadosDisponibles=[{value:"",label:"Todos los estados"},{value:"activo",label:"Activos"},{value:"pausado",label:"Pausados"},{value:"completado",label:"Completados"},{value:"cancelado",label:"Cancelados"}];paginaActual=1;itemsPorPagina=10;totalPaginas=0;estadisticas={total:0,activos:0,completados:0,pausados:0,cancelados:0};ngOnInit(){this.verificarParametrosURL(),this.cargarAsignaciones(),this.cargarEstadisticas()}verificarParametrosURL(){let t=this.route.snapshot.queryParams.paquete_id,e=this.route.snapshot.queryParams.usuario_id,r=this.route.snapshot.queryParams.estado;t&&(this.filtros.paquete_id=parseInt(t)),e&&(this.filtros.usuario_id=parseInt(e)),r&&(this.filtros.estado=r)}cargarAsignaciones(){return v(this,null,function*(){this.cargando=!0,this.error=null;try{this.asignaciones=yield this.asignacionService.obtenerAsignaciones(this.filtros),this.aplicarFiltrosYPaginacion()}catch(t){console.error("Error cargando asignaciones:",t),this.error="Error al cargar las asignaciones. Por favor, intenta de nuevo."}finally{this.cargando=!1}})}cargarEstadisticas(){return v(this,null,function*(){try{this.estadisticas=yield this.asignacionService.obtenerEstadisticasAsignaciones()}catch(t){console.error("Error cargando estad\xEDsticas:",t)}})}aplicarFiltrosYPaginacion(){let t=[...this.asignaciones];if(this.terminoBusqueda){let e=this.terminoBusqueda.toLowerCase();t=t.filter(r=>r.usuario?.nombre.toLowerCase().includes(e)||r.usuario?.email.toLowerCase().includes(e)||r.paquete?.nombre.toLowerCase().includes(e))}this.asignacionesFiltradas=t,this.calcularPaginacion()}onFiltroChange(){this.paginaActual=1,this.cargarAsignaciones()}onBusquedaChange(){this.paginaActual=1,this.aplicarFiltrosYPaginacion()}limpiarFiltros(){this.filtros={},this.terminoBusqueda="",this.cargarAsignaciones()}calcularPaginacion(){this.totalPaginas=Math.ceil(this.asignacionesFiltradas.length/this.itemsPorPagina)}get asignacionesPaginadas(){let t=(this.paginaActual-1)*this.itemsPorPagina,e=t+this.itemsPorPagina;return this.asignacionesFiltradas.slice(t,e)}irAPagina(t){t>=1&&t<=this.totalPaginas&&(this.paginaActual=t)}get paginasArray(){return Array.from({length:this.totalPaginas},(t,e)=>e+1)}verDetalle(t){this.router.navigate(["/paquetes/asignaciones/detalle",t])}verSeguimiento(t){this.router.navigate(["/paquetes/seguimiento",t])}nuevaAsignacion(){this.router.navigate(["/paquetes/asignar"])}cambiarEstado(t,e){return v(this,null,function*(){this.cargando=!0;try{let r=yield this.asignacionService.actualizarEstadoAsignacion(t.id,e);r.success?(this.mostrarMensajeExito(`Estado cambiado a ${e} exitosamente`),yield this.cargarAsignaciones(),yield this.cargarEstadisticas()):this.mostrarMensajeError(r.message)}catch(r){console.error("Error cambiando estado:",r),this.mostrarMensajeError("Error al cambiar el estado")}finally{this.cargando=!1}})}formatearPrecio(t){return this.asignacionService.formatearPrecio(t)}formatearFecha(t){return new Date(t).toLocaleDateString("es-GT")}calcularProgreso(t){return t.sesiones_totales===0?0:Math.round(t.sesiones_utilizadas/t.sesiones_totales*100)}calcularDiasRestantes(t){return this.asignacionService.calcularDiasRestantes(t)}obtenerTextoEstado(t){return this.asignacionService.obtenerEstadoTexto(t)}obtenerClaseEstado(t){return this.asignacionService.obtenerClaseEstado(t)}obtenerClaseProgreso(t){return t>=80?"bg-green-500":t>=50?"bg-yellow-500":t>=20?"bg-orange-500":"bg-red-500"}obtenerIconoTipo(t){return t==="terapia"?"\u{1F3E5}":"\u{1F4AA}"}exportarAsignaciones(){let t=this.asignacionesFiltradas.map(c=>({usuario:c.usuario?.nombre,email:c.usuario?.email,paquete:c.paquete?.nombre,tipo:c.paquete?.tipo,estado:c.estado,fecha_inicio:c.fecha_inicio,fecha_fin:c.fecha_fin,sesiones_utilizadas:c.sesiones_utilizadas,sesiones_totales:c.sesiones_totales,progreso:this.calcularProgreso(c)+"%",precio_pagado:c.precio_pagado,terapeuta:c.terapeuta?.nombre||"Sin asignar"})),e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("download",`asignaciones_paquetes_${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(r),r.click(),r.remove(),this.mostrarMensajeExito("Asignaciones exportadas exitosamente")}mostrandoMenuEstado=null;toggleEstadoMenu(t){this.mostrandoMenuEstado=this.mostrandoMenuEstado===t?null:t}ngAfterViewInit(){document.addEventListener("click",t=>{this.mostrandoMenuEstado!==null&&(t.target.closest(".relative")||(this.mostrandoMenuEstado=null))})}Math=Math;mostrarMensajeExito(t){console.log("\xC9xito:",t)}mostrarMensajeError(t){console.error("Error:",t),this.error=t}limpiarError(){this.error=null}static \u0275fac=function(e){return new(e||a)(P(ee),P(A),P(Y))};static \u0275cmp=T({type:a,selectors:[["app-asignaciones-lista"]],standalone:!1,decls:83,vars:8,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"flex","space-x-3"],[1,"bg-green-600","hover:bg-green-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","flex","items-center","gap-2","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"grid","grid-cols-1","md:grid-cols-5","gap-4","mb-6"],[1,"bg-white","p-4","rounded-lg","shadow-sm","border"],[1,"flex","items-center"],[1,"flex-shrink-0"],[1,"w-8","h-8","bg-blue-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"ml-3"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-lg","font-bold","text-blue-600"],[1,"w-8","h-8","bg-green-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-lg","font-bold","text-green-600"],[1,"w-8","h-8","bg-yellow-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-lg","font-bold","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"w-8","h-8","bg-red-100","rounded-full","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"text-lg","font-bold","text-red-600"],[1,"bg-white","p-4","rounded-lg","shadow-sm","border","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","placeholder","Usuario, email o paquete...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","input","ngModel"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),o(4,"Asignaciones de Paquetes"),n(),i(5,"p",3),o(6,"Gestiona las asignaciones de paquetes a usuarios"),n()(),i(7,"div",4)(8,"button",5),b("click",function(){return r.exportarAsignaciones()}),_(),i(9,"svg",6),g(10,"path",7),n(),o(11," Exportar "),n(),w(),i(12,"button",8),b("click",function(){return r.nuevaAsignacion()}),_(),i(13,"svg",6),g(14,"path",9),n(),o(15," Nueva Asignaci\xF3n "),n()()(),w(),i(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",13)(20,"div",14),_(),i(21,"svg",15),g(22,"path",16),n()()(),w(),i(23,"div",17)(24,"p",18),o(25,"Total"),n(),i(26,"p",19),o(27),n()()()(),i(28,"div",11)(29,"div",12)(30,"div",13)(31,"div",20),_(),i(32,"svg",21),g(33,"path",22),n()()(),w(),i(34,"div",17)(35,"p",18),o(36,"Activos"),n(),i(37,"p",23),o(38),n()()()(),i(39,"div",11)(40,"div",12)(41,"div",13)(42,"div",24),_(),i(43,"svg",25),g(44,"path",26),n()()(),w(),i(45,"div",17)(46,"p",18),o(47,"Pausados"),n(),i(48,"p",27),o(49),n()()()(),i(50,"div",11)(51,"div",12)(52,"div",13)(53,"div",14),_(),i(54,"svg",15),g(55,"path",28),n()()(),w(),i(56,"div",17)(57,"p",18),o(58,"Completados"),n(),i(59,"p",19),o(60),n()()()(),i(61,"div",11)(62,"div",12)(63,"div",13)(64,"div",29),_(),i(65,"svg",30),g(66,"path",31),n()()(),w(),i(67,"div",17)(68,"p",18),o(69,"Cancelados"),n(),i(70,"p",32),o(71),n()()()()(),i(72,"div",33)(73,"div",34)(74,"div")(75,"label",35),o(76,"Buscar"),n(),i(77,"input",36),M("ngModelChange",function(d){return E(r.terminoBusqueda,d)||(r.terminoBusqueda=d),d}),b("input",function(){return r.onBusquedaChange()}),n()(),i(78,"div")(79,"label",35),o(80,"Estado"),n(),i(81,"select",37),M("ngModelChange",function(d){return E(r.filtros.estado,d)||(r.filtros.estado=d),d}),b("change",function(){return r.onFiltroChange()}),u(82,Pi,2,2,"option",38),n()()()()()),e&2&&(s(27),y(r.estadisticas.total),s(11),y(r.estadisticas.activos),s(11),y(r.estadisticas.pausados),s(11),y(r.estadisticas.completados),s(11),y(r.estadisticas.cancelados),s(6),S("ngModel",r.terminoBusqueda),s(4),S("ngModel",r.filtros.estado),s(),l("ngForOf",r.estadosDisponibles))},dependencies:[U,$,W,N,H,G,X],encapsulation:2})};var qi=[{path:"",component:ve},{path:"crear",component:re},{path:"editar/:id",component:re},{path:"detalle/:id",component:he},{path:"asignar",component:ae},{path:"asignar/:id",component:ae},{path:"asignaciones",component:oe},{path:"asignaciones/detalle/:id",component:oe},{path:"**",redirectTo:""}],ye=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=de({type:a});static \u0275inj=ce({imports:[ne.forChild(qi),ne]})};var Le=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=de({type:a});static \u0275inj=ce({imports:[ke,Ve,je,ne,ye]})};export{Le as PaquetesModule};
