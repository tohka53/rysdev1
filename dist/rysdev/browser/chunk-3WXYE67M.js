import{A as x,Aa as de,B as n,Ba as ue,C as i,Ca as pe,D as _,Da as me,E as z,Ea as _e,F as B,G as I,H as b,I as p,Ja as ge,N,O as l,P as q,Pa as O,Q as f,R as $,S as ee,Ta as F,U as L,Ua as w,V as G,W as Y,aa as T,ba as A,d as R,ea as W,f as E,ga as te,h,ha as re,ia as oe,j as P,k as y,o as Z,qa as ae,r as s,ra as ie,s as j,sa as M,t as K,ta as ne,ua as se,v as g,wa as ce,x as d,xa as le,z as X}from"./chunk-RRQC6EZP.js";import{a as U,b as D,g as u}from"./chunk-6AOLKZEJ.js";var k=class a{constructor(t,e){this.supabaseService=t;this.authService=e}userMenuSubject=new R([]);userMenu$=this.userMenuSubject.asObservable();userPermissionsSubject=new R([]);userPermissions$=this.userPermissionsSubject.asObservable();canAccessRoute(t){return u(this,null,function*(){let e=this.authService.getCurrentUser();return e?.id?(console.log("\u{1F50D} Verificando acceso a:",t,"Usuario ID:",e.id,"Perfil:",e.id_perfil),["/dashboard","/login","/register"].includes(t)?(console.log("\u2705 Ruta p\xFAblica, acceso permitido"),!0):t.includes("/paquetes")?yield this.checkPaquetesPermission(t,e.id):yield this.hasPermission(t,"view")):(console.log("\u274C Usuario no autenticado"),!1)})}checkPaquetesPermission(t,e){return u(this,null,function*(){try{console.log("\u{1F50D} Verificando permisos de paquetes para ruta:",t);let{data:r,error:o}=yield this.supabaseService.client.rpc("check_paquetes_permission",{p_user_id:e,p_route:t,p_permission_code:"view"});if(o)return console.error("\u274C Error llamando check_paquetes_permission:",o),this.checkPaquetesPermissionByProfile(t);let c=r===!0;return console.log(`${c?"\u2705":"\u274C"} Acceso a paquetes:`,c),c}catch(r){return console.error("\u274C Error en checkPaquetesPermission:",r),this.checkPaquetesPermissionByProfile(t)}})}checkPaquetesPermissionByProfile(t){let e=this.authService.getCurrentUser();if(!e||!e.id_perfil)return console.log("\u274C Usuario sin perfil v\xE1lido"),!1;let r=e.id_perfil;if(console.log("\u{1F527} Fallback: verificando por perfil",r,"para ruta:",t),r===1)return console.log("\u2705 Admin: acceso completo"),!0;if(r===3)return t.includes("/eliminar")||t.includes("/delete")?(console.log("\u274C Supervisor: no puede eliminar"),!1):(console.log("\u2705 Supervisor: acceso permitido"),!0);if(r===2){let c=["/paquetes","/paquetes/detalle","/paquetes/calendario"].some(C=>t===C||t.startsWith(C+"/")),v=["/crear","/editar","/asignar","/asignaciones"].some(C=>t.includes(C)),S=c&&!v;return console.log(`${S?"\u2705":"\u274C"} Usuario: ${S?"puede acceder":"acceso denegado"} a ${t}`),S}return console.log("\u274C Perfil no reconocido:",r),!1}hasPermission(t,e){return u(this,null,function*(){let r=this.authService.getCurrentUser();if(!r?.id)return!1;if(t.includes("/paquetes"))return yield this.checkPaquetesPermission(t,r.id);try{let{data:o,error:c}=yield this.supabaseService.client.rpc("user_has_permission",{p_user_id:r.id,p_route:t,p_permission_code:e});return c?(console.error("Error verificando permiso (funci\xF3n no existe):",c),!0):o===!0}catch(o){return console.error("Error en hasPermission:",o),!0}})}canViewPaquete(t){return u(this,null,function*(){let e=this.authService.getCurrentUser();if(!e?.id)return!1;try{let{data:r,error:o}=yield this.supabaseService.client.rpc("user_can_view_paquete",{p_user_id:e.id,p_paquete_id:t});return o?(console.error("Error verificando acceso a paquete:",o),!1):r===!0}catch(r){return console.error("Error en canViewPaquete:",r),!1}})}canAccessAsignaciones(){return u(this,null,function*(){let t=this.authService.getCurrentUser();if(!t?.id)return!1;try{let{data:e,error:r}=yield this.supabaseService.client.rpc("user_can_access_asignaciones",{p_user_id:t.id});return r?(console.error("Error verificando acceso a asignaciones:",r),!1):e===!0}catch(e){return console.error("Error en canAccessAsignaciones:",e),!1}})}loadUserMenu(){return u(this,null,function*(){let t=this.authService.getCurrentUser();if(!t?.id)return this.userMenuSubject.next([]),[];try{let{data:e,error:r}=yield this.supabaseService.client.rpc("get_user_menu",{p_user_id:t.id});if(r)return console.error("Error obteniendo men\xFA del usuario:",r),this.userMenuSubject.next([]),[];let o=this.buildMenuTree(e||[]);return this.userMenuSubject.next(o),o}catch(e){return console.error("Error en loadUserMenu:",e),this.userMenuSubject.next([]),[]}})}loadUserPermissions(){return u(this,null,function*(){let t=this.authService.getCurrentUser();if(!t?.id)return this.userPermissionsSubject.next([]),[];try{let{data:e,error:r}=yield this.supabaseService.client.from("v_permisos_usuario").select("*").eq("user_id",t.id).eq("granted",!0);if(r)return console.error("Error obteniendo permisos del usuario:",r),this.userPermissionsSubject.next([]),[];let o=e||[];return this.userPermissionsSubject.next(o),o}catch(e){return console.error("Error en loadUserPermissions:",e),this.userPermissionsSubject.next([]),[]}})}getCurrentUserMenu(){return u(this,null,function*(){return yield this.loadUserMenu()})}hasAnyPermission(t,e){return u(this,null,function*(){for(let r of e)if(yield this.hasPermission(t,r))return!0;return!1})}getUserPermissions(){return u(this,null,function*(){return yield this.loadUserPermissions()})}buildMenuTree(t){let e=new Map,r=[];return t.forEach(o=>{let c={id_modulo:o.modulo_id||o.id_modulo,nombre:o.nombre,descripcion:o.descripcion,icono:o.icono,ruta:o.ruta,orden:o.orden,es_padre:o.es_padre,modulo_padre_id:o.modulo_padre_id,permisos:o.permisos||[],children:[],expanded:!1};e.set(c.id_modulo,c)}),e.forEach(o=>{if(o.modulo_padre_id===null)r.push(o);else{let c=e.get(o.modulo_padre_id);c&&(c.children||(c.children=[]),c.children.push(o))}}),this.sortMenuItems(r),r}sortMenuItems(t){t.sort((e,r)=>e.orden-r.orden),t.forEach(e=>{e.children&&e.children.length>0&&this.sortMenuItems(e.children)})}canView(t){return u(this,null,function*(){return yield this.canAccessRoute(t)})}canCreate(t){return u(this,null,function*(){if(t.includes("/paquetes")){let e=this.authService.getCurrentUser();return e&&e.id_perfil?[1,3].includes(e.id_perfil):!1}return yield this.hasPermission(t,"create")})}canEdit(t){return u(this,null,function*(){if(t.includes("/paquetes")){let e=this.authService.getCurrentUser();return e&&e.id_perfil?[1,3].includes(e.id_perfil):!1}return yield this.hasPermission(t,"edit")})}canDelete(t){return u(this,null,function*(){if(t.includes("/paquetes")){let e=this.authService.getCurrentUser();return e&&e.id_perfil?e.id_perfil===1:!1}return yield this.hasPermission(t,"delete")})}canExport(t){return u(this,null,function*(){return yield this.hasPermission(t,"export")})}canAdmin(t){return u(this,null,function*(){return yield this.hasPermission(t,"admin")})}clearUserData(){this.userMenuSubject.next([]),this.userPermissionsSubject.next([])}refreshUserData(){return u(this,null,function*(){yield Promise.all([this.loadUserMenu(),this.loadUserPermissions()])})}getUserMenu(){return this.userMenu$}getUserPermissionsObservable(){return this.userPermissions$}createDefaultMenu(){let t=[{id_modulo:1,nombre:"Dashboard",descripcion:"Panel principal",icono:"fas fa-tachometer-alt",ruta:"/dashboard",orden:1,es_padre:!1,modulo_padre_id:null,permisos:["view"],expanded:!1}];return this.userMenuSubject.next(t),t}static \u0275fac=function(e){return new(e||a)(h(F),h(w))};static \u0275prov=E({token:a,factory:a.\u0275fac,providedIn:"root"})};var fe=class a{constructor(t,e,r){this.authService=t;this.permissionsService=e;this.router=r}canActivate(t,e){return u(this,null,function*(){if(!this.authService.isAuthenticated())return console.log("Usuario no autenticado, redirigiendo a login"),this.router.navigate(["/login"]),!1;if(!this.authService.getCurrentUser())return console.log("No se pudo obtener el usuario actual"),this.router.navigate(["/login"]),!1;let o=e.url;if(console.log("Verificando acceso a ruta:",o),["/dashboard","/login","/register"].includes(o))return console.log("Ruta p\xFAblica, acceso permitido"),!0;try{return(yield this.permissionsService.canAccessRoute(o))?(console.log("Acceso autorizado a:",o),!0):(console.log("Usuario sin permisos para acceder a:",o),this.router.navigate(["/dashboard"],{queryParams:{error:"no_permissions",attempted_route:o}}),!1)}catch(m){return console.error("Error verificando permisos:",m),!0}})}static \u0275fac=function(e){return new(e||a)(h(w),h(k),h(O))};static \u0275prov=E({token:a,factory:a.\u0275fac,providedIn:"root"})},be=class a{constructor(t,e,r){this.authService=t;this.permissionsService=e;this.router=r}canActivate(t,e){return u(this,null,function*(){if(!this.authService.isAuthenticated())return this.router.navigate(["/login"]),!1;let r=t.data.permissions,o=e.url;if(!r||r.length===0)return yield this.permissionsService.canAccessRoute(o);try{return(yield this.permissionsService.hasAnyPermission(o,r))?!0:(console.log("Permisos insuficientes para:",o,"Requeridos:",r),this.router.navigate(["/dashboard"],{queryParams:{error:"insufficient_permissions",required:r.join(","),attempted_route:o}}),!1)}catch(c){return console.error("Error en PermissionGuard:",c),!1}})}static \u0275fac=function(e){return new(e||a)(h(w),h(k),h(O))};static \u0275prov=E({token:a,factory:a.\u0275fac,providedIn:"root"})},ve=class a{constructor(t,e){this.authService=t;this.router=e}canActivate(t,e){if(!this.authService.isAuthenticated())return this.router.navigate(["/login"]),!1;let r=this.authService.getCurrentUser(),o=t.data.profiles;if(!o||o.length===0)return!0;let c=r?.id_perfil;return c?o.includes(c)?!0:(console.log("Perfil insuficiente:",c,"Requeridos:",o),this.router.navigate(["/dashboard"],{queryParams:{error:"insufficient_role",required:o.join(",")}}),!1):(console.log("Usuario sin perfil asignado"),this.router.navigate(["/dashboard"],{queryParams:{error:"no_profile"}}),!1)}static \u0275fac=function(e){return new(e||a)(h(w),h(O))};static \u0275prov=E({token:a,factory:a.\u0275fac,providedIn:"root"})};var he=[{value:"transferencia",label:"Transferencia Bancaria",icono:"fa-university"},{value:"deposito",label:"Dep\xF3sito Bancario",icono:"fa-piggy-bank"},{value:"tarjeta_credito",label:"Tarjeta de Cr\xE9dito",icono:"fa-credit-card"},{value:"tarjeta_debito",label:"Tarjeta de D\xE9bito",icono:"fa-credit-card"}],ht=[{value:"pendiente",label:"Pendiente de Validaci\xF3n",color:"warning"},{value:"validada",label:"Validada",color:"success"},{value:"rechazada",label:"Rechazada",color:"danger"},{value:"cancelada",label:"Cancelada",color:"secondary"}],xe=["Banco Industrial","Banco G&T Continental","Banrural","Banco de Am\xE9rica Central (BAC)","Banco Agromercantil","Banco Promerica","Banco Inmobiliario","Banco Internacional","Bantrab","Vivibanco","Otro"];var V=class a{constructor(t,e){this.supabaseService=t;this.authService=e}obtenerPaquetesParaCompra(){return u(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.from("paquetes").select(`
          id,
          nombre,
          descripcion,
          tipo,
          precio,
          cantidad_sesiones,
          imagen_url,
          status
        `).eq("status",1).order("tipo",{ascending:!0}).order("precio",{ascending:!0});if(e)throw e;return yield Promise.all((t||[]).map(o=>u(this,null,function*(){let c=yield this.obtenerContenidoPaquete(o.id,o.tipo),m=yield this.authService.getCurrentUser(),v=m?.id?yield this.calcularMejorDescuento(m.id,o.id):null;return D(U({},o),{precio_con_descuento:v?v.precio_final:o.precio,ahorro:v?o.precio-v.precio_final:0,contenido_detalle:c,mejor_descuento:v})})))}catch(t){throw console.error("Error obteniendo paquetes para compra:",t),t}})}obtenerPaqueteParaCompraPorId(t){return u(this,null,function*(){try{let{data:e,error:r}=yield this.supabaseService.supabase.from("paquetes").select(`
          id,
          nombre,
          descripcion,
          tipo,
          precio,
          cantidad_sesiones,
         
          imagen_url,
          status
        `).eq("id",t).eq("status",1).single();if(r)throw r;if(!e)return null;let o=yield this.obtenerContenidoPaquete(e.id,e.tipo),c=yield this.authService.getCurrentUser(),m=c?.id?yield this.calcularMejorDescuento(c.id,e.id):null;return D(U({},e),{precio_con_descuento:m?m.precio_final:e.precio,ahorro:m?e.precio-m.precio_final:0,contenido_detalle:o,mejor_descuento:m})}catch(e){throw console.error("Error obteniendo paquete por ID:",e),e}})}obtenerContenidoPaquete(t,e){return u(this,null,function*(){try{if(e==="rutina"){let{data:r,error:o}=yield this.supabaseService.supabase.from("paquete_rutinas").select(`
            orden_en_paquete,
            sesiones_asignadas,
            rutina_id,
            rutinas!inner (
              id,
              nombre,
              descripcion,
              duracion_estimada
            )
          `).eq("paquete_id",t).order("orden_en_paquete");if(o)throw o;return(r||[]).map(c=>{let m=Array.isArray(c.rutinas)?c.rutinas[0]:c.rutinas;return{id:m?.id||c.rutina_id||0,nombre:m?.nombre||"",tipo:"rutina",descripcion:m?.descripcion||"",duracion_estimada:m?.duracion_estimada||0,sesiones_asignadas:c.sesiones_asignadas,orden_en_paquete:c.orden_en_paquete}})}else if(e==="terapia"){let{data:r,error:o}=yield this.supabaseService.supabase.from("paquete_terapias").select(`
            orden_en_paquete,
            sesiones_asignadas,
            terapia_id,
            terapias!inner (
              id,
              nombre,
              descripcion,
              duracion_estimada
            )
          `).eq("paquete_id",t).order("orden_en_paquete");if(o)throw o;return(r||[]).map(c=>{let m=Array.isArray(c.terapias)?c.terapias[0]:c.terapias;return{id:m?.id||c.terapia_id||0,nombre:m?.nombre||"",tipo:"terapia",descripcion:m?.descripcion||"",duracion_estimada:m?.duracion_estimada||0,sesiones_asignadas:c.sesiones_asignadas,orden_en_paquete:c.orden_en_paquete}})}return[]}catch(r){return console.error("Error obteniendo contenido del paquete:",r),[]}})}calcularMejorDescuento(t,e){return u(this,null,function*(){try{let{data:r,error:o}=yield this.supabaseService.supabase.rpc("calcular_descuento_paquete",{p_usuario_id:t,p_paquete_id:e});if(o)throw o;return!r||r.length===0?null:r[0]}catch(r){return console.error("Error calculando descuento:",r),null}})}obtenerDescuentosDisponibles(t){return u(this,null,function*(){try{let e=this.supabaseService.supabase.from("descuentos_paquetes").select("*").eq("activo",!0).eq("status",1).lte("fecha_inicio",new Date().toISOString().split("T")[0]).gte("fecha_fin",new Date().toISOString().split("T")[0]);if(t){let{data:c}=yield this.supabaseService.supabase.from("profiles").select("id_perfil").eq("id",t).single();c&&(e=e.or(`aplicable_a.eq.todos,and(aplicable_a.eq.perfil_especifico,perfil_id.eq.${c.id_perfil}),and(aplicable_a.eq.usuario_especifico,usuario_id.eq.${t})`))}else e=e.eq("aplicable_a","todos");let{data:r,error:o}=yield e.order("valor_descuento",{ascending:!1});if(o)throw o;return r||[]}catch(e){return console.error("Error obteniendo descuentos:",e),[]}})}realizarCompraPaquete(t){return u(this,null,function*(){try{let e=yield this.authService.getCurrentUser();if(!e?.id)throw new Error("Usuario no autenticado");let r=yield this.obtenerPaqueteParaCompraPorId(t.paquete_id);if(!r)throw new Error("Paquete no encontrado");let o=yield this.calcularMejorDescuento(e.id,t.paquete_id),c=o?o.precio_final:r.precio,m=o?r.precio-c:0,v="",S="",C="";t.comprobante&&(v=yield this.convertirArchivoABase64(t.comprobante),S=t.comprobante.name,C=t.comprobante.type);let Pe={usuario_id:e.id,paquete_id:t.paquete_id,precio_paquete:r.precio,descuento_aplicado:m,precio_final:c,metodo_pago:t.metodo_pago,comprobante_imagen:v,comprobante_nombre:S,comprobante_tipo:C,numero_transaccion:t.numero_transaccion,banco:t.banco,fecha_pago:t.fecha_pago,hora_pago:t.hora_pago,estado_compra:"pendiente",notas_usuario:t.notas_usuario},{data:ye,error:J}=yield this.supabaseService.supabase.from("compras_paquetes").insert(Pe).select().single();if(J)throw J;return o?.descuento_id&&(yield this.supabaseService.supabase.rpc("increment_descuento_usos",{descuento_id:o.descuento_id})),{compra_id:ye.id,mensaje:"Compra registrada exitosamente. Est\xE1 pendiente de validaci\xF3n por un administrador.",estado:"pendiente",requiere_validacion:!0}}catch(e){throw console.error("Error realizando compra:",e),e}})}convertirArchivoABase64(t){return u(this,null,function*(){return new Promise((e,r)=>{let o=new FileReader;o.onload=()=>{let c=o.result;e(c.split(",")[1])},o.onerror=()=>r(new Error("Error leyendo archivo")),o.readAsDataURL(t)})})}obtenerComprasPendientes(t){return u(this,null,function*(){try{let e=this.supabaseService.supabase.from("v_compras_paquetes_completa").select("*");t?.estado_compra?e=e.eq("estado_compra",t.estado_compra):e=e.eq("estado_compra","pendiente"),t?.usuario_id&&(e=e.eq("usuario_id",t.usuario_id)),t?.paquete_id&&(e=e.eq("paquete_id",t.paquete_id)),t?.metodo_pago&&(e=e.eq("metodo_pago",t.metodo_pago)),t?.fecha_desde&&(e=e.gte("fecha_compra",t.fecha_desde)),t?.fecha_hasta&&(e=e.lte("fecha_compra",t.fecha_hasta)),t?.busqueda&&(e=e.or(`usuario_nombre.ilike.%${t.busqueda}%,paquete_nombre.ilike.%${t.busqueda}%,numero_transaccion.ilike.%${t.busqueda}%`));let{data:r,error:o}=yield e.order("fecha_compra",{ascending:!1}).limit(t?.limit||50);if(o)throw o;return r||[]}catch(e){throw console.error("Error obteniendo compras pendientes:",e),e}})}obtenerCompraPorId(t){return u(this,null,function*(){try{let{data:e,error:r}=yield this.supabaseService.supabase.from("v_compras_paquetes_completa").select("*").eq("compra_id",t).single();if(r)throw r;return e}catch(e){return console.error("Error obteniendo compra por ID:",e),null}})}validarCompraPaquete(t){return u(this,null,function*(){try{let e=yield this.authService.getCurrentUser();if(!e?.id)throw new Error("Usuario no autenticado");let r=yield this.obtenerCompraPorId(t.compra_id);if(!r)throw new Error("Compra no encontrada");let o=r.estado_compra,c=t.accion==="validar"?"validada":"rechazada",{error:m}=yield this.supabaseService.supabase.from("compras_paquetes").update({estado_compra:c,validado_por:e.id,fecha_validacion:new Date().toISOString(),motivo_rechazo:t.motivo_rechazo,notas_admin:t.notas_admin}).eq("id",t.compra_id);if(m)throw m;let v=!1,S;if(c==="validada")try{let C=yield this.asignarPaqueteAutomaticamente(r);C.success&&(v=!0,S=C.usuario_paquete_id,yield this.supabaseService.supabase.from("compras_paquetes").update({asignacion_completada:v,usuario_paquete_id:S,fecha_asignacion:new Date().toISOString()}).eq("id",t.compra_id))}catch(C){console.error("Error en asignaci\xF3n autom\xE1tica:",C)}return{compra_id:t.compra_id,estado_anterior:o,estado_nuevo:c,asignacion_completada:v,usuario_paquete_id:S,mensaje:c==="validada"?v?"Compra validada y paquete asignado exitosamente":"Compra validada, pendiente asignaci\xF3n manual":"Compra rechazada"}}catch(e){throw console.error("Error validando compra:",e),e}})}asignarPaqueteAutomaticamente(t){return u(this,null,function*(){try{if(t.paquete_tipo==="rutina"){let{data:e,error:r}=yield this.supabaseService.supabase.rpc("asignar_paquete_rutinas_completo",{p_usuario_id:t.usuario_id,p_paquete_id:t.paquete_id,p_precio_pagado:t.precio_final,p_fecha_inicio:new Date().toISOString().split("T")[0],p_metodo_pago:t.metodo_pago,p_asignado_por:t.validado_por});if(r)throw r;return{success:e?.success||!1,usuario_paquete_id:e?.usuario_paquete_id}}else if(t.paquete_tipo==="terapia"){let{data:e,error:r}=yield this.supabaseService.supabase.rpc("asignar_paquete_terapias_completo",{p_usuario_id:t.usuario_id,p_paquete_id:t.paquete_id,p_precio_pagado:t.precio_final,p_fecha_inicio:new Date().toISOString().split("T")[0],p_terapeuta_id:null,p_metodo_pago:t.metodo_pago,p_asignado_por:t.validado_por});if(r)throw r;return{success:e?.success||!1,usuario_paquete_id:e?.usuario_paquete_id}}return{success:!1}}catch(e){return console.error("Error en asignaci\xF3n autom\xE1tica:",e),{success:!1}}})}obtenerComprobanteBase64(t){return u(this,null,function*(){try{let{data:e,error:r}=yield this.supabaseService.supabase.from("compras_paquetes").select("comprobante_imagen").eq("id",t).single();if(r)throw r;return e?.comprobante_imagen||null}catch(e){return console.error("Error obteniendo comprobante:",e),null}})}obtenerEstadisticasCompras(){return u(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.supabase.from("v_compras_paquetes_completa").select("estado_compra, precio_final, metodo_pago, horas_desde_compra");if(e)throw e;let r=t||[];return{total_compras:r.length,compras_pendientes:r.filter(c=>c.estado_compra==="pendiente").length,compras_validadas:r.filter(c=>c.estado_compra==="validada").length,compras_rechazadas:r.filter(c=>c.estado_compra==="rechazada").length,monto_total_pendiente:r.filter(c=>c.estado_compra==="pendiente").reduce((c,m)=>c+m.precio_final,0),monto_total_validado:r.filter(c=>c.estado_compra==="validada").reduce((c,m)=>c+m.precio_final,0),promedio_tiempo_validacion:this.calcularPromedioTiempoValidacion(r),metodo_pago_mas_usado:this.obtenerMetodoPagoMasUsado(r)}}catch(t){throw console.error("Error obteniendo estad\xEDsticas:",t),t}})}calcularPromedioTiempoValidacion(t){let e=t.filter(o=>o.estado_compra==="validada"&&o.horas_desde_compra);if(e.length===0)return 0;let r=e.reduce((o,c)=>o+c.horas_desde_compra,0);return Math.round(r/e.length*100)/100}obtenerMetodoPagoMasUsado(t){let e={};t.forEach(c=>{e[c.metodo_pago]=(e[c.metodo_pago]||0)+1});let r="transferencia",o=0;return Object.entries(e).forEach(([c,m])=>{m>o&&(o=m,r=c)}),r}obtenerHistorialCompra(t){return u(this,null,function*(){try{let{data:e,error:r}=yield this.supabaseService.supabase.from("compras_paquetes_historial").select(`
          *,
          profiles:cambio_realizado_por (
            full_name
          )
        `).eq("compra_id",t).order("fecha_cambio",{ascending:!1});if(r)throw r;return e||[]}catch(e){return console.error("Error obteniendo historial de compra:",e),[]}})}obtenerMisCompras(t){return u(this,null,function*(){try{let e=t||(yield this.authService.getCurrentUser())?.id;if(!e)throw new Error("Usuario no identificado");let{data:r,error:o}=yield this.supabaseService.supabase.from("v_compras_paquetes_completa").select("*").eq("usuario_id",e).order("fecha_compra",{ascending:!1});if(o)throw o;return r||[]}catch(e){throw console.error("Error obteniendo mis compras:",e),e}})}verificarPermisosValidacion(){return u(this,null,function*(){try{let t=yield this.authService.getCurrentUser();if(!t?.id)return!1;let{data:e,error:r}=yield this.supabaseService.supabase.from("profiles").select("id_perfil").eq("id",t.id).single();if(r)throw r;return e?.id_perfil===1}catch(t){return console.error("Error verificando permisos:",t),!1}})}calcularResumenCompra(t){let e=t.precio,r=t.mejor_descuento?e-t.mejor_descuento.precio_final:0,o=e-r,c=e>0?Math.round(r/e*100):0;return{paquete:t,descuento_aplicado:t.mejor_descuento,precio_original:e,descuento:r,precio_final:o,ahorro_porcentaje:c}}formatearPrecio(t){return new Intl.NumberFormat("es-GT",{style:"currency",currency:"GTQ"}).format(t)}validarFormatoComprobante(t){let e=[".jpg",".jpeg",".png",".pdf"],o="."+t.name.split(".").pop()?.toLowerCase();return e.includes(o)?t.size>5242880?{valido:!1,error:"El archivo excede el tama\xF1o m\xE1ximo de 5MB"}:{valido:!0}:{valido:!1,error:`Formato no permitido. Formatos v\xE1lidos: ${e.join(", ")}`}}static \u0275fac=function(e){return new(e||a)(h(F),h(w))};static \u0275prov=E({token:a,factory:a.\u0275fac,providedIn:"root"})};function Ee(a,t){if(a&1&&(n(0,"option",32),l(1),T(2,"titlecase"),i()),a&2){let e=t.$implicit;d("value",e),s(),f(" ",A(2,2,e)," ")}}function Ie(a,t){a&1&&(n(0,"div",33),_(1,"div",34),n(2,"p",35),l(3,"Cargando paquetes disponibles..."),i()())}function Oe(a,t){if(a&1){let e=I();n(0,"div",36)(1,"div",37)(2,"div",38),_(3,"i",39),i(),n(4,"div",40)(5,"p",41),l(6),i()(),n(7,"div",42)(8,"button",43),b("click",function(){P(e);let o=p();return y(o.cargarPaquetesDisponibles())}),_(9,"i",44),l(10," Reintentar "),i()()()()}if(a&2){let e=p();s(6),q(e.error)}}function je(a,t){if(a&1){let e=I();n(0,"div",50),_(1,"i",51),n(2,"h3",52),l(3,"No se encontraron paquetes"),i(),n(4,"p",53),l(5,"Intenta ajustar los filtros de b\xFAsqueda"),i(),n(6,"button",54),b("click",function(){P(e);let o=p(2);return y(o.limpiarFiltros())}),_(7,"i",27),l(8," Limpiar filtros "),i()()}}function ke(a,t){if(a&1&&(n(0,"div",78)(1,"span",79),l(2),i()()),a&2){let e=p().$implicit,r=p(3);s(2),f(" -",r.calcularPorcentajeDescuento(e),"% ")}}function Te(a,t){if(a&1&&(z(0),_(1,"img",80),B()),a&2){let e=p().$implicit;s(),d("src",e.imagen_url,Z)("alt",e.nombre)}}function Ae(a,t){a&1&&_(0,"i",81)}function Fe(a,t){if(a&1&&(n(0,"span",86),l(1),i()),a&2){let e=p().$implicit;s(),f(" ",e.sesiones_asignadas," sesiones ")}}function Ve(a,t){if(a&1&&(n(0,"div",82),_(1,"i",83),n(2,"span",84),l(3),i(),g(4,Fe,2,1,"span",85),i()),a&2){let e=t.$implicit;s(3),q(e.nombre),s(),d("ngIf",e.sesiones_asignadas)}}function Ue(a,t){if(a&1&&(n(0,"div",87),l(1),i()),a&2){let e=p().$implicit;s(),f(" + ",((e.contenido_detalle==null?null:e.contenido_detalle.length)||0)-3," m\xE1s... ")}}function De(a,t){if(a&1&&(z(0),n(1,"div",88)(2,"span",89),l(3),i()(),n(4,"div",88)(5,"span",90),l(6),i()(),n(7,"div",91),l(8),i(),B()),a&2){let e=p().$implicit,r=p(3);s(3),f(" ",r.formatearPrecio(e.precio)," "),s(3),f(" ",r.formatearPrecio(e.mejor_descuento.precio_final)," "),s(2),f(" Ahorras ",r.formatearPrecio(e.ahorro||0)," ")}}function Re(a,t){if(a&1&&(n(0,"span",92),l(1),i()),a&2){let e=p().$implicit,r=p(3);s(),f(" ",r.formatearPrecio(e.precio)," ")}}function ze(a,t){if(a&1){let e=I();n(0,"div",57),g(1,ke,3,1,"div",58),n(2,"div",59),g(3,Te,2,2,"ng-container",60)(4,Ae,1,0,"ng-template",null,0,W),i(),n(6,"div",61)(7,"div",62)(8,"span",63),l(9),T(10,"titlecase"),i()(),n(11,"h3",64),l(12),i(),n(13,"p",65),l(14),i(),n(15,"div",66)(16,"h4",67),l(17,"Contenido incluido:"),i(),n(18,"div",68),g(19,Ve,5,2,"div",69)(20,Ue,2,1,"div",70),i()(),n(21,"div",71)(22,"div",72)(23,"p",73),l(24,"Sesiones"),i(),n(25,"p",74),l(26),i()(),n(27,"div",72)(28,"p",73),l(29,"Contenido"),i(),n(30,"p",74),l(31),i()()(),n(32,"div",75),g(33,De,9,3,"ng-container",60)(34,Re,2,1,"ng-template",null,1,W),i(),n(36,"button",76),b("click",function(){let o=P(e).$implicit,c=p(3);return y(c.abrirModalCompra(o))}),_(37,"i",77),l(38," Comprar Paquete "),i()()()}if(a&2){let e=t.$implicit,r=N(5),o=N(35);X("ring-2",e.mejor_descuento)("ring-green-500",e.mejor_descuento),s(),d("ngIf",e.mejor_descuento),s(2),d("ngIf",e.imagen_url)("ngIfElse",r),s(5),x("bg-"+(e.tipo==="rutina"?"blue":e.tipo==="terapia"?"green":"purple")+"-100 text-"+(e.tipo==="rutina"?"blue":e.tipo==="terapia"?"green":"purple")+"-800"),s(),f(" ",A(10,18,e.tipo)," "),s(3),q(e.nombre),s(2),f(" ",e.descripcion||"Sin descripci\xF3n disponible"," "),s(5),d("ngForOf",e.contenido_detalle==null?null:e.contenido_detalle.slice(0,3)),s(),d("ngIf",((e.contenido_detalle==null?null:e.contenido_detalle.length)||0)>3),s(6),q(e.cantidad_sesiones),s(5),q((e.contenido_detalle==null?null:e.contenido_detalle.length)||0),s(2),d("ngIf",e.mejor_descuento)("ngIfElse",o)}}function Be(a,t){if(a&1&&(n(0,"div",55),g(1,ze,39,20,"div",56),i()),a&2){let e=p(2);s(),d("ngForOf",e.paquetesFiltrados)}}function Ne(a,t){if(a&1&&(n(0,"span",114),l(1),i()),a&2){let e=p().$implicit,r=p(3);s(),f(" -",r.calcularPorcentajeDescuento(e),"% ")}}function $e(a,t){a&1&&(n(0,"span",115),l(1,"-"),i())}function Le(a,t){if(a&1){let e=I();n(0,"tr",100)(1,"td",101)(2,"div",37)(3,"div",102),_(4,"i",103),i(),n(5,"div",104)(6,"div",105),l(7),i(),n(8,"div",87),l(9),i()()()(),n(10,"td",101)(11,"span",106),l(12),T(13,"titlecase"),i()(),n(14,"td",107),l(15),i(),n(16,"td",107),l(17),i(),n(18,"td",108)(19,"span"),l(20),i()(),n(21,"td",101),g(22,Ne,2,1,"span",109)(23,$e,2,0,"span",110),i(),n(24,"td",111),l(25),i(),n(26,"td",101)(27,"button",112),b("click",function(){let o=P(e).$implicit,c=p(3);return y(c.abrirModalCompra(o))}),_(28,"i",113),l(29," Comprar "),i()()()}if(a&2){let e=t.$implicit,r=p(3);s(7),q(e.nombre),s(2),q(e.descripcion),s(2),x("bg-"+(e.tipo==="rutina"?"blue":e.tipo==="terapia"?"green":"purple")+"-100 text-"+(e.tipo==="rutina"?"blue":e.tipo==="terapia"?"green":"purple")+"-800"),s(),f(" ",A(13,15,e.tipo)," "),s(3),f(" ",e.cantidad_sesiones," "),s(2),f(" ",(e.contenido_detalle==null?null:e.contenido_detalle.length)||0," "),s(2),x(e.mejor_descuento?"line-through text-gray-500":"font-medium text-gray-900"),s(),f(" ",r.formatearPrecio(e.precio)," "),s(2),d("ngIf",e.mejor_descuento),s(),d("ngIf",!e.mejor_descuento),s(),x(e.mejor_descuento?"text-green-600":"text-blue-600"),s(),f(" ",r.formatearPrecio((e.mejor_descuento==null?null:e.mejor_descuento.precio_final)||e.precio)," ")}}function Ge(a,t){if(a&1&&(n(0,"div",93)(1,"div",94)(2,"table",95)(3,"thead",96)(4,"tr")(5,"th",97),l(6,"Paquete"),i(),n(7,"th",97),l(8,"Tipo"),i(),n(9,"th",97),l(10,"Sesiones"),i(),n(11,"th",97),l(12,"Contenido"),i(),n(13,"th",97),l(14,"Precio"),i(),n(15,"th",97),l(16,"Descuento"),i(),n(17,"th",97),l(18,"Precio Final"),i(),n(19,"th",97),l(20,"Acciones"),i()()(),n(21,"tbody",98),g(22,Le,30,17,"tr",99),i()()()()),a&2){let e=p(2);s(22),d("ngForOf",e.paquetesFiltrados)}}function Ye(a,t){if(a&1&&(n(0,"div")(1,"div",45)(2,"p",46),l(3),i()(),g(4,je,9,0,"div",47)(5,Be,2,1,"div",48)(6,Ge,23,1,"div",49),i()),a&2){let e=p();s(3),ee(" ",e.paquetesFiltrados.length," paquete",e.paquetesFiltrados.length!==1?"s":""," encontrado",e.paquetesFiltrados.length!==1?"s":""," "),s(),d("ngIf",e.paquetesFiltrados.length===0),s(),d("ngIf",e.vistaActual==="tarjetas"&&e.paquetesFiltrados.length>0),s(),d("ngIf",e.vistaActual==="lista"&&e.paquetesFiltrados.length>0)}}function We(a,t){if(a&1&&(n(0,"div",88)(1,"span",89),l(2),i()()),a&2){let e=p(3);s(2),f(" ",e.formatearPrecio(e.resumenCompra.precio_original)," ")}}function He(a,t){if(a&1&&(n(0,"div",91),l(1),i()),a&2){let e=p(3);s(),$(" Ahorras ",e.formatearPrecio(e.resumenCompra.descuento)," (",e.resumenCompra.ahorro_porcentaje,"%) ")}}function Qe(a,t){if(a&1&&(n(0,"div",150)(1,"div",151)(2,"div",152)(3,"h4",153),l(4),i(),n(5,"p",154),l(6),i(),n(7,"div",155)(8,"span",37),_(9,"i",156),l(10),i(),n(11,"span",37),_(12,"i",157),l(13),i()()(),n(14,"div",158),g(15,We,3,1,"div",159),n(16,"div",160),l(17),i(),g(18,He,2,2,"div",161),i()()()),a&2){let e=p(2);s(4),q(e.resumenCompra.paquete.nombre),s(2),q(e.resumenCompra.paquete.descripcion),s(4),f(" ",e.resumenCompra.paquete.cantidad_sesiones," sesiones "),s(3),$(" ",e.resumenCompra.paquete.contenido_detalle==null?null:e.resumenCompra.paquete.contenido_detalle.length," ",e.resumenCompra.paquete.tipo,"s "),s(2),d("ngIf",e.resumenCompra.descuento>0),s(),x(e.resumenCompra.descuento>0?"text-green-600":"text-blue-600"),s(),f(" ",e.formatearPrecio(e.resumenCompra.precio_final)," "),s(),d("ngIf",e.resumenCompra.descuento>0)}}function Je(a,t){if(a&1&&(n(0,"option",32),l(1),i()),a&2){let e=t.$implicit;d("value",e.value),s(),f(" ",e.label," ")}}function Ze(a,t){a&1&&(n(0,"p",162),l(1," Por favor selecciona un m\xE9todo de pago "),i())}function Ke(a,t){if(a&1&&(n(0,"option",32),l(1),i()),a&2){let e=t.$implicit;d("value",e),s(),f(" ",e," ")}}function Xe(a,t){a&1&&(n(0,"p",162),l(1," Por favor selecciona un banco "),i())}function et(a,t){if(a&1&&(n(0,"div")(1,"label",163),l(2," Banco * "),i(),n(3,"select",164)(4,"option",128),l(5,"Selecciona un banco"),i(),g(6,Ke,2,2,"option",19),i(),g(7,Xe,2,0,"p",129),i()),a&2){let e=p(3);s(3),x(e.bancoInvalido?"border-red-500":"border-gray-300"),s(3),d("ngForOf",e.bancosDisponibles),s(),d("ngIf",e.bancoInvalido)}}function tt(a,t){a&1&&(n(0,"p",162),l(1," El n\xFAmero de transacci\xF3n es requerido "),i())}function rt(a,t){if(a&1&&(n(0,"div")(1,"label",165),l(2," N\xFAmero de transacci\xF3n * "),i(),_(3,"input",166),g(4,tt,2,0,"p",129),i()),a&2){let e=p(3);s(3),x(e.numeroTransaccionInvalido?"border-red-500":"border-gray-300"),s(),d("ngIf",e.numeroTransaccionInvalido)}}function ot(a,t){if(a&1&&(n(0,"div",131),g(1,et,8,4,"div",30)(2,rt,5,3,"div",30),i()),a&2){let e=p(2);s(),d("ngIf",e.requiereBanco),s(),d("ngIf",e.requiereNumeroTransaccion)}}function at(a,t){a&1&&(n(0,"p",162),l(1," La fecha del pago es requerida "),i())}function it(a,t){if(a&1){let e=I();n(0,"div",171)(1,"div",172)(2,"span",173),_(3,"i",174),l(4),i(),n(5,"button",175),b("click",function(){P(e);let o=p(3);return y(o.eliminarArchivo())}),_(6,"i",176),i()()()}if(a&2){let e=p(3);s(4),f(" ",e.obtenerNombreArchivo()," ")}}function nt(a,t){a&1&&(n(0,"p",162),l(1," El comprobante de pago es requerido "),i())}function st(a,t){if(a&1){let e=I();n(0,"div")(1,"label",167),l(2," Comprobante de pago * "),i(),n(3,"input",168),b("change",function(o){P(e);let c=p(2);return y(c.onArchivoSeleccionado(o))}),i(),n(4,"p",169),l(5),i(),g(6,it,7,1,"div",170)(7,nt,2,0,"p",129),i()}if(a&2){let e=p(2);s(3),x(e.comprobanteInvalido?"border-red-500":"border-gray-300"),s(2),f(" Formatos permitidos: JPG, PNG, PDF. Tama\xF1o m\xE1ximo: ",e.tamanoMaximo,"MB "),s(),d("ngIf",e.obtenerNombreArchivo()),s(),d("ngIf",e.comprobanteInvalido)}}function ct(a,t){a&1&&(n(0,"p",162),l(1," Debes aceptar los t\xE9rminos y condiciones "),i())}function lt(a,t){if(a&1&&(n(0,"div",177)(1,"div",37)(2,"div",38),_(3,"i",39),i(),n(4,"div",141)(5,"p",41),l(6),i()()()()),a&2){let e=p(2);s(6),q(e.error)}}function dt(a,t){a&1&&_(0,"span",178)}function ut(a,t){a&1&&(n(0,"span"),l(1,"Procesando..."),i())}function pt(a,t){a&1&&(n(0,"span",37),_(1,"i",179),l(2," Realizar Compra "),i())}function mt(a,t){if(a&1){let e=I();n(0,"div",116)(1,"div",117)(2,"div",118)(3,"div",119)(4,"h3",120),_(5,"i",121),l(6," Comprar Paquete "),i(),n(7,"button",122),b("click",function(){P(e);let o=p();return y(o.cerrarModalCompra())}),_(8,"i",123),i()()(),n(9,"div",61),g(10,Qe,19,10,"div",124),n(11,"form",125),b("ngSubmit",function(){P(e);let o=p();return y(o.realizarCompra())}),n(12,"div")(13,"label",126),l(14," M\xE9todo de pago * "),i(),n(15,"select",127)(16,"option",128),l(17,"Selecciona un m\xE9todo de pago"),i(),g(18,Je,2,2,"option",19),i(),g(19,Ze,2,0,"p",129),i(),g(20,ot,3,2,"div",130),n(21,"div",131)(22,"div")(23,"label",132),l(24," Fecha del pago * "),i(),_(25,"input",133),g(26,at,2,0,"p",129),i(),n(27,"div")(28,"label",134),l(29," Hora del pago "),i(),_(30,"input",135),i()(),g(31,st,8,5,"div",30),n(32,"div")(33,"label",136),l(34," Notas adicionales "),i(),_(35,"textarea",137),i(),n(36,"div",138)(37,"div",139),_(38,"input",140),i(),n(39,"div",141)(40,"label",142),l(41," Acepto los "),n(42,"a",143),l(43,"t\xE9rminos y condiciones"),i(),l(44," de compra * "),i(),g(45,ct,2,0,"p",129),i()(),g(46,lt,7,1,"div",144),i()(),n(47,"div",145)(48,"button",146),b("click",function(){P(e);let o=p();return y(o.cerrarModalCompra())}),l(49," Cancelar "),i(),n(50,"button",147),b("click",function(){P(e);let o=p();return y(o.realizarCompra())}),g(51,dt,1,0,"span",148)(52,ut,2,0,"span",30)(53,pt,3,0,"span",149),i()()()()}if(a&2){let e=p();s(10),d("ngIf",e.resumenCompra),s(),d("formGroup",e.formularioCompra),s(4),x(e.metodoPagoInvalido?"border-red-500":"border-gray-300"),s(3),d("ngForOf",e.metodosPago),s(),d("ngIf",e.metodoPagoInvalido),s(),d("ngIf",e.metodoPagoSeleccionado),s(5),x(e.fechaPagoInvalida?"border-red-500":"border-gray-300"),d("max",e.fechaMaxima),s(),d("ngIf",e.fechaPagoInvalida),s(5),d("ngIf",e.requiereComprobante),s(7),x(e.terminosInvalidos?"border-red-500":""),s(7),d("ngIf",e.terminosInvalidos),s(),d("ngIf",e.error),s(2),d("disabled",e.enviandoCompra),s(2),x(e.formularioCompra.valid&&!e.enviandoCompra?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),d("disabled",!e.formularioCompra.valid||e.enviandoCompra),s(),d("ngIf",e.enviandoCompra),s(),d("ngIf",e.enviandoCompra),s(),d("ngIf",!e.enviandoCompra)}}var Ce=class a{constructor(t,e,r,o){this.compraPaquetesService=t;this.authService=e;this.formBuilder=r;this.router=o;this.inicializarFormulario()}cargando=!1;error=null;paquetesDisponibles=[];paquetesFiltrados=[];filtroTipo="todos";busqueda="";tiposDisponibles=[];mostrarModalCompra=!1;paqueteSeleccionado=null;resumenCompra=null;formularioCompra;enviandoCompra=!1;metodosPago=he;bancosDisponibles=xe;formatosPermitidos=[".jpg",".jpeg",".png",".pdf"];tamanoMaximo=5;fechaMaxima=new Date().toISOString().split("T")[0];vistaActual="tarjetas";ngOnInit(){this.cargarPaquetesDisponibles()}inicializarFormulario(){this.formularioCompra=this.formBuilder.group({metodo_pago:["",M.required],numero_transaccion:[""],banco:[""],fecha_pago:[this.fechaMaxima,M.required],hora_pago:[""],comprobante:[null],notas_usuario:[""],acepta_terminos:[!1,M.requiredTrue]}),this.formularioCompra.get("metodo_pago")?.valueChanges.subscribe(t=>{this.actualizarValidadoresSegunMetodo(t)})}actualizarValidadoresSegunMetodo(t){let e=this.formularioCompra.get("numero_transaccion"),r=this.formularioCompra.get("banco"),o=this.formularioCompra.get("comprobante");e?.clearValidators(),r?.clearValidators(),o?.clearValidators(),t==="transferencia"||t==="deposito"?(e?.setValidators([M.required]),r?.setValidators([M.required]),o?.setValidators([M.required])):(t==="tarjeta_credito"||t==="tarjeta_debito")&&(e?.setValidators([M.required]),o?.setValidators([M.required])),e?.updateValueAndValidity(),r?.updateValueAndValidity(),o?.updateValueAndValidity()}cargarPaquetesDisponibles(){return u(this,null,function*(){this.cargando=!0,this.error=null;try{this.paquetesDisponibles=yield this.compraPaquetesService.obtenerPaquetesParaCompra(),this.extraerTiposDisponibles(),this.aplicarFiltros()}catch(t){console.error("Error cargando paquetes:",t),this.error="Error al cargar los paquetes disponibles. Intenta nuevamente."}finally{this.cargando=!1}})}extraerTiposDisponibles(){let t=[...new Set(this.paquetesDisponibles.map(e=>e.tipo))];this.tiposDisponibles=t.sort()}aplicarFiltros(){let t=[...this.paquetesDisponibles];if(this.filtroTipo!=="todos"&&(t=t.filter(e=>e.tipo===this.filtroTipo)),this.busqueda.trim()){let e=this.busqueda.toLowerCase().trim();t=t.filter(r=>r.nombre.toLowerCase().includes(e)||r.descripcion?.toLowerCase().includes(e)||r.tipo.toLowerCase().includes(e))}this.paquetesFiltrados=t}onFiltroTipoChange(){this.aplicarFiltros()}onBusquedaChange(){this.aplicarFiltros()}limpiarFiltros(){this.filtroTipo="todos",this.busqueda="",this.aplicarFiltros()}abrirModalCompra(t){this.paqueteSeleccionado=t,this.resumenCompra=this.compraPaquetesService.calcularResumenCompra(t),this.resetearFormulario(),this.mostrarModalCompra=!0}cerrarModalCompra(){this.mostrarModalCompra=!1,this.paqueteSeleccionado=null,this.resumenCompra=null,this.resetearFormulario()}resetearFormulario(){this.formularioCompra.reset({fecha_pago:this.fechaMaxima,acepta_terminos:!1}),this.actualizarValidadoresSegunMetodo("")}realizarCompra(){return u(this,null,function*(){if(!this.formularioCompra.valid||!this.paqueteSeleccionado){this.marcarErroresFormulario();return}this.enviandoCompra=!0,this.error=null;try{let t=this.formularioCompra.value,e={paquete_id:this.paqueteSeleccionado.id,metodo_pago:t.metodo_pago,numero_transaccion:t.numero_transaccion,banco:t.banco,fecha_pago:t.fecha_pago,hora_pago:t.hora_pago,comprobante:t.comprobante,notas_usuario:t.notas_usuario,acepta_terminos:t.acepta_terminos},r=yield this.compraPaquetesService.realizarCompraPaquete(e);this.mostrarMensajeExito(r.mensaje),this.cerrarModalCompra(),setTimeout(()=>{this.router.navigate(["/mis-compras"])},2e3)}catch(t){console.error("Error realizando compra:",t),this.error="Error al procesar la compra. Verifica los datos e intenta nuevamente."}finally{this.enviandoCompra=!1}})}marcarErroresFormulario(){Object.keys(this.formularioCompra.controls).forEach(t=>{let e=this.formularioCompra.get(t);e&&e.invalid&&e.markAsTouched()})}mostrarMensajeExito(t){alert(t)}onArchivoSeleccionado(t){let e=t.target.files[0];if(!e)return;let r=this.compraPaquetesService.validarFormatoComprobante(e);if(!r.valido){this.error=r.error||"Archivo no v\xE1lido",t.target.value="",this.formularioCompra.patchValue({comprobante:null});return}this.formularioCompra.patchValue({comprobante:e}),this.error=null}obtenerNombreArchivo(){let t=this.formularioCompra.get("comprobante")?.value;return t?t.name:""}eliminarArchivo(){this.formularioCompra.patchValue({comprobante:null});let t=document.getElementById("comprobante");t&&(t.value="")}formatearPrecio(t){return this.compraPaquetesService.formatearPrecio(t)}obtenerIconoMetodoPago(t){return this.metodosPago.find(r=>r.value===t)?.icono||"fa-credit-card"}obtenerLabelMetodoPago(t){return this.metodosPago.find(r=>r.value===t)?.label||t}calcularPorcentajeDescuento(t){return t.mejor_descuento?Math.round((t.precio-t.mejor_descuento.precio_final)/t.precio*100):0}obtenerClaseEstadoPaquete(t){return t.mejor_descuento?"border-success":""}cambiarVista(t){this.vistaActual=t}get metodoPagoSeleccionado(){return this.formularioCompra.get("metodo_pago")?.value||""}get requiereNumeroTransaccion(){let t=this.metodoPagoSeleccionado;return["transferencia","deposito","tarjeta_credito","tarjeta_debito"].includes(t)}get requiereBanco(){let t=this.metodoPagoSeleccionado;return["transferencia","deposito"].includes(t)}get requiereComprobante(){let t=this.metodoPagoSeleccionado;return["transferencia","deposito","tarjeta_credito","tarjeta_debito"].includes(t)}get metodoPagoInvalido(){let t=this.formularioCompra.get("metodo_pago");return!!(t&&t.invalid&&t.touched)}get numeroTransaccionInvalido(){let t=this.formularioCompra.get("numero_transaccion");return!!(t&&t.invalid&&t.touched)}get bancoInvalido(){let t=this.formularioCompra.get("banco");return!!(t&&t.invalid&&t.touched)}get fechaPagoInvalida(){let t=this.formularioCompra.get("fecha_pago");return!!(t&&t.invalid&&t.touched)}get comprobanteInvalido(){let t=this.formularioCompra.get("comprobante");return!!(t&&t.invalid&&t.touched)}get terminosInvalidos(){let t=this.formularioCompra.get("acepta_terminos");return!!(t&&t.invalid&&t.touched)}static \u0275fac=function(e){return new(e||a)(j(V),j(w),j(ge),j(O))};static \u0275cmp=K({type:a,selectors:[["app-compra-paquetes"]],standalone:!1,decls:40,vars:11,consts:[["defaultImage",""],["precioNormal",""],[1,"min-h-screen","bg-gray-50","px-4","sm:px-6","lg:px-8"],[1,"mb-8","pt-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between"],[1,"mb-4","sm:mb-0"],[1,"text-3xl","font-bold","text-gray-900","flex","items-center"],[1,"fas","fa-shopping-cart","mr-3","text-blue-600"],[1,"mt-2","text-gray-600"],[1,"flex","rounded-lg","bg-white","border","border-gray-200","p-1"],["type","button",1,"px-4","py-2","text-sm","font-medium","rounded-md","transition-colors","duration-200",3,"click"],[1,"fas","fa-th-large","mr-2"],["type","button",1,"px-4","py-2","text-sm","font-medium","rounded-md","transition-colors","duration-200","ml-1",3,"click"],[1,"fas","fa-list","mr-2"],[1,"mb-8","bg-white","rounded-xl","shadow-sm","border","border-gray-200","p-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["for","filtroTipo",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["id","filtroTipo",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors","duration-200",3,"ngModelChange","change","ngModel"],["value","todos"],[3,"value",4,"ngFor","ngForOf"],["for","busqueda",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"fas","fa-search","text-gray-400"],["type","text","id","busqueda","placeholder","Buscar por nombre, descripci\xF3n...",1,"w-full","pl-10","pr-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","transition-colors","duration-200",3,"ngModelChange","input","ngModel"],[1,"flex","items-end"],["type","button",1,"w-full","px-4","py-3","bg-gray-100","hover:bg-gray-200","text-gray-700","font-medium","rounded-lg","transition-colors","duration-200","flex","items-center","justify-center",3,"click"],[1,"fas","fa-times","mr-2"],["class","flex flex-col items-center justify-center py-16",4,"ngIf"],["class","mb-8 bg-red-50 border border-red-200 rounded-lg p-4",4,"ngIf"],[4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",4,"ngIf"],[3,"value"],[1,"flex","flex-col","items-center","justify-center","py-16"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"mt-4","text-gray-600"],[1,"mb-8","bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"flex","items-center"],[1,"flex-shrink-0"],[1,"fas","fa-exclamation-triangle","text-red-400"],[1,"ml-3","flex-1"],[1,"text-red-800"],[1,"ml-auto"],["type","button",1,"bg-red-100","hover:bg-red-200","text-red-800","px-3","py-1","rounded-md","text-sm","font-medium","transition-colors","duration-200",3,"click"],[1,"fas","fa-redo","mr-1"],[1,"mb-6"],[1,"text-gray-600"],["class","text-center py-16",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],["class","bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",4,"ngIf"],[1,"text-center","py-16"],[1,"fas","fa-inbox","text-6xl","text-gray-400","mb-4"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-6"],["type","button",1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","py-2","rounded-lg","font-medium","transition-colors","duration-200",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg hover:-translate-y-1 transition-all duration-300",3,"ring-2","ring-green-500",4,"ngFor","ngForOf"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","overflow-hidden","hover:shadow-lg","hover:-translate-y-1","transition-all","duration-300"],["class","absolute top-4 right-4 z-10",4,"ngIf"],[1,"h-48","bg-gray-100","flex","items-center","justify-center","relative"],[4,"ngIf","ngIfElse"],[1,"p-6"],[1,"mb-3"],[1,"inline-flex","items-center","px-3","py-1","rounded-full","text-xs","font-medium"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","text-sm","mb-4","h-12","overflow-hidden"],[1,"mb-4"],[1,"text-sm","font-semibold","text-gray-700","mb-2"],[1,"space-y-1"],["class","flex items-center text-sm text-gray-600",4,"ngFor","ngForOf"],["class","text-sm text-gray-500",4,"ngIf"],[1,"grid","grid-cols-2","gap-4","mb-4","p-3","bg-gray-50","rounded-lg"],[1,"text-center"],[1,"text-xs","text-gray-500","uppercase","tracking-wide"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-center","mb-4"],["type","button",1,"w-full","bg-blue-600","hover:bg-blue-700","text-white","font-semibold","py-3","px-4","rounded-lg","transition-colors","duration-200","flex","items-center","justify-center",3,"click"],[1,"fas","fa-shopping-cart","mr-2"],[1,"absolute","top-4","right-4","z-10"],[1,"bg-green-500","text-white","px-3","py-1","rounded-full","text-sm","font-semibold"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"fas","fa-box-open","text-4xl","text-gray-400"],[1,"flex","items-center","text-sm","text-gray-600"],[1,"fas","fa-check-circle","text-green-500","mr-2","flex-shrink-0"],[1,"truncate"],["class","ml-auto bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",4,"ngIf"],[1,"ml-auto","bg-gray-100","text-gray-700","px-2","py-1","rounded","text-xs"],[1,"text-sm","text-gray-500"],[1,"mb-1"],[1,"text-gray-500","line-through","text-sm"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-sm","text-green-600"],[1,"text-2xl","font-bold","text-blue-600"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-blue-50 transition-colors duration-200",4,"ngFor","ngForOf"],[1,"hover:bg-blue-50","transition-colors","duration-200"],[1,"px-6","py-4"],[1,"flex-shrink-0","h-10","w-10"],[1,"fas","fa-box-open","text-2xl","text-gray-400"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-900"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium"],[1,"px-6","py-4","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","text-sm"],["class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",4,"ngIf"],["class","text-gray-400",4,"ngIf"],[1,"px-6","py-4","text-sm","font-medium"],["type","button",1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","text-sm","font-medium","transition-colors","duration-200",3,"click"],[1,"fas","fa-shopping-cart","mr-1"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium","bg-green-100","text-green-800"],[1,"text-gray-400"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","p-4","z-50"],[1,"bg-white","rounded-xl","shadow-xl","max-w-3xl","w-full","max-h-screen","overflow-y-auto"],[1,"bg-gray-50","px-6","py-4","border-b","border-gray-200","rounded-t-xl"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center"],[1,"fas","fa-shopping-cart","mr-2","text-blue-600"],["type","button",1,"text-gray-400","hover:text-gray-600","transition-colors","duration-200",3,"click"],[1,"fas","fa-times","text-xl"],["class","bg-gray-50 rounded-lg p-4 mb-6",4,"ngIf"],[1,"space-y-6",3,"ngSubmit","formGroup"],["for","metodo_pago",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["id","metodo_pago","formControlName","metodo_pago",1,"w-full","px-4","py-3","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["value",""],["class","mt-1 text-sm text-red-600",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 gap-6",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["for","fecha_pago",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["type","date","id","fecha_pago","formControlName","fecha_pago",1,"w-full","px-4","py-3","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"max"],["for","hora_pago",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["type","time","id","hora_pago","formControlName","hora_pago","placeholder","Opcional",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["for","notas_usuario",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["id","notas_usuario","formControlName","notas_usuario","rows","3","placeholder","Informaci\xF3n adicional sobre el pago (opcional)",1,"w-full","px-4","py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],[1,"flex","items-start"],[1,"flex","items-center","h-5"],["type","checkbox","id","acepta_terminos","formControlName","acepta_terminos",1,"h-4","w-4","text-blue-600","focus:ring-blue-500","border-gray-300","rounded"],[1,"ml-3"],["for","acepta_terminos",1,"text-sm","text-gray-700"],["href","#","target","_blank",1,"text-blue-600","hover:text-blue-800","underline"],["class","bg-red-50 border border-red-200 rounded-lg p-4",4,"ngIf"],[1,"bg-gray-50","px-6","py-4","border-t","border-gray-200","rounded-b-xl","flex","flex-col","sm:flex-row","sm:justify-end","gap-3"],["type","button",1,"w-full","sm:w-auto","px-6","py-3","bg-gray-100","hover:bg-gray-200","text-gray-700","font-medium","rounded-lg","transition-colors","duration-200",3,"click","disabled"],["type","button",1,"w-full","sm:w-auto","px-6","py-3","font-medium","rounded-lg","transition-colors","duration-200","flex","items-center","justify-center",3,"click","disabled"],["class","animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4","items-center"],[1,"lg:col-span-2"],[1,"text-lg","font-semibold","text-gray-900","mb-1"],[1,"text-gray-600","mb-3"],[1,"flex","flex-wrap","gap-4","text-sm","text-gray-500"],[1,"fas","fa-calendar","mr-1"],[1,"fas","fa-list","mr-1"],[1,"text-center","lg:text-right"],["class","mb-1",4,"ngIf"],[1,"text-2xl","font-bold","mb-1"],["class","text-sm text-green-600",4,"ngIf"],[1,"mt-1","text-sm","text-red-600"],["for","banco",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["id","banco","formControlName","banco",1,"w-full","px-4","py-3","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["for","numero_transaccion",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["type","text","id","numero_transaccion","formControlName","numero_transaccion","placeholder","Ingresa el n\xFAmero de transacci\xF3n",1,"w-full","px-4","py-3","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["for","comprobante",1,"block","text-sm","font-semibold","text-gray-700","mb-2"],["type","file","id","comprobante","accept",".jpg,.jpeg,.png,.pdf",1,"w-full","px-4","py-3","border","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"change"],[1,"mt-1","text-xs","text-gray-500"],["class","mt-3",4,"ngIf"],[1,"mt-3"],[1,"flex","items-center","justify-between","p-3","bg-gray-50","border","border-gray-200","rounded-lg"],[1,"text-sm","text-gray-700","flex","items-center"],[1,"fas","fa-file","mr-2"],["type","button",1,"text-red-600","hover:text-red-800","transition-colors","duration-200",3,"click"],[1,"fas","fa-times"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-white","mr-2"],[1,"fas","fa-credit-card","mr-2"]],template:function(e,r){e&1&&(n(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h1",6),_(5,"i",7),l(6," Comprar Paquetes "),i(),n(7,"p",8),l(8,"Explora y adquiere paquetes de rutinas y terapias"),i()(),n(9,"div",9)(10,"button",10),b("click",function(){return r.cambiarVista("tarjetas")}),_(11,"i",11),l(12,"Tarjetas "),i(),n(13,"button",12),b("click",function(){return r.cambiarVista("lista")}),_(14,"i",13),l(15,"Lista "),i()()()(),n(16,"div",14)(17,"div",15)(18,"div")(19,"label",16),l(20," Tipo de paquete "),i(),n(21,"select",17),Y("ngModelChange",function(c){return G(r.filtroTipo,c)||(r.filtroTipo=c),c}),b("change",function(){return r.onFiltroTipoChange()}),n(22,"option",18),l(23,"Todos los tipos"),i(),g(24,Ee,3,4,"option",19),i()(),n(25,"div")(26,"label",20),l(27," Buscar paquetes "),i(),n(28,"div",21)(29,"div",22),_(30,"i",23),i(),n(31,"input",24),Y("ngModelChange",function(c){return G(r.busqueda,c)||(r.busqueda=c),c}),b("input",function(){return r.onBusquedaChange()}),i()()(),n(32,"div",25)(33,"button",26),b("click",function(){return r.limpiarFiltros()}),_(34,"i",27),l(35," Limpiar filtros "),i()()()(),g(36,Ie,4,0,"div",28)(37,Oe,11,1,"div",29)(38,Ye,7,6,"div",30),i(),g(39,mt,54,23,"div",31)),e&2&&(s(10),x(r.vistaActual==="tarjetas"?"bg-blue-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"),s(3),x(r.vistaActual==="lista"?"bg-blue-600 text-white shadow-sm":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"),s(8),L("ngModel",r.filtroTipo),s(3),d("ngForOf",r.tiposDisponibles),s(7),L("ngModel",r.busqueda),s(5),d("ngIf",r.cargando),s(),d("ngIf",r.error&&!r.cargando),s(),d("ngIf",!r.cargando&&!r.error),s(),d("ngIf",r.mostrarModalCompra))},dependencies:[te,re,le,me,_e,ie,ae,pe,ne,se,ce,de,ue,oe],styles:['@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInFromRight{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.card-animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}.modal-animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromRight .3s ease-out}.hover-lift[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.hover-lift[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 10px 25px -5px #0000001a,0 10px 10px -5px #0000000a}.btn-shimmer[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-shimmer[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .5s}.btn-shimmer[_ngcontent-%COMP%]:hover:before{left:100%}.gradient-blue[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)}.gradient-green[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4facfe,#00f2fe)}.gradient-purple[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a8edea,#fed6e3)}.badge-glow[_ngcontent-%COMP%]{box-shadow:0 0 20px #22c55e66;animation:_ngcontent-%COMP%_pulse 2s infinite}.price-highlight[_ngcontent-%COMP%]{position:relative}.price-highlight[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:2px;background:linear-gradient(90deg,#3b82f6,#10b981);border-radius:1px}.form-group-focus[_ngcontent-%COMP%]{position:relative}.form-group-focus[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .form-group-focus[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .form-group-focus[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{color:#3b82f6;transform:translateY(-1.5rem) scale(.85)}.floating-label[_ngcontent-%COMP%]{position:absolute;left:1rem;top:1rem;transition:all .2s ease-in-out;pointer-events:none;color:#6b7280}.file-drop-zone[_ngcontent-%COMP%]{border:2px dashed #d1d5db;transition:all .3s ease}.file-drop-zone[_ngcontent-%COMP%]:hover, .file-drop-zone.drag-over[_ngcontent-%COMP%]{border-color:#3b82f6;background-color:#eff6ff}.file-selected[_ngcontent-%COMP%]{border-color:#10b981;background-color:#f0fdf4}.modal-backdrop-blur[_ngcontent-%COMP%]{backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}.modal-content-shadow[_ngcontent-%COMP%]{box-shadow:0 25px 50px -12px #00000040}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0;transform:scale(.9) translateY(-10px)}to{opacity:1;transform:scale(1) translateY(0)}}.modal-enter[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalFadeIn .3s ease-out}.skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}.pulse-slow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 3s cubic-bezier(.4,0,.6,1) infinite}.grid-auto-fit[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.grid-auto-fill[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem}.text-shadow[_ngcontent-%COMP%]{text-shadow:0 2px 4px rgba(0,0,0,.1)}.text-shadow-lg[_ngcontent-%COMP%]{text-shadow:0 4px 8px rgba(0,0,0,.2)}.glass-effect[_ngcontent-%COMP%]{background:#ffffff1a;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2)}.glass-effect-dark[_ngcontent-%COMP%]{background:#0000001a;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(0,0,0,.2)}.border-gradient[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:.75rem}.border-gradient[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;padding:2px;background:linear-gradient(45deg,#3b82f6,#10b981);border-radius:inherit;mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask-composite:exclude;-webkit-mask-composite:xor}.icon-bounce[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 1s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,20%,53%,80%,to{transform:translateZ(0)}40%,43%{transform:translate3d(0,-8px,0)}70%{transform:translate3d(0,-4px,0)}90%{transform:translate3d(0,-2px,0)}}.icon-glow[_ngcontent-%COMP%]{filter:drop-shadow(0 0 8px rgba(59,130,246,.6))}.custom-scrollbar[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#cbd5e1 #f1f5f9}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}@media (max-width: 640px){.mobile-full-width[_ngcontent-%COMP%]{width:100vw;margin-left:calc(-50vw + 50%)}.mobile-padding[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}}.focus-ring-custom[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #3b82f680}.focus-visible-custom[_ngcontent-%COMP%]:focus-visible{outline:2px solid #3b82f6;outline-offset:2px}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.slide-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideUp .5s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.scale-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn .3s ease-out}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.card-hover-effect[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.card-hover-effect[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px -5px #0000001a}.button-press-effect[_ngcontent-%COMP%]:active{transform:scale(.98)}.smooth-transition[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}@media (prefers-color-scheme: dark){.auto-dark[_ngcontent-%COMP%]{background-color:#1f2937;color:#f9fafb}.auto-dark[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:#374151;border-color:#4b5563}.auto-dark[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#374151;color:#f9fafb}}']})};export{k as a,fe as b,be as c,ve as d,he as e,ht as f,V as g,Ce as h};
