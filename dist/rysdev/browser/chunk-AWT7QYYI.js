import{B as a,C as r,Ca as me,D as g,Da as pe,Ea as ge,G as D,H as E,Ha as he,I as m,Ia as fe,K as X,L as J,M as Z,O as c,P as _,Q as w,R as M,S as ee,Sa as L,Ta as be,U as A,Ua as ve,V as P,W as I,a as G,aa as k,b as T,ba as q,c as H,d as O,f as W,fa as te,g as B,ga as ie,h as z,ha as ae,ia as re,j as v,k as x,l as h,m as C,na as oe,o as Y,r as s,ra as ne,s as Q,t as K,ta as se,u as V,ua as ce,v as f,va as le,wa as de,x as d,xa as ue,z as y}from"./chunk-RRQC6EZP.js";import{g as u}from"./chunk-6AOLKZEJ.js";var U=class n{constructor(t,e){this.supabaseService=t;this.authService=e;console.log("\u{1F680} Inicializando ChatDiscussionService..."),this.inicializarServicio()}temasSubject=new O([]);mensajesSubject=new O([]);notificacionesSubject=new H;paquetesSubject=new O([]);temas$=this.temasSubject.asObservable();mensajes$=this.mensajesSubject.asObservable();notificaciones$=this.notificacionesSubject.asObservable();paquetes$=this.paquetesSubject.asObservable();usuarioActual=null;isInitialized=!1;inicializarServicio(){return u(this,null,function*(){try{yield this.inicializarUsuarioActual(),yield this.verificarConexionDB(),yield this.cargarDatosIniciales(),this.isInitialized=!0,console.log("\u2705 ChatDiscussionService inicializado correctamente")}catch(t){console.error("\u274C Error inicializando ChatDiscussionService:",t),this.usarDatosDeEjemplo(),this.isInitialized=!0}})}inicializarUsuarioActual(){return u(this,null,function*(){console.log("\u{1F464} Inicializando usuario actual...");try{let t=this.authService.getCurrentUser();console.log("Usuario desde AuthService:",t),t?(this.usuarioActual=yield this.convertirProfileAUsuario(t),console.log("\u2705 Usuario actual configurado:",this.usuarioActual)):(this.usuarioActual=yield this.crearUsuarioFallback(),console.log("\u26A0\uFE0F Usando usuario por defecto:",this.usuarioActual))}catch(t){console.error("\u274C Error inicializando usuario:",t),this.usuarioActual=yield this.crearUsuarioFallback()}})}convertirProfileAUsuario(t){return u(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.client.from("profiles").select("id, username, full_name, id_perfil, avatar_url, status").eq("id",t.id).single();return i||!e?(console.warn("No se pudo obtener datos completos del usuario, usando datos del profile"),this.crearUsuarioDesdeProfile(t)):(console.log("\u{1F4CB} Datos completos del usuario:",e),{id:e.id,nombre:e.full_name||e.username||"Usuario Sin Nombre",email:e.username||"",username:e.username||"",avatar:e.avatar_url||void 0,esAdmin:this.esAdminPorPerfil(e.id_perfil),rol:this.obtenerNombreRol(e.id_perfil),id_perfil:e.id_perfil||2})}catch(e){return console.error("Error obteniendo datos del usuario:",e),this.crearUsuarioDesdeProfile(t)}})}crearUsuarioDesdeProfile(t){return{id:t.id||1,nombre:t.full_name||t.username||"Usuario",email:t.username||"",username:t.username||"",avatar:t.avatar_url||void 0,esAdmin:this.esAdminPorPerfil(t.id_perfil),rol:this.obtenerNombreRol(t.id_perfil),id_perfil:t.id_perfil||2}}crearUsuarioFallback(){return u(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.client.from("profiles").select("id, username, full_name, id_perfil, avatar_url").in("id_perfil",[1,3]).eq("status",1).limit(1);if(!e&&t&&t.length>0){let i=t[0];return console.log("\u{1F451} Usando usuario admin encontrado:",i),{id:i.id,nombre:i.full_name||i.username||"Administrador",email:i.username||"",username:i.username||"",avatar:i.avatar_url||void 0,esAdmin:!0,rol:this.obtenerNombreRol(i.id_perfil),id_perfil:i.id_perfil}}}catch(t){console.error("Error buscando usuario admin:",t)}return{id:1,nombre:"Administrador Temporal",email:"admin@sistema.com",username:"admin_temp",esAdmin:!0,rol:"Administrador",id_perfil:1}})}esAdminPorPerfil(t){return t===1||t===3}obtenerNombreRol(t){switch(t){case 1:return"Administrador";case 2:return"Usuario";case 3:return"Supervisor";case 4:return"Invitado";default:return"Usuario"}}verificarConexionDB(){return u(this,null,function*(){console.log("\u{1F50D} Verificando conexi\xF3n a la base de datos...");try{let{data:t,error:e}=yield this.supabaseService.client.from("chat_discusiones").select("count",{count:"exact",head:!0});if(e)throw console.error("\u274C Error de conexi\xF3n a DB:",e),new Error(`Error de base de datos: ${e.message}`);console.log(`\u2705 Conexi\xF3n a DB exitosa. Registros en chat_discusiones: ${t||0}`)}catch(t){throw console.error("\u274C Fallo verificaci\xF3n de DB:",t),t}})}cargarDatosIniciales(){return u(this,null,function*(){console.log("\u{1F4CA} Cargando datos iniciales...");try{yield Promise.all([this.cargarPaquetesDesdeDB(),this.cargarTemasDesdeDB()]),console.log("\u2705 Datos iniciales cargados")}catch(t){throw console.error("\u274C Error cargando datos iniciales:",t),t}})}obtenerTemas(){return console.log("\u{1F4CB} Solicitando temas... Inicializado:",this.isInitialized),this.cargarTemasDesdeDB(),this.temas$}cargarTemasDesdeDB(){return u(this,null,function*(){console.log("\u{1F4CA} Cargando temas desde la base de datos...");try{let{data:t,error:e}=yield this.supabaseService.client.from("chat_discusiones").select("*").order("created_at",{ascending:!1});if(e)throw console.error("\u274C Error cargando temas (query simple):",e),e;if(console.log(`\u{1F4CB} Temas encontrados (query simple): ${t?.length||0}`),!t||t.length===0){console.log("\u{1F4DD} No hay temas, creando datos de ejemplo..."),yield this.crearTemasEjemploEnDB();return}let i=[...new Set(t.map(p=>p.admin_id))],{data:o}=yield this.supabaseService.client.from("profiles").select("id, full_name, username").in("id",i),l=new Map;o&&o.forEach(p=>{l.set(p.id,p.full_name||p.username||"Administrador")});let S=t.map(p=>{let b=l.get(p.admin_id)||"Administrador";return{id:p.id,titulo:p.titulo,descripcion:p.descripcion,tipo:p.tipo,paqueteId:p.paquete_id||1,adminId:p.admin_id||1,adminNombre:b,fechaCreacion:new Date(p.created_at),estado:p.estado||"activo",mensajesNoLeidos:0}});console.log("Temas formateados:",S),this.temasSubject.next(S),console.log("\u2705 Temas cargados y emitidos correctamente")}catch(t){console.error("\u274C Error cr\xEDtico cargando temas:",t),this.usarTemasDeEjemplo()}})}crearTemasEjemploEnDB(){return u(this,null,function*(){if(!this.usuarioActual?.esAdmin){console.log("\u274C No es admin, no se pueden crear temas"),this.usarTemasDeEjemplo();return}try{console.log("\u{1F4DD} Creando temas de ejemplo en la base de datos...");let t=[{titulo:"Bienvenida al Sistema de Discusiones",descripcion:"Espacio para presentarse y compartir experiencias sobre rehabilitaci\xF3n",tipo:"terapia",paquete_id:1,admin_id:this.usuarioActual.id,estado:"activo"},{titulo:"Consejos de Rutinas Diarias",descripcion:"Compartamos tips y estrategias para mantener una rutina efectiva",tipo:"rutina",paquete_id:2,admin_id:this.usuarioActual.id,estado:"activo"},{titulo:"Preguntas Frecuentes sobre Terapias",descripcion:"Resuelve tus dudas m\xE1s comunes aqu\xED",tipo:"terapia",paquete_id:1,admin_id:this.usuarioActual.id,estado:"activo"}],{data:e,error:i}=yield this.supabaseService.client.from("chat_discusiones").insert(t).select();if(i){console.error("\u274C Error creando temas de ejemplo:",i),this.usarTemasDeEjemplo();return}if(console.log("\u2705 Temas de ejemplo creados:",e?.length),e&&e.length>0)for(let o of e)yield this.crearMensajeBienvenida(o.id);yield this.cargarTemasDesdeDB()}catch(t){console.error("\u274C Error creando temas de ejemplo en DB:",t),this.usarTemasDeEjemplo()}})}usarTemasDeEjemplo(){console.log("\u{1F4DD} Usando temas de ejemplo locales...");let t=[{id:1,titulo:"Bienvenida al Sistema",descripcion:"Espacio para presentarse y compartir experiencias",tipo:"terapia",paqueteId:1,adminId:1,adminNombre:this.usuarioActual?.nombre||"Administrador",fechaCreacion:new Date,estado:"activo",mensajesNoLeidos:0},{id:2,titulo:"Consejos de Rutinas",descripcion:"Tips y estrategias para mantener rutinas efectivas",tipo:"rutina",paqueteId:2,adminId:1,adminNombre:this.usuarioActual?.nombre||"Administrador",fechaCreacion:new Date(Date.now()-864e5),estado:"activo",mensajesNoLeidos:0}];this.temasSubject.next(t),console.log("\u2705 Temas de ejemplo locales configurados")}crearTema(t){return console.log("\u{1F4DD} Creando nuevo tema:",t),new T(e=>{this.crearTemaEnDB(t).then(i=>{e.next(i),e.complete()}).catch(i=>{console.error("\u274C Error en crearTema:",i),e.error(i)})})}crearTemaEnDB(t){return u(this,null,function*(){if(!this.usuarioActual?.esAdmin)throw new Error("Solo los administradores pueden crear discusiones");try{let{data:e,error:i}=yield this.supabaseService.client.from("chat_discusiones").insert({titulo:t.titulo,descripcion:t.descripcion,tipo:t.tipo,paquete_id:t.paqueteId,admin_id:this.usuarioActual.id,estado:"activo"}).select().single();if(i)throw console.error("Error creando tema:",i),i;let o={id:e.id,titulo:e.titulo,descripcion:e.descripcion,tipo:e.tipo,paqueteId:e.paquete_id,adminId:e.admin_id,adminNombre:this.usuarioActual.nombre,fechaCreacion:new Date(e.created_at),estado:e.estado,mensajesNoLeidos:0};return yield this.crearMensajeBienvenida(o.id),this.cargarTemasDesdeDB(),this.notificacionesSubject.next("Discusi\xF3n creada exitosamente"),o}catch(e){throw console.error("Error cr\xEDtico creando tema:",e),e}})}obtenerMensajes(t){return console.log(`\u{1F4E8} Obteniendo mensajes para tema ${t}`),this.cargarMensajesDesdeDB(t),this.mensajes$}cargarMensajesDesdeDB(t){return u(this,null,function*(){console.log(`\u{1F4E8} Cargando mensajes desde DB para tema ${t}...`);try{let{data:e,error:i}=yield this.supabaseService.client.from("chat_mensajes").select("*").eq("tema_id",t).order("created_at",{ascending:!0});if(i){console.error("\u274C Error cargando mensajes (query simple):",i),this.usarMensajesDeEjemplo(t);return}if(console.log(`\u{1F4AC} Mensajes encontrados (query simple): ${e?.length||0}`),!e||e.length===0){yield this.crearMensajeBienvenida(t);return}let o=[...new Set(e.map(b=>b.usuario_id))],{data:l}=yield this.supabaseService.client.from("profiles").select("id, username, full_name, id_perfil, avatar_url").in("id",o),S=new Map;l&&l.forEach(b=>{S.set(b.id,b)});let p=e.map(b=>{let j=S.get(b.usuario_id),R={id:b.usuario_id,nombre:j?.full_name||j?.username||`Usuario ${b.usuario_id}`,email:j?.username||"",username:j?.username||"",avatar:j?.avatar_url,esAdmin:this.esAdminPorPerfil(j?.id_perfil),rol:this.obtenerNombreRol(j?.id_perfil),id_perfil:j?.id_perfil||2};return{id:b.id,temaId:b.tema_id,usuarioId:b.usuario_id,usuario:R,mensaje:b.mensaje,fechaEnvio:new Date(b.created_at),editado:b.editado||!1,esAdmin:R.esAdmin}});this.mensajesSubject.next(p),console.log("\u2705 Mensajes cargados correctamente")}catch(e){console.error("\u274C Error cr\xEDtico cargando mensajes:",e),this.usarMensajesDeEjemplo(t)}})}crearMensajeBienvenida(t){return u(this,null,function*(){if(this.usuarioActual)try{let{error:e}=yield this.supabaseService.client.from("chat_mensajes").insert({tema_id:t,usuario_id:this.usuarioActual.id,mensaje:`\xA1Bienvenidos a esta discusi\xF3n! Soy ${this.usuarioActual.nombre} y estar\xE9 moderando este espacio. Este es un lugar seguro para compartir experiencias, hacer preguntas y apoyarnos mutuamente en nuestro proceso de rehabilitaci\xF3n. \xA1No duden en participar activamente!`,editado:!1});e||this.cargarMensajesDesdeDB(t)}catch(e){console.error("Error creando mensaje de bienvenida:",e)}})}usarMensajesDeEjemplo(t){let e=[{id:1,temaId:t,usuarioId:this.usuarioActual?.id||1,usuario:this.usuarioActual||{id:1,nombre:"Administrador",email:"admin@ejemplo.com",username:"admin",esAdmin:!0,rol:"Administrador",id_perfil:1},mensaje:"\xA1Bienvenidos a esta discusi\xF3n! Este es un espacio seguro para compartir experiencias.",fechaEnvio:new Date,editado:!1,esAdmin:!0}];this.mensajesSubject.next(e)}enviarMensaje(t,e){return console.log(`\u{1F4E4} Enviando mensaje a tema ${t}:`,e.substring(0,50)+"..."),new T(i=>{this.enviarMensajeADB(t,e).then(o=>{i.next(o),i.complete()}).catch(o=>{console.error("\u274C Error enviando mensaje:",o),i.error(o)})})}enviarMensajeADB(t,e){return u(this,null,function*(){if(!this.usuarioActual)throw new Error("Usuario no autenticado");let{data:i,error:o}=yield this.supabaseService.client.from("chat_mensajes").insert({tema_id:t,usuario_id:this.usuarioActual.id,mensaje:e.trim(),editado:!1}).select().single();if(o)throw o;let l={id:i.id,temaId:i.tema_id,usuarioId:i.usuario_id,usuario:this.usuarioActual,mensaje:i.mensaje,fechaEnvio:new Date(i.created_at),editado:!1,esAdmin:this.usuarioActual.esAdmin};return this.cargarMensajesDesdeDB(t),l})}obtenerPaquetes(){return console.log("\u{1F4E6} Obteniendo paquetes..."),this.paquetesSubject.value.length===0&&this.cargarPaquetesDesdeDB(),this.paquetes$}cargarPaquetesDesdeDB(){return u(this,null,function*(){console.log("\u{1F4E6} Cargando paquetes desde la base de datos...");try{let t=[];try{let{data:e}=yield this.supabaseService.client.from("paquetes").select("id, nombre, descripcion, tipo").eq("status",1).order("nombre");e&&e.length>0&&e.forEach(i=>{t.push({id:i.id,nombre:i.nombre,descripcion:i.descripcion,tipo:i.tipo})})}catch{console.log("\u26A0\uFE0F Tabla paquetes no disponible")}try{let{data:e}=yield this.supabaseService.client.from("rutinas").select("id, nombre, descripcion").eq("status",1).order("nombre");e&&e.length>0&&e.forEach(i=>{t.push({id:i.id,nombre:i.nombre,descripcion:i.descripcion,tipo:"rutina"})})}catch{console.log("\u26A0\uFE0F Tabla rutinas no disponible")}try{let{data:e}=yield this.supabaseService.client.from("terapias").select("id, nombre, descripcion").eq("status",1).order("nombre");e&&e.length>0&&e.forEach(i=>{t.push({id:i.id+1e3,nombre:i.nombre,descripcion:i.descripcion,tipo:"terapia"})})}catch{console.log("\u26A0\uFE0F Tabla terapias no disponible")}t.length===0?this.usarPaquetesDeEjemplo():(this.paquetesSubject.next(t),console.log("\u2705 Paquetes cargados:",t.length))}catch(t){console.error("\u274C Error cargando paquetes:",t),this.usarPaquetesDeEjemplo()}})}usarPaquetesDeEjemplo(){let t=[{id:1,nombre:"Terapia Respiratoria B\xE1sica",descripcion:"T\xE9cnicas fundamentales de respiraci\xF3n para rehabilitaci\xF3n",tipo:"terapia"},{id:2,nombre:"Rutina de Fortalecimiento",descripcion:"Ejercicios b\xE1sicos para fortalecer m\xFAsculos",tipo:"rutina"},{id:3,nombre:"Terapia de Movilidad",descripcion:"Ejercicios para mejorar la movilidad articular",tipo:"terapia"},{id:4,nombre:"Rutina de Resistencia",descripcion:"Ejercicios cardiovasculares adaptados",tipo:"rutina"}];this.paquetesSubject.next(t),console.log("\u2705 Paquetes de ejemplo configurados")}obtenerPaquetesPorTipo(t){return new T(e=>{let o=this.paquetesSubject.value.filter(l=>l.tipo===t);e.next(o),e.complete()})}obtenerUsuarioActual(){return this.usuarioActual||this.inicializarUsuarioActual(),this.usuarioActual}esAdmin(){return this.obtenerUsuarioActual()?.esAdmin||!1}marcarMensajesComoLeidos(t){console.log("\u2705 Mensajes marcados como le\xEDdos para tema:",t)}actualizarEstadoTema(t,e){return console.log(`\u{1F504} Actualizando estado de tema ${t} a ${e}`),new T(i=>{this.actualizarEstadoTemaEnDB(t,e).then(o=>{i.next(o),i.complete()}).catch(o=>{i.error(o)})})}actualizarEstadoTemaEnDB(t,e){return u(this,null,function*(){if(!this.usuarioActual?.esAdmin)return this.notificacionesSubject.next("Solo los administradores pueden cambiar el estado"),!1;try{let{error:i}=yield this.supabaseService.client.from("chat_discusiones").update({estado:e,updated_at:new Date().toISOString()}).eq("id",t);return i?(console.error("Error actualizando estado del tema:",i),!1):(this.cargarTemasDesdeDB(),this.notificacionesSubject.next(`Discusi\xF3n ${e==="activo"?"abierta":"cerrada"}`),!0)}catch(i){return console.error("Error cr\xEDtico actualizando estado:",i),!1}})}limpiarEstado(){this.temasSubject.next([]),this.mensajesSubject.next([])}simularNuevoMensaje(t){console.log("\u2139\uFE0F Simulaci\xF3n deshabilitada - usando datos reales")}usarDatosDeEjemplo(){console.log("\u{1F4DD} Usando todos los datos de ejemplo..."),this.usarTemasDeEjemplo(),this.usarPaquetesDeEjemplo()}debugConexion(){return u(this,null,function*(){console.log("\u{1F527} === DEBUG DE CONEXI\xD3N ===");try{console.log("Test 1: Conexi\xF3n a Supabase");let{data:t}=yield this.supabaseService.client.from("chat_discusiones").select("count",{count:"exact",head:!0});console.log("\u2705 Test 1 exitoso, registros:",t),console.log("Test 2: Datos de discusiones");let{data:e,error:i}=yield this.supabaseService.client.from("chat_discusiones").select("*").limit(5);console.log("Test 2 resultado:",{data:e,error:i}),console.log("Test 3: Usuario actual completo"),console.log("Usuario actual:",this.usuarioActual),console.log("Es admin:",this.usuarioActual?.esAdmin),console.log("Rol:",this.usuarioActual?.rol),console.log("ID Perfil:",this.usuarioActual?.id_perfil),console.log("Test 4: Usuarios en profiles");let{data:o,error:l}=yield this.supabaseService.client.from("profiles").select("id, username, full_name, id_perfil").eq("status",1).limit(5);console.log("Usuarios encontrados:",o),l&&console.error("Error obteniendo usuarios:",l),console.log("Test 5: Estados del servicio"),console.log("Temas actuales:",this.temasSubject.value.length),console.log("Paquetes actuales:",this.paquetesSubject.value.length),console.log("Inicializado:",this.isInitialized),console.log("Test 6: Verificaci\xF3n de roles de admin");let{data:S,error:p}=yield this.supabaseService.client.from("profiles").select("id, username, full_name, id_perfil").in("id_perfil",[1,3]).eq("status",1);console.log("Administradores/Supervisores encontrados:",S),p&&console.error("Error obteniendo admins:",p)}catch(t){console.error("\u274C Error en debug:",t)}})}obtenerUsuariosPorRol(t){return new T(e=>{this.cargarUsuariosPorRol(t).then(i=>{e.next(i),e.complete()}).catch(i=>{e.error(i)})})}cargarUsuariosPorRol(t){return u(this,null,function*(){try{let{data:e,error:i}=yield this.supabaseService.client.from("profiles").select("id, username, full_name, id_perfil, avatar_url").eq("id_perfil",t).eq("status",1).order("full_name");return i?(console.error("Error obteniendo usuarios por rol:",i),[]):(e||[]).map(o=>({id:o.id,nombre:o.full_name||o.username||"Usuario Sin Nombre",email:o.username||"",username:o.username||"",avatar:o.avatar_url,esAdmin:this.esAdminPorPerfil(o.id_perfil),rol:this.obtenerNombreRol(o.id_perfil),id_perfil:o.id_perfil}))}catch(e){return console.error("Error cr\xEDtico obteniendo usuarios por rol:",e),[]}})}verificarPermisoCrearTema(){return u(this,null,function*(){return this.usuarioActual?this.usuarioActual.esAdmin?{puede:!0,razon:`Tienes permisos como ${this.usuarioActual.rol}`}:{puede:!1,razon:`Tu rol "${this.usuarioActual.rol}" no tiene permisos para crear discusiones. Solo Administradores y Supervisores pueden crear temas.`}:{puede:!1,razon:"Usuario no autenticado"}})}obtenerEstadisticasChat(){return u(this,null,function*(){try{let{data:t,error:e}=yield this.supabaseService.client.rpc("get_chat_statistics");return e?(console.log("Funci\xF3n RPC no disponible, calculando estad\xEDsticas manualmente"),yield this.calcularEstadisticasManual()):t[0]||{}}catch{return console.log("Calculando estad\xEDsticas de forma manual"),yield this.calcularEstadisticasManual()}})}calcularEstadisticasManual(){return u(this,null,function*(){try{let{data:t}=yield this.supabaseService.client.from("chat_discusiones").select("*"),{data:e}=yield this.supabaseService.client.from("chat_mensajes").select("*"),{data:i}=yield this.supabaseService.client.from("profiles").select("id, id_perfil").eq("status",1);return{total_temas:t?.length||0,temas_activos:t?.filter(o=>o.estado==="activo").length||0,total_mensajes:e?.length||0,total_usuarios:i?.length||0,usuarios_admin:i?.filter(o=>this.esAdminPorPerfil(o.id_perfil)).length||0,usuarios_regulares:i?.filter(o=>!this.esAdminPorPerfil(o.id_perfil)).length||0}}catch(t){return console.error("Error calculando estad\xEDsticas:",t),{}}})}get client(){return this.supabaseService.client}refrescarUsuarioActual(){return u(this,null,function*(){console.log("\u{1F504} Refrescando datos del usuario actual..."),yield this.inicializarUsuarioActual()})}static \u0275fac=function(e){return new(e||n)(z(be),z(ve))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ce=["mensajesContainer"];function ye(n,t){if(n&1){let e=D();a(0,"button",21),E("click",function(){v(e);let o=m();return x(o.mostrarFormularioTema=!0)}),h(),a(1,"svg",22),g(2,"path",23),r(),c(3," Crear Nueva Discusi\xF3n "),r()}}function Se(n,t){if(n&1&&(a(0,"option",45),c(1),r()),n&2){let e=t.$implicit;d("value",e.id),s(),w(" ",e.nombre," ")}}function we(n,t){if(n&1){let e=D();a(0,"div")(1,"label",29),c(2),r(),a(3,"select",43),I("ngModelChange",function(o){v(e);let l=m(2);return P(l.nuevoTema.paqueteId,o)||(l.nuevoTema.paqueteId=o),x(o)}),a(4,"option",33),c(5),r(),f(6,Se,2,2,"option",44),r()()}if(n&2){let e=m(2);s(2),w(" ",e.nuevoTema.tipo==="terapia"?"Terapia":"Rutina"," "),s(),A("ngModel",e.nuevoTema.paqueteId),s(2),w("Seleccionar ",e.nuevoTema.tipo,""),s(),d("ngForOf",e.paquetesFiltrados)("ngForTrackBy",e.trackByPaquete)}}function Ee(n,t){if(n&1){let e=D();a(0,"div",24)(1,"h3",25),h(),a(2,"svg",26),g(3,"path",27),r(),c(4," Nueva Discusi\xF3n "),r(),C(),a(5,"form",28),E("ngSubmit",function(){v(e);let o=m();return x(o.crearTema())}),a(6,"div")(7,"label",29),c(8,"T\xEDtulo"),r(),a(9,"input",30),I("ngModelChange",function(o){v(e);let l=m();return P(l.nuevoTema.titulo,o)||(l.nuevoTema.titulo=o),x(o)}),r()(),a(10,"div")(11,"label",29),c(12,"Descripci\xF3n"),r(),a(13,"textarea",31),I("ngModelChange",function(o){v(e);let l=m();return P(l.nuevoTema.descripcion,o)||(l.nuevoTema.descripcion=o),x(o)}),r()(),a(14,"div")(15,"label",29),c(16,"Tipo"),r(),a(17,"select",32),I("ngModelChange",function(o){v(e);let l=m();return P(l.nuevoTema.tipo,o)||(l.nuevoTema.tipo=o),x(o)}),E("change",function(){v(e);let o=m();return x(o.onTemaTyping())}),a(18,"option",33),c(19,"Seleccionar tipo"),r(),a(20,"option",34),c(21,"\u{1FA7A} Terapia"),r(),a(22,"option",35),c(23,"\u{1F4AA} Rutina"),r()()(),f(24,we,7,5,"div",36),a(25,"div",37)(26,"button",38)(27,"span",39),h(),a(28,"svg",22),g(29,"path",40),r(),c(30," Crear "),r()(),C(),a(31,"button",41),E("click",function(){v(e);let o=m();return x(o.cancelarCreacion())}),a(32,"span",39),h(),a(33,"svg",22),g(34,"path",42),r(),c(35," Cancelar "),r()()()()()}if(n&2){let e=m();s(9),A("ngModel",e.nuevoTema.titulo),s(4),A("ngModel",e.nuevoTema.descripcion),s(4),A("ngModel",e.nuevoTema.tipo),s(7),d("ngIf",e.nuevoTema.tipo),s(2),d("disabled",!e.formularioValido())}}function je(n,t){n&1&&(a(0,"span"),c(1,"\xA1Crea la primera discusi\xF3n!"),r())}function De(n,t){n&1&&(a(0,"span"),c(1,"Espera a que el administrador cree una discusi\xF3n."),r())}function Te(n,t){if(n&1&&(a(0,"div",46)(1,"div",47),c(2,"\u{1F4DD}"),r(),a(3,"p",48),c(4,"No hay discusiones a\xFAn"),r(),a(5,"p",49),f(6,je,2,0,"span",36)(7,De,2,0,"span",36),r()()),n&2){let e=m();s(6),d("ngIf",e.isAdmin),s(),d("ngIf",!e.isAdmin)}}function Me(n,t){if(n&1&&(a(0,"div",66),c(1),r()),n&2){let e=m().$implicit;s(),w(" ",e.mensajesNoLeidos>99?"99+":e.mensajesNoLeidos," ")}}function Ae(n,t){n&1&&g(0,"div",67)}function Pe(n,t){if(n&1){let e=D();a(0,"div",50),E("click",function(){let o=v(e).$implicit,l=m();return x(l.seleccionarTema(o))}),a(1,"div",51)(2,"div",52)(3,"div",53)(4,"h3",54),c(5),r(),a(6,"span",55),c(7),k(8,"titlecase"),r()(),a(9,"p",56),c(10),r(),a(11,"div",57)(12,"div",58)(13,"span",59),h(),a(14,"svg",60),g(15,"path",61),r(),c(16),r(),C(),a(17,"span",62),c(18),k(19,"titlecase"),r()(),a(20,"span"),c(21),r()()(),a(22,"div",63),f(23,Me,2,1,"div",64)(24,Ae,1,0,"div",65),r()()()}if(n&2){let e=t.$implicit,i=m();y("bg-blue-50",(i.temaSeleccionado==null?null:i.temaSeleccionado.id)===e.id)("border-l-4",(i.temaSeleccionado==null?null:i.temaSeleccionado.id)===e.id)("border-l-blue-500",(i.temaSeleccionado==null?null:i.temaSeleccionado.id)===e.id)("estado-activo",e.estado==="activo")("estado-cerrado",e.estado==="cerrado"),s(5),_(e.titulo),s(),d("ngClass",i.obtenerColorTipo(e.tipo)),s(),M(" ",e.tipo==="terapia"?"\u{1FA7A}":"\u{1F4AA}"," ",q(8,22,e.tipo)," "),s(3),_(e.descripcion),s(6),w(" ",i.contarMensajesDelTema(e.id)," "),s(),d("ngClass",i.obtenerEstadoVisual(e.estado).color),s(),M(" ",i.obtenerEstadoVisual(e.estado).icono," ",q(19,24,e.estado)," "),s(3),_(i.formatearFecha(e.fechaCreacion)),s(2),d("ngIf",e.mensajesNoLeidos>0),s(),d("ngIf",e.mensajesNoLeidos===0)}}function Ie(n,t){n&1&&(h(),g(0,"path",79))}function ke(n,t){n&1&&(h(),g(0,"path",80))}function qe(n,t){if(n&1){let e=D();a(0,"button",76),E("click",function(){v(e);let o=m(2);return x(o.toggleEstadoTema())}),h(),a(1,"svg",22),f(2,Ie,1,0,"path",77)(3,ke,1,0,"path",78),r(),c(4),r()}if(n&2){let e=m(2);y("bg-red-500",e.temaSeleccionado.estado==="activo")("hover:bg-red-400",e.temaSeleccionado.estado==="activo")("bg-green-500",e.temaSeleccionado.estado==="cerrado")("hover:bg-green-400",e.temaSeleccionado.estado==="cerrado"),s(2),d("ngIf",e.temaSeleccionado.estado==="activo"),s(),d("ngIf",e.temaSeleccionado.estado==="cerrado"),s(),w(" ",e.temaSeleccionado.estado==="activo"?"Cerrar Discusi\xF3n":"Abrir Discusi\xF3n"," ")}}function Oe(n,t){if(n&1&&(a(0,"div",68)(1,"div",4)(2,"div",52)(3,"div",69)(4,"h1",70),c(5),r(),a(6,"span",71),c(7),k(8,"titlecase"),r()(),a(9,"p",72),c(10),r(),a(11,"div",73)(12,"span",59),h(),a(13,"svg",22),g(14,"path",74),r(),c(15),r(),C(),a(16,"span",59),h(),a(17,"svg",22),g(18,"path",61),r(),c(19),r(),C(),a(20,"span",62),c(21),k(22,"titlecase"),r()()(),f(23,qe,5,11,"button",75),r()()),n&2){let e=m();s(5),_(e.temaSeleccionado.titulo),s(),d("ngClass",e.obtenerColorTipo(e.temaSeleccionado.tipo)),s(),M(" ",e.temaSeleccionado.tipo==="terapia"?"\u{1FA7A}":"\u{1F4AA}"," ",q(8,12,e.temaSeleccionado.tipo)," "),s(3),_(e.temaSeleccionado.descripcion),s(5),w(" Creado: ",e.formatearFecha(e.temaSeleccionado.fechaCreacion)," "),s(4),M(" ",e.mensajesChat.length," mensaje",e.mensajesChat.length!==1?"s":""," "),s(),d("ngClass",e.obtenerEstadoVisual(e.temaSeleccionado.estado).color),s(),M(" ",e.obtenerEstadoVisual(e.temaSeleccionado.estado).icono," ",q(22,14,e.temaSeleccionado.estado)," "),s(2),d("ngIf",e.isAdmin)}}function Be(n,t){n&1&&(a(0,"div",84)(1,"div",85),h(),a(2,"svg",86),g(3,"path",61),r()(),C(),a(4,"h3",87),c(5,"\xA1Inicia la conversaci\xF3n!"),r(),a(6,"p",88),c(7,"S\xE9 el primero en comentar en esta discusi\xF3n. Comparte tus dudas, experiencias o consejos sobre este tema."),r()())}function Ve(n,t){n&1&&(a(0,"div",103),c(1," Admin "),r())}function Ue(n,t){n&1&&(a(0,"div",104),h(),a(1,"svg",60),g(2,"path",27),r(),c(3," Editado "),r())}function Ne(n,t){if(n&1&&(a(0,"div",89)(1,"div",90)(2,"div",91),g(3,"img",92),a(4,"div",93),c(5),r()(),f(6,Ve,2,0,"div",94),r(),a(7,"div",95)(8,"div",96)(9,"div",97)(10,"span",98),c(11),r(),a(12,"span",99),c(13),r()(),a(14,"div",100)(15,"p",101),c(16),r()(),f(17,Ue,4,0,"div",102),r()()()),n&2){let e=t.$implicit,i=m(2);y("flex-row-reverse",e.esAdmin)("justify-start",!e.esAdmin)("justify-end",e.esAdmin),s(3),y("border-blue-500",e.esAdmin)("border-gray-300",!e.esAdmin),d("src",e.usuario.avatar||"/assets/default-avatar.png",Y)("alt",e.usuario.nombre),s(),y("bg-blue-500",e.esAdmin)("bg-gray-500",!e.esAdmin)("border-blue-500",e.esAdmin)("border-gray-300",!e.esAdmin),s(),w(" ",i.obtenerIniciales(e.usuario.nombre)," "),s(),d("ngIf",e.esAdmin),s(),y("order-first",e.esAdmin),s(),y("burbuja-admin",e.esAdmin)("text-white",e.esAdmin)("burbuja-usuario",!e.esAdmin)("text-gray-800",!e.esAdmin),s(),y("text-blue-100",e.esAdmin)("text-gray-600",!e.esAdmin),s(2),_(e.usuario.nombre),s(2),_(i.formatearFecha(e.fechaEnvio)),s(3),_(e.mensaje),s(),d("ngIf",e.editado)}}function Fe(n,t){if(n&1&&(a(0,"div",81,0),f(2,Be,8,0,"div",82)(3,Ne,18,40,"div",83),r()),n&2){let e=m();s(2),d("ngIf",e.mensajesChat.length===0),s(),d("ngForOf",e.mensajesChat)("ngForTrackBy",e.trackByMensaje)}}function ze(n,t){n&1&&(a(0,"span",122),c(1," Admin "),r())}function Le(n,t){n&1&&(a(0,"span",123),c(1," \u2713 Listo para enviar "),r())}function $e(n,t){if(n&1){let e=D();a(0,"div",105)(1,"div",106)(2,"div",107)(3,"div",108)(4,"span",109),c(5),r()(),a(6,"span"),c(7,"Escribiendo como "),a(8,"strong"),c(9),r()(),f(10,ze,2,0,"span",110),r()(),a(11,"div",111)(12,"div",112)(13,"div",91)(14,"textarea",113),I("ngModelChange",function(o){v(e);let l=m();return P(l.nuevoMensaje,o)||(l.nuevoMensaje=o),x(o)}),E("keydown.enter",function(o){v(e);let l=m();return x(l.enviarMensaje(o))}),r(),a(15,"div",114),c(16),r()(),a(17,"div",115)(18,"span",59),h(),a(19,"svg",60),g(20,"path",116),r(),c(21," Presiona Ctrl + Enter para enviar r\xE1pidamente "),r(),f(22,Le,2,0,"span",117),r()(),C(),a(23,"button",118),E("click",function(){v(e);let o=m();return x(o.enviarMensaje())}),h(),a(24,"svg",119),g(25,"path",120),r(),C(),a(26,"span",121),c(27,"Enviar"),r()()()()}if(n&2){let e=m();s(5),_(e.obtenerIniciales((e.usuarioActual==null?null:e.usuarioActual.nombre)||"U")),s(4),_((e.usuarioActual==null?null:e.usuarioActual.nombre)||"Usuario"),s(),d("ngIf",e.isAdmin),s(4),y("border-blue-300",e.nuevoMensaje.trim().length>0),A("ngModel",e.nuevoMensaje),s(2),w(" ",e.nuevoMensaje.length,"/1000 "),s(6),d("ngIf",e.nuevoMensaje.trim().length>0),s(),y("transform",e.nuevoMensaje.trim().length>0)("scale-105",e.nuevoMensaje.trim().length>0),d("disabled",!e.nuevoMensaje.trim())}}function Re(n,t){n&1&&(a(0,"div",124)(1,"div",125),h(),a(2,"svg",126),g(3,"path",79),r()(),C(),a(4,"h3",127),c(5,"Discusi\xF3n cerrada"),r(),a(6,"p",128),c(7,"Esta discusi\xF3n ha sido cerrada por el administrador y no se pueden agregar nuevos mensajes."),r()())}function Ge(n,t){n&1&&(a(0,"li"),c(1,"\u2022 Como admin, puedes crear nuevos temas"),r())}function He(n,t){if(n&1&&(a(0,"div",129)(1,"div",130)(2,"div",131),h(),a(3,"svg",132),g(4,"path",61),r()(),C(),a(5,"h3",133),c(6,"\xA1Bienvenido al centro de discusiones!"),r(),a(7,"p",134),c(8,"Selecciona una discusi\xF3n de la lista para comenzar a participar en la conversaci\xF3n y compartir tus experiencias."),r(),a(9,"div",135)(10,"h4",136),c(11,"\u{1F4A1} \xBFC\xF3mo funciona?"),r(),a(12,"ul",137)(13,"li"),c(14,"\u2022 Selecciona un tema de la izquierda"),r(),a(15,"li"),c(16,"\u2022 Participa en la discusi\xF3n"),r(),a(17,"li"),c(18,"\u2022 Comparte tus experiencias y dudas"),r(),f(19,Ge,2,0,"li",36),r()()()()),n&2){let e=m();s(19),d("ngIf",e.isAdmin)}}var N=class n{constructor(t){this.chatService=t}mensajesContainer;usuarioActual;isAdmin=!1;permisoCrearTema={puede:!1,razon:""};temasDiscusion=[];temaSeleccionado=null;mensajesChat=[];paquetesDisponibles=[];estadisticasChat={};isLoading=!0;errorMessage="";debugInfo="";mostrarFormularioTema=!1;nuevoTema={titulo:"",descripcion:"",tipo:"",paqueteId:null};nuevoMensaje="";subscripciones=new G;shouldScrollToBottom=!1;ngOnInit(){console.log("\u{1F680} Inicializando ChatDiscussionComponent..."),this.inicializarComponente()}ngOnDestroy(){this.subscripciones.unsubscribe(),this.chatService.limpiarEstado()}ngAfterViewChecked(){this.shouldScrollToBottom&&(this.scrollToBottom(),this.shouldScrollToBottom=!1)}inicializarComponente(){return u(this,null,function*(){try{this.debugInfo="Inicializando...",this.isLoading=!0,this.debugInfo="Obteniendo usuario actual...",this.usuarioActual=this.chatService.obtenerUsuarioActual(),this.isAdmin=this.chatService.esAdmin(),this.permisoCrearTema=yield this.chatService.verificarPermisoCrearTema(),console.log("\u{1F464} Usuario actual:",this.usuarioActual),console.log("\u{1F511} Es admin:",this.isAdmin),console.log("\u{1F4DD} Permiso crear tema:",this.permisoCrearTema),this.debugInfo="Verificando conexi\xF3n...",yield this.ejecutarDebug(),this.debugInfo="Cargando datos...",yield this.cargarDatosIniciales(),this.debugInfo="Cargando estad\xEDsticas...",yield this.cargarEstadisticas(),this.debugInfo="",this.isLoading=!1,console.log("\u2705 Componente inicializado correctamente")}catch(t){console.error("\u274C Error inicializando componente:",t),this.errorMessage=`Error de inicializaci\xF3n: ${t}`,this.isLoading=!1}})}ejecutarDebug(){return u(this,null,function*(){try{console.log("\u{1F527} Ejecutando debug del servicio..."),yield this.chatService.debugConexion()}catch(t){console.error("\u274C Error en debug:",t)}})}cargarDatosIniciales(){return u(this,null,function*(){try{console.log("\u{1F4E6} Cargando paquetes..."),this.cargarPaquetes(),yield new Promise(t=>setTimeout(t,1e3)),console.log("\u{1F4CB} Cargando temas..."),this.cargarTemas(),this.suscribirANotificaciones(),console.log("\u2705 Datos iniciales cargados")}catch(t){console.error("\u274C Error cargando datos iniciales:",t),this.errorMessage=`Error cargando datos: ${t}`}})}cargarEstadisticas(){return u(this,null,function*(){try{this.estadisticasChat=yield this.chatService.obtenerEstadisticasChat(),console.log("\u{1F4CA} Estad\xEDsticas cargadas:",this.estadisticasChat)}catch(t){console.error("\u274C Error cargando estad\xEDsticas:",t)}})}cargarPaquetes(){let t=this.chatService.obtenerPaquetes().subscribe({next:e=>{console.log("\u{1F4E6} Paquetes recibidos:",e.length),this.paquetesDisponibles=e},error:e=>{console.error("\u274C Error cargando paquetes:",e),this.errorMessage="Error cargando paquetes"}});this.subscripciones.add(t)}cargarTemas(){let t=this.chatService.obtenerTemas().subscribe({next:e=>{console.log("\u{1F4CB} Temas recibidos:",e.length,e),this.temasDiscusion=e,e.length===0&&this.permisoCrearTema.puede?this.debugInfo="No hay temas. Puedes crear el primero como "+this.usuarioActual.rol:e.length===0&&(this.debugInfo="No hay temas disponibles a\xFAn.")},error:e=>{console.error("\u274C Error cargando temas:",e),this.errorMessage="Error cargando temas de discusi\xF3n"}});this.subscripciones.add(t)}suscribirANotificaciones(){let t=this.chatService.notificaciones$.subscribe({next:e=>{console.log("\u{1F4E2} Notificaci\xF3n:",e),this.mostrarNotificacion(e)},error:e=>{console.error("\u274C Error en notificaciones:",e)}});this.subscripciones.add(t)}mostrarNotificacion(t){this.debugInfo=`\u2705 ${t}`,setTimeout(()=>{this.debugInfo.includes(t)&&(this.debugInfo="")},3e3)}seleccionarTema(t){console.log("\u{1F3AF} Seleccionando tema:",t.titulo),this.temaSeleccionado=t,this.cargarMensajes(t.id),this.chatService.marcarMensajesComoLeidos(t.id)}cargarMensajes(t){console.log(`\u{1F4E8} Cargando mensajes para tema ${t}`);let e=this.chatService.obtenerMensajes(t).subscribe({next:i=>{console.log(`\u{1F4AC} Mensajes recibidos para tema ${t}:`,i.length),this.mensajesChat=i,this.shouldScrollToBottom=!0},error:i=>{console.error("\u274C Error cargando mensajes:",i),this.errorMessage="Error cargando mensajes"}});this.subscripciones.add(e)}crearTema(){return u(this,null,function*(){if(!this.permisoCrearTema.puede){this.errorMessage=this.permisoCrearTema.razon;return}if(!this.formularioValido()){this.errorMessage="Por favor completa todos los campos";return}try{console.log("\u{1F4DD} Creando nuevo tema:",this.nuevoTema),this.isLoading=!0;let t=this.chatService.crearTema({titulo:this.nuevoTema.titulo,descripcion:this.nuevoTema.descripcion,tipo:this.nuevoTema.tipo,paqueteId:this.nuevoTema.paqueteId}).subscribe({next:e=>{console.log("\u2705 Tema creado exitosamente:",e),this.cancelarCreacion(),this.seleccionarTema(e),this.isLoading=!1},error:e=>{console.error("\u274C Error creando tema:",e),this.errorMessage=`Error creando tema: ${e.message}`,this.isLoading=!1}});this.subscripciones.add(t)}catch(t){console.error("\u274C Error en crearTema:",t),this.errorMessage=`Error: ${t}`,this.isLoading=!1}})}formularioValido(){return!!(this.nuevoTema.titulo.trim()&&this.nuevoTema.descripcion.trim()&&this.nuevoTema.tipo&&this.nuevoTema.paqueteId)}cancelarCreacion(){this.mostrarFormularioTema=!1,this.nuevoTema={titulo:"",descripcion:"",tipo:"",paqueteId:null},this.errorMessage=""}toggleEstadoTema(){if(!this.temaSeleccionado)return;let t=this.temaSeleccionado.estado==="activo"?"cerrado":"activo";console.log(`\u{1F504} Cambiando estado de tema a: ${t}`);let e=this.chatService.actualizarEstadoTema(this.temaSeleccionado.id,t).subscribe({next:i=>{i&&this.temaSeleccionado&&(this.temaSeleccionado.estado=t,console.log("\u2705 Estado actualizado correctamente"))},error:i=>{console.error("\u274C Error actualizando estado:",i),this.errorMessage="Error actualizando estado del tema"}});this.subscripciones.add(e)}enviarMensaje(t){if(t&&t instanceof KeyboardEvent&&!t.ctrlKey){t.preventDefault();return}if(!this.nuevoMensaje.trim()||!this.temaSeleccionado){console.log("\u26A0\uFE0F No se puede enviar mensaje vac\xEDo o sin tema seleccionado");return}console.log("\u{1F4E4} Enviando mensaje:",this.nuevoMensaje.substring(0,50)+"...");let e=this.chatService.enviarMensaje(this.temaSeleccionado.id,this.nuevoMensaje.trim()).subscribe({next:i=>{console.log("\u2705 Mensaje enviado exitosamente:",i),this.nuevoMensaje="",this.shouldScrollToBottom=!0},error:i=>{console.error("\u274C Error enviando mensaje:",i),this.errorMessage=`Error enviando mensaje: ${i.message}`}});this.subscripciones.add(e)}scrollToBottom(){try{let t=this.mensajesContainer.nativeElement;t.scrollTop=t.scrollHeight}catch(t){console.log("Error al hacer scroll:",t)}}trackByMensaje(t,e){return e.id}trackByTema(t,e){return e.id}trackByPaquete(t,e){return e.id}get paquetesFiltrados(){return this.nuevoTema.tipo?this.paquetesDisponibles.filter(t=>t.tipo===this.nuevoTema.tipo):[]}obtenerIniciales(t){return t.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().substring(0,2)}formatearFecha(t){let i=new Date().getTime()-t.getTime(),o=Math.floor(i/(1e3*60)),l=Math.floor(i/(1e3*60*60)),S=Math.floor(i/(1e3*60*60*24));return o<1?"Ahora":o<60?`${o}m`:l<24?`${l}h`:S<7?`${S}d`:t.toLocaleDateString()}obtenerColorTipo(t){return t==="terapia"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}obtenerEstadoVisual(t){return t==="activo"?{color:"text-green-600",icono:"\u{1F7E2}"}:{color:"text-red-600",icono:"\u{1F534}"}}obtenerColorRol(t){switch(t.id_perfil){case 1:return"bg-red-100 text-red-700";case 2:return"bg-blue-100 text-blue-700";case 3:return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}}obtenerIconoRol(t){switch(t.id_perfil){case 1:return"\u{1F451}";case 2:return"\u{1F464}";case 3:return"\u{1FA7A}";default:return"\u2753"}}onTemaTyping(){this.nuevoTema.tipo&&console.log("\u{1F504} Tipo de tema cambiado a:",this.nuevoTema.tipo)}contarMensajesDelTema(t){return this.mensajesChat.filter(e=>e.temaId===t).length}hayMensajesNoLeidos(){return this.temasDiscusion.some(t=>t.mensajesNoLeidos>0)}totalMensajesNoLeidos(){return this.temasDiscusion.reduce((t,e)=>t+e.mensajesNoLeidos,0)}recargarDatos(){return u(this,null,function*(){console.log("\u{1F504} Recargando datos manualmente..."),this.isLoading=!0,this.errorMessage="";try{yield this.chatService.refrescarUsuarioActual(),this.usuarioActual=this.chatService.obtenerUsuarioActual(),this.isAdmin=this.chatService.esAdmin(),this.permisoCrearTema=yield this.chatService.verificarPermisoCrearTema(),yield this.cargarDatosIniciales(),yield this.cargarEstadisticas(),this.debugInfo="\u2705 Datos recargados exitosamente",setTimeout(()=>this.debugInfo="",3e3)}catch(t){this.errorMessage=`Error recargando: ${t}`}this.isLoading=!1})}ejecutarDebugManual(){return u(this,null,function*(){console.log("\u{1F527} Ejecutando debug manual..."),yield this.ejecutarDebug(),this.debugInfo="\u2705 Debug ejecutado - revisa la consola",setTimeout(()=>this.debugInfo="",3e3)})}limpiarErrores(){this.errorMessage="",this.debugInfo=""}mostrarInfoCompleta(){return!!(this.usuarioActual&&this.usuarioActual.nombre&&this.usuarioActual.nombre!=="Usuario Sin Nombre")}obtenerTextoRol(){if(!this.usuarioActual)return"Sin rol";let t=this.usuarioActual.rol;return`${this.obtenerIconoRol(this.usuarioActual)} ${t}`}obtenerDescripcionUsuario(){if(!this.usuarioActual)return"Usuario no identificado";let t=this.usuarioActual.nombre;return this.usuarioActual.username&&this.usuarioActual.username!==this.usuarioActual.nombre&&(t+=` (@${this.usuarioActual.username})`),t}obtenerResumenEstadisticas(){if(!this.estadisticasChat||Object.keys(this.estadisticasChat).length===0)return"Estad\xEDsticas no disponibles";let t=this.estadisticasChat;return`${t.total_temas||0} temas \u2022 ${t.total_mensajes||0} mensajes \u2022 ${t.total_usuarios||0} usuarios`}mostrarEstadisticasDetalladas(){return!!(this.isAdmin&&this.estadisticasChat&&Object.keys(this.estadisticasChat).length>0)}puedeCrearTemas(){return this.permisoCrearTema.puede}puedeModificarEstado(){return this.isAdmin}obtenerMensajePermisos(){return this.permisoCrearTema.puede?`Tienes permisos para crear discusiones como ${this.usuarioActual?.rol}`:this.permisoCrearTema.razon}obtenerClaseUsuario(t){return`inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full font-medium ${this.obtenerColorRol(t.usuario)}`}mostrarDetallesMensaje(t){let e=`Enviado por ${t.usuario.nombre}`;return t.usuario.rol&&(e+=` (${t.usuario.rol})`),t.editado&&(e+=" \u2022 Editado"),e+=` \u2022 ${this.formatearFecha(t.fechaEnvio)}`,e}obtenerPlaceholderMensaje(){return this.usuarioActual?`Escribe tu mensaje como ${this.usuarioActual.nombre}... (Ctrl + Enter para enviar)`:"Escribe tu mensaje..."}obtenerInfoCreador(t){let e=`Creado por ${t.adminNombre||"Administrador"}`;return e+=` \u2022 ${this.formatearFecha(t.fechaCreacion)}`,e}logUsuarioActual(){console.log("\u{1F50D} Usuario actual para debugging:",{usuario:this.usuarioActual,esAdmin:this.isAdmin,permisos:this.permisoCrearTema,temas:this.temasDiscusion.length,paquetes:this.paquetesDisponibles.length})}static \u0275fac=function(e){return new(e||n)(Q(U))};static \u0275cmp=K({type:n,selectors:[["app-chat-discussion"]],viewQuery:function(e,i){if(e&1&&X(Ce,5),e&2){let o;J(o=Z())&&(i.mensajesContainer=o.first)}},standalone:!1,decls:24,vars:14,consts:[["mensajesContainer",""],[1,"flex","h-screen","bg-gray-50"],[1,"w-1/3","bg-white","border-r","border-gray-300","flex","flex-col","shadow-lg"],[1,"p-4","border-b","border-gray-200","bg-gradient-to-r","from-blue-600","to-blue-700","text-white"],[1,"flex","items-center","justify-between"],[1,"text-xl","font-bold"],[1,"text-blue-100","text-sm","mt-1"],[1,"text-right"],[1,"w-10","h-10","bg-blue-500","rounded-full","flex","items-center","justify-center"],[1,"text-sm","font-bold"],["class","mt-3 w-full bg-blue-500 hover:bg-blue-400 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center justify-center gap-2 shadow-md hover:shadow-lg",3,"click",4,"ngIf"],["class","p-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-b border-blue-200 formulario-nuevo-tema",4,"ngIf"],[1,"flex-1","overflow-y-auto"],["class","p-8 text-center text-gray-500",4,"ngIf"],["class","p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-all duration-200 relative",3,"bg-blue-50","border-l-4","border-l-blue-500","estado-activo","estado-cerrado","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex-1","flex","flex-col","bg-white"],["class","p-4 bg-white border-b border-gray-200 shadow-sm",4,"ngIf"],["class","flex-1 overflow-y-auto p-4 space-y-4 area-mensajes",4,"ngIf"],["class","p-4 bg-white border-t border-gray-200 shadow-lg",4,"ngIf"],["class","p-6 bg-gray-50 border-t border-gray-200 text-center",4,"ngIf"],["class","flex-1 flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100",4,"ngIf"],[1,"mt-3","w-full","bg-blue-500","hover:bg-blue-400","px-4","py-2","rounded-lg","text-sm","font-medium","transition-all","duration-200","flex","items-center","justify-center","gap-2","shadow-md","hover:shadow-lg",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"p-4","bg-gradient-to-br","from-blue-50","to-indigo-50","border-b","border-blue-200","formulario-nuevo-tema"],[1,"font-semibold","text-gray-800","mb-3","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"space-y-3",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["name","titulo","placeholder","Ej: \xBFC\xF3mo iniciar ejercicios de rehabilitaci\xF3n?","maxlength","255","required","",1,"w-full","p-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","input-focus",3,"ngModelChange","ngModel"],["name","descripcion","placeholder","Describe el tema de discusi\xF3n...","maxlength","500","required","",1,"w-full","p-3","border","border-gray-300","rounded-lg","h-20","resize-none","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","input-focus",3,"ngModelChange","ngModel"],["name","tipo","required","",1,"w-full","p-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all",3,"ngModelChange","change","ngModel"],["value",""],["value","terapia"],["value","rutina"],[4,"ngIf"],[1,"flex","gap-2","pt-2"],["type","submit",1,"flex-1","bg-gradient-to-r","from-green-600","to-green-700","hover:from-green-500","hover:to-green-600","disabled:from-gray-400","disabled:to-gray-500","text-white","p-3","rounded-lg","transition-all","duration-200","font-medium","btn-gradient",3,"disabled"],[1,"flex","items-center","justify-center","gap-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["type","button",1,"flex-1","bg-gray-500","hover:bg-gray-400","text-white","p-3","rounded-lg","transition-all","duration-200","font-medium",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["name","paqueteId","required","",1,"w-full","p-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[3,"value"],[1,"p-8","text-center","text-gray-500"],[1,"text-4xl","mb-4"],[1,"font-medium"],[1,"text-sm","mt-1"],[1,"p-4","border-b","border-gray-100","cursor-pointer","hover:bg-gray-50","transition-all","duration-200","relative",3,"click"],[1,"flex","items-start","justify-between"],[1,"flex-1","min-w-0"],[1,"flex","items-center","gap-2","mb-1"],[1,"font-semibold","text-gray-800","truncate"],[1,"text-xs","px-2","py-1","rounded-full","flex-shrink-0",3,"ngClass"],[1,"text-sm","text-gray-600","mb-2","line-clamp-2"],[1,"flex","items-center","justify-between","text-xs","text-gray-500"],[1,"flex","items-center","gap-3"],[1,"flex","items-center","gap-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.959 8.959 0 01-4.906-1.468L3 21l1.468-5.094A8.959 8.959 0 013 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"],[1,"flex","items-center","gap-1",3,"ngClass"],[1,"flex","items-center","ml-3","flex-shrink-0"],["class","contador-no-leidos",4,"ngIf"],["class","w-2 h-2 rounded-full bg-gray-300",4,"ngIf"],[1,"contador-no-leidos"],[1,"w-2","h-2","rounded-full","bg-gray-300"],[1,"p-4","bg-white","border-b","border-gray-200","shadow-sm"],[1,"flex","items-center","gap-3","mb-2"],[1,"text-xl","font-bold","text-gray-800","truncate"],[1,"px-3","py-1","rounded-full","text-sm","font-medium","flex-shrink-0",3,"ngClass"],[1,"text-sm","text-gray-600","mb-3","line-clamp-2"],[1,"flex","items-center","gap-4","text-sm","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","px-4 py-2 rounded-lg transition-all duration-200 font-medium flex items-center gap-2 text-white shadow-md hover:shadow-lg",3,"bg-red-500","hover:bg-red-400","bg-green-500","hover:bg-green-400","click",4,"ngIf"],[1,"px-4","py-2","rounded-lg","transition-all","duration-200","font-medium","flex","items-center","gap-2","text-white","shadow-md","hover:shadow-lg",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"],[1,"flex-1","overflow-y-auto","p-4","space-y-4","area-mensajes"],["class","text-center py-12",4,"ngIf"],["class","flex gap-3 mensaje-entrada",3,"flex-row-reverse","justify-start","justify-end",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-center","py-12"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-100","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-blue-600"],[1,"text-lg","font-semibold","text-gray-800","mb-2"],[1,"text-gray-600","max-w-md","mx-auto"],[1,"flex","gap-3","mensaje-entrada"],[1,"flex","flex-col","items-center","flex-shrink-0"],[1,"relative"],["onerror","this.style.display='none'; this.nextElementSibling.style.display='flex'",1,"w-10","h-10","rounded-full","object-cover","border-2","shadow-sm","avatar","transition-transform",3,"src","alt"],[1,"w-10","h-10","rounded-full","border-2","flex","items-center","justify-center","text-sm","font-bold","text-white","hidden"],["class","mt-1 px-1 py-0.5 bg-blue-600 text-white text-xs rounded-full",4,"ngIf"],[1,"max-w-xs","lg:max-w-md","xl:max-w-lg"],[1,"rounded-2xl","px-4","py-3","shadow-sm","transition-all"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-sm","font-medium"],[1,"text-xs","opacity-75"],[1,"message-content"],[1,"text-sm","leading-relaxed","whitespace-pre-wrap"],["class","text-xs mt-2 italic opacity-75 flex items-center gap-1",4,"ngIf"],[1,"mt-1","px-1","py-0.5","bg-blue-600","text-white","text-xs","rounded-full"],[1,"text-xs","mt-2","italic","opacity-75","flex","items-center","gap-1"],[1,"p-4","bg-white","border-t","border-gray-200","shadow-lg"],[1,"flex","items-center","gap-3","mb-3","text-sm","text-gray-600"],[1,"flex","items-center","gap-2"],[1,"w-6","h-6","rounded-full","bg-blue-500","flex","items-center","justify-center"],[1,"text-xs","font-bold","text-white"],["class","px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",4,"ngIf"],[1,"flex","gap-3","items-end"],[1,"flex-1"],["placeholder","Escribe tu mensaje aqu\xED... (Ctrl + Enter para enviar)","rows","3","maxlength","1000",1,"w-full","p-4","border","border-gray-300","rounded-2xl","resize-none","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","pr-16",3,"ngModelChange","keydown.enter","ngModel"],[1,"absolute","bottom-2","right-2","text-xs","text-gray-400"],[1,"text-xs","text-gray-500","mt-2","flex","items-center","gap-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["class","text-green-600",4,"ngIf"],[1,"bg-blue-600","hover:bg-blue-500","disabled:bg-gray-400","disabled:cursor-not-allowed","text-white","px-6","py-3","rounded-xl","transition-all","duration-200","flex","items-center","gap-2","font-medium","shadow-md","hover:shadow-lg",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 19l9 2-9-18-9 18 9-2zm0 0v-8"],[1,"hidden","sm:inline"],[1,"px-2","py-0.5","bg-blue-100","text-blue-700","text-xs","rounded-full","font-medium"],[1,"text-green-600"],[1,"p-6","bg-gray-50","border-t","border-gray-200","text-center"],[1,"inline-flex","items-center","justify-center","w-12","h-12","bg-red-100","rounded-full","mb-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-red-600"],[1,"text-lg","font-semibold","text-gray-800","mb-1"],[1,"text-gray-600"],[1,"flex-1","flex","items-center","justify-center","bg-gradient-to-br","from-gray-50","to-gray-100"],[1,"text-center","max-w-md","mx-auto","p-8"],[1,"inline-flex","items-center","justify-center","w-20","h-20","bg-blue-100","rounded-full","mb-6"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-10","h-10","text-blue-600"],[1,"text-2xl","font-bold","text-gray-800","mb-3"],[1,"text-gray-600","mb-6"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4","text-left"],[1,"font-semibold","text-blue-800","mb-2"],[1,"text-sm","text-blue-700","space-y-1"]],template:function(e,i){e&1&&(a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div")(5,"h2",5),c(6,"\u{1F4AC} Discusiones"),r(),a(7,"p",6),c(8),r()(),a(9,"div",7)(10,"div",8)(11,"span",9),c(12),r()()()(),f(13,ye,4,0,"button",10),r(),f(14,Ee,36,5,"div",11),a(15,"div",12),f(16,Te,8,2,"div",13)(17,Pe,25,26,"div",14),r()(),a(18,"div",15),f(19,Oe,24,16,"div",16)(20,Fe,4,3,"div",17)(21,$e,28,13,"div",18)(22,Re,8,0,"div",19)(23,He,20,1,"div",20),r()()),e&2&&(s(8),ee(" ",i.temasDiscusion.length," tema",i.temasDiscusion.length!==1?"s":""," ",i.hayMensajesNoLeidos()?"\u2022 "+i.totalMensajesNoLeidos()+" nuevos":""," "),s(4),_(i.obtenerIniciales((i.usuarioActual==null?null:i.usuarioActual.nombre)||"U")),s(),d("ngIf",i.isAdmin),s(),d("ngIf",i.mostrarFormularioTema&&i.isAdmin),s(2),d("ngIf",i.temasDiscusion.length===0),s(),d("ngForOf",i.temasDiscusion)("ngForTrackBy",i.trackByTema),s(2),d("ngIf",i.temaSeleccionado),s(),d("ngIf",i.temaSeleccionado),s(),d("ngIf",i.temaSeleccionado&&i.temaSeleccionado.estado==="activo"),s(),d("ngIf",i.temaSeleccionado&&i.temaSeleccionado.estado==="cerrado"),s(),d("ngIf",!i.temaSeleccionado))},dependencies:[te,ie,ae,ue,pe,ge,ne,me,se,ce,he,fe,de,le,re],styles:['.transition-all[_ngcontent-%COMP%]{transition:all .3s ease}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:3px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.hover\\:bg-gray-50[_ngcontent-%COMP%]:hover{background-color:#f9fafb;transition:background-color .2s ease}.hover\\:bg-blue-400[_ngcontent-%COMP%]:hover{background-color:#60a5fa;transition:background-color .2s ease}.hover\\:bg-blue-500[_ngcontent-%COMP%]:hover{background-color:#3b82f6;transition:background-color .2s ease}.hover\\:bg-green-400[_ngcontent-%COMP%]:hover{background-color:#4ade80;transition:background-color .2s ease}.hover\\:bg-green-500[_ngcontent-%COMP%]:hover{background-color:#22c55e;transition:background-color .2s ease}.hover\\:bg-red-400[_ngcontent-%COMP%]:hover{background-color:#f87171;transition:background-color .2s ease}.hover\\:bg-gray-400[_ngcontent-%COMP%]:hover{background-color:#9ca3af;transition:background-color .2s ease}.mensaje-entrada[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInFromBottom .3s ease-out}@keyframes _ngcontent-%COMP%_slideInFromBottom{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.estado-activo[_ngcontent-%COMP%]{position:relative}.estado-activo[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:-8px;transform:translateY(-50%);width:4px;height:20px;background-color:#22c55e;border-radius:2px}.estado-cerrado[_ngcontent-%COMP%]{opacity:.7}.estado-cerrado[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:-8px;transform:translateY(-50%);width:4px;height:20px;background-color:#ef4444;border-radius:2px}.contador-no-leidos[_ngcontent-%COMP%]{min-width:20px;height:20px;border-radius:10px;background-color:#ef4444;color:#fff;font-size:12px;font-weight:600;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.formulario-nuevo-tema[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eff6ff,#dbeafe);border-left:4px solid #3b82f6}.area-mensajes[_ngcontent-%COMP%]{background-image:radial-gradient(circle at 1px 1px,rgba(0,0,0,.02) 1px,transparent 0);background-size:20px 20px}.burbuja-admin[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);box-shadow:0 4px 12px #3b82f64d}.burbuja-usuario[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;box-shadow:0 2px 8px #0000001a}.avatar[_ngcontent-%COMP%]{transition:transform .2s ease}.avatar[_ngcontent-%COMP%]:hover{transform:scale(1.1)}@media (max-width: 768px){.w-1\\/3[_ngcontent-%COMP%]{width:100%;position:absolute;z-index:10;height:50vh}.flex-1[_ngcontent-%COMP%]{padding-top:50vh}}.indicador-escribiendo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:8px 16px;background-color:#f3f4f6;border-radius:16px;margin:8px 0}.indicador-escribiendo[_ngcontent-%COMP%]   .punto[_ngcontent-%COMP%]{width:6px;height:6px;background-color:#6b7280;border-radius:50%;animation:_ngcontent-%COMP%_escribiendo 1.4s infinite}.indicador-escribiendo[_ngcontent-%COMP%]   .punto[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.indicador-escribiendo[_ngcontent-%COMP%]   .punto[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_escribiendo{0%,60%,to{transform:translateY(0)}30%{transform:translateY(-10px)}}.line-clamp-2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.btn-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);transition:all .3s ease}.btn-gradient[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1d4ed8,#1e40af);transform:translateY(-1px);box-shadow:0 8px 25px #3b82f666}.input-focus[_ngcontent-%COMP%]:focus{outline:none;ring:2px;ring-color:#3b82f6;border-color:transparent;box-shadow:0 0 0 3px #3b82f61a}.tag-terapia[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dcfce7,#bbf7d0);color:#166534}.tag-rutina[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fae8ff,#f3e8ff);color:#7c2d12}']})};var We=[{path:"",component:N}],F=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=V({type:n});static \u0275inj=B({imports:[L.forChild(We),L]})};var xe=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=V({type:n});static \u0275inj=B({imports:[oe,F]})};export{xe as ChatDiscussionModule};
